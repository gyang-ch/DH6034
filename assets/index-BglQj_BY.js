(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();function Q_(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var sg={exports:{}},Ku={};var Sw;function jC(){if(Sw)return Ku;Sw=1;var l=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,n,o){var s=null;if(o!==void 0&&(s=""+o),n.key!==void 0&&(s=""+n.key),"key"in n){o={};for(var c in n)c!=="key"&&(o[c]=n[c])}else o=n;return n=o.ref,{$$typeof:l,type:i,key:s,ref:n!==void 0?n:null,props:o}}return Ku.Fragment=e,Ku.jsx=t,Ku.jsxs=t,Ku}var bw;function qC(){return bw||(bw=1,sg.exports=jC()),sg.exports}var pe=qC(),ag={exports:{}},vt={};var Tw;function XC(){if(Tw)return vt;Tw=1;var l=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),g=Symbol.iterator;function _(V){return V===null||typeof V!="object"?null:(V=g&&V[g]||V["@@iterator"],typeof V=="function"?V:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(V,q,ie){this.props=V,this.context=q,this.refs=x,this.updater=ie||w}b.prototype.isReactComponent={},b.prototype.setState=function(V,q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,q,"setState")},b.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function E(){}E.prototype=b.prototype;function M(V,q,ie){this.props=V,this.context=q,this.refs=x,this.updater=ie||w}var D=M.prototype=new E;D.constructor=M,v(D,b.prototype),D.isPureReactComponent=!0;var P=Array.isArray;function z(){}var O={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function N(V,q,ie){var me=ie.ref;return{$$typeof:l,type:V,key:q,ref:me!==void 0?me:null,props:ie}}function j(V,q){return N(V.type,q,V.props)}function se(V){return typeof V=="object"&&V!==null&&V.$$typeof===l}function K(V){var q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ie){return q[ie]})}var X=/\/+/g;function Z(V,q){return typeof V=="object"&&V!==null&&V.key!=null?K(""+V.key):q.toString(36)}function he(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(z,z):(V.status="pending",V.then(function(q){V.status==="pending"&&(V.status="fulfilled",V.value=q)},function(q){V.status==="pending"&&(V.status="rejected",V.reason=q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,q,ie,me,ue){var ae=typeof V;(ae==="undefined"||ae==="boolean")&&(V=null);var Be=!1;if(V===null)Be=!0;else switch(ae){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(V.$$typeof){case l:case e:Be=!0;break;case d:return Be=V._init,Y(Be(V._payload),q,ie,me,ue)}}if(Be)return ue=ue(V),Be=me===""?"."+Z(V,0):me,P(ue)?(ie="",Be!=null&&(ie=Be.replace(X,"$&/")+"/"),Y(ue,q,ie,"",function(Ve){return Ve})):ue!=null&&(se(ue)&&(ue=j(ue,ie+(ue.key==null||V&&V.key===ue.key?"":(""+ue.key).replace(X,"$&/")+"/")+Be)),q.push(ue)),1;Be=0;var He=me===""?".":me+":";if(P(V))for(var Fe=0;Fe<V.length;Fe++)me=V[Fe],ae=He+Z(me,Fe),Be+=Y(me,q,ie,ae,ue);else if(Fe=_(V),typeof Fe=="function")for(V=Fe.call(V),Fe=0;!(me=V.next()).done;)me=me.value,ae=He+Z(me,Fe++),Be+=Y(me,q,ie,ae,ue);else if(ae==="object"){if(typeof V.then=="function")return Y(he(V),q,ie,me,ue);throw q=String(V),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Be}function Q(V,q,ie){if(V==null)return V;var me=[],ue=0;return Y(V,me,"","",function(ae){return q.call(ie,ae,ue++)}),me}function ee(V){if(V._status===-1){var q=V._result;q=q(),q.then(function(ie){(V._status===0||V._status===-1)&&(V._status=1,V._result=ie)},function(ie){(V._status===0||V._status===-1)&&(V._status=2,V._result=ie)}),V._status===-1&&(V._status=0,V._result=q)}if(V._status===1)return V._result.default;throw V._result}var _e=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},G={map:Q,forEach:function(V,q,ie){Q(V,function(){q.apply(this,arguments)},ie)},count:function(V){var q=0;return Q(V,function(){q++}),q},toArray:function(V){return Q(V,function(q){return q})||[]},only:function(V){if(!se(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return vt.Activity=m,vt.Children=G,vt.Component=b,vt.Fragment=t,vt.Profiler=n,vt.PureComponent=M,vt.StrictMode=i,vt.Suspense=u,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,vt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return O.H.useMemoCache(V)}},vt.cache=function(V){return function(){return V.apply(null,arguments)}},vt.cacheSignal=function(){return null},vt.cloneElement=function(V,q,ie){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var me=v({},V.props),ue=V.key;if(q!=null)for(ae in q.key!==void 0&&(ue=""+q.key),q)!L.call(q,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&q.ref===void 0||(me[ae]=q[ae]);var ae=arguments.length-2;if(ae===1)me.children=ie;else if(1<ae){for(var Be=Array(ae),He=0;He<ae;He++)Be[He]=arguments[He+2];me.children=Be}return N(V.type,ue,me)},vt.createContext=function(V){return V={$$typeof:s,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},vt.createElement=function(V,q,ie){var me,ue={},ae=null;if(q!=null)for(me in q.key!==void 0&&(ae=""+q.key),q)L.call(q,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ue[me]=q[me]);var Be=arguments.length-2;if(Be===1)ue.children=ie;else if(1<Be){for(var He=Array(Be),Fe=0;Fe<Be;Fe++)He[Fe]=arguments[Fe+2];ue.children=He}if(V&&V.defaultProps)for(me in Be=V.defaultProps,Be)ue[me]===void 0&&(ue[me]=Be[me]);return N(V,ae,ue)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(V){return{$$typeof:c,render:V}},vt.isValidElement=se,vt.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:ee}},vt.memo=function(V,q){return{$$typeof:h,type:V,compare:q===void 0?null:q}},vt.startTransition=function(V){var q=O.T,ie={};O.T=ie;try{var me=V(),ue=O.S;ue!==null&&ue(ie,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(z,_e)}catch(ae){_e(ae)}finally{q!==null&&ie.types!==null&&(q.types=ie.types),O.T=q}},vt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},vt.use=function(V){return O.H.use(V)},vt.useActionState=function(V,q,ie){return O.H.useActionState(V,q,ie)},vt.useCallback=function(V,q){return O.H.useCallback(V,q)},vt.useContext=function(V){return O.H.useContext(V)},vt.useDebugValue=function(){},vt.useDeferredValue=function(V,q){return O.H.useDeferredValue(V,q)},vt.useEffect=function(V,q){return O.H.useEffect(V,q)},vt.useEffectEvent=function(V){return O.H.useEffectEvent(V)},vt.useId=function(){return O.H.useId()},vt.useImperativeHandle=function(V,q,ie){return O.H.useImperativeHandle(V,q,ie)},vt.useInsertionEffect=function(V,q){return O.H.useInsertionEffect(V,q)},vt.useLayoutEffect=function(V,q){return O.H.useLayoutEffect(V,q)},vt.useMemo=function(V,q){return O.H.useMemo(V,q)},vt.useOptimistic=function(V,q){return O.H.useOptimistic(V,q)},vt.useReducer=function(V,q,ie){return O.H.useReducer(V,q,ie)},vt.useRef=function(V){return O.H.useRef(V)},vt.useState=function(V){return O.H.useState(V)},vt.useSyncExternalStore=function(V,q,ie){return O.H.useSyncExternalStore(V,q,ie)},vt.useTransition=function(){return O.H.useTransition()},vt.version="19.2.4",vt}var Ew;function J_(){return Ew||(Ew=1,ag.exports=XC()),ag.exports}var kt=J_();const YC=Q_(kt);var og={exports:{}},Qu={},lg={exports:{}},ug={};var Mw;function ZC(){return Mw||(Mw=1,(function(l){function e(Y,Q){var ee=Y.length;Y.push(Q);e:for(;0<ee;){var _e=ee-1>>>1,G=Y[_e];if(0<n(G,Q))Y[_e]=Q,Y[ee]=G,ee=_e;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var Q=Y[0],ee=Y.pop();if(ee!==Q){Y[0]=ee;e:for(var _e=0,G=Y.length,V=G>>>1;_e<V;){var q=2*(_e+1)-1,ie=Y[q],me=q+1,ue=Y[me];if(0>n(ie,ee))me<G&&0>n(ue,ie)?(Y[_e]=ue,Y[me]=ee,_e=me):(Y[_e]=ie,Y[q]=ee,_e=q);else if(me<G&&0>n(ue,ee))Y[_e]=ue,Y[me]=ee,_e=me;else break e}}return Q}function n(Y,Q){var ee=Y.sortIndex-Q.sortIndex;return ee!==0?ee:Y.id-Q.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;l.unstable_now=function(){return o.now()}}else{var s=Date,c=s.now();l.unstable_now=function(){return s.now()-c}}var u=[],h=[],d=1,m=null,g=3,_=!1,w=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function D(Y){for(var Q=t(h);Q!==null;){if(Q.callback===null)i(h);else if(Q.startTime<=Y)i(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=t(h)}}function P(Y){if(v=!1,D(Y),!w)if(t(u)!==null)w=!0,z||(z=!0,K());else{var Q=t(h);Q!==null&&he(P,Q.startTime-Y)}}var z=!1,O=-1,L=5,N=-1;function j(){return x?!0:!(l.unstable_now()-N<L)}function se(){if(x=!1,z){var Y=l.unstable_now();N=Y;var Q=!0;try{e:{w=!1,v&&(v=!1,E(O),O=-1),_=!0;var ee=g;try{t:{for(D(Y),m=t(u);m!==null&&!(m.expirationTime>Y&&j());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,g=m.priorityLevel;var G=_e(m.expirationTime<=Y);if(Y=l.unstable_now(),typeof G=="function"){m.callback=G,D(Y),Q=!0;break t}m===t(u)&&i(u),D(Y)}else i(u);m=t(u)}if(m!==null)Q=!0;else{var V=t(h);V!==null&&he(P,V.startTime-Y),Q=!1}}break e}finally{m=null,g=ee,_=!1}Q=void 0}}finally{Q?K():z=!1}}}var K;if(typeof M=="function")K=function(){M(se)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,Z=X.port2;X.port1.onmessage=se,K=function(){Z.postMessage(null)}}else K=function(){b(se,0)};function he(Y,Q){O=b(function(){Y(l.unstable_now())},Q)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(Y){Y.callback=null},l.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},l.unstable_getCurrentPriorityLevel=function(){return g},l.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var ee=g;g=Q;try{return Y()}finally{g=ee}},l.unstable_requestPaint=function(){x=!0},l.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ee=g;g=Y;try{return Q()}finally{g=ee}},l.unstable_scheduleCallback=function(Y,Q,ee){var _e=l.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?_e+ee:_e):ee=_e,Y){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ee+G,Y={id:d++,callback:Q,priorityLevel:Y,startTime:ee,expirationTime:G,sortIndex:-1},ee>_e?(Y.sortIndex=ee,e(h,Y),t(u)===null&&Y===t(h)&&(v?(E(O),O=-1):v=!0,he(P,ee-_e))):(Y.sortIndex=G,e(u,Y),w||_||(w=!0,z||(z=!0,K()))),Y},l.unstable_shouldYield=j,l.unstable_wrapCallback=function(Y){var Q=g;return function(){var ee=g;g=Q;try{return Y.apply(this,arguments)}finally{g=ee}}}})(ug)),ug}var Cw;function KC(){return Cw||(Cw=1,lg.exports=ZC()),lg.exports}var cg={exports:{}},$i={};var Rw;function QC(){if(Rw)return $i;Rw=1;var l=J_();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},n=Symbol.for("react.portal");function o(u,h,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:m==null?null:""+m,children:u,containerInfo:h,implementation:d}}var s=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return $i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$i.createPortal=function(u,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(u,h,null,d)},$i.flushSync=function(u){var h=s.T,d=i.p;try{if(s.T=null,i.p=2,u)return u()}finally{s.T=h,i.p=d,i.d.f()}},$i.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},$i.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},$i.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var d=h.as,m=c(d,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:_}):d==="script"&&i.d.X(u,{crossOrigin:m,integrity:g,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},$i.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=c(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},$i.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,m=c(d,h.crossOrigin);i.d.L(u,d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},$i.preloadModule=function(u,h){if(typeof u=="string")if(h){var d=c(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},$i.requestFormReset=function(u){i.d.r(u)},$i.unstable_batchedUpdates=function(u,h){return u(h)},$i.useFormState=function(u,h,d){return s.H.useFormState(u,h,d)},$i.useFormStatus=function(){return s.H.useHostTransitionStatus()},$i.version="19.2.4",$i}var Aw;function JC(){if(Aw)return cg.exports;Aw=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),cg.exports=QC(),cg.exports}var Dw;function $C(){if(Dw)return Qu;Dw=1;var l=KC(),e=J_(),t=JC();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,f=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(f=a.return),r=a.return;while(r)}return a.tag===3?f:null}function s(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function c(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function u(r){if(o(r)!==r)throw Error(i(188))}function h(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var f=r,p=a;;){var y=f.return;if(y===null)break;var S=y.alternate;if(S===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===S.child){for(S=y.child;S;){if(S===f)return u(y),r;if(S===p)return u(y),a;S=S.sibling}throw Error(i(188))}if(f.return!==p.return)f=y,p=S;else{for(var R=!1,U=y.child;U;){if(U===f){R=!0,f=y,p=S;break}if(U===p){R=!0,p=y,f=S;break}U=U.sibling}if(!R){for(U=S.child;U;){if(U===f){R=!0,f=S,p=y;break}if(U===p){R=!0,p=S,f=y;break}U=U.sibling}if(!R)throw Error(i(189))}}if(f.alternate!==p)throw Error(i(190))}if(f.tag!==3)throw Error(i(188));return f.stateNode.current===f?r:a}function d(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=d(r),a!==null)return a;r=r.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),M=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function K(r){return r===null||typeof r!="object"?null:(r=se&&r[se]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function Z(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case v:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case P:return"Suspense";case z:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case M:return r.displayName||"Context";case E:return(r._context.displayName||"Context")+".Consumer";case D:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return a=r.displayName||null,a!==null?a:Z(r.type)||"Memo";case L:a=r._payload,r=r._init;try{return Z(r(a))}catch{}}return null}var he=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},_e=[],G=-1;function V(r){return{current:r}}function q(r){0>G||(r.current=_e[G],_e[G]=null,G--)}function ie(r,a){G++,_e[G]=r.current,r.current=a}var me=V(null),ue=V(null),ae=V(null),Be=V(null);function He(r,a){switch(ie(ae,a),ie(ue,r),ie(me,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?jx(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=jx(a),r=qx(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}q(me),ie(me,r)}function Fe(){q(me),q(ue),q(ae)}function Ve(r){r.memoizedState!==null&&ie(Be,r);var a=me.current,f=qx(a,r.type);a!==f&&(ie(ue,r),ie(me,f))}function at(r){ue.current===r&&(q(me),q(ue)),Be.current===r&&(q(Be),qu._currentValue=ee)}var et,Ge;function ht(r){if(et===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);et=a&&a[1]||"",Ge=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+et+r+Ge}var Ct=!1;function T(r,a){if(!r||Ct)return"";Ct=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(a){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(Ee){var Se=Ee}Reflect.construct(r,[],Pe)}else{try{Pe.call()}catch(Ee){Se=Ee}r.call(Pe.prototype)}}else{try{throw Error()}catch(Ee){Se=Ee}(Pe=r())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(Ee){if(Ee&&Se&&typeof Ee.stack=="string")return[Ee.stack,Se.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=p.DetermineComponentFrameRoot(),R=S[0],U=S[1];if(R&&U){var $=R.split(`
`),ye=U.split(`
`);for(y=p=0;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;for(;y<ye.length&&!ye[y].includes("DetermineComponentFrameRoot");)y++;if(p===$.length||y===ye.length)for(p=$.length-1,y=ye.length-1;1<=p&&0<=y&&$[p]!==ye[y];)y--;for(;1<=p&&0<=y;p--,y--)if($[p]!==ye[y]){if(p!==1||y!==1)do if(p--,y--,0>y||$[p]!==ye[y]){var Re=`
`+$[p].replace(" at new "," at ");return r.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",r.displayName)),Re}while(1<=p&&0<=y);break}}}finally{Ct=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?ht(f):""}function F(r,a){switch(r.tag){case 26:case 27:case 5:return ht(r.type);case 16:return ht("Lazy");case 13:return r.child!==a&&a!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return T(r.type,!1);case 11:return T(r.type.render,!1);case 1:return T(r.type,!0);case 31:return ht("Activity");default:return""}}function te(r){try{var a="",f=null;do a+=F(r,f),f=r,r=r.return;while(r);return a}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var oe=Object.prototype.hasOwnProperty,Ne=l.unstable_scheduleCallback,De=l.unstable_cancelCallback,H=l.unstable_shouldYield,B=l.unstable_requestPaint,ge=l.unstable_now,we=l.unstable_getCurrentPriorityLevel,Ce=l.unstable_ImmediatePriority,Le=l.unstable_UserBlockingPriority,Ue=l.unstable_NormalPriority,Ie=l.unstable_LowPriority,C=l.unstable_IdlePriority,A=l.log,I=l.unstable_setDisableYieldValue,k=null,ne=null;function Te(r){if(typeof A=="function"&&I(r),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(k,r)}catch{}}var ze=Math.clz32?Math.clz32:J,tt=Math.log,xt=Math.LN2;function J(r){return r>>>=0,r===0?32:31-(tt(r)/xt|0)|0}var fe=256,Oe=262144,We=4194304;function je(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ut(r,a,f){var p=r.pendingLanes;if(p===0)return 0;var y=0,S=r.suspendedLanes,R=r.pingedLanes;r=r.warmLanes;var U=p&134217727;return U!==0?(p=U&~S,p!==0?y=je(p):(R&=U,R!==0?y=je(R):f||(f=U&~r,f!==0&&(y=je(f))))):(U=p&~S,U!==0?y=je(U):R!==0?y=je(R):f||(f=p&~r,f!==0&&(y=je(f)))),y===0?0:a!==0&&a!==y&&(a&S)===0&&(S=y&-y,f=a&-a,S>=f||S===32&&(f&4194048)!==0)?a:y}function Ut(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function jt(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ji(){var r=We;return We<<=1,(We&62914560)===0&&(We=4194304),r}function Ke(r){for(var a=[],f=0;31>f;f++)a.push(r);return a}function Qe(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function gt(r,a,f,p,y,S){var R=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var U=r.entanglements,$=r.expirationTimes,ye=r.hiddenUpdates;for(f=R&~f;0<f;){var Re=31-ze(f),Pe=1<<Re;U[Re]=0,$[Re]=-1;var Se=ye[Re];if(Se!==null)for(ye[Re]=null,Re=0;Re<Se.length;Re++){var Ee=Se[Re];Ee!==null&&(Ee.lane&=-536870913)}f&=~Pe}p!==0&&qe(r,p,0),S!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=S&~(R&~a))}function qe(r,a,f){r.pendingLanes|=a,r.suspendedLanes&=~a;var p=31-ze(a);r.entangledLanes|=a,r.entanglements[p]=r.entanglements[p]|1073741824|f&261930}function dt(r,a){var f=r.entangledLanes|=a;for(r=r.entanglements;f;){var p=31-ze(f),y=1<<p;y&a|r[p]&a&&(r[p]|=a),f&=~y}}function st(r,a){var f=a&-a;return f=(f&42)!==0?1:ft(f),(f&(r.suspendedLanes|a))!==0?0:f}function ft(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function W(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function le(){var r=Q.p;return r!==0?r:(r=window.event,r===void 0?32:mw(r.type))}function be(r,a){var f=Q.p;try{return Q.p=r,a()}finally{Q.p=f}}var ce=Math.random().toString(36).slice(2),xe="__reactFiber$"+ce,ke="__reactProps$"+ce,Xe="__reactContainer$"+ce,lt="__reactEvents$"+ce,it="__reactListeners$"+ce,pt="__reactHandles$"+ce,mt="__reactResources$"+ce,rt="__reactMarker$"+ce;function wt(r){delete r[xe],delete r[ke],delete r[lt],delete r[it],delete r[pt]}function Dt(r){var a=r[xe];if(a)return a;for(var f=r.parentNode;f;){if(a=f[Xe]||f[xe]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(r=$x(r);r!==null;){if(f=r[xe])return f;r=$x(r)}return a}r=f,f=r.parentNode}return null}function ri(r){if(r=r[xe]||r[Xe]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function zi(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function _t(r){var a=r[mt];return a||(a=r[mt]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ze(r){r[rt]=!0}var Wi=new Set,ei={};function Ni(r,a){ln(r,a),ln(r+"Capture",a)}function ln(r,a){for(ei[r]=a,r=0;r<a.length;r++)Wi.add(a[r])}var Bi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ur={},oi={};function Fi(r){return oe.call(oi,r)?!0:oe.call(ur,r)?!1:Bi.test(r)?oi[r]=!0:(ur[r]=!0,!1)}function Bs(r,a,f){if(Fi(a))if(f===null)r.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var p=a.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+f)}}function Ii(r,a,f){if(f===null)r.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+f)}}function Bn(r,a,f,p){if(p===null)r.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(a,f,""+p)}}function wn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lu(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function IE(r,a,f){var p=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,S=p.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return y.call(this)},set:function(R){f=""+R,S.call(this,R)}}),Object.defineProperty(r,a,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(R){f=""+R},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Jd(r){if(!r._valueTracker){var a=lu(r)?"checked":"value";r._valueTracker=IE(r,a,""+r[a])}}function I0(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var f=a.getValue(),p="";return r&&(p=lu(r)?r.checked?"true":"false":r.value),r=p,r!==f?(a.setValue(r),!0):!1}function sh(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var UE=/[\n"\\]/g;function cr(r){return r.replace(UE,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function $d(r,a,f,p,y,S,R,U){r.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.type=R:r.removeAttribute("type"),a!=null?R==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+wn(a)):r.value!==""+wn(a)&&(r.value=""+wn(a)):R!=="submit"&&R!=="reset"||r.removeAttribute("value"),a!=null?ep(r,R,wn(a)):f!=null?ep(r,R,wn(f)):p!=null&&r.removeAttribute("value"),y==null&&S!=null&&(r.defaultChecked=!!S),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+wn(U):r.removeAttribute("name")}function U0(r,a,f,p,y,S,R,U){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.type=S),a!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||a!=null)){Jd(r);return}f=f!=null?""+wn(f):"",a=a!=null?""+wn(a):f,U||a===r.value||(r.value=a),r.defaultValue=a}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,r.checked=U?r.checked:!!p,r.defaultChecked=!!p,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(r.name=R),Jd(r)}function ep(r,a,f){a==="number"&&sh(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function Lo(r,a,f,p){if(r=r.options,a){a={};for(var y=0;y<f.length;y++)a["$"+f[y]]=!0;for(f=0;f<r.length;f++)y=a.hasOwnProperty("$"+r[f].value),r[f].selected!==y&&(r[f].selected=y),y&&p&&(r[f].defaultSelected=!0)}else{for(f=""+wn(f),a=null,y=0;y<r.length;y++){if(r[y].value===f){r[y].selected=!0,p&&(r[y].defaultSelected=!0);return}a!==null||r[y].disabled||(a=r[y])}a!==null&&(a.selected=!0)}}function H0(r,a,f){if(a!=null&&(a=""+wn(a),a!==r.value&&(r.value=a),f==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=f!=null?""+wn(f):""}function k0(r,a,f,p){if(a==null){if(p!=null){if(f!=null)throw Error(i(92));if(he(p)){if(1<p.length)throw Error(i(93));p=p[0]}f=p}f==null&&(f=""),a=f}f=wn(a),r.defaultValue=f,p=r.textContent,p===f&&p!==""&&p!==null&&(r.value=p),Jd(r)}function Oo(r,a){if(a){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=a;return}}r.textContent=a}var HE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function G0(r,a,f){var p=a.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":p?r.setProperty(a,f):typeof f!="number"||f===0||HE.has(a)?a==="float"?r.cssFloat=f:r[a]=(""+f).trim():r[a]=f+"px"}function V0(r,a,f){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||a!=null&&a.hasOwnProperty(p)||(p.indexOf("--")===0?r.setProperty(p,""):p==="float"?r.cssFloat="":r[p]="");for(var y in a)p=a[y],a.hasOwnProperty(y)&&f[y]!==p&&G0(r,y,p)}else for(var S in a)a.hasOwnProperty(S)&&G0(r,S,a[S])}function tp(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ah(r){return GE.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function is(){}var ip=null;function np(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var zo=null,No=null;function W0(r){var a=ri(r);if(a&&(r=a.stateNode)){var f=r[ke]||null;e:switch(r=a.stateNode,a.type){case"input":if($d(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),a=f.name,f.type==="radio"&&a!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+cr(""+a)+'"][type="radio"]'),a=0;a<f.length;a++){var p=f[a];if(p!==r&&p.form===r.form){var y=p[ke]||null;if(!y)throw Error(i(90));$d(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<f.length;a++)p=f[a],p.form===r.form&&I0(p)}break e;case"textarea":H0(r,f.value,f.defaultValue);break e;case"select":a=f.value,a!=null&&Lo(r,!!f.multiple,a,!1)}}}var rp=!1;function j0(r,a,f){if(rp)return r(a,f);rp=!0;try{var p=r(a);return p}finally{if(rp=!1,(zo!==null||No!==null)&&(Xh(),zo&&(a=zo,r=No,No=zo=null,W0(a),r)))for(a=0;a<r.length;a++)W0(r[a])}}function uu(r,a){var f=r.stateNode;if(f===null)return null;var p=f[ke]||null;if(p===null)return null;f=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(i(231,a,typeof f));return f}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sp=!1;if(ns)try{var cu={};Object.defineProperty(cu,"passive",{get:function(){sp=!0}}),window.addEventListener("test",cu,cu),window.removeEventListener("test",cu,cu)}catch{sp=!1}var Fs=null,ap=null,oh=null;function q0(){if(oh)return oh;var r,a=ap,f=a.length,p,y="value"in Fs?Fs.value:Fs.textContent,S=y.length;for(r=0;r<f&&a[r]===y[r];r++);var R=f-r;for(p=1;p<=R&&a[f-p]===y[S-p];p++);return oh=y.slice(r,1<p?1-p:void 0)}function lh(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function uh(){return!0}function X0(){return!1}function Sn(r){function a(f,p,y,S,R){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=S,this.target=R,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(f=r[U],this[U]=f?f(S):S[U]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?uh:X0,this.isPropagationStopped=X0,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=uh)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=uh)},persist:function(){},isPersistent:uh}),a}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ch=Sn(Da),hu=m({},Da,{view:0,detail:0}),VE=Sn(hu),op,lp,fu,hh=m({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cp,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fu&&(fu&&r.type==="mousemove"?(op=r.screenX-fu.screenX,lp=r.screenY-fu.screenY):lp=op=0,fu=r),op)},movementY:function(r){return"movementY"in r?r.movementY:lp}}),Y0=Sn(hh),WE=m({},hh,{dataTransfer:0}),jE=Sn(WE),qE=m({},hu,{relatedTarget:0}),up=Sn(qE),XE=m({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),YE=Sn(XE),ZE=m({},Da,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),KE=Sn(ZE),QE=m({},Da,{data:0}),Z0=Sn(QE),JE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$E={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tM(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=eM[r])?!!a[r]:!1}function cp(){return tM}var iM=m({},hu,{key:function(r){if(r.key){var a=JE[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=lh(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?$E[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cp,charCode:function(r){return r.type==="keypress"?lh(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?lh(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),nM=Sn(iM),rM=m({},hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=Sn(rM),sM=m({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cp}),aM=Sn(sM),oM=m({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),lM=Sn(oM),uM=m({},hh,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),cM=Sn(uM),hM=m({},Da,{newState:0,oldState:0}),fM=Sn(hM),dM=[9,13,27,32],hp=ns&&"CompositionEvent"in window,du=null;ns&&"documentMode"in document&&(du=document.documentMode);var pM=ns&&"TextEvent"in window&&!du,Q0=ns&&(!hp||du&&8<du&&11>=du),J0=" ",$0=!1;function ev(r,a){switch(r){case"keyup":return dM.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tv(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bo=!1;function mM(r,a){switch(r){case"compositionend":return tv(a);case"keypress":return a.which!==32?null:($0=!0,J0);case"textInput":return r=a.data,r===J0&&$0?null:r;default:return null}}function gM(r,a){if(Bo)return r==="compositionend"||!hp&&ev(r,a)?(r=q0(),oh=ap=Fs=null,Bo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Q0&&a.locale!=="ko"?null:a.data;default:return null}}var _M={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iv(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!_M[r.type]:a==="textarea"}function nv(r,a,f,p){zo?No?No.push(p):No=[p]:zo=p,a=ef(a,"onChange"),0<a.length&&(f=new ch("onChange","change",null,f,p),r.push({event:f,listeners:a}))}var pu=null,mu=null;function vM(r){Ux(r,0)}function fh(r){var a=zi(r);if(I0(a))return r}function rv(r,a){if(r==="change")return a}var sv=!1;if(ns){var fp;if(ns){var dp="oninput"in document;if(!dp){var av=document.createElement("div");av.setAttribute("oninput","return;"),dp=typeof av.oninput=="function"}fp=dp}else fp=!1;sv=fp&&(!document.documentMode||9<document.documentMode)}function ov(){pu&&(pu.detachEvent("onpropertychange",lv),mu=pu=null)}function lv(r){if(r.propertyName==="value"&&fh(mu)){var a=[];nv(a,mu,r,np(r)),j0(vM,a)}}function yM(r,a,f){r==="focusin"?(ov(),pu=a,mu=f,pu.attachEvent("onpropertychange",lv)):r==="focusout"&&ov()}function xM(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fh(mu)}function wM(r,a){if(r==="click")return fh(a)}function SM(r,a){if(r==="input"||r==="change")return fh(a)}function bM(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Fn=typeof Object.is=="function"?Object.is:bM;function gu(r,a){if(Fn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var f=Object.keys(r),p=Object.keys(a);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!oe.call(a,y)||!Fn(r[y],a[y]))return!1}return!0}function uv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cv(r,a){var f=uv(r);r=0;for(var p;f;){if(f.nodeType===3){if(p=r+f.textContent.length,r<=a&&p>=a)return{node:f,offset:a-r};r=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=uv(f)}}function hv(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?hv(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function fv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=sh(r.document);a instanceof r.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)r=a.contentWindow;else break;a=sh(r.document)}return a}function pp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var TM=ns&&"documentMode"in document&&11>=document.documentMode,Fo=null,mp=null,_u=null,gp=!1;function dv(r,a,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;gp||Fo==null||Fo!==sh(p)||(p=Fo,"selectionStart"in p&&pp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),_u&&gu(_u,p)||(_u=p,p=ef(mp,"onSelect"),0<p.length&&(a=new ch("onSelect","select",null,a,f),r.push({event:a,listeners:p}),a.target=Fo)))}function Pa(r,a){var f={};return f[r.toLowerCase()]=a.toLowerCase(),f["Webkit"+r]="webkit"+a,f["Moz"+r]="moz"+a,f}var Io={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},_p={},pv={};ns&&(pv=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function La(r){if(_p[r])return _p[r];if(!Io[r])return r;var a=Io[r],f;for(f in a)if(a.hasOwnProperty(f)&&f in pv)return _p[r]=a[f];return r}var mv=La("animationend"),gv=La("animationiteration"),_v=La("animationstart"),EM=La("transitionrun"),MM=La("transitionstart"),CM=La("transitioncancel"),vv=La("transitionend"),yv=new Map,vp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vp.push("scrollEnd");function Mr(r,a){yv.set(r,a),Ni(a,[r])}var dh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},hr=[],Uo=0,yp=0;function ph(){for(var r=Uo,a=yp=Uo=0;a<r;){var f=hr[a];hr[a++]=null;var p=hr[a];hr[a++]=null;var y=hr[a];hr[a++]=null;var S=hr[a];if(hr[a++]=null,p!==null&&y!==null){var R=p.pending;R===null?y.next=y:(y.next=R.next,R.next=y),p.pending=y}S!==0&&xv(f,y,S)}}function mh(r,a,f,p){hr[Uo++]=r,hr[Uo++]=a,hr[Uo++]=f,hr[Uo++]=p,yp|=p,r.lanes|=p,r=r.alternate,r!==null&&(r.lanes|=p)}function xp(r,a,f,p){return mh(r,a,f,p),gh(r)}function Oa(r,a){return mh(r,null,null,a),gh(r)}function xv(r,a,f){r.lanes|=f;var p=r.alternate;p!==null&&(p.lanes|=f);for(var y=!1,S=r.return;S!==null;)S.childLanes|=f,p=S.alternate,p!==null&&(p.childLanes|=f),S.tag===22&&(r=S.stateNode,r===null||r._visibility&1||(y=!0)),r=S,S=S.return;return r.tag===3?(S=r.stateNode,y&&a!==null&&(y=31-ze(f),r=S.hiddenUpdates,p=r[y],p===null?r[y]=[a]:p.push(a),a.lane=f|536870912),S):null}function gh(r){if(50<Uu)throw Uu=0,Am=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Ho={};function RM(r,a,f,p){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(r,a,f,p){return new RM(r,a,f,p)}function wp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rs(r,a){var f=r.alternate;return f===null?(f=In(r.tag,a,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=a,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&65011712,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,a=r.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function wv(r,a){r.flags&=65011714;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,a=f.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function _h(r,a,f,p,y,S){var R=0;if(p=r,typeof r=="function")wp(r)&&(R=1);else if(typeof r=="string")R=OC(r,f,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=In(31,f,a,y),r.elementType=N,r.lanes=S,r;case v:return za(f.children,y,S,a);case x:R=8,y|=24;break;case b:return r=In(12,f,a,y|2),r.elementType=b,r.lanes=S,r;case P:return r=In(13,f,a,y),r.elementType=P,r.lanes=S,r;case z:return r=In(19,f,a,y),r.elementType=z,r.lanes=S,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case M:R=10;break e;case E:R=9;break e;case D:R=11;break e;case O:R=14;break e;case L:R=16,p=null;break e}R=29,f=Error(i(130,r===null?"null":typeof r,"")),p=null}return a=In(R,f,a,y),a.elementType=r,a.type=p,a.lanes=S,a}function za(r,a,f,p){return r=In(7,r,p,a),r.lanes=f,r}function Sp(r,a,f){return r=In(6,r,null,a),r.lanes=f,r}function Sv(r){var a=In(18,null,null,0);return a.stateNode=r,a}function bp(r,a,f){return a=In(4,r.children!==null?r.children:[],r.key,a),a.lanes=f,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var bv=new WeakMap;function fr(r,a){if(typeof r=="object"&&r!==null){var f=bv.get(r);return f!==void 0?f:(a={value:r,source:a,stack:te(a)},bv.set(r,a),a)}return{value:r,source:a,stack:te(a)}}var ko=[],Go=0,vh=null,vu=0,dr=[],pr=0,Is=null,Ur=1,Hr="";function ss(r,a){ko[Go++]=vu,ko[Go++]=vh,vh=r,vu=a}function Tv(r,a,f){dr[pr++]=Ur,dr[pr++]=Hr,dr[pr++]=Is,Is=r;var p=Ur;r=Hr;var y=32-ze(p)-1;p&=~(1<<y),f+=1;var S=32-ze(a)+y;if(30<S){var R=y-y%5;S=(p&(1<<R)-1).toString(32),p>>=R,y-=R,Ur=1<<32-ze(a)+y|f<<y|p,Hr=S+r}else Ur=1<<S|f<<y|p,Hr=r}function Tp(r){r.return!==null&&(ss(r,1),Tv(r,1,0))}function Ep(r){for(;r===vh;)vh=ko[--Go],ko[Go]=null,vu=ko[--Go],ko[Go]=null;for(;r===Is;)Is=dr[--pr],dr[pr]=null,Hr=dr[--pr],dr[pr]=null,Ur=dr[--pr],dr[pr]=null}function Ev(r,a){dr[pr++]=Ur,dr[pr++]=Hr,dr[pr++]=Is,Ur=a.id,Hr=a.overflow,Is=r}var ji=null,ti=null,Nt=!1,Us=null,mr=!1,Mp=Error(i(519));function Hs(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yu(fr(a,r)),Mp}function Mv(r){var a=r.stateNode,f=r.type,p=r.memoizedProps;switch(a[xe]=r,a[ke]=p,f){case"dialog":Lt("cancel",a),Lt("close",a);break;case"iframe":case"object":case"embed":Lt("load",a);break;case"video":case"audio":for(f=0;f<ku.length;f++)Lt(ku[f],a);break;case"source":Lt("error",a);break;case"img":case"image":case"link":Lt("error",a),Lt("load",a);break;case"details":Lt("toggle",a);break;case"input":Lt("invalid",a),U0(a,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Lt("invalid",a);break;case"textarea":Lt("invalid",a),k0(a,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||a.textContent===""+f||p.suppressHydrationWarning===!0||Vx(a.textContent,f)?(p.popover!=null&&(Lt("beforetoggle",a),Lt("toggle",a)),p.onScroll!=null&&Lt("scroll",a),p.onScrollEnd!=null&&Lt("scrollend",a),p.onClick!=null&&(a.onclick=is),a=!0):a=!1,a||Hs(r,!0)}function Cv(r){for(ji=r.return;ji;)switch(ji.tag){case 5:case 31:case 13:mr=!1;return;case 27:case 3:mr=!0;return;default:ji=ji.return}}function Vo(r){if(r!==ji)return!1;if(!Nt)return Cv(r),Nt=!0,!1;var a=r.tag,f;if((f=a!==3&&a!==27)&&((f=a===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||Wm(r.type,r.memoizedProps)),f=!f),f&&ti&&Hs(r),Cv(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ti=Jx(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ti=Jx(r)}else a===27?(a=ti,ea(r.type)?(r=Zm,Zm=null,ti=r):ti=a):ti=ji?_r(r.stateNode.nextSibling):null;return!0}function Na(){ti=ji=null,Nt=!1}function Cp(){var r=Us;return r!==null&&(Mn===null?Mn=r:Mn.push.apply(Mn,r),Us=null),r}function yu(r){Us===null?Us=[r]:Us.push(r)}var Rp=V(null),Ba=null,as=null;function ks(r,a,f){ie(Rp,a._currentValue),a._currentValue=f}function os(r){r._currentValue=Rp.current,q(Rp)}function Ap(r,a,f){for(;r!==null;){var p=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),r===f)break;r=r.return}}function Dp(r,a,f,p){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var S=y.dependencies;if(S!==null){var R=y.child;S=S.firstContext;e:for(;S!==null;){var U=S;S=y;for(var $=0;$<a.length;$++)if(U.context===a[$]){S.lanes|=f,U=S.alternate,U!==null&&(U.lanes|=f),Ap(S.return,f,r),p||(R=null);break e}S=U.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(i(341));R.lanes|=f,S=R.alternate,S!==null&&(S.lanes|=f),Ap(R,f,r),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===r){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function Wo(r,a,f,p){r=null;for(var y=a,S=!1;y!==null;){if(!S){if((y.flags&524288)!==0)S=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var U=y.type;Fn(y.pendingProps.value,R.value)||(r!==null?r.push(U):r=[U])}}else if(y===Be.current){if(R=y.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(qu):r=[qu])}y=y.return}r!==null&&Dp(a,r,f,p),a.flags|=262144}function yh(r){for(r=r.firstContext;r!==null;){if(!Fn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Fa(r){Ba=r,as=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function qi(r){return Rv(Ba,r)}function xh(r,a){return Ba===null&&Fa(r),Rv(r,a)}function Rv(r,a){var f=a._currentValue;if(a={context:a,memoizedValue:f,next:null},as===null){if(r===null)throw Error(i(308));as=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else as=as.next=a;return f}var AM=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(f,p){r.push(p)}};this.abort=function(){a.aborted=!0,r.forEach(function(f){return f()})}},DM=l.unstable_scheduleCallback,PM=l.unstable_NormalPriority,xi={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pp(){return{controller:new AM,data:new Map,refCount:0}}function xu(r){r.refCount--,r.refCount===0&&DM(PM,function(){r.controller.abort()})}var wu=null,Lp=0,jo=0,qo=null;function LM(r,a){if(wu===null){var f=wu=[];Lp=0,jo=Nm(),qo={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Lp++,a.then(Av,Av),a}function Av(){if(--Lp===0&&wu!==null){qo!==null&&(qo.status="fulfilled");var r=wu;wu=null,jo=0,qo=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function OM(r,a){var f=[],p={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return r.then(function(){p.status="fulfilled",p.value=a;for(var y=0;y<f.length;y++)(0,f[y])(a)},function(y){for(p.status="rejected",p.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),p}var Dv=Y.S;Y.S=function(r,a){dx=ge(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&LM(r,a),Dv!==null&&Dv(r,a)};var Ia=V(null);function Op(){var r=Ia.current;return r!==null?r:Zt.pooledCache}function wh(r,a){a===null?ie(Ia,Ia.current):ie(Ia,a.pool)}function Pv(){var r=Op();return r===null?null:{parent:xi._currentValue,pool:r}}var Xo=Error(i(460)),zp=Error(i(474)),Sh=Error(i(542)),bh={then:function(){}};function Lv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ov(r,a,f){switch(f=r[f],f===void 0?r.push(a):f!==a&&(a.then(is,is),a=f),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Nv(r),r;default:if(typeof a.status=="string")a.then(is,is);else{if(r=Zt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(p){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=p}},function(p){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=p}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Nv(r),r}throw Ha=a,Xo}}function Ua(r){try{var a=r._init;return a(r._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Ha=f,Xo):f}}var Ha=null;function zv(){if(Ha===null)throw Error(i(459));var r=Ha;return Ha=null,r}function Nv(r){if(r===Xo||r===Sh)throw Error(i(483))}var Yo=null,Su=0;function Th(r){var a=Su;return Su+=1,Yo===null&&(Yo=[]),Ov(Yo,r,a)}function bu(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Eh(r,a){throw a.$$typeof===g?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Bv(r){function a(de,re){if(r){var ve=de.deletions;ve===null?(de.deletions=[re],de.flags|=16):ve.push(re)}}function f(de,re){if(!r)return null;for(;re!==null;)a(de,re),re=re.sibling;return null}function p(de){for(var re=new Map;de!==null;)de.key!==null?re.set(de.key,de):re.set(de.index,de),de=de.sibling;return re}function y(de,re){return de=rs(de,re),de.index=0,de.sibling=null,de}function S(de,re,ve){return de.index=ve,r?(ve=de.alternate,ve!==null?(ve=ve.index,ve<re?(de.flags|=67108866,re):ve):(de.flags|=67108866,re)):(de.flags|=1048576,re)}function R(de){return r&&de.alternate===null&&(de.flags|=67108866),de}function U(de,re,ve,Ae){return re===null||re.tag!==6?(re=Sp(ve,de.mode,Ae),re.return=de,re):(re=y(re,ve),re.return=de,re)}function $(de,re,ve,Ae){var ot=ve.type;return ot===v?Re(de,re,ve.props.children,Ae,ve.key):re!==null&&(re.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===L&&Ua(ot)===re.type)?(re=y(re,ve.props),bu(re,ve),re.return=de,re):(re=_h(ve.type,ve.key,ve.props,null,de.mode,Ae),bu(re,ve),re.return=de,re)}function ye(de,re,ve,Ae){return re===null||re.tag!==4||re.stateNode.containerInfo!==ve.containerInfo||re.stateNode.implementation!==ve.implementation?(re=bp(ve,de.mode,Ae),re.return=de,re):(re=y(re,ve.children||[]),re.return=de,re)}function Re(de,re,ve,Ae,ot){return re===null||re.tag!==7?(re=za(ve,de.mode,Ae,ot),re.return=de,re):(re=y(re,ve),re.return=de,re)}function Pe(de,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=Sp(""+re,de.mode,ve),re.return=de,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _:return ve=_h(re.type,re.key,re.props,null,de.mode,ve),bu(ve,re),ve.return=de,ve;case w:return re=bp(re,de.mode,ve),re.return=de,re;case L:return re=Ua(re),Pe(de,re,ve)}if(he(re)||K(re))return re=za(re,de.mode,ve,null),re.return=de,re;if(typeof re.then=="function")return Pe(de,Th(re),ve);if(re.$$typeof===M)return Pe(de,xh(de,re),ve);Eh(de,re)}return null}function Se(de,re,ve,Ae){var ot=re!==null?re.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ot!==null?null:U(de,re,""+ve,Ae);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case _:return ve.key===ot?$(de,re,ve,Ae):null;case w:return ve.key===ot?ye(de,re,ve,Ae):null;case L:return ve=Ua(ve),Se(de,re,ve,Ae)}if(he(ve)||K(ve))return ot!==null?null:Re(de,re,ve,Ae,null);if(typeof ve.then=="function")return Se(de,re,Th(ve),Ae);if(ve.$$typeof===M)return Se(de,re,xh(de,ve),Ae);Eh(de,ve)}return null}function Ee(de,re,ve,Ae,ot){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return de=de.get(ve)||null,U(re,de,""+Ae,ot);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case _:return de=de.get(Ae.key===null?ve:Ae.key)||null,$(re,de,Ae,ot);case w:return de=de.get(Ae.key===null?ve:Ae.key)||null,ye(re,de,Ae,ot);case L:return Ae=Ua(Ae),Ee(de,re,ve,Ae,ot)}if(he(Ae)||K(Ae))return de=de.get(ve)||null,Re(re,de,Ae,ot,null);if(typeof Ae.then=="function")return Ee(de,re,ve,Th(Ae),ot);if(Ae.$$typeof===M)return Ee(de,re,ve,xh(re,Ae),ot);Eh(re,Ae)}return null}function Je(de,re,ve,Ae){for(var ot=null,Ft=null,nt=re,bt=re=0,zt=null;nt!==null&&bt<ve.length;bt++){nt.index>bt?(zt=nt,nt=null):zt=nt.sibling;var It=Se(de,nt,ve[bt],Ae);if(It===null){nt===null&&(nt=zt);break}r&&nt&&It.alternate===null&&a(de,nt),re=S(It,re,bt),Ft===null?ot=It:Ft.sibling=It,Ft=It,nt=zt}if(bt===ve.length)return f(de,nt),Nt&&ss(de,bt),ot;if(nt===null){for(;bt<ve.length;bt++)nt=Pe(de,ve[bt],Ae),nt!==null&&(re=S(nt,re,bt),Ft===null?ot=nt:Ft.sibling=nt,Ft=nt);return Nt&&ss(de,bt),ot}for(nt=p(nt);bt<ve.length;bt++)zt=Ee(nt,de,bt,ve[bt],Ae),zt!==null&&(r&&zt.alternate!==null&&nt.delete(zt.key===null?bt:zt.key),re=S(zt,re,bt),Ft===null?ot=zt:Ft.sibling=zt,Ft=zt);return r&&nt.forEach(function(sa){return a(de,sa)}),Nt&&ss(de,bt),ot}function ct(de,re,ve,Ae){if(ve==null)throw Error(i(151));for(var ot=null,Ft=null,nt=re,bt=re=0,zt=null,It=ve.next();nt!==null&&!It.done;bt++,It=ve.next()){nt.index>bt?(zt=nt,nt=null):zt=nt.sibling;var sa=Se(de,nt,It.value,Ae);if(sa===null){nt===null&&(nt=zt);break}r&&nt&&sa.alternate===null&&a(de,nt),re=S(sa,re,bt),Ft===null?ot=sa:Ft.sibling=sa,Ft=sa,nt=zt}if(It.done)return f(de,nt),Nt&&ss(de,bt),ot;if(nt===null){for(;!It.done;bt++,It=ve.next())It=Pe(de,It.value,Ae),It!==null&&(re=S(It,re,bt),Ft===null?ot=It:Ft.sibling=It,Ft=It);return Nt&&ss(de,bt),ot}for(nt=p(nt);!It.done;bt++,It=ve.next())It=Ee(nt,de,bt,It.value,Ae),It!==null&&(r&&It.alternate!==null&&nt.delete(It.key===null?bt:It.key),re=S(It,re,bt),Ft===null?ot=It:Ft.sibling=It,Ft=It);return r&&nt.forEach(function(WC){return a(de,WC)}),Nt&&ss(de,bt),ot}function Yt(de,re,ve,Ae){if(typeof ve=="object"&&ve!==null&&ve.type===v&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case _:e:{for(var ot=ve.key;re!==null;){if(re.key===ot){if(ot=ve.type,ot===v){if(re.tag===7){f(de,re.sibling),Ae=y(re,ve.props.children),Ae.return=de,de=Ae;break e}}else if(re.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===L&&Ua(ot)===re.type){f(de,re.sibling),Ae=y(re,ve.props),bu(Ae,ve),Ae.return=de,de=Ae;break e}f(de,re);break}else a(de,re);re=re.sibling}ve.type===v?(Ae=za(ve.props.children,de.mode,Ae,ve.key),Ae.return=de,de=Ae):(Ae=_h(ve.type,ve.key,ve.props,null,de.mode,Ae),bu(Ae,ve),Ae.return=de,de=Ae)}return R(de);case w:e:{for(ot=ve.key;re!==null;){if(re.key===ot)if(re.tag===4&&re.stateNode.containerInfo===ve.containerInfo&&re.stateNode.implementation===ve.implementation){f(de,re.sibling),Ae=y(re,ve.children||[]),Ae.return=de,de=Ae;break e}else{f(de,re);break}else a(de,re);re=re.sibling}Ae=bp(ve,de.mode,Ae),Ae.return=de,de=Ae}return R(de);case L:return ve=Ua(ve),Yt(de,re,ve,Ae)}if(he(ve))return Je(de,re,ve,Ae);if(K(ve)){if(ot=K(ve),typeof ot!="function")throw Error(i(150));return ve=ot.call(ve),ct(de,re,ve,Ae)}if(typeof ve.then=="function")return Yt(de,re,Th(ve),Ae);if(ve.$$typeof===M)return Yt(de,re,xh(de,ve),Ae);Eh(de,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,re!==null&&re.tag===6?(f(de,re.sibling),Ae=y(re,ve),Ae.return=de,de=Ae):(f(de,re),Ae=Sp(ve,de.mode,Ae),Ae.return=de,de=Ae),R(de)):f(de,re)}return function(de,re,ve,Ae){try{Su=0;var ot=Yt(de,re,ve,Ae);return Yo=null,ot}catch(nt){if(nt===Xo||nt===Sh)throw nt;var Ft=In(29,nt,null,de.mode);return Ft.lanes=Ae,Ft.return=de,Ft}}}var ka=Bv(!0),Fv=Bv(!1),Gs=!1;function Np(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Vs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ws(r,a,f){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(Ht&2)!==0){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,a=gh(r),xv(r,null,f),a}return mh(r,p,a,f),gh(r)}function Tu(r,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194048)!==0)){var p=a.lanes;p&=r.pendingLanes,f|=p,a.lanes=f,dt(r,f)}}function Fp(r,a){var f=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var R={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?y=S=R:S=S.next=R,f=f.next}while(f!==null);S===null?y=S=a:S=S.next=a}else y=S=a;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:S,shared:p.shared,callbacks:p.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=a:r.next=a,f.lastBaseUpdate=a}var Ip=!1;function Eu(){if(Ip){var r=qo;if(r!==null)throw r}}function Mu(r,a,f,p){Ip=!1;var y=r.updateQueue;Gs=!1;var S=y.firstBaseUpdate,R=y.lastBaseUpdate,U=y.shared.pending;if(U!==null){y.shared.pending=null;var $=U,ye=$.next;$.next=null,R===null?S=ye:R.next=ye,R=$;var Re=r.alternate;Re!==null&&(Re=Re.updateQueue,U=Re.lastBaseUpdate,U!==R&&(U===null?Re.firstBaseUpdate=ye:U.next=ye,Re.lastBaseUpdate=$))}if(S!==null){var Pe=y.baseState;R=0,Re=ye=$=null,U=S;do{var Se=U.lane&-536870913,Ee=Se!==U.lane;if(Ee?(Ot&Se)===Se:(p&Se)===Se){Se!==0&&Se===jo&&(Ip=!0),Re!==null&&(Re=Re.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Je=r,ct=U;Se=a;var Yt=f;switch(ct.tag){case 1:if(Je=ct.payload,typeof Je=="function"){Pe=Je.call(Yt,Pe,Se);break e}Pe=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=ct.payload,Se=typeof Je=="function"?Je.call(Yt,Pe,Se):Je,Se==null)break e;Pe=m({},Pe,Se);break e;case 2:Gs=!0}}Se=U.callback,Se!==null&&(r.flags|=64,Ee&&(r.flags|=8192),Ee=y.callbacks,Ee===null?y.callbacks=[Se]:Ee.push(Se))}else Ee={lane:Se,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Re===null?(ye=Re=Ee,$=Pe):Re=Re.next=Ee,R|=Se;if(U=U.next,U===null){if(U=y.shared.pending,U===null)break;Ee=U,U=Ee.next,Ee.next=null,y.lastBaseUpdate=Ee,y.shared.pending=null}}while(!0);Re===null&&($=Pe),y.baseState=$,y.firstBaseUpdate=ye,y.lastBaseUpdate=Re,S===null&&(y.shared.lanes=0),Zs|=R,r.lanes=R,r.memoizedState=Pe}}function Iv(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function Uv(r,a){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)Iv(f[r],a)}var Zo=V(null),Mh=V(0);function Hv(r,a){r=gs,ie(Mh,r),ie(Zo,a),gs=r|a.baseLanes}function Up(){ie(Mh,gs),ie(Zo,Zo.current)}function Hp(){gs=Mh.current,q(Zo),q(Mh)}var Un=V(null),gr=null;function js(r){var a=r.alternate;ie(gi,gi.current&1),ie(Un,r),gr===null&&(a===null||Zo.current!==null||a.memoizedState!==null)&&(gr=r)}function kp(r){ie(gi,gi.current),ie(Un,r),gr===null&&(gr=r)}function kv(r){r.tag===22?(ie(gi,gi.current),ie(Un,r),gr===null&&(gr=r)):qs()}function qs(){ie(gi,gi.current),ie(Un,Un.current)}function Hn(r){q(Un),gr===r&&(gr=null),q(gi)}var gi=V(0);function Ch(r){for(var a=r;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Xm(f)||Ym(f)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ls=0,St=null,qt=null,wi=null,Rh=!1,Ko=!1,Ga=!1,Ah=0,Cu=0,Qo=null,zM=0;function di(){throw Error(i(321))}function Gp(r,a){if(a===null)return!1;for(var f=0;f<a.length&&f<r.length;f++)if(!Fn(r[f],a[f]))return!1;return!0}function Vp(r,a,f,p,y,S){return ls=S,St=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=r===null||r.memoizedState===null?Ty:rm,Ga=!1,S=f(p,y),Ga=!1,Ko&&(S=Vv(a,f,p,y)),Gv(r),S}function Gv(r){Y.H=Du;var a=qt!==null&&qt.next!==null;if(ls=0,wi=qt=St=null,Rh=!1,Cu=0,Qo=null,a)throw Error(i(300));r===null||Si||(r=r.dependencies,r!==null&&yh(r)&&(Si=!0))}function Vv(r,a,f,p){St=r;var y=0;do{if(Ko&&(Qo=null),Cu=0,Ko=!1,25<=y)throw Error(i(301));if(y+=1,wi=qt=null,r.updateQueue!=null){var S=r.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}Y.H=Ey,S=a(f,p)}while(Ko);return S}function NM(){var r=Y.H,a=r.useState()[0];return a=typeof a.then=="function"?Ru(a):a,r=r.useState()[0],(qt!==null?qt.memoizedState:null)!==r&&(St.flags|=1024),a}function Wp(){var r=Ah!==0;return Ah=0,r}function jp(r,a,f){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~f}function qp(r){if(Rh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Rh=!1}ls=0,wi=qt=St=null,Ko=!1,Cu=Ah=0,Qo=null}function un(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?St.memoizedState=wi=r:wi=wi.next=r,wi}function _i(){if(qt===null){var r=St.alternate;r=r!==null?r.memoizedState:null}else r=qt.next;var a=wi===null?St.memoizedState:wi.next;if(a!==null)wi=a,qt=r;else{if(r===null)throw St.alternate===null?Error(i(467)):Error(i(310));qt=r,r={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},wi===null?St.memoizedState=wi=r:wi=wi.next=r}return wi}function Dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(r){var a=Cu;return Cu+=1,Qo===null&&(Qo=[]),r=Ov(Qo,r,a),a=St,(wi===null?a.memoizedState:wi.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?Ty:rm),r}function Ph(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ru(r);if(r.$$typeof===M)return qi(r)}throw Error(i(438,String(r)))}function Xp(r){var a=null,f=St.updateQueue;if(f!==null&&(a=f.memoCache),a==null){var p=St.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(a={data:p.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),f===null&&(f=Dh(),St.updateQueue=f),f.memoCache=a,f=a.data[a.index],f===void 0)for(f=a.data[a.index]=Array(r),p=0;p<r;p++)f[p]=j;return a.index++,f}function us(r,a){return typeof a=="function"?a(r):a}function Lh(r){var a=_i();return Yp(a,qt,r)}function Yp(r,a,f){var p=r.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=f;var y=r.baseQueue,S=p.pending;if(S!==null){if(y!==null){var R=y.next;y.next=S.next,S.next=R}a.baseQueue=y=S,p.pending=null}if(S=r.baseState,y===null)r.memoizedState=S;else{a=y.next;var U=R=null,$=null,ye=a,Re=!1;do{var Pe=ye.lane&-536870913;if(Pe!==ye.lane?(Ot&Pe)===Pe:(ls&Pe)===Pe){var Se=ye.revertLane;if(Se===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),Pe===jo&&(Re=!0);else if((ls&Se)===Se){ye=ye.next,Se===jo&&(Re=!0);continue}else Pe={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},$===null?(U=$=Pe,R=S):$=$.next=Pe,St.lanes|=Se,Zs|=Se;Pe=ye.action,Ga&&f(S,Pe),S=ye.hasEagerState?ye.eagerState:f(S,Pe)}else Se={lane:Pe,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},$===null?(U=$=Se,R=S):$=$.next=Se,St.lanes|=Pe,Zs|=Pe;ye=ye.next}while(ye!==null&&ye!==a);if($===null?R=S:$.next=U,!Fn(S,r.memoizedState)&&(Si=!0,Re&&(f=qo,f!==null)))throw f;r.memoizedState=S,r.baseState=R,r.baseQueue=$,p.lastRenderedState=S}return y===null&&(p.lanes=0),[r.memoizedState,p.dispatch]}function Zp(r){var a=_i(),f=a.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=r;var p=f.dispatch,y=f.pending,S=a.memoizedState;if(y!==null){f.pending=null;var R=y=y.next;do S=r(S,R.action),R=R.next;while(R!==y);Fn(S,a.memoizedState)||(Si=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),f.lastRenderedState=S}return[S,p]}function Wv(r,a,f){var p=St,y=_i(),S=Nt;if(S){if(f===void 0)throw Error(i(407));f=f()}else f=a();var R=!Fn((qt||y).memoizedState,f);if(R&&(y.memoizedState=f,Si=!0),y=y.queue,Jp(Xv.bind(null,p,y,r),[r]),y.getSnapshot!==a||R||wi!==null&&wi.memoizedState.tag&1){if(p.flags|=2048,Jo(9,{destroy:void 0},qv.bind(null,p,y,f,a),null),Zt===null)throw Error(i(349));S||(ls&127)!==0||jv(p,a,f)}return f}function jv(r,a,f){r.flags|=16384,r={getSnapshot:a,value:f},a=St.updateQueue,a===null?(a=Dh(),St.updateQueue=a,a.stores=[r]):(f=a.stores,f===null?a.stores=[r]:f.push(r))}function qv(r,a,f,p){a.value=f,a.getSnapshot=p,Yv(a)&&Zv(r)}function Xv(r,a,f){return f(function(){Yv(a)&&Zv(r)})}function Yv(r){var a=r.getSnapshot;r=r.value;try{var f=a();return!Fn(r,f)}catch{return!0}}function Zv(r){var a=Oa(r,2);a!==null&&Cn(a,r,2)}function Kp(r){var a=un();if(typeof r=="function"){var f=r;if(r=f(),Ga){Te(!0);try{f()}finally{Te(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:r},a}function Kv(r,a,f,p){return r.baseState=f,Yp(r,qt,typeof p=="function"?p:us)}function BM(r,a,f,p,y){if(Nh(r))throw Error(i(485));if(r=a.action,r!==null){var S={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){S.listeners.push(R)}};Y.T!==null?f(!0):S.isTransition=!1,p(S),f=a.pending,f===null?(S.next=a.pending=S,Qv(a,S)):(S.next=f.next,a.pending=f.next=S)}}function Qv(r,a){var f=a.action,p=a.payload,y=r.state;if(a.isTransition){var S=Y.T,R={};Y.T=R;try{var U=f(y,p),$=Y.S;$!==null&&$(R,U),Jv(r,a,U)}catch(ye){Qp(r,a,ye)}finally{S!==null&&R.types!==null&&(S.types=R.types),Y.T=S}}else try{S=f(y,p),Jv(r,a,S)}catch(ye){Qp(r,a,ye)}}function Jv(r,a,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){$v(r,a,p)},function(p){return Qp(r,a,p)}):$v(r,a,f)}function $v(r,a,f){a.status="fulfilled",a.value=f,ey(a),r.state=f,a=r.pending,a!==null&&(f=a.next,f===a?r.pending=null:(f=f.next,a.next=f,Qv(r,f)))}function Qp(r,a,f){var p=r.pending;if(r.pending=null,p!==null){p=p.next;do a.status="rejected",a.reason=f,ey(a),a=a.next;while(a!==p)}r.action=null}function ey(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function ty(r,a){return a}function iy(r,a){if(Nt){var f=Zt.formState;if(f!==null){e:{var p=St;if(Nt){if(ti){t:{for(var y=ti,S=mr;y.nodeType!==8;){if(!S){y=null;break t}if(y=_r(y.nextSibling),y===null){y=null;break t}}S=y.data,y=S==="F!"||S==="F"?y:null}if(y){ti=_r(y.nextSibling),p=y.data==="F!";break e}}Hs(p)}p=!1}p&&(a=f[0])}}return f=un(),f.memoizedState=f.baseState=a,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:a},f.queue=p,f=wy.bind(null,St,p),p.dispatch=f,p=Kp(!1),S=nm.bind(null,St,!1,p.queue),p=un(),y={state:a,dispatch:null,action:r,pending:null},p.queue=y,f=BM.bind(null,St,y,S,f),y.dispatch=f,p.memoizedState=r,[a,f,!1]}function ny(r){var a=_i();return ry(a,qt,r)}function ry(r,a,f){if(a=Yp(r,a,ty)[0],r=Lh(us)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var p=Ru(a)}catch(R){throw R===Xo?Sh:R}else p=a;a=_i();var y=a.queue,S=y.dispatch;return f!==a.memoizedState&&(St.flags|=2048,Jo(9,{destroy:void 0},FM.bind(null,y,f),null)),[p,S,r]}function FM(r,a){r.action=a}function sy(r){var a=_i(),f=qt;if(f!==null)return ry(a,f,r);_i(),a=a.memoizedState,f=_i();var p=f.queue.dispatch;return f.memoizedState=r,[a,p,!1]}function Jo(r,a,f,p){return r={tag:r,create:f,deps:p,inst:a,next:null},a=St.updateQueue,a===null&&(a=Dh(),St.updateQueue=a),f=a.lastEffect,f===null?a.lastEffect=r.next=r:(p=f.next,f.next=r,r.next=p,a.lastEffect=r),r}function ay(){return _i().memoizedState}function Oh(r,a,f,p){var y=un();St.flags|=r,y.memoizedState=Jo(1|a,{destroy:void 0},f,p===void 0?null:p)}function zh(r,a,f,p){var y=_i();p=p===void 0?null:p;var S=y.memoizedState.inst;qt!==null&&p!==null&&Gp(p,qt.memoizedState.deps)?y.memoizedState=Jo(a,S,f,p):(St.flags|=r,y.memoizedState=Jo(1|a,S,f,p))}function oy(r,a){Oh(8390656,8,r,a)}function Jp(r,a){zh(2048,8,r,a)}function IM(r){St.flags|=4;var a=St.updateQueue;if(a===null)a=Dh(),St.updateQueue=a,a.events=[r];else{var f=a.events;f===null?a.events=[r]:f.push(r)}}function ly(r){var a=_i().memoizedState;return IM({ref:a,nextImpl:r}),function(){if((Ht&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function uy(r,a){return zh(4,2,r,a)}function cy(r,a){return zh(4,4,r,a)}function hy(r,a){if(typeof a=="function"){r=r();var f=a(r);return function(){typeof f=="function"?f():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function fy(r,a,f){f=f!=null?f.concat([r]):null,zh(4,4,hy.bind(null,a,r),f)}function $p(){}function dy(r,a){var f=_i();a=a===void 0?null:a;var p=f.memoizedState;return a!==null&&Gp(a,p[1])?p[0]:(f.memoizedState=[r,a],r)}function py(r,a){var f=_i();a=a===void 0?null:a;var p=f.memoizedState;if(a!==null&&Gp(a,p[1]))return p[0];if(p=r(),Ga){Te(!0);try{r()}finally{Te(!1)}}return f.memoizedState=[p,a],p}function em(r,a,f){return f===void 0||(ls&1073741824)!==0&&(Ot&261930)===0?r.memoizedState=a:(r.memoizedState=f,r=mx(),St.lanes|=r,Zs|=r,f)}function my(r,a,f,p){return Fn(f,a)?f:Zo.current!==null?(r=em(r,f,p),Fn(r,a)||(Si=!0),r):(ls&42)===0||(ls&1073741824)!==0&&(Ot&261930)===0?(Si=!0,r.memoizedState=f):(r=mx(),St.lanes|=r,Zs|=r,a)}function gy(r,a,f,p,y){var S=Q.p;Q.p=S!==0&&8>S?S:8;var R=Y.T,U={};Y.T=U,nm(r,!1,a,f);try{var $=y(),ye=Y.S;if(ye!==null&&ye(U,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var Re=OM($,p);Au(r,a,Re,Vn(r))}else Au(r,a,p,Vn(r))}catch(Pe){Au(r,a,{then:function(){},status:"rejected",reason:Pe},Vn())}finally{Q.p=S,R!==null&&U.types!==null&&(R.types=U.types),Y.T=R}}function UM(){}function tm(r,a,f,p){if(r.tag!==5)throw Error(i(476));var y=_y(r).queue;gy(r,y,a,ee,f===null?UM:function(){return vy(r),f(p)})}function _y(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:ee},next:null};var f={};return a.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:f},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function vy(r){var a=_y(r);a.next===null&&(a=r.alternate.memoizedState),Au(r,a.next.queue,{},Vn())}function im(){return qi(qu)}function yy(){return _i().memoizedState}function xy(){return _i().memoizedState}function HM(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var f=Vn();r=Vs(f);var p=Ws(a,r,f);p!==null&&(Cn(p,a,f),Tu(p,a,f)),a={cache:Pp()},r.payload=a;return}a=a.return}}function kM(r,a,f){var p=Vn();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Nh(r)?Sy(a,f):(f=xp(r,a,f,p),f!==null&&(Cn(f,r,p),by(f,a,p)))}function wy(r,a,f){var p=Vn();Au(r,a,f,p)}function Au(r,a,f,p){var y={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Nh(r))Sy(a,y);else{var S=r.alternate;if(r.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var R=a.lastRenderedState,U=S(R,f);if(y.hasEagerState=!0,y.eagerState=U,Fn(U,R))return mh(r,a,y,0),Zt===null&&ph(),!1}catch{}if(f=xp(r,a,y,p),f!==null)return Cn(f,r,p),by(f,a,p),!0}return!1}function nm(r,a,f,p){if(p={lane:2,revertLane:Nm(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Nh(r)){if(a)throw Error(i(479))}else a=xp(r,f,p,2),a!==null&&Cn(a,r,2)}function Nh(r){var a=r.alternate;return r===St||a!==null&&a===St}function Sy(r,a){Ko=Rh=!0;var f=r.pending;f===null?a.next=a:(a.next=f.next,f.next=a),r.pending=a}function by(r,a,f){if((f&4194048)!==0){var p=a.lanes;p&=r.pendingLanes,f|=p,a.lanes=f,dt(r,f)}}var Du={readContext:qi,use:Ph,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useLayoutEffect:di,useInsertionEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useSyncExternalStore:di,useId:di,useHostTransitionStatus:di,useFormState:di,useActionState:di,useOptimistic:di,useMemoCache:di,useCacheRefresh:di};Du.useEffectEvent=di;var Ty={readContext:qi,use:Ph,useCallback:function(r,a){return un().memoizedState=[r,a===void 0?null:a],r},useContext:qi,useEffect:oy,useImperativeHandle:function(r,a,f){f=f!=null?f.concat([r]):null,Oh(4194308,4,hy.bind(null,a,r),f)},useLayoutEffect:function(r,a){return Oh(4194308,4,r,a)},useInsertionEffect:function(r,a){Oh(4,2,r,a)},useMemo:function(r,a){var f=un();a=a===void 0?null:a;var p=r();if(Ga){Te(!0);try{r()}finally{Te(!1)}}return f.memoizedState=[p,a],p},useReducer:function(r,a,f){var p=un();if(f!==void 0){var y=f(a);if(Ga){Te(!0);try{f(a)}finally{Te(!1)}}}else y=a;return p.memoizedState=p.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},p.queue=r,r=r.dispatch=kM.bind(null,St,r),[p.memoizedState,r]},useRef:function(r){var a=un();return r={current:r},a.memoizedState=r},useState:function(r){r=Kp(r);var a=r.queue,f=wy.bind(null,St,a);return a.dispatch=f,[r.memoizedState,f]},useDebugValue:$p,useDeferredValue:function(r,a){var f=un();return em(f,r,a)},useTransition:function(){var r=Kp(!1);return r=gy.bind(null,St,r.queue,!0,!1),un().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,f){var p=St,y=un();if(Nt){if(f===void 0)throw Error(i(407));f=f()}else{if(f=a(),Zt===null)throw Error(i(349));(Ot&127)!==0||jv(p,a,f)}y.memoizedState=f;var S={value:f,getSnapshot:a};return y.queue=S,oy(Xv.bind(null,p,S,r),[r]),p.flags|=2048,Jo(9,{destroy:void 0},qv.bind(null,p,S,f,a),null),f},useId:function(){var r=un(),a=Zt.identifierPrefix;if(Nt){var f=Hr,p=Ur;f=(p&~(1<<32-ze(p)-1)).toString(32)+f,a="_"+a+"R_"+f,f=Ah++,0<f&&(a+="H"+f.toString(32)),a+="_"}else f=zM++,a="_"+a+"r_"+f.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:im,useFormState:iy,useActionState:iy,useOptimistic:function(r){var a=un();a.memoizedState=a.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=f,a=nm.bind(null,St,!0,f),f.dispatch=a,[r,a]},useMemoCache:Xp,useCacheRefresh:function(){return un().memoizedState=HM.bind(null,St)},useEffectEvent:function(r){var a=un(),f={impl:r};return a.memoizedState=f,function(){if((Ht&2)!==0)throw Error(i(440));return f.impl.apply(void 0,arguments)}}},rm={readContext:qi,use:Ph,useCallback:dy,useContext:qi,useEffect:Jp,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Lh,useRef:ay,useState:function(){return Lh(us)},useDebugValue:$p,useDeferredValue:function(r,a){var f=_i();return my(f,qt.memoizedState,r,a)},useTransition:function(){var r=Lh(us)[0],a=_i().memoizedState;return[typeof r=="boolean"?r:Ru(r),a]},useSyncExternalStore:Wv,useId:yy,useHostTransitionStatus:im,useFormState:ny,useActionState:ny,useOptimistic:function(r,a){var f=_i();return Kv(f,qt,r,a)},useMemoCache:Xp,useCacheRefresh:xy};rm.useEffectEvent=ly;var Ey={readContext:qi,use:Ph,useCallback:dy,useContext:qi,useEffect:Jp,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Zp,useRef:ay,useState:function(){return Zp(us)},useDebugValue:$p,useDeferredValue:function(r,a){var f=_i();return qt===null?em(f,r,a):my(f,qt.memoizedState,r,a)},useTransition:function(){var r=Zp(us)[0],a=_i().memoizedState;return[typeof r=="boolean"?r:Ru(r),a]},useSyncExternalStore:Wv,useId:yy,useHostTransitionStatus:im,useFormState:sy,useActionState:sy,useOptimistic:function(r,a){var f=_i();return qt!==null?Kv(f,qt,r,a):(f.baseState=r,[r,f.queue.dispatch])},useMemoCache:Xp,useCacheRefresh:xy};Ey.useEffectEvent=ly;function sm(r,a,f,p){a=r.memoizedState,f=f(p,a),f=f==null?a:m({},a,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var am={enqueueSetState:function(r,a,f){r=r._reactInternals;var p=Vn(),y=Vs(p);y.payload=a,f!=null&&(y.callback=f),a=Ws(r,y,p),a!==null&&(Cn(a,r,p),Tu(a,r,p))},enqueueReplaceState:function(r,a,f){r=r._reactInternals;var p=Vn(),y=Vs(p);y.tag=1,y.payload=a,f!=null&&(y.callback=f),a=Ws(r,y,p),a!==null&&(Cn(a,r,p),Tu(a,r,p))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var f=Vn(),p=Vs(f);p.tag=2,a!=null&&(p.callback=a),a=Ws(r,p,f),a!==null&&(Cn(a,r,f),Tu(a,r,f))}};function My(r,a,f,p,y,S,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,S,R):a.prototype&&a.prototype.isPureReactComponent?!gu(f,p)||!gu(y,S):!0}function Cy(r,a,f,p){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,p),a.state!==r&&am.enqueueReplaceState(a,a.state,null)}function Va(r,a){var f=a;if("ref"in a){f={};for(var p in a)p!=="ref"&&(f[p]=a[p])}if(r=r.defaultProps){f===a&&(f=m({},f));for(var y in r)f[y]===void 0&&(f[y]=r[y])}return f}function Ry(r){dh(r)}function Ay(r){console.error(r)}function Dy(r){dh(r)}function Bh(r,a){try{var f=r.onUncaughtError;f(a.value,{componentStack:a.stack})}catch(p){setTimeout(function(){throw p})}}function Py(r,a,f){try{var p=r.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function om(r,a,f){return f=Vs(f),f.tag=3,f.payload={element:null},f.callback=function(){Bh(r,a)},f}function Ly(r){return r=Vs(r),r.tag=3,r}function Oy(r,a,f,p){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var S=p.value;r.payload=function(){return y(S)},r.callback=function(){Py(a,f,p)}}var R=f.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(r.callback=function(){Py(a,f,p),typeof y!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var U=p.stack;this.componentDidCatch(p.value,{componentStack:U!==null?U:""})})}function GM(r,a,f,p,y){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(a=f.alternate,a!==null&&Wo(a,f,y,!0),f=Un.current,f!==null){switch(f.tag){case 31:case 13:return gr===null?Yh():f.alternate===null&&pi===0&&(pi=3),f.flags&=-257,f.flags|=65536,f.lanes=y,p===bh?f.flags|=16384:(a=f.updateQueue,a===null?f.updateQueue=new Set([p]):a.add(p),Lm(r,p,y)),!1;case 22:return f.flags|=65536,p===bh?f.flags|=16384:(a=f.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=a):(f=a.retryQueue,f===null?a.retryQueue=new Set([p]):f.add(p)),Lm(r,p,y)),!1}throw Error(i(435,f.tag))}return Lm(r,p,y),Yh(),!1}if(Nt)return a=Un.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,p!==Mp&&(r=Error(i(422),{cause:p}),yu(fr(r,f)))):(p!==Mp&&(a=Error(i(423),{cause:p}),yu(fr(a,f))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,p=fr(p,f),y=om(r.stateNode,p,y),Fp(r,y),pi!==4&&(pi=2)),!1;var S=Error(i(520),{cause:p});if(S=fr(S,f),Iu===null?Iu=[S]:Iu.push(S),pi!==4&&(pi=2),a===null)return!0;p=fr(p,f),f=a;do{switch(f.tag){case 3:return f.flags|=65536,r=y&-y,f.lanes|=r,r=om(f.stateNode,p,r),Fp(f,r),!1;case 1:if(a=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ks===null||!Ks.has(S))))return f.flags|=65536,y&=-y,f.lanes|=y,y=Ly(y),Oy(y,r,f,p),Fp(f,y),!1}f=f.return}while(f!==null);return!1}var lm=Error(i(461)),Si=!1;function Xi(r,a,f,p){a.child=r===null?Fv(a,null,f,p):ka(a,r.child,f,p)}function zy(r,a,f,p,y){f=f.render;var S=a.ref;if("ref"in p){var R={};for(var U in p)U!=="ref"&&(R[U]=p[U])}else R=p;return Fa(a),p=Vp(r,a,f,R,S,y),U=Wp(),r!==null&&!Si?(jp(r,a,y),cs(r,a,y)):(Nt&&U&&Tp(a),a.flags|=1,Xi(r,a,p,y),a.child)}function Ny(r,a,f,p,y){if(r===null){var S=f.type;return typeof S=="function"&&!wp(S)&&S.defaultProps===void 0&&f.compare===null?(a.tag=15,a.type=S,By(r,a,S,p,y)):(r=_h(f.type,null,p,a,a.mode,y),r.ref=a.ref,r.return=a,a.child=r)}if(S=r.child,!gm(r,y)){var R=S.memoizedProps;if(f=f.compare,f=f!==null?f:gu,f(R,p)&&r.ref===a.ref)return cs(r,a,y)}return a.flags|=1,r=rs(S,p),r.ref=a.ref,r.return=a,a.child=r}function By(r,a,f,p,y){if(r!==null){var S=r.memoizedProps;if(gu(S,p)&&r.ref===a.ref)if(Si=!1,a.pendingProps=p=S,gm(r,y))(r.flags&131072)!==0&&(Si=!0);else return a.lanes=r.lanes,cs(r,a,y)}return um(r,a,f,p,y)}function Fy(r,a,f,p){var y=p.children,S=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((a.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,r!==null){for(p=a.child=r.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~S}else p=0,a.child=null;return Iy(r,a,S,f,p)}if((f&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&wh(a,S!==null?S.cachePool:null),S!==null?Hv(a,S):Up(),kv(a);else return p=a.lanes=536870912,Iy(r,a,S!==null?S.baseLanes|f:f,f,p)}else S!==null?(wh(a,S.cachePool),Hv(a,S),qs(),a.memoizedState=null):(r!==null&&wh(a,null),Up(),qs());return Xi(r,a,y,f),a.child}function Pu(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Iy(r,a,f,p,y){var S=Op();return S=S===null?null:{parent:xi._currentValue,pool:S},a.memoizedState={baseLanes:f,cachePool:S},r!==null&&wh(a,null),Up(),kv(a),r!==null&&Wo(r,a,p,!0),a.childLanes=y,null}function Fh(r,a){return a=Uh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function Uy(r,a,f){return ka(a,r.child,null,f),r=Fh(a,a.pendingProps),r.flags|=2,Hn(a),a.memoizedState=null,r}function VM(r,a,f){var p=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Nt){if(p.mode==="hidden")return r=Fh(a,p),a.lanes=536870912,Pu(null,r);if(kp(a),(r=ti)?(r=Qx(r,mr),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Is!==null?{id:Ur,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},f=Sv(r),f.return=a,a.child=f,ji=a,ti=null)):r=null,r===null)throw Hs(a);return a.lanes=536870912,null}return Fh(a,p)}var S=r.memoizedState;if(S!==null){var R=S.dehydrated;if(kp(a),y)if(a.flags&256)a.flags&=-257,a=Uy(r,a,f);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(Si||Wo(r,a,f,!1),y=(f&r.childLanes)!==0,Si||y){if(p=Zt,p!==null&&(R=st(p,f),R!==0&&R!==S.retryLane))throw S.retryLane=R,Oa(r,R),Cn(p,r,R),lm;Yh(),a=Uy(r,a,f)}else r=S.treeContext,ti=_r(R.nextSibling),ji=a,Nt=!0,Us=null,mr=!1,r!==null&&Ev(a,r),a=Fh(a,p),a.flags|=4096;return a}return r=rs(r.child,{mode:p.mode,children:p.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Ih(r,a){var f=a.ref;if(f===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(i(284));(r===null||r.ref!==f)&&(a.flags|=4194816)}}function um(r,a,f,p,y){return Fa(a),f=Vp(r,a,f,p,void 0,y),p=Wp(),r!==null&&!Si?(jp(r,a,y),cs(r,a,y)):(Nt&&p&&Tp(a),a.flags|=1,Xi(r,a,f,y),a.child)}function Hy(r,a,f,p,y,S){return Fa(a),a.updateQueue=null,f=Vv(a,p,f,y),Gv(r),p=Wp(),r!==null&&!Si?(jp(r,a,S),cs(r,a,S)):(Nt&&p&&Tp(a),a.flags|=1,Xi(r,a,f,S),a.child)}function ky(r,a,f,p,y){if(Fa(a),a.stateNode===null){var S=Ho,R=f.contextType;typeof R=="object"&&R!==null&&(S=qi(R)),S=new f(p,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=am,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=p,S.state=a.memoizedState,S.refs={},Np(a),R=f.contextType,S.context=typeof R=="object"&&R!==null?qi(R):Ho,S.state=a.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(sm(a,f,R,p),S.state=a.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(R=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),R!==S.state&&am.enqueueReplaceState(S,S.state,null),Mu(a,p,S,y),Eu(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!0}else if(r===null){S=a.stateNode;var U=a.memoizedProps,$=Va(f,U);S.props=$;var ye=S.context,Re=f.contextType;R=Ho,typeof Re=="object"&&Re!==null&&(R=qi(Re));var Pe=f.getDerivedStateFromProps;Re=typeof Pe=="function"||typeof S.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,Re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U||ye!==R)&&Cy(a,S,p,R),Gs=!1;var Se=a.memoizedState;S.state=Se,Mu(a,p,S,y),Eu(),ye=a.memoizedState,U||Se!==ye||Gs?(typeof Pe=="function"&&(sm(a,f,Pe,p),ye=a.memoizedState),($=Gs||My(a,f,$,p,Se,ye,R))?(Re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=ye),S.props=p,S.state=ye,S.context=R,p=$):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{S=a.stateNode,Bp(r,a),R=a.memoizedProps,Re=Va(f,R),S.props=Re,Pe=a.pendingProps,Se=S.context,ye=f.contextType,$=Ho,typeof ye=="object"&&ye!==null&&($=qi(ye)),U=f.getDerivedStateFromProps,(ye=typeof U=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==Pe||Se!==$)&&Cy(a,S,p,$),Gs=!1,Se=a.memoizedState,S.state=Se,Mu(a,p,S,y),Eu();var Ee=a.memoizedState;R!==Pe||Se!==Ee||Gs||r!==null&&r.dependencies!==null&&yh(r.dependencies)?(typeof U=="function"&&(sm(a,f,U,p),Ee=a.memoizedState),(Re=Gs||My(a,f,Re,p,Se,Ee,$)||r!==null&&r.dependencies!==null&&yh(r.dependencies))?(ye||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Ee,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Ee,$)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||R===r.memoizedProps&&Se===r.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&Se===r.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Ee),S.props=p,S.state=Ee,S.context=$,p=Re):(typeof S.componentDidUpdate!="function"||R===r.memoizedProps&&Se===r.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&Se===r.memoizedState||(a.flags|=1024),p=!1)}return S=p,Ih(r,a),p=(a.flags&128)!==0,S||p?(S=a.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,r!==null&&p?(a.child=ka(a,r.child,null,y),a.child=ka(a,null,f,y)):Xi(r,a,f,y),a.memoizedState=S.state,r=a.child):r=cs(r,a,y),r}function Gy(r,a,f,p){return Na(),a.flags|=256,Xi(r,a,f,p),a.child}var cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(r){return{baseLanes:r,cachePool:Pv()}}function fm(r,a,f){return r=r!==null?r.childLanes&~f:0,a&&(r|=Gn),r}function Vy(r,a,f){var p=a.pendingProps,y=!1,S=(a.flags&128)!==0,R;if((R=S)||(R=r!==null&&r.memoizedState===null?!1:(gi.current&2)!==0),R&&(y=!0,a.flags&=-129),R=(a.flags&32)!==0,a.flags&=-33,r===null){if(Nt){if(y?js(a):qs(),(r=ti)?(r=Qx(r,mr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Is!==null?{id:Ur,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},f=Sv(r),f.return=a,a.child=f,ji=a,ti=null)):r=null,r===null)throw Hs(a);return Ym(r)?a.lanes=32:a.lanes=536870912,null}var U=p.children;return p=p.fallback,y?(qs(),y=a.mode,U=Uh({mode:"hidden",children:U},y),p=za(p,y,f,null),U.return=a,p.return=a,U.sibling=p,a.child=U,p=a.child,p.memoizedState=hm(f),p.childLanes=fm(r,R,f),a.memoizedState=cm,Pu(null,p)):(js(a),dm(a,U))}var $=r.memoizedState;if($!==null&&(U=$.dehydrated,U!==null)){if(S)a.flags&256?(js(a),a.flags&=-257,a=pm(r,a,f)):a.memoizedState!==null?(qs(),a.child=r.child,a.flags|=128,a=null):(qs(),U=p.fallback,y=a.mode,p=Uh({mode:"visible",children:p.children},y),U=za(U,y,f,null),U.flags|=2,p.return=a,U.return=a,p.sibling=U,a.child=p,ka(a,r.child,null,f),p=a.child,p.memoizedState=hm(f),p.childLanes=fm(r,R,f),a.memoizedState=cm,a=Pu(null,p));else if(js(a),Ym(U)){if(R=U.nextSibling&&U.nextSibling.dataset,R)var ye=R.dgst;R=ye,p=Error(i(419)),p.stack="",p.digest=R,yu({value:p,source:null,stack:null}),a=pm(r,a,f)}else if(Si||Wo(r,a,f,!1),R=(f&r.childLanes)!==0,Si||R){if(R=Zt,R!==null&&(p=st(R,f),p!==0&&p!==$.retryLane))throw $.retryLane=p,Oa(r,p),Cn(R,r,p),lm;Xm(U)||Yh(),a=pm(r,a,f)}else Xm(U)?(a.flags|=192,a.child=r.child,a=null):(r=$.treeContext,ti=_r(U.nextSibling),ji=a,Nt=!0,Us=null,mr=!1,r!==null&&Ev(a,r),a=dm(a,p.children),a.flags|=4096);return a}return y?(qs(),U=p.fallback,y=a.mode,$=r.child,ye=$.sibling,p=rs($,{mode:"hidden",children:p.children}),p.subtreeFlags=$.subtreeFlags&65011712,ye!==null?U=rs(ye,U):(U=za(U,y,f,null),U.flags|=2),U.return=a,p.return=a,p.sibling=U,a.child=p,Pu(null,p),p=a.child,U=r.child.memoizedState,U===null?U=hm(f):(y=U.cachePool,y!==null?($=xi._currentValue,y=y.parent!==$?{parent:$,pool:$}:y):y=Pv(),U={baseLanes:U.baseLanes|f,cachePool:y}),p.memoizedState=U,p.childLanes=fm(r,R,f),a.memoizedState=cm,Pu(r.child,p)):(js(a),f=r.child,r=f.sibling,f=rs(f,{mode:"visible",children:p.children}),f.return=a,f.sibling=null,r!==null&&(R=a.deletions,R===null?(a.deletions=[r],a.flags|=16):R.push(r)),a.child=f,a.memoizedState=null,f)}function dm(r,a){return a=Uh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Uh(r,a){return r=In(22,r,null,a),r.lanes=0,r}function pm(r,a,f){return ka(a,r.child,null,f),r=dm(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Wy(r,a,f){r.lanes|=a;var p=r.alternate;p!==null&&(p.lanes|=a),Ap(r.return,a,f)}function mm(r,a,f,p,y,S){var R=r.memoizedState;R===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y,treeForkCount:S}:(R.isBackwards=a,R.rendering=null,R.renderingStartTime=0,R.last=p,R.tail=f,R.tailMode=y,R.treeForkCount=S)}function jy(r,a,f){var p=a.pendingProps,y=p.revealOrder,S=p.tail;p=p.children;var R=gi.current,U=(R&2)!==0;if(U?(R=R&1|2,a.flags|=128):R&=1,ie(gi,R),Xi(r,a,p,f),p=Nt?vu:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Wy(r,f,a);else if(r.tag===19)Wy(r,f,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(f=a.child,y=null;f!==null;)r=f.alternate,r!==null&&Ch(r)===null&&(y=f),f=f.sibling;f=y,f===null?(y=a.child,a.child=null):(y=f.sibling,f.sibling=null),mm(a,!1,y,f,S,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=a.child,a.child=null;y!==null;){if(r=y.alternate,r!==null&&Ch(r)===null){a.child=y;break}r=y.sibling,y.sibling=f,f=y,y=r}mm(a,!0,f,null,S,p);break;case"together":mm(a,!1,null,null,void 0,p);break;default:a.memoizedState=null}return a.child}function cs(r,a,f){if(r!==null&&(a.dependencies=r.dependencies),Zs|=a.lanes,(f&a.childLanes)===0)if(r!==null){if(Wo(r,a,f,!1),(f&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,f=rs(r,r.pendingProps),a.child=f,f.return=a;r.sibling!==null;)r=r.sibling,f=f.sibling=rs(r,r.pendingProps),f.return=a;f.sibling=null}return a.child}function gm(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&yh(r)))}function WM(r,a,f){switch(a.tag){case 3:He(a,a.stateNode.containerInfo),ks(a,xi,r.memoizedState.cache),Na();break;case 27:case 5:Ve(a);break;case 4:He(a,a.stateNode.containerInfo);break;case 10:ks(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,kp(a),null;break;case 13:var p=a.memoizedState;if(p!==null)return p.dehydrated!==null?(js(a),a.flags|=128,null):(f&a.child.childLanes)!==0?Vy(r,a,f):(js(a),r=cs(r,a,f),r!==null?r.sibling:null);js(a);break;case 19:var y=(r.flags&128)!==0;if(p=(f&a.childLanes)!==0,p||(Wo(r,a,f,!1),p=(f&a.childLanes)!==0),y){if(p)return jy(r,a,f);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(gi,gi.current),p)break;return null;case 22:return a.lanes=0,Fy(r,a,f,a.pendingProps);case 24:ks(a,xi,r.memoizedState.cache)}return cs(r,a,f)}function qy(r,a,f){if(r!==null)if(r.memoizedProps!==a.pendingProps)Si=!0;else{if(!gm(r,f)&&(a.flags&128)===0)return Si=!1,WM(r,a,f);Si=(r.flags&131072)!==0}else Si=!1,Nt&&(a.flags&1048576)!==0&&Tv(a,vu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var p=a.pendingProps;if(r=Ua(a.elementType),a.type=r,typeof r=="function")wp(r)?(p=Va(r,p),a.tag=1,a=ky(null,a,r,p,f)):(a.tag=0,a=um(null,a,r,p,f));else{if(r!=null){var y=r.$$typeof;if(y===D){a.tag=11,a=zy(null,a,r,p,f);break e}else if(y===O){a.tag=14,a=Ny(null,a,r,p,f);break e}}throw a=Z(r)||r,Error(i(306,a,""))}}return a;case 0:return um(r,a,a.type,a.pendingProps,f);case 1:return p=a.type,y=Va(p,a.pendingProps),ky(r,a,p,y,f);case 3:e:{if(He(a,a.stateNode.containerInfo),r===null)throw Error(i(387));p=a.pendingProps;var S=a.memoizedState;y=S.element,Bp(r,a),Mu(a,p,null,f);var R=a.memoizedState;if(p=R.cache,ks(a,xi,p),p!==S.cache&&Dp(a,[xi],f,!0),Eu(),p=R.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:R.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=Gy(r,a,p,f);break e}else if(p!==y){y=fr(Error(i(424)),a),yu(y),a=Gy(r,a,p,f);break e}else for(r=a.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,ti=_r(r.firstChild),ji=a,Nt=!0,Us=null,mr=!0,f=Fv(a,null,p,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Na(),p===y){a=cs(r,a,f);break e}Xi(r,a,p,f)}a=a.child}return a;case 26:return Ih(r,a),r===null?(f=nw(a.type,null,a.pendingProps,null))?a.memoizedState=f:Nt||(f=a.type,r=a.pendingProps,p=tf(ae.current).createElement(f),p[xe]=a,p[ke]=r,Yi(p,f,r),Ze(p),a.stateNode=p):a.memoizedState=nw(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Ve(a),r===null&&Nt&&(p=a.stateNode=ew(a.type,a.pendingProps,ae.current),ji=a,mr=!0,y=ti,ea(a.type)?(Zm=y,ti=_r(p.firstChild)):ti=y),Xi(r,a,a.pendingProps.children,f),Ih(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Nt&&((y=p=ti)&&(p=xC(p,a.type,a.pendingProps,mr),p!==null?(a.stateNode=p,ji=a,ti=_r(p.firstChild),mr=!1,y=!0):y=!1),y||Hs(a)),Ve(a),y=a.type,S=a.pendingProps,R=r!==null?r.memoizedProps:null,p=S.children,Wm(y,S)?p=null:R!==null&&Wm(y,R)&&(a.flags|=32),a.memoizedState!==null&&(y=Vp(r,a,NM,null,null,f),qu._currentValue=y),Ih(r,a),Xi(r,a,p,f),a.child;case 6:return r===null&&Nt&&((r=f=ti)&&(f=wC(f,a.pendingProps,mr),f!==null?(a.stateNode=f,ji=a,ti=null,r=!0):r=!1),r||Hs(a)),null;case 13:return Vy(r,a,f);case 4:return He(a,a.stateNode.containerInfo),p=a.pendingProps,r===null?a.child=ka(a,null,p,f):Xi(r,a,p,f),a.child;case 11:return zy(r,a,a.type,a.pendingProps,f);case 7:return Xi(r,a,a.pendingProps,f),a.child;case 8:return Xi(r,a,a.pendingProps.children,f),a.child;case 12:return Xi(r,a,a.pendingProps.children,f),a.child;case 10:return p=a.pendingProps,ks(a,a.type,p.value),Xi(r,a,p.children,f),a.child;case 9:return y=a.type._context,p=a.pendingProps.children,Fa(a),y=qi(y),p=p(y),a.flags|=1,Xi(r,a,p,f),a.child;case 14:return Ny(r,a,a.type,a.pendingProps,f);case 15:return By(r,a,a.type,a.pendingProps,f);case 19:return jy(r,a,f);case 31:return VM(r,a,f);case 22:return Fy(r,a,f,a.pendingProps);case 24:return Fa(a),p=qi(xi),r===null?(y=Op(),y===null&&(y=Zt,S=Pp(),y.pooledCache=S,S.refCount++,S!==null&&(y.pooledCacheLanes|=f),y=S),a.memoizedState={parent:p,cache:y},Np(a),ks(a,xi,y)):((r.lanes&f)!==0&&(Bp(r,a),Mu(a,null,null,f),Eu()),y=r.memoizedState,S=a.memoizedState,y.parent!==p?(y={parent:p,cache:p},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),ks(a,xi,p)):(p=S.cache,ks(a,xi,p),p!==y.cache&&Dp(a,[xi],f,!0))),Xi(r,a,a.pendingProps.children,f),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function hs(r){r.flags|=4}function _m(r,a,f,p,y){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(yx())r.flags|=8192;else throw Ha=bh,zp}else r.flags&=-16777217}function Xy(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!lw(a))if(yx())r.flags|=8192;else throw Ha=bh,zp}function Hh(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Ji():536870912,r.lanes|=a,il|=a)}function Lu(r,a){if(!Nt)switch(r.tailMode){case"hidden":a=r.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function ii(r){var a=r.alternate!==null&&r.alternate.child===r.child,f=0,p=0;if(a)for(var y=r.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=p,r.childLanes=f,a}function jM(r,a,f){var p=a.pendingProps;switch(Ep(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(a),null;case 1:return ii(a),null;case 3:return f=a.stateNode,p=null,r!==null&&(p=r.memoizedState.cache),a.memoizedState.cache!==p&&(a.flags|=2048),os(xi),Fe(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Vo(a)?hs(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cp())),ii(a),null;case 26:var y=a.type,S=a.memoizedState;return r===null?(hs(a),S!==null?(ii(a),Xy(a,S)):(ii(a),_m(a,y,null,p,f))):S?S!==r.memoizedState?(hs(a),ii(a),Xy(a,S)):(ii(a),a.flags&=-16777217):(r=r.memoizedProps,r!==p&&hs(a),ii(a),_m(a,y,r,p,f)),null;case 27:if(at(a),f=ae.current,y=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==p&&hs(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return ii(a),null}r=me.current,Vo(a)?Mv(a):(r=ew(y,p,f),a.stateNode=r,hs(a))}return ii(a),null;case 5:if(at(a),y=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==p&&hs(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return ii(a),null}if(S=me.current,Vo(a))Mv(a);else{var R=tf(ae.current);switch(S){case 1:S=R.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:S=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":S=R.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":S=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":S=R.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof p.is=="string"?R.createElement("select",{is:p.is}):R.createElement("select"),p.multiple?S.multiple=!0:p.size&&(S.size=p.size);break;default:S=typeof p.is=="string"?R.createElement(y,{is:p.is}):R.createElement(y)}}S[xe]=a,S[ke]=p;e:for(R=a.child;R!==null;){if(R.tag===5||R.tag===6)S.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===a)break e;for(;R.sibling===null;){if(R.return===null||R.return===a)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}a.stateNode=S;e:switch(Yi(S,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&hs(a)}}return ii(a),_m(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,f),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==p&&hs(a);else{if(typeof p!="string"&&a.stateNode===null)throw Error(i(166));if(r=ae.current,Vo(a)){if(r=a.stateNode,f=a.memoizedProps,p=null,y=ji,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}r[xe]=a,r=!!(r.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||Vx(r.nodeValue,f)),r||Hs(a,!0)}else r=tf(r).createTextNode(p),r[xe]=a,a.stateNode=r}return ii(a),null;case 31:if(f=a.memoizedState,r===null||r.memoizedState!==null){if(p=Vo(a),f!==null){if(r===null){if(!p)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[xe]=a}else Na(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ii(a),r=!1}else f=Cp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),r=!0;if(!r)return a.flags&256?(Hn(a),a):(Hn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return ii(a),null;case 13:if(p=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Vo(a),p!==null&&p.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[xe]=a}else Na(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ii(a),y=!1}else y=Cp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Hn(a),a):(Hn(a),null)}return Hn(a),(a.flags&128)!==0?(a.lanes=f,a):(f=p!==null,r=r!==null&&r.memoizedState!==null,f&&(p=a.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==y&&(p.flags|=2048)),f!==r&&f&&(a.child.flags|=8192),Hh(a,a.updateQueue),ii(a),null);case 4:return Fe(),r===null&&Um(a.stateNode.containerInfo),ii(a),null;case 10:return os(a.type),ii(a),null;case 19:if(q(gi),p=a.memoizedState,p===null)return ii(a),null;if(y=(a.flags&128)!==0,S=p.rendering,S===null)if(y)Lu(p,!1);else{if(pi!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(S=Ch(r),S!==null){for(a.flags|=128,Lu(p,!1),r=S.updateQueue,a.updateQueue=r,Hh(a,r),a.subtreeFlags=0,r=f,f=a.child;f!==null;)wv(f,r),f=f.sibling;return ie(gi,gi.current&1|2),Nt&&ss(a,p.treeForkCount),a.child}r=r.sibling}p.tail!==null&&ge()>jh&&(a.flags|=128,y=!0,Lu(p,!1),a.lanes=4194304)}else{if(!y)if(r=Ch(S),r!==null){if(a.flags|=128,y=!0,r=r.updateQueue,a.updateQueue=r,Hh(a,r),Lu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!S.alternate&&!Nt)return ii(a),null}else 2*ge()-p.renderingStartTime>jh&&f!==536870912&&(a.flags|=128,y=!0,Lu(p,!1),a.lanes=4194304);p.isBackwards?(S.sibling=a.child,a.child=S):(r=p.last,r!==null?r.sibling=S:a.child=S,p.last=S)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=ge(),r.sibling=null,f=gi.current,ie(gi,y?f&1|2:f&1),Nt&&ss(a,p.treeForkCount),r):(ii(a),null);case 22:case 23:return Hn(a),Hp(),p=a.memoizedState!==null,r!==null?r.memoizedState!==null!==p&&(a.flags|=8192):p&&(a.flags|=8192),p?(f&536870912)!==0&&(a.flags&128)===0&&(ii(a),a.subtreeFlags&6&&(a.flags|=8192)):ii(a),f=a.updateQueue,f!==null&&Hh(a,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==f&&(a.flags|=2048),r!==null&&q(Ia),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),os(xi),ii(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function qM(r,a){switch(Ep(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return os(xi),Fe(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return at(a),null;case 31:if(a.memoizedState!==null){if(Hn(a),a.alternate===null)throw Error(i(340));Na()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Hn(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Na()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return q(gi),null;case 4:return Fe(),null;case 10:return os(a.type),null;case 22:case 23:return Hn(a),Hp(),r!==null&&q(Ia),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return os(xi),null;case 25:return null;default:return null}}function Yy(r,a){switch(Ep(a),a.tag){case 3:os(xi),Fe();break;case 26:case 27:case 5:at(a);break;case 4:Fe();break;case 31:a.memoizedState!==null&&Hn(a);break;case 13:Hn(a);break;case 19:q(gi);break;case 10:os(a.type);break;case 22:case 23:Hn(a),Hp(),r!==null&&q(Ia);break;case 24:os(xi)}}function Ou(r,a){try{var f=a.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&r)===r){p=void 0;var S=f.create,R=f.inst;p=S(),R.destroy=p}f=f.next}while(f!==y)}}catch(U){Wt(a,a.return,U)}}function Xs(r,a,f){try{var p=a.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&r)===r){var R=p.inst,U=R.destroy;if(U!==void 0){R.destroy=void 0,y=a;var $=f,ye=U;try{ye()}catch(Re){Wt(y,$,Re)}}}p=p.next}while(p!==S)}}catch(Re){Wt(a,a.return,Re)}}function Zy(r){var a=r.updateQueue;if(a!==null){var f=r.stateNode;try{Uv(a,f)}catch(p){Wt(r,r.return,p)}}}function Ky(r,a,f){f.props=Va(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(p){Wt(r,a,p)}}function zu(r,a){try{var f=r.ref;if(f!==null){switch(r.tag){case 26:case 27:case 5:var p=r.stateNode;break;case 30:p=r.stateNode;break;default:p=r.stateNode}typeof f=="function"?r.refCleanup=f(p):f.current=p}}catch(y){Wt(r,a,y)}}function kr(r,a){var f=r.ref,p=r.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(y){Wt(r,a,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){Wt(r,a,y)}else f.current=null}function Qy(r){var a=r.type,f=r.memoizedProps,p=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(y){Wt(r,r.return,y)}}function vm(r,a,f){try{var p=r.stateNode;pC(p,r.type,f,a),p[ke]=a}catch(y){Wt(r,r.return,y)}}function Jy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ea(r.type)||r.tag===4}function ym(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Jy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ea(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function xm(r,a,f){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(r,a):(a=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,a.appendChild(r),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=is));else if(p!==4&&(p===27&&ea(r.type)&&(f=r.stateNode,a=null),r=r.child,r!==null))for(xm(r,a,f),r=r.sibling;r!==null;)xm(r,a,f),r=r.sibling}function kh(r,a,f){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?f.insertBefore(r,a):f.appendChild(r);else if(p!==4&&(p===27&&ea(r.type)&&(f=r.stateNode),r=r.child,r!==null))for(kh(r,a,f),r=r.sibling;r!==null;)kh(r,a,f),r=r.sibling}function $y(r){var a=r.stateNode,f=r.memoizedProps;try{for(var p=r.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Yi(a,p,f),a[xe]=r,a[ke]=f}catch(S){Wt(r,r.return,S)}}var fs=!1,bi=!1,wm=!1,ex=typeof WeakSet=="function"?WeakSet:Set,Ui=null;function XM(r,a){if(r=r.containerInfo,Gm=uf,r=fv(r),pp(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var R=0,U=-1,$=-1,ye=0,Re=0,Pe=r,Se=null;t:for(;;){for(var Ee;Pe!==f||y!==0&&Pe.nodeType!==3||(U=R+y),Pe!==S||p!==0&&Pe.nodeType!==3||($=R+p),Pe.nodeType===3&&(R+=Pe.nodeValue.length),(Ee=Pe.firstChild)!==null;)Se=Pe,Pe=Ee;for(;;){if(Pe===r)break t;if(Se===f&&++ye===y&&(U=R),Se===S&&++Re===p&&($=R),(Ee=Pe.nextSibling)!==null)break;Pe=Se,Se=Pe.parentNode}Pe=Ee}f=U===-1||$===-1?null:{start:U,end:$}}else f=null}f=f||{start:0,end:0}}else f=null;for(Vm={focusedElem:r,selectionRange:f},uf=!1,Ui=a;Ui!==null;)if(a=Ui,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Ui=r;else for(;Ui!==null;){switch(a=Ui,S=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(f=0;f<r.length;f++)y=r[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&S!==null){r=void 0,f=a,y=S.memoizedProps,S=S.memoizedState,p=f.stateNode;try{var Je=Va(f.type,y);r=p.getSnapshotBeforeUpdate(Je,S),p.__reactInternalSnapshotBeforeUpdate=r}catch(ct){Wt(f,f.return,ct)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,f=r.nodeType,f===9)qm(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":qm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Ui=r;break}Ui=a.return}}function tx(r,a,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:ps(r,f),p&4&&Ou(5,f);break;case 1:if(ps(r,f),p&4)if(r=f.stateNode,a===null)try{r.componentDidMount()}catch(R){Wt(f,f.return,R)}else{var y=Va(f.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(y,a,r.__reactInternalSnapshotBeforeUpdate)}catch(R){Wt(f,f.return,R)}}p&64&&Zy(f),p&512&&zu(f,f.return);break;case 3:if(ps(r,f),p&64&&(r=f.updateQueue,r!==null)){if(a=null,f.child!==null)switch(f.child.tag){case 27:case 5:a=f.child.stateNode;break;case 1:a=f.child.stateNode}try{Uv(r,a)}catch(R){Wt(f,f.return,R)}}break;case 27:a===null&&p&4&&$y(f);case 26:case 5:ps(r,f),a===null&&p&4&&Qy(f),p&512&&zu(f,f.return);break;case 12:ps(r,f);break;case 31:ps(r,f),p&4&&rx(r,f);break;case 13:ps(r,f),p&4&&sx(r,f),p&64&&(r=f.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(f=iC.bind(null,f),SC(r,f))));break;case 22:if(p=f.memoizedState!==null||fs,!p){a=a!==null&&a.memoizedState!==null||bi,y=fs;var S=bi;fs=p,(bi=a)&&!S?ms(r,f,(f.subtreeFlags&8772)!==0):ps(r,f),fs=y,bi=S}break;case 30:break;default:ps(r,f)}}function ix(r){var a=r.alternate;a!==null&&(r.alternate=null,ix(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&wt(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var si=null,bn=!1;function ds(r,a,f){for(f=f.child;f!==null;)nx(r,a,f),f=f.sibling}function nx(r,a,f){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(k,f)}catch{}switch(f.tag){case 26:bi||kr(f,a),ds(r,a,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:bi||kr(f,a);var p=si,y=bn;ea(f.type)&&(si=f.stateNode,bn=!1),ds(r,a,f),Vu(f.stateNode),si=p,bn=y;break;case 5:bi||kr(f,a);case 6:if(p=si,y=bn,si=null,ds(r,a,f),si=p,bn=y,si!==null)if(bn)try{(si.nodeType===9?si.body:si.nodeName==="HTML"?si.ownerDocument.body:si).removeChild(f.stateNode)}catch(S){Wt(f,a,S)}else try{si.removeChild(f.stateNode)}catch(S){Wt(f,a,S)}break;case 18:si!==null&&(bn?(r=si,Zx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,f.stateNode),cl(r)):Zx(si,f.stateNode));break;case 4:p=si,y=bn,si=f.stateNode.containerInfo,bn=!0,ds(r,a,f),si=p,bn=y;break;case 0:case 11:case 14:case 15:Xs(2,f,a),bi||Xs(4,f,a),ds(r,a,f);break;case 1:bi||(kr(f,a),p=f.stateNode,typeof p.componentWillUnmount=="function"&&Ky(f,a,p)),ds(r,a,f);break;case 21:ds(r,a,f);break;case 22:bi=(p=bi)||f.memoizedState!==null,ds(r,a,f),bi=p;break;default:ds(r,a,f)}}function rx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{cl(r)}catch(f){Wt(a,a.return,f)}}}function sx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cl(r)}catch(f){Wt(a,a.return,f)}}function YM(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new ex),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new ex),a;default:throw Error(i(435,r.tag))}}function Gh(r,a){var f=YM(r);a.forEach(function(p){if(!f.has(p)){f.add(p);var y=nC.bind(null,r,p);p.then(y,y)}})}function Tn(r,a){var f=a.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p],S=r,R=a,U=R;e:for(;U!==null;){switch(U.tag){case 27:if(ea(U.type)){si=U.stateNode,bn=!1;break e}break;case 5:si=U.stateNode,bn=!1;break e;case 3:case 4:si=U.stateNode.containerInfo,bn=!0;break e}U=U.return}if(si===null)throw Error(i(160));nx(S,R,y),si=null,bn=!1,S=y.alternate,S!==null&&(S.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ax(a,r),a=a.sibling}var Cr=null;function ax(r,a){var f=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Tn(a,r),En(r),p&4&&(Xs(3,r,r.return),Ou(3,r),Xs(5,r,r.return));break;case 1:Tn(a,r),En(r),p&512&&(bi||f===null||kr(f,f.return)),p&64&&fs&&(r=r.updateQueue,r!==null&&(p=r.callbacks,p!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var y=Cr;if(Tn(a,r),En(r),p&512&&(bi||f===null||kr(f,f.return)),p&4){var S=f!==null?f.memoizedState:null;if(p=r.memoizedState,f===null)if(p===null)if(r.stateNode===null){e:{p=r.type,f=r.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":S=y.getElementsByTagName("title")[0],(!S||S[rt]||S[xe]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=y.createElement(p),y.head.insertBefore(S,y.querySelector("head > title"))),Yi(S,p,f),S[xe]=r,Ze(S),p=S;break e;case"link":var R=aw("link","href",y).get(p+(f.href||""));if(R){for(var U=0;U<R.length;U++)if(S=R[U],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){R.splice(U,1);break t}}S=y.createElement(p),Yi(S,p,f),y.head.appendChild(S);break;case"meta":if(R=aw("meta","content",y).get(p+(f.content||""))){for(U=0;U<R.length;U++)if(S=R[U],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){R.splice(U,1);break t}}S=y.createElement(p),Yi(S,p,f),y.head.appendChild(S);break;default:throw Error(i(468,p))}S[xe]=r,Ze(S),p=S}r.stateNode=p}else ow(y,r.type,r.stateNode);else r.stateNode=sw(y,p,r.memoizedProps);else S!==p?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,p===null?ow(y,r.type,r.stateNode):sw(y,p,r.memoizedProps)):p===null&&r.stateNode!==null&&vm(r,r.memoizedProps,f.memoizedProps)}break;case 27:Tn(a,r),En(r),p&512&&(bi||f===null||kr(f,f.return)),f!==null&&p&4&&vm(r,r.memoizedProps,f.memoizedProps);break;case 5:if(Tn(a,r),En(r),p&512&&(bi||f===null||kr(f,f.return)),r.flags&32){y=r.stateNode;try{Oo(y,"")}catch(Je){Wt(r,r.return,Je)}}p&4&&r.stateNode!=null&&(y=r.memoizedProps,vm(r,y,f!==null?f.memoizedProps:y)),p&1024&&(wm=!0);break;case 6:if(Tn(a,r),En(r),p&4){if(r.stateNode===null)throw Error(i(162));p=r.memoizedProps,f=r.stateNode;try{f.nodeValue=p}catch(Je){Wt(r,r.return,Je)}}break;case 3:if(sf=null,y=Cr,Cr=nf(a.containerInfo),Tn(a,r),Cr=y,En(r),p&4&&f!==null&&f.memoizedState.isDehydrated)try{cl(a.containerInfo)}catch(Je){Wt(r,r.return,Je)}wm&&(wm=!1,ox(r));break;case 4:p=Cr,Cr=nf(r.stateNode.containerInfo),Tn(a,r),En(r),Cr=p;break;case 12:Tn(a,r),En(r);break;case 31:Tn(a,r),En(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Gh(r,p)));break;case 13:Tn(a,r),En(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Wh=ge()),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Gh(r,p)));break;case 22:y=r.memoizedState!==null;var $=f!==null&&f.memoizedState!==null,ye=fs,Re=bi;if(fs=ye||y,bi=Re||$,Tn(a,r),bi=Re,fs=ye,En(r),p&8192)e:for(a=r.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(f===null||$||fs||bi||Wa(r)),f=null,a=r;;){if(a.tag===5||a.tag===26){if(f===null){$=f=a;try{if(S=$.stateNode,y)R=S.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{U=$.stateNode;var Pe=$.memoizedProps.style,Se=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null;U.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Je){Wt($,$.return,Je)}}}else if(a.tag===6){if(f===null){$=a;try{$.stateNode.nodeValue=y?"":$.memoizedProps}catch(Je){Wt($,$.return,Je)}}}else if(a.tag===18){if(f===null){$=a;try{var Ee=$.stateNode;y?Kx(Ee,!0):Kx($.stateNode,!1)}catch(Je){Wt($,$.return,Je)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}p&4&&(p=r.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Gh(r,f))));break;case 19:Tn(a,r),En(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Gh(r,p)));break;case 30:break;case 21:break;default:Tn(a,r),En(r)}}function En(r){var a=r.flags;if(a&2){try{for(var f,p=r.return;p!==null;){if(Jy(p)){f=p;break}p=p.return}if(f==null)throw Error(i(160));switch(f.tag){case 27:var y=f.stateNode,S=ym(r);kh(r,S,y);break;case 5:var R=f.stateNode;f.flags&32&&(Oo(R,""),f.flags&=-33);var U=ym(r);kh(r,U,R);break;case 3:case 4:var $=f.stateNode.containerInfo,ye=ym(r);xm(r,ye,$);break;default:throw Error(i(161))}}catch(Re){Wt(r,r.return,Re)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function ox(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;ox(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function ps(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)tx(r,a.alternate,a),a=a.sibling}function Wa(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Xs(4,a,a.return),Wa(a);break;case 1:kr(a,a.return);var f=a.stateNode;typeof f.componentWillUnmount=="function"&&Ky(a,a.return,f),Wa(a);break;case 27:Vu(a.stateNode);case 26:case 5:kr(a,a.return),Wa(a);break;case 22:a.memoizedState===null&&Wa(a);break;case 30:Wa(a);break;default:Wa(a)}r=r.sibling}}function ms(r,a,f){for(f=f&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var p=a.alternate,y=r,S=a,R=S.flags;switch(S.tag){case 0:case 11:case 15:ms(y,S,f),Ou(4,S);break;case 1:if(ms(y,S,f),p=S,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ye){Wt(p,p.return,ye)}if(p=S,y=p.updateQueue,y!==null){var U=p.stateNode;try{var $=y.shared.hiddenCallbacks;if($!==null)for(y.shared.hiddenCallbacks=null,y=0;y<$.length;y++)Iv($[y],U)}catch(ye){Wt(p,p.return,ye)}}f&&R&64&&Zy(S),zu(S,S.return);break;case 27:$y(S);case 26:case 5:ms(y,S,f),f&&p===null&&R&4&&Qy(S),zu(S,S.return);break;case 12:ms(y,S,f);break;case 31:ms(y,S,f),f&&R&4&&rx(y,S);break;case 13:ms(y,S,f),f&&R&4&&sx(y,S);break;case 22:S.memoizedState===null&&ms(y,S,f),zu(S,S.return);break;case 30:break;default:ms(y,S,f)}a=a.sibling}}function Sm(r,a){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&xu(f))}function bm(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&xu(r))}function Rr(r,a,f,p){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)lx(r,a,f,p),a=a.sibling}function lx(r,a,f,p){var y=a.flags;switch(a.tag){case 0:case 11:case 15:Rr(r,a,f,p),y&2048&&Ou(9,a);break;case 1:Rr(r,a,f,p);break;case 3:Rr(r,a,f,p),y&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&xu(r)));break;case 12:if(y&2048){Rr(r,a,f,p),r=a.stateNode;try{var S=a.memoizedProps,R=S.id,U=S.onPostCommit;typeof U=="function"&&U(R,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch($){Wt(a,a.return,$)}}else Rr(r,a,f,p);break;case 31:Rr(r,a,f,p);break;case 13:Rr(r,a,f,p);break;case 23:break;case 22:S=a.stateNode,R=a.alternate,a.memoizedState!==null?S._visibility&2?Rr(r,a,f,p):Nu(r,a):S._visibility&2?Rr(r,a,f,p):(S._visibility|=2,$o(r,a,f,p,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Sm(R,a);break;case 24:Rr(r,a,f,p),y&2048&&bm(a.alternate,a);break;default:Rr(r,a,f,p)}}function $o(r,a,f,p,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var S=r,R=a,U=f,$=p,ye=R.flags;switch(R.tag){case 0:case 11:case 15:$o(S,R,U,$,y),Ou(8,R);break;case 23:break;case 22:var Re=R.stateNode;R.memoizedState!==null?Re._visibility&2?$o(S,R,U,$,y):Nu(S,R):(Re._visibility|=2,$o(S,R,U,$,y)),y&&ye&2048&&Sm(R.alternate,R);break;case 24:$o(S,R,U,$,y),y&&ye&2048&&bm(R.alternate,R);break;default:$o(S,R,U,$,y)}a=a.sibling}}function Nu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var f=r,p=a,y=p.flags;switch(p.tag){case 22:Nu(f,p),y&2048&&Sm(p.alternate,p);break;case 24:Nu(f,p),y&2048&&bm(p.alternate,p);break;default:Nu(f,p)}a=a.sibling}}var Bu=8192;function el(r,a,f){if(r.subtreeFlags&Bu)for(r=r.child;r!==null;)ux(r,a,f),r=r.sibling}function ux(r,a,f){switch(r.tag){case 26:el(r,a,f),r.flags&Bu&&r.memoizedState!==null&&zC(f,Cr,r.memoizedState,r.memoizedProps);break;case 5:el(r,a,f);break;case 3:case 4:var p=Cr;Cr=nf(r.stateNode.containerInfo),el(r,a,f),Cr=p;break;case 22:r.memoizedState===null&&(p=r.alternate,p!==null&&p.memoizedState!==null?(p=Bu,Bu=16777216,el(r,a,f),Bu=p):el(r,a,f));break;default:el(r,a,f)}}function cx(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Fu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var p=a[f];Ui=p,fx(p,r)}cx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)hx(r),r=r.sibling}function hx(r){switch(r.tag){case 0:case 11:case 15:Fu(r),r.flags&2048&&Xs(9,r,r.return);break;case 3:Fu(r);break;case 12:Fu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Vh(r)):Fu(r);break;default:Fu(r)}}function Vh(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var p=a[f];Ui=p,fx(p,r)}cx(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Xs(8,a,a.return),Vh(a);break;case 22:f=a.stateNode,f._visibility&2&&(f._visibility&=-3,Vh(a));break;default:Vh(a)}r=r.sibling}}function fx(r,a){for(;Ui!==null;){var f=Ui;switch(f.tag){case 0:case 11:case 15:Xs(8,f,a);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:xu(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Ui=p;else e:for(f=r;Ui!==null;){p=Ui;var y=p.sibling,S=p.return;if(ix(p),p===f){Ui=null;break e}if(y!==null){y.return=S,Ui=y;break e}Ui=S}}}var ZM={getCacheForType:function(r){var a=qi(xi),f=a.data.get(r);return f===void 0&&(f=r(),a.data.set(r,f)),f},cacheSignal:function(){return qi(xi).controller.signal}},KM=typeof WeakMap=="function"?WeakMap:Map,Ht=0,Zt=null,Pt=null,Ot=0,Vt=0,kn=null,Ys=!1,tl=!1,Tm=!1,gs=0,pi=0,Zs=0,ja=0,Em=0,Gn=0,il=0,Iu=null,Mn=null,Mm=!1,Wh=0,dx=0,jh=1/0,qh=null,Ks=null,Ci=0,Qs=null,nl=null,_s=0,Cm=0,Rm=null,px=null,Uu=0,Am=null;function Vn(){return(Ht&2)!==0&&Ot!==0?Ot&-Ot:Y.T!==null?Nm():le()}function mx(){if(Gn===0)if((Ot&536870912)===0||Nt){var r=Oe;Oe<<=1,(Oe&3932160)===0&&(Oe=262144),Gn=r}else Gn=536870912;return r=Un.current,r!==null&&(r.flags|=32),Gn}function Cn(r,a,f){(r===Zt&&(Vt===2||Vt===9)||r.cancelPendingCommit!==null)&&(rl(r,0),Js(r,Ot,Gn,!1)),Qe(r,f),((Ht&2)===0||r!==Zt)&&(r===Zt&&((Ht&2)===0&&(ja|=f),pi===4&&Js(r,Ot,Gn,!1)),Gr(r))}function gx(r,a,f){if((Ht&6)!==0)throw Error(i(327));var p=!f&&(a&127)===0&&(a&r.expiredLanes)===0||Ut(r,a),y=p?$M(r,a):Pm(r,a,!0),S=p;do{if(y===0){tl&&!p&&Js(r,a,0,!1);break}else{if(f=r.current.alternate,S&&!QM(f)){y=Pm(r,a,!1),S=!1;continue}if(y===2){if(S=a,r.errorRecoveryDisabledLanes&S)var R=0;else R=r.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){a=R;e:{var U=r;y=Iu;var $=U.current.memoizedState.isDehydrated;if($&&(rl(U,R).flags|=256),R=Pm(U,R,!1),R!==2){if(Tm&&!$){U.errorRecoveryDisabledLanes|=S,ja|=S,y=4;break e}S=Mn,Mn=y,S!==null&&(Mn===null?Mn=S:Mn.push.apply(Mn,S))}y=R}if(S=!1,y!==2)continue}}if(y===1){rl(r,0),Js(r,a,0,!0);break}e:{switch(p=r,S=y,S){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Js(p,a,Gn,!Ys);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=Wh+300-ge(),10<y)){if(Js(p,a,Gn,!Ys),ut(p,0,!0)!==0)break e;_s=a,p.timeoutHandle=Xx(_x.bind(null,p,f,Mn,qh,Mm,a,Gn,ja,il,Ys,S,"Throttled",-0,0),y);break e}_x(p,f,Mn,qh,Mm,a,Gn,ja,il,Ys,S,null,-0,0)}}break}while(!0);Gr(r)}function _x(r,a,f,p,y,S,R,U,$,ye,Re,Pe,Se,Ee){if(r.timeoutHandle=-1,Pe=a.subtreeFlags,Pe&8192||(Pe&16785408)===16785408){Pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:is},ux(a,S,Pe);var Je=(S&62914560)===S?Wh-ge():(S&4194048)===S?dx-ge():0;if(Je=NC(Pe,Je),Je!==null){_s=S,r.cancelPendingCommit=Je(Ex.bind(null,r,a,S,f,p,y,R,U,$,Re,Pe,null,Se,Ee)),Js(r,S,R,!ye);return}}Ex(r,a,S,f,p,y,R,U,$)}function QM(r){for(var a=r;;){var f=a.tag;if((f===0||f===11||f===15)&&a.flags&16384&&(f=a.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var y=f[p],S=y.getSnapshot;y=y.value;try{if(!Fn(S(),y))return!1}catch{return!1}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Js(r,a,f,p){a&=~Em,a&=~ja,r.suspendedLanes|=a,r.pingedLanes&=~a,p&&(r.warmLanes|=a),p=r.expirationTimes;for(var y=a;0<y;){var S=31-ze(y),R=1<<S;p[S]=-1,y&=~R}f!==0&&qe(r,f,a)}function Xh(){return(Ht&6)===0?(Hu(0),!1):!0}function Dm(){if(Pt!==null){if(Vt===0)var r=Pt.return;else r=Pt,as=Ba=null,qp(r),Yo=null,Su=0,r=Pt;for(;r!==null;)Yy(r.alternate,r),r=r.return;Pt=null}}function rl(r,a){var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,_C(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),_s=0,Dm(),Zt=r,Pt=f=rs(r.current,null),Ot=a,Vt=0,kn=null,Ys=!1,tl=Ut(r,a),Tm=!1,il=Gn=Em=ja=Zs=pi=0,Mn=Iu=null,Mm=!1,(a&8)!==0&&(a|=a&32);var p=r.entangledLanes;if(p!==0)for(r=r.entanglements,p&=a;0<p;){var y=31-ze(p),S=1<<y;a|=r[y],p&=~S}return gs=a,ph(),f}function vx(r,a){St=null,Y.H=Du,a===Xo||a===Sh?(a=zv(),Vt=3):a===zp?(a=zv(),Vt=4):Vt=a===lm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,kn=a,Pt===null&&(pi=1,Bh(r,fr(a,r.current)))}function yx(){var r=Un.current;return r===null?!0:(Ot&4194048)===Ot?gr===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?r===gr:!1}function xx(){var r=Y.H;return Y.H=Du,r===null?Du:r}function wx(){var r=Y.A;return Y.A=ZM,r}function Yh(){pi=4,Ys||(Ot&4194048)!==Ot&&Un.current!==null||(tl=!0),(Zs&134217727)===0&&(ja&134217727)===0||Zt===null||Js(Zt,Ot,Gn,!1)}function Pm(r,a,f){var p=Ht;Ht|=2;var y=xx(),S=wx();(Zt!==r||Ot!==a)&&(qh=null,rl(r,a)),a=!1;var R=pi;e:do try{if(Vt!==0&&Pt!==null){var U=Pt,$=kn;switch(Vt){case 8:Dm(),R=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(a=!0);var ye=Vt;if(Vt=0,kn=null,sl(r,U,$,ye),f&&tl){R=0;break e}break;default:ye=Vt,Vt=0,kn=null,sl(r,U,$,ye)}}JM(),R=pi;break}catch(Re){vx(r,Re)}while(!0);return a&&r.shellSuspendCounter++,as=Ba=null,Ht=p,Y.H=y,Y.A=S,Pt===null&&(Zt=null,Ot=0,ph()),R}function JM(){for(;Pt!==null;)Sx(Pt)}function $M(r,a){var f=Ht;Ht|=2;var p=xx(),y=wx();Zt!==r||Ot!==a?(qh=null,jh=ge()+500,rl(r,a)):tl=Ut(r,a);e:do try{if(Vt!==0&&Pt!==null){a=Pt;var S=kn;t:switch(Vt){case 1:Vt=0,kn=null,sl(r,a,S,1);break;case 2:case 9:if(Lv(S)){Vt=0,kn=null,bx(a);break}a=function(){Vt!==2&&Vt!==9||Zt!==r||(Vt=7),Gr(r)},S.then(a,a);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:Lv(S)?(Vt=0,kn=null,bx(a)):(Vt=0,kn=null,sl(r,a,S,7));break;case 5:var R=null;switch(Pt.tag){case 26:R=Pt.memoizedState;case 5:case 27:var U=Pt;if(R?lw(R):U.stateNode.complete){Vt=0,kn=null;var $=U.sibling;if($!==null)Pt=$;else{var ye=U.return;ye!==null?(Pt=ye,Zh(ye)):Pt=null}break t}}Vt=0,kn=null,sl(r,a,S,5);break;case 6:Vt=0,kn=null,sl(r,a,S,6);break;case 8:Dm(),pi=6;break e;default:throw Error(i(462))}}eC();break}catch(Re){vx(r,Re)}while(!0);return as=Ba=null,Y.H=p,Y.A=y,Ht=f,Pt!==null?0:(Zt=null,Ot=0,ph(),pi)}function eC(){for(;Pt!==null&&!H();)Sx(Pt)}function Sx(r){var a=qy(r.alternate,r,gs);r.memoizedProps=r.pendingProps,a===null?Zh(r):Pt=a}function bx(r){var a=r,f=a.alternate;switch(a.tag){case 15:case 0:a=Hy(f,a,a.pendingProps,a.type,void 0,Ot);break;case 11:a=Hy(f,a,a.pendingProps,a.type.render,a.ref,Ot);break;case 5:qp(a);default:Yy(f,a),a=Pt=wv(a,gs),a=qy(f,a,gs)}r.memoizedProps=r.pendingProps,a===null?Zh(r):Pt=a}function sl(r,a,f,p){as=Ba=null,qp(a),Yo=null,Su=0;var y=a.return;try{if(GM(r,y,a,f,Ot)){pi=1,Bh(r,fr(f,r.current)),Pt=null;return}}catch(S){if(y!==null)throw Pt=y,S;pi=1,Bh(r,fr(f,r.current)),Pt=null;return}a.flags&32768?(Nt||p===1?r=!0:tl||(Ot&536870912)!==0?r=!1:(Ys=r=!0,(p===2||p===9||p===3||p===6)&&(p=Un.current,p!==null&&p.tag===13&&(p.flags|=16384))),Tx(a,r)):Zh(a)}function Zh(r){var a=r;do{if((a.flags&32768)!==0){Tx(a,Ys);return}r=a.return;var f=jM(a.alternate,a,gs);if(f!==null){Pt=f;return}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=r}while(a!==null);pi===0&&(pi=5)}function Tx(r,a){do{var f=qM(r.alternate,r);if(f!==null){f.flags&=32767,Pt=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!a&&(r=r.sibling,r!==null)){Pt=r;return}Pt=r=f}while(r!==null);pi=6,Pt=null}function Ex(r,a,f,p,y,S,R,U,$){r.cancelPendingCommit=null;do Kh();while(Ci!==0);if((Ht&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(S=a.lanes|a.childLanes,S|=yp,gt(r,f,S,R,U,$),r===Zt&&(Pt=Zt=null,Ot=0),nl=a,Qs=r,_s=f,Cm=S,Rm=y,px=p,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,rC(Ue,function(){return Dx(),null})):(r.callbackNode=null,r.callbackPriority=0),p=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||p){p=Y.T,Y.T=null,y=Q.p,Q.p=2,R=Ht,Ht|=4;try{XM(r,a,f)}finally{Ht=R,Q.p=y,Y.T=p}}Ci=1,Mx(),Cx(),Rx()}}function Mx(){if(Ci===1){Ci=0;var r=Qs,a=nl,f=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||f){f=Y.T,Y.T=null;var p=Q.p;Q.p=2;var y=Ht;Ht|=4;try{ax(a,r);var S=Vm,R=fv(r.containerInfo),U=S.focusedElem,$=S.selectionRange;if(R!==U&&U&&U.ownerDocument&&hv(U.ownerDocument.documentElement,U)){if($!==null&&pp(U)){var ye=$.start,Re=$.end;if(Re===void 0&&(Re=ye),"selectionStart"in U)U.selectionStart=ye,U.selectionEnd=Math.min(Re,U.value.length);else{var Pe=U.ownerDocument||document,Se=Pe&&Pe.defaultView||window;if(Se.getSelection){var Ee=Se.getSelection(),Je=U.textContent.length,ct=Math.min($.start,Je),Yt=$.end===void 0?ct:Math.min($.end,Je);!Ee.extend&&ct>Yt&&(R=Yt,Yt=ct,ct=R);var de=cv(U,ct),re=cv(U,Yt);if(de&&re&&(Ee.rangeCount!==1||Ee.anchorNode!==de.node||Ee.anchorOffset!==de.offset||Ee.focusNode!==re.node||Ee.focusOffset!==re.offset)){var ve=Pe.createRange();ve.setStart(de.node,de.offset),Ee.removeAllRanges(),ct>Yt?(Ee.addRange(ve),Ee.extend(re.node,re.offset)):(ve.setEnd(re.node,re.offset),Ee.addRange(ve))}}}}for(Pe=[],Ee=U;Ee=Ee.parentNode;)Ee.nodeType===1&&Pe.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Pe.length;U++){var Ae=Pe[U];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}uf=!!Gm,Vm=Gm=null}finally{Ht=y,Q.p=p,Y.T=f}}r.current=a,Ci=2}}function Cx(){if(Ci===2){Ci=0;var r=Qs,a=nl,f=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||f){f=Y.T,Y.T=null;var p=Q.p;Q.p=2;var y=Ht;Ht|=4;try{tx(r,a.alternate,a)}finally{Ht=y,Q.p=p,Y.T=f}}Ci=3}}function Rx(){if(Ci===4||Ci===3){Ci=0,B();var r=Qs,a=nl,f=_s,p=px;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ci=5:(Ci=0,nl=Qs=null,Ax(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(Ks=null),W(f),a=a.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(k,a,void 0,(a.current.flags&128)===128)}catch{}if(p!==null){a=Y.T,y=Q.p,Q.p=2,Y.T=null;try{for(var S=r.onRecoverableError,R=0;R<p.length;R++){var U=p[R];S(U.value,{componentStack:U.stack})}}finally{Y.T=a,Q.p=y}}(_s&3)!==0&&Kh(),Gr(r),y=r.pendingLanes,(f&261930)!==0&&(y&42)!==0?r===Am?Uu++:(Uu=0,Am=r):Uu=0,Hu(0)}}function Ax(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,xu(a)))}function Kh(){return Mx(),Cx(),Rx(),Dx()}function Dx(){if(Ci!==5)return!1;var r=Qs,a=Cm;Cm=0;var f=W(_s),p=Y.T,y=Q.p;try{Q.p=32>f?32:f,Y.T=null,f=Rm,Rm=null;var S=Qs,R=_s;if(Ci=0,nl=Qs=null,_s=0,(Ht&6)!==0)throw Error(i(331));var U=Ht;if(Ht|=4,hx(S.current),lx(S,S.current,R,f),Ht=U,Hu(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(k,S)}catch{}return!0}finally{Q.p=y,Y.T=p,Ax(r,a)}}function Px(r,a,f){a=fr(f,a),a=om(r.stateNode,a,2),r=Ws(r,a,2),r!==null&&(Qe(r,2),Gr(r))}function Wt(r,a,f){if(r.tag===3)Px(r,r,f);else for(;a!==null;){if(a.tag===3){Px(a,r,f);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ks===null||!Ks.has(p))){r=fr(f,r),f=Ly(2),p=Ws(a,f,2),p!==null&&(Oy(f,p,a,r),Qe(p,2),Gr(p));break}}a=a.return}}function Lm(r,a,f){var p=r.pingCache;if(p===null){p=r.pingCache=new KM;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(f)||(Tm=!0,y.add(f),r=tC.bind(null,r,a,f),a.then(r,r))}function tC(r,a,f){var p=r.pingCache;p!==null&&p.delete(a),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,Zt===r&&(Ot&f)===f&&(pi===4||pi===3&&(Ot&62914560)===Ot&&300>ge()-Wh?(Ht&2)===0&&rl(r,0):Em|=f,il===Ot&&(il=0)),Gr(r)}function Lx(r,a){a===0&&(a=Ji()),r=Oa(r,a),r!==null&&(Qe(r,a),Gr(r))}function iC(r){var a=r.memoizedState,f=0;a!==null&&(f=a.retryLane),Lx(r,f)}function nC(r,a){var f=0;switch(r.tag){case 31:case 13:var p=r.stateNode,y=r.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=r.stateNode;break;case 22:p=r.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(a),Lx(r,f)}function rC(r,a){return Ne(r,a)}var Qh=null,al=null,Om=!1,Jh=!1,zm=!1,$s=0;function Gr(r){r!==al&&r.next===null&&(al===null?Qh=al=r:al=al.next=r),Jh=!0,Om||(Om=!0,aC())}function Hu(r,a){if(!zm&&Jh){zm=!0;do for(var f=!1,p=Qh;p!==null;){if(r!==0){var y=p.pendingLanes;if(y===0)var S=0;else{var R=p.suspendedLanes,U=p.pingedLanes;S=(1<<31-ze(42|r)+1)-1,S&=y&~(R&~U),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,Bx(p,S))}else S=Ot,S=ut(p,p===Zt?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(S&3)===0||Ut(p,S)||(f=!0,Bx(p,S));p=p.next}while(f);zm=!1}}function sC(){Ox()}function Ox(){Jh=Om=!1;var r=0;$s!==0&&gC()&&(r=$s);for(var a=ge(),f=null,p=Qh;p!==null;){var y=p.next,S=zx(p,a);S===0?(p.next=null,f===null?Qh=y:f.next=y,y===null&&(al=f)):(f=p,(r!==0||(S&3)!==0)&&(Jh=!0)),p=y}Ci!==0&&Ci!==5||Hu(r),$s!==0&&($s=0)}function zx(r,a){for(var f=r.suspendedLanes,p=r.pingedLanes,y=r.expirationTimes,S=r.pendingLanes&-62914561;0<S;){var R=31-ze(S),U=1<<R,$=y[R];$===-1?((U&f)===0||(U&p)!==0)&&(y[R]=jt(U,a)):$<=a&&(r.expiredLanes|=U),S&=~U}if(a=Zt,f=Ot,f=ut(r,r===a?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p=r.callbackNode,f===0||r===a&&(Vt===2||Vt===9)||r.cancelPendingCommit!==null)return p!==null&&p!==null&&De(p),r.callbackNode=null,r.callbackPriority=0;if((f&3)===0||Ut(r,f)){if(a=f&-f,a===r.callbackPriority)return a;switch(p!==null&&De(p),W(f)){case 2:case 8:f=Le;break;case 32:f=Ue;break;case 268435456:f=C;break;default:f=Ue}return p=Nx.bind(null,r),f=Ne(f,p),r.callbackPriority=a,r.callbackNode=f,a}return p!==null&&p!==null&&De(p),r.callbackPriority=2,r.callbackNode=null,2}function Nx(r,a){if(Ci!==0&&Ci!==5)return r.callbackNode=null,r.callbackPriority=0,null;var f=r.callbackNode;if(Kh()&&r.callbackNode!==f)return null;var p=Ot;return p=ut(r,r===Zt?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p===0?null:(gx(r,p,a),zx(r,ge()),r.callbackNode!=null&&r.callbackNode===f?Nx.bind(null,r):null)}function Bx(r,a){if(Kh())return null;gx(r,a,!0)}function aC(){vC(function(){(Ht&6)!==0?Ne(Ce,sC):Ox()})}function Nm(){if($s===0){var r=jo;r===0&&(r=fe,fe<<=1,(fe&261888)===0&&(fe=256)),$s=r}return $s}function Fx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ah(""+r)}function Ix(r,a){var f=a.ownerDocument.createElement("input");return f.name=a.name,f.value=a.value,r.id&&f.setAttribute("form",r.id),a.parentNode.insertBefore(f,a),r=new FormData(r),f.parentNode.removeChild(f),r}function oC(r,a,f,p,y){if(a==="submit"&&f&&f.stateNode===y){var S=Fx((y[ke]||null).action),R=p.submitter;R&&(a=(a=R[ke]||null)?Fx(a.formAction):R.getAttribute("formAction"),a!==null&&(S=a,R=null));var U=new ch("action","action",null,p,y);r.push({event:U,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if($s!==0){var $=R?Ix(y,R):new FormData(y);tm(f,{pending:!0,data:$,method:y.method,action:S},null,$)}}else typeof S=="function"&&(U.preventDefault(),$=R?Ix(y,R):new FormData(y),tm(f,{pending:!0,data:$,method:y.method,action:S},S,$))},currentTarget:y}]})}}for(var Bm=0;Bm<vp.length;Bm++){var Fm=vp[Bm],lC=Fm.toLowerCase(),uC=Fm[0].toUpperCase()+Fm.slice(1);Mr(lC,"on"+uC)}Mr(mv,"onAnimationEnd"),Mr(gv,"onAnimationIteration"),Mr(_v,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(EM,"onTransitionRun"),Mr(MM,"onTransitionStart"),Mr(CM,"onTransitionCancel"),Mr(vv,"onTransitionEnd"),ln("onMouseEnter",["mouseout","mouseover"]),ln("onMouseLeave",["mouseout","mouseover"]),ln("onPointerEnter",["pointerout","pointerover"]),ln("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function Ux(r,a){a=(a&4)!==0;for(var f=0;f<r.length;f++){var p=r[f],y=p.event;p=p.listeners;e:{var S=void 0;if(a)for(var R=p.length-1;0<=R;R--){var U=p[R],$=U.instance,ye=U.currentTarget;if(U=U.listener,$!==S&&y.isPropagationStopped())break e;S=U,y.currentTarget=ye;try{S(y)}catch(Re){dh(Re)}y.currentTarget=null,S=$}else for(R=0;R<p.length;R++){if(U=p[R],$=U.instance,ye=U.currentTarget,U=U.listener,$!==S&&y.isPropagationStopped())break e;S=U,y.currentTarget=ye;try{S(y)}catch(Re){dh(Re)}y.currentTarget=null,S=$}}}}function Lt(r,a){var f=a[lt];f===void 0&&(f=a[lt]=new Set);var p=r+"__bubble";f.has(p)||(Hx(a,r,2,!1),f.add(p))}function Im(r,a,f){var p=0;a&&(p|=4),Hx(f,r,p,a)}var $h="_reactListening"+Math.random().toString(36).slice(2);function Um(r){if(!r[$h]){r[$h]=!0,Wi.forEach(function(f){f!=="selectionchange"&&(cC.has(f)||Im(f,!1,r),Im(f,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[$h]||(a[$h]=!0,Im("selectionchange",!1,a))}}function Hx(r,a,f,p){switch(mw(a)){case 2:var y=IC;break;case 8:y=UC;break;default:y=eg}f=y.bind(null,a,f,r),y=void 0,!sp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?r.addEventListener(a,f,{capture:!0,passive:y}):r.addEventListener(a,f,!0):y!==void 0?r.addEventListener(a,f,{passive:y}):r.addEventListener(a,f,!1)}function Hm(r,a,f,p,y){var S=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var U=p.stateNode.containerInfo;if(U===y)break;if(R===4)for(R=p.return;R!==null;){var $=R.tag;if(($===3||$===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;U!==null;){if(R=Dt(U),R===null)return;if($=R.tag,$===5||$===6||$===26||$===27){p=S=R;continue e}U=U.parentNode}}p=p.return}j0(function(){var ye=S,Re=np(f),Pe=[];e:{var Se=yv.get(r);if(Se!==void 0){var Ee=ch,Je=r;switch(r){case"keypress":if(lh(f)===0)break e;case"keydown":case"keyup":Ee=nM;break;case"focusin":Je="focus",Ee=up;break;case"focusout":Je="blur",Ee=up;break;case"beforeblur":case"afterblur":Ee=up;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=aM;break;case mv:case gv:case _v:Ee=YE;break;case vv:Ee=lM;break;case"scroll":case"scrollend":Ee=VE;break;case"wheel":Ee=cM;break;case"copy":case"cut":case"paste":Ee=KE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=K0;break;case"toggle":case"beforetoggle":Ee=fM}var ct=(a&4)!==0,Yt=!ct&&(r==="scroll"||r==="scrollend"),de=ct?Se!==null?Se+"Capture":null:Se;ct=[];for(var re=ye,ve;re!==null;){var Ae=re;if(ve=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||ve===null||de===null||(Ae=uu(re,de),Ae!=null&&ct.push(Gu(re,Ae,ve))),Yt)break;re=re.return}0<ct.length&&(Se=new Ee(Se,Je,null,f,Re),Pe.push({event:Se,listeners:ct}))}}if((a&7)===0){e:{if(Se=r==="mouseover"||r==="pointerover",Ee=r==="mouseout"||r==="pointerout",Se&&f!==ip&&(Je=f.relatedTarget||f.fromElement)&&(Dt(Je)||Je[Xe]))break e;if((Ee||Se)&&(Se=Re.window===Re?Re:(Se=Re.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ee?(Je=f.relatedTarget||f.toElement,Ee=ye,Je=Je?Dt(Je):null,Je!==null&&(Yt=o(Je),ct=Je.tag,Je!==Yt||ct!==5&&ct!==27&&ct!==6)&&(Je=null)):(Ee=null,Je=ye),Ee!==Je)){if(ct=Y0,Ae="onMouseLeave",de="onMouseEnter",re="mouse",(r==="pointerout"||r==="pointerover")&&(ct=K0,Ae="onPointerLeave",de="onPointerEnter",re="pointer"),Yt=Ee==null?Se:zi(Ee),ve=Je==null?Se:zi(Je),Se=new ct(Ae,re+"leave",Ee,f,Re),Se.target=Yt,Se.relatedTarget=ve,Ae=null,Dt(Re)===ye&&(ct=new ct(de,re+"enter",Je,f,Re),ct.target=ve,ct.relatedTarget=Yt,Ae=ct),Yt=Ae,Ee&&Je)t:{for(ct=hC,de=Ee,re=Je,ve=0,Ae=de;Ae;Ae=ct(Ae))ve++;Ae=0;for(var ot=re;ot;ot=ct(ot))Ae++;for(;0<ve-Ae;)de=ct(de),ve--;for(;0<Ae-ve;)re=ct(re),Ae--;for(;ve--;){if(de===re||re!==null&&de===re.alternate){ct=de;break t}de=ct(de),re=ct(re)}ct=null}else ct=null;Ee!==null&&kx(Pe,Se,Ee,ct,!1),Je!==null&&Yt!==null&&kx(Pe,Yt,Je,ct,!0)}}e:{if(Se=ye?zi(ye):window,Ee=Se.nodeName&&Se.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&Se.type==="file")var Ft=rv;else if(iv(Se))if(sv)Ft=SM;else{Ft=xM;var nt=yM}else Ee=Se.nodeName,!Ee||Ee.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?ye&&tp(ye.elementType)&&(Ft=rv):Ft=wM;if(Ft&&(Ft=Ft(r,ye))){nv(Pe,Ft,f,Re);break e}nt&&nt(r,Se,ye),r==="focusout"&&ye&&Se.type==="number"&&ye.memoizedProps.value!=null&&ep(Se,"number",Se.value)}switch(nt=ye?zi(ye):window,r){case"focusin":(iv(nt)||nt.contentEditable==="true")&&(Fo=nt,mp=ye,_u=null);break;case"focusout":_u=mp=Fo=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,dv(Pe,f,Re);break;case"selectionchange":if(TM)break;case"keydown":case"keyup":dv(Pe,f,Re)}var bt;if(hp)e:{switch(r){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else Bo?ev(r,f)&&(zt="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(zt="onCompositionStart");zt&&(Q0&&f.locale!=="ko"&&(Bo||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&Bo&&(bt=q0()):(Fs=Re,ap="value"in Fs?Fs.value:Fs.textContent,Bo=!0)),nt=ef(ye,zt),0<nt.length&&(zt=new Z0(zt,r,null,f,Re),Pe.push({event:zt,listeners:nt}),bt?zt.data=bt:(bt=tv(f),bt!==null&&(zt.data=bt)))),(bt=pM?mM(r,f):gM(r,f))&&(zt=ef(ye,"onBeforeInput"),0<zt.length&&(nt=new Z0("onBeforeInput","beforeinput",null,f,Re),Pe.push({event:nt,listeners:zt}),nt.data=bt)),oC(Pe,r,ye,f,Re)}Ux(Pe,a)})}function Gu(r,a,f){return{instance:r,listener:a,currentTarget:f}}function ef(r,a){for(var f=a+"Capture",p=[];r!==null;){var y=r,S=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||S===null||(y=uu(r,f),y!=null&&p.unshift(Gu(r,y,S)),y=uu(r,a),y!=null&&p.push(Gu(r,y,S))),r.tag===3)return p;r=r.return}return[]}function hC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function kx(r,a,f,p,y){for(var S=a._reactName,R=[];f!==null&&f!==p;){var U=f,$=U.alternate,ye=U.stateNode;if(U=U.tag,$!==null&&$===p)break;U!==5&&U!==26&&U!==27||ye===null||($=ye,y?(ye=uu(f,S),ye!=null&&R.unshift(Gu(f,ye,$))):y||(ye=uu(f,S),ye!=null&&R.push(Gu(f,ye,$)))),f=f.return}R.length!==0&&r.push({event:a,listeners:R})}var fC=/\r\n?/g,dC=/\u0000|\uFFFD/g;function Gx(r){return(typeof r=="string"?r:""+r).replace(fC,`
`).replace(dC,"")}function Vx(r,a){return a=Gx(a),Gx(r)===a}function Xt(r,a,f,p,y,S){switch(f){case"children":typeof p=="string"?a==="body"||a==="textarea"&&p===""||Oo(r,p):(typeof p=="number"||typeof p=="bigint")&&a!=="body"&&Oo(r,""+p);break;case"className":Ii(r,"class",p);break;case"tabIndex":Ii(r,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Ii(r,f,p);break;case"style":V0(r,p,S);break;case"data":if(a!=="object"){Ii(r,"data",p);break}case"src":case"href":if(p===""&&(a!=="a"||f!=="href")){r.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(f);break}p=ah(""+p),r.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(a!=="input"&&Xt(r,a,"name",y.name,y,null),Xt(r,a,"formEncType",y.formEncType,y,null),Xt(r,a,"formMethod",y.formMethod,y,null),Xt(r,a,"formTarget",y.formTarget,y,null)):(Xt(r,a,"encType",y.encType,y,null),Xt(r,a,"method",y.method,y,null),Xt(r,a,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(f);break}p=ah(""+p),r.setAttribute(f,p);break;case"onClick":p!=null&&(r.onclick=is);break;case"onScroll":p!=null&&Lt("scroll",r);break;case"onScrollEnd":p!=null&&Lt("scrollend",r);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=f}}break;case"multiple":r.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":r.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){r.removeAttribute("xlink:href");break}f=ah(""+p),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(f,""+p):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":p===!0?r.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(f,p):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?r.setAttribute(f,p):r.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?r.removeAttribute(f):r.setAttribute(f,p);break;case"popover":Lt("beforetoggle",r),Lt("toggle",r),Bs(r,"popover",p);break;case"xlinkActuate":Bn(r,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Bn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Bn(r,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Bn(r,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Bn(r,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Bn(r,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Bn(r,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Bn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Bn(r,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Bs(r,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=kE.get(f)||f,Bs(r,f,p))}}function km(r,a,f,p,y,S){switch(f){case"style":V0(r,p,S);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=f}}break;case"children":typeof p=="string"?Oo(r,p):(typeof p=="number"||typeof p=="bigint")&&Oo(r,""+p);break;case"onScroll":p!=null&&Lt("scroll",r);break;case"onScrollEnd":p!=null&&Lt("scrollend",r);break;case"onClick":p!=null&&(r.onclick=is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ei.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),a=f.slice(2,y?f.length-7:void 0),S=r[ke]||null,S=S!=null?S[f]:null,typeof S=="function"&&r.removeEventListener(a,S,y),typeof p=="function")){typeof S!="function"&&S!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(a,p,y);break e}f in r?r[f]=p:p===!0?r.setAttribute(f,""):Bs(r,f,p)}}}function Yi(r,a,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",r),Lt("load",r);var p=!1,y=!1,S;for(S in f)if(f.hasOwnProperty(S)){var R=f[S];if(R!=null)switch(S){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Xt(r,a,S,R,f,null)}}y&&Xt(r,a,"srcSet",f.srcSet,f,null),p&&Xt(r,a,"src",f.src,f,null);return;case"input":Lt("invalid",r);var U=S=R=y=null,$=null,ye=null;for(p in f)if(f.hasOwnProperty(p)){var Re=f[p];if(Re!=null)switch(p){case"name":y=Re;break;case"type":R=Re;break;case"checked":$=Re;break;case"defaultChecked":ye=Re;break;case"value":S=Re;break;case"defaultValue":U=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(i(137,a));break;default:Xt(r,a,p,Re,f,null)}}U0(r,S,U,$,ye,R,y,!1);return;case"select":Lt("invalid",r),p=R=S=null;for(y in f)if(f.hasOwnProperty(y)&&(U=f[y],U!=null))switch(y){case"value":S=U;break;case"defaultValue":R=U;break;case"multiple":p=U;default:Xt(r,a,y,U,f,null)}a=S,f=R,r.multiple=!!p,a!=null?Lo(r,!!p,a,!1):f!=null&&Lo(r,!!p,f,!0);return;case"textarea":Lt("invalid",r),S=y=p=null;for(R in f)if(f.hasOwnProperty(R)&&(U=f[R],U!=null))switch(R){case"value":p=U;break;case"defaultValue":y=U;break;case"children":S=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:Xt(r,a,R,U,f,null)}k0(r,p,y,S);return;case"option":for($ in f)f.hasOwnProperty($)&&(p=f[$],p!=null)&&($==="selected"?r.selected=p&&typeof p!="function"&&typeof p!="symbol":Xt(r,a,$,p,f,null));return;case"dialog":Lt("beforetoggle",r),Lt("toggle",r),Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":Lt("load",r);break;case"video":case"audio":for(p=0;p<ku.length;p++)Lt(ku[p],r);break;case"image":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"embed":case"source":case"link":Lt("error",r),Lt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in f)if(f.hasOwnProperty(ye)&&(p=f[ye],p!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Xt(r,a,ye,p,f,null)}return;default:if(tp(a)){for(Re in f)f.hasOwnProperty(Re)&&(p=f[Re],p!==void 0&&km(r,a,Re,p,f,void 0));return}}for(U in f)f.hasOwnProperty(U)&&(p=f[U],p!=null&&Xt(r,a,U,p,f,null))}function pC(r,a,f,p){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,S=null,R=null,U=null,$=null,ye=null,Re=null;for(Ee in f){var Pe=f[Ee];if(f.hasOwnProperty(Ee)&&Pe!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":$=Pe;default:p.hasOwnProperty(Ee)||Xt(r,a,Ee,null,p,Pe)}}for(var Se in p){var Ee=p[Se];if(Pe=f[Se],p.hasOwnProperty(Se)&&(Ee!=null||Pe!=null))switch(Se){case"type":S=Ee;break;case"name":y=Ee;break;case"checked":ye=Ee;break;case"defaultChecked":Re=Ee;break;case"value":R=Ee;break;case"defaultValue":U=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(i(137,a));break;default:Ee!==Pe&&Xt(r,a,Se,Ee,p,Pe)}}$d(r,R,U,$,ye,Re,S,y);return;case"select":Ee=R=U=Se=null;for(S in f)if($=f[S],f.hasOwnProperty(S)&&$!=null)switch(S){case"value":break;case"multiple":Ee=$;default:p.hasOwnProperty(S)||Xt(r,a,S,null,p,$)}for(y in p)if(S=p[y],$=f[y],p.hasOwnProperty(y)&&(S!=null||$!=null))switch(y){case"value":Se=S;break;case"defaultValue":U=S;break;case"multiple":R=S;default:S!==$&&Xt(r,a,y,S,p,$)}a=U,f=R,p=Ee,Se!=null?Lo(r,!!f,Se,!1):!!p!=!!f&&(a!=null?Lo(r,!!f,a,!0):Lo(r,!!f,f?[]:"",!1));return;case"textarea":Ee=Se=null;for(U in f)if(y=f[U],f.hasOwnProperty(U)&&y!=null&&!p.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Xt(r,a,U,null,p,y)}for(R in p)if(y=p[R],S=f[R],p.hasOwnProperty(R)&&(y!=null||S!=null))switch(R){case"value":Se=y;break;case"defaultValue":Ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==S&&Xt(r,a,R,y,p,S)}H0(r,Se,Ee);return;case"option":for(var Je in f)Se=f[Je],f.hasOwnProperty(Je)&&Se!=null&&!p.hasOwnProperty(Je)&&(Je==="selected"?r.selected=!1:Xt(r,a,Je,null,p,Se));for($ in p)Se=p[$],Ee=f[$],p.hasOwnProperty($)&&Se!==Ee&&(Se!=null||Ee!=null)&&($==="selected"?r.selected=Se&&typeof Se!="function"&&typeof Se!="symbol":Xt(r,a,$,Se,p,Ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in f)Se=f[ct],f.hasOwnProperty(ct)&&Se!=null&&!p.hasOwnProperty(ct)&&Xt(r,a,ct,null,p,Se);for(ye in p)if(Se=p[ye],Ee=f[ye],p.hasOwnProperty(ye)&&Se!==Ee&&(Se!=null||Ee!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,a));break;default:Xt(r,a,ye,Se,p,Ee)}return;default:if(tp(a)){for(var Yt in f)Se=f[Yt],f.hasOwnProperty(Yt)&&Se!==void 0&&!p.hasOwnProperty(Yt)&&km(r,a,Yt,void 0,p,Se);for(Re in p)Se=p[Re],Ee=f[Re],!p.hasOwnProperty(Re)||Se===Ee||Se===void 0&&Ee===void 0||km(r,a,Re,Se,p,Ee);return}}for(var de in f)Se=f[de],f.hasOwnProperty(de)&&Se!=null&&!p.hasOwnProperty(de)&&Xt(r,a,de,null,p,Se);for(Pe in p)Se=p[Pe],Ee=f[Pe],!p.hasOwnProperty(Pe)||Se===Ee||Se==null&&Ee==null||Xt(r,a,Pe,Se,p,Ee)}function Wx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var y=f[p],S=y.transferSize,R=y.initiatorType,U=y.duration;if(S&&U&&Wx(R)){for(R=0,U=y.responseEnd,p+=1;p<f.length;p++){var $=f[p],ye=$.startTime;if(ye>U)break;var Re=$.transferSize,Pe=$.initiatorType;Re&&Wx(Pe)&&($=$.responseEnd,R+=Re*($<U?1:(U-ye)/($-ye)))}if(--p,a+=8*(S+R)/(y.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Gm=null,Vm=null;function tf(r){return r.nodeType===9?r:r.ownerDocument}function jx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qx(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Wm(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jm=null;function gC(){var r=window.event;return r&&r.type==="popstate"?r===jm?!1:(jm=r,!0):(jm=null,!1)}var Xx=typeof setTimeout=="function"?setTimeout:void 0,_C=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,vC=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(r){return Yx.resolve(null).then(r).catch(yC)}:Xx;function yC(r){setTimeout(function(){throw r})}function ea(r){return r==="head"}function Zx(r,a){var f=a,p=0;do{var y=f.nextSibling;if(r.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(p===0){r.removeChild(y),cl(a);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")Vu(r.ownerDocument.documentElement);else if(f==="head"){f=r.ownerDocument.head,Vu(f);for(var S=f.firstChild;S;){var R=S.nextSibling,U=S.nodeName;S[rt]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=R}}else f==="body"&&Vu(r.ownerDocument.body);f=y}while(f);cl(a)}function Kx(r,a){var f=r;r=0;do{var p=f.nextSibling;if(f.nodeType===1?a?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(a?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(r===0)break;r--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||r++;f=p}while(f)}function qm(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var f=a;switch(a=a.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":qm(f),wt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function xC(r,a,f,p){for(;r.nodeType===1;){var y=f;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!p&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(p){if(!r[rt])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(S=r.getAttribute("rel"),S==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(S!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(S=r.getAttribute("src"),(S!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&S&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var S=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===S)return r}else return r;if(r=_r(r.nextSibling),r===null)break}return null}function wC(r,a,f){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=_r(r.nextSibling),r===null))return null;return r}function Qx(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=_r(r.nextSibling),r===null))return null;return r}function Xm(r){return r.data==="$?"||r.data==="$~"}function Ym(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function SC(r,a){var f=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||f.readyState!=="loading")a();else{var p=function(){a(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),r._reactRetry=p}}function _r(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Zm=null;function Jx(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var f=r.data;if(f==="/$"||f==="/&"){if(a===0)return _r(r.nextSibling);a--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||a++}r=r.nextSibling}return null}function $x(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(a===0)return r;a--}else f!=="/$"&&f!=="/&"||a++}r=r.previousSibling}return null}function ew(r,a,f){switch(a=tf(f),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Vu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);wt(r)}var vr=new Map,tw=new Set;function nf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var vs=Q.d;Q.d={f:bC,r:TC,D:EC,C:MC,L:CC,m:RC,X:DC,S:AC,M:PC};function bC(){var r=vs.f(),a=Xh();return r||a}function TC(r){var a=ri(r);a!==null&&a.tag===5&&a.type==="form"?vy(a):vs.r(r)}var ol=typeof document>"u"?null:document;function iw(r,a,f){var p=ol;if(p&&typeof a=="string"&&a){var y=cr(a);y='link[rel="'+r+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),tw.has(y)||(tw.add(y),r={rel:r,crossOrigin:f,href:a},p.querySelector(y)===null&&(a=p.createElement("link"),Yi(a,"link",r),Ze(a),p.head.appendChild(a)))}}function EC(r){vs.D(r),iw("dns-prefetch",r,null)}function MC(r,a){vs.C(r,a),iw("preconnect",r,a)}function CC(r,a,f){vs.L(r,a,f);var p=ol;if(p&&r&&a){var y='link[rel="preload"][as="'+cr(a)+'"]';a==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+cr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+cr(f.imageSizes)+'"]')):y+='[href="'+cr(r)+'"]';var S=y;switch(a){case"style":S=ll(r);break;case"script":S=ul(r)}vr.has(S)||(r=m({rel:"preload",href:a==="image"&&f&&f.imageSrcSet?void 0:r,as:a},f),vr.set(S,r),p.querySelector(y)!==null||a==="style"&&p.querySelector(Wu(S))||a==="script"&&p.querySelector(ju(S))||(a=p.createElement("link"),Yi(a,"link",r),Ze(a),p.head.appendChild(a)))}}function RC(r,a){vs.m(r,a);var f=ol;if(f&&r){var p=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+cr(p)+'"][href="'+cr(r)+'"]',S=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ul(r)}if(!vr.has(S)&&(r=m({rel:"modulepreload",href:r},a),vr.set(S,r),f.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(ju(S)))return}p=f.createElement("link"),Yi(p,"link",r),Ze(p),f.head.appendChild(p)}}}function AC(r,a,f){vs.S(r,a,f);var p=ol;if(p&&r){var y=_t(p).hoistableStyles,S=ll(r);a=a||"default";var R=y.get(S);if(!R){var U={loading:0,preload:null};if(R=p.querySelector(Wu(S)))U.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":a},f),(f=vr.get(S))&&Km(r,f);var $=R=p.createElement("link");Ze($),Yi($,"link",r),$._p=new Promise(function(ye,Re){$.onload=ye,$.onerror=Re}),$.addEventListener("load",function(){U.loading|=1}),$.addEventListener("error",function(){U.loading|=2}),U.loading|=4,rf(R,a,p)}R={type:"stylesheet",instance:R,count:1,state:U},y.set(S,R)}}}function DC(r,a){vs.X(r,a);var f=ol;if(f&&r){var p=_t(f).hoistableScripts,y=ul(r),S=p.get(y);S||(S=f.querySelector(ju(y)),S||(r=m({src:r,async:!0},a),(a=vr.get(y))&&Qm(r,a),S=f.createElement("script"),Ze(S),Yi(S,"link",r),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(y,S))}}function PC(r,a){vs.M(r,a);var f=ol;if(f&&r){var p=_t(f).hoistableScripts,y=ul(r),S=p.get(y);S||(S=f.querySelector(ju(y)),S||(r=m({src:r,async:!0,type:"module"},a),(a=vr.get(y))&&Qm(r,a),S=f.createElement("script"),Ze(S),Yi(S,"link",r),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(y,S))}}function nw(r,a,f,p){var y=(y=ae.current)?nf(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(a=ll(f.href),f=_t(y).hoistableStyles,p=f.get(a),p||(p={type:"style",instance:null,count:0,state:null},f.set(a,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=ll(f.href);var S=_t(y).hoistableStyles,R=S.get(r);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(r,R),(S=y.querySelector(Wu(r)))&&!S._p&&(R.instance=S,R.state.loading=5),vr.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},vr.set(r,f),S||LC(y,r,f,R.state))),a&&p===null)throw Error(i(528,""));return R}if(a&&p!==null)throw Error(i(529,""));return null;case"script":return a=f.async,f=f.src,typeof f=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ul(f),f=_t(y).hoistableScripts,p=f.get(a),p||(p={type:"script",instance:null,count:0,state:null},f.set(a,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ll(r){return'href="'+cr(r)+'"'}function Wu(r){return'link[rel="stylesheet"]['+r+"]"}function rw(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function LC(r,a,f,p){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?p.loading=1:(a=r.createElement("link"),p.preload=a,a.addEventListener("load",function(){return p.loading|=1}),a.addEventListener("error",function(){return p.loading|=2}),Yi(a,"link",f),Ze(a),r.head.appendChild(a))}function ul(r){return'[src="'+cr(r)+'"]'}function ju(r){return"script[async]"+r}function sw(r,a,f){if(a.count++,a.instance===null)switch(a.type){case"style":var p=r.querySelector('style[data-href~="'+cr(f.href)+'"]');if(p)return a.instance=p,Ze(p),p;var y=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(r.ownerDocument||r).createElement("style"),Ze(p),Yi(p,"style",y),rf(p,f.precedence,r),a.instance=p;case"stylesheet":y=ll(f.href);var S=r.querySelector(Wu(y));if(S)return a.state.loading|=4,a.instance=S,Ze(S),S;p=rw(f),(y=vr.get(y))&&Km(p,y),S=(r.ownerDocument||r).createElement("link"),Ze(S);var R=S;return R._p=new Promise(function(U,$){R.onload=U,R.onerror=$}),Yi(S,"link",p),a.state.loading|=4,rf(S,f.precedence,r),a.instance=S;case"script":return S=ul(f.src),(y=r.querySelector(ju(S)))?(a.instance=y,Ze(y),y):(p=f,(y=vr.get(S))&&(p=m({},f),Qm(p,y)),r=r.ownerDocument||r,y=r.createElement("script"),Ze(y),Yi(y,"link",p),r.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(p=a.instance,a.state.loading|=4,rf(p,f.precedence,r));return a.instance}function rf(r,a,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,S=y,R=0;R<p.length;R++){var U=p[R];if(U.dataset.precedence===a)S=U;else if(S!==y)break}S?S.parentNode.insertBefore(r,S.nextSibling):(a=f.nodeType===9?f.head:f,a.insertBefore(r,a.firstChild))}function Km(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Qm(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var sf=null;function aw(r,a,f){if(sf===null){var p=new Map,y=sf=new Map;y.set(f,p)}else y=sf,p=y.get(f),p||(p=new Map,y.set(f,p));if(p.has(r))return p;for(p.set(r,null),f=f.getElementsByTagName(r),y=0;y<f.length;y++){var S=f[y];if(!(S[rt]||S[xe]||r==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var R=S.getAttribute(a)||"";R=r+R;var U=p.get(R);U?U.push(S):p.set(R,[S])}}return p}function ow(r,a,f){r=r.ownerDocument||r,r.head.insertBefore(f,a==="title"?r.querySelector("head > title"):null)}function OC(r,a,f){if(f===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(r=a.disabled,typeof a.precedence=="string"&&r==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function lw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function zC(r,a,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=ll(p.href),S=a.querySelector(Wu(y));if(S){a=S._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=af.bind(r),a.then(r,r)),f.state.loading|=4,f.instance=S,Ze(S);return}S=a.ownerDocument||a,p=rw(p),(y=vr.get(y))&&Km(p,y),S=S.createElement("link"),Ze(S);var R=S;R._p=new Promise(function(U,$){R.onload=U,R.onerror=$}),Yi(S,"link",p),f.instance=S}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(f,a),(a=f.state.preload)&&(f.state.loading&3)===0&&(r.count++,f=af.bind(r),a.addEventListener("load",f),a.addEventListener("error",f))}}var Jm=0;function NC(r,a){return r.stylesheets&&r.count===0&&lf(r,r.stylesheets),0<r.count||0<r.imgCount?function(f){var p=setTimeout(function(){if(r.stylesheets&&lf(r,r.stylesheets),r.unsuspend){var S=r.unsuspend;r.unsuspend=null,S()}},6e4+a);0<r.imgBytes&&Jm===0&&(Jm=62500*mC());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&lf(r,r.stylesheets),r.unsuspend)){var S=r.unsuspend;r.unsuspend=null,S()}},(r.imgBytes>Jm?50:800)+a);return r.unsuspend=f,function(){r.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function af(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var of=null;function lf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,of=new Map,a.forEach(BC,r),of=null,af.call(r))}function BC(r,a){if(!(a.state.loading&4)){var f=of.get(r);if(f)var p=f.get(null);else{f=new Map,of.set(r,f);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<y.length;S++){var R=y[S];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(f.set(R.dataset.precedence,R),p=R)}p&&f.set(null,p)}y=a.instance,R=y.getAttribute("data-precedence"),S=f.get(R)||p,S===p&&f.set(null,y),f.set(R,y),this.count++,p=af.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),S?S.parentNode.insertBefore(y,S.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),a.state.loading|=4}}var qu={$$typeof:M,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function FC(r,a,f,p,y,S,R,U,$){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=S,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function uw(r,a,f,p,y,S,R,U,$,ye,Re,Pe){return r=new FC(r,a,f,R,$,ye,Re,Pe,U),a=1,S===!0&&(a|=24),S=In(3,null,null,a),r.current=S,S.stateNode=r,a=Pp(),a.refCount++,r.pooledCache=a,a.refCount++,S.memoizedState={element:p,isDehydrated:f,cache:a},Np(S),r}function cw(r){return r?(r=Ho,r):Ho}function hw(r,a,f,p,y,S){y=cw(y),p.context===null?p.context=y:p.pendingContext=y,p=Vs(a),p.payload={element:f},S=S===void 0?null:S,S!==null&&(p.callback=S),f=Ws(r,p,a),f!==null&&(Cn(f,r,a),Tu(f,r,a))}function fw(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<a?f:a}}function $m(r,a){fw(r,a),(r=r.alternate)&&fw(r,a)}function dw(r){if(r.tag===13||r.tag===31){var a=Oa(r,67108864);a!==null&&Cn(a,r,67108864),$m(r,67108864)}}function pw(r){if(r.tag===13||r.tag===31){var a=Vn();a=ft(a);var f=Oa(r,a);f!==null&&Cn(f,r,a),$m(r,a)}}var uf=!0;function IC(r,a,f,p){var y=Y.T;Y.T=null;var S=Q.p;try{Q.p=2,eg(r,a,f,p)}finally{Q.p=S,Y.T=y}}function UC(r,a,f,p){var y=Y.T;Y.T=null;var S=Q.p;try{Q.p=8,eg(r,a,f,p)}finally{Q.p=S,Y.T=y}}function eg(r,a,f,p){if(uf){var y=tg(p);if(y===null)Hm(r,a,p,cf,f),gw(r,p);else if(kC(y,r,a,f,p))p.stopPropagation();else if(gw(r,p),a&4&&-1<HC.indexOf(r)){for(;y!==null;){var S=ri(y);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var R=je(S.pendingLanes);if(R!==0){var U=S;for(U.pendingLanes|=2,U.entangledLanes|=2;R;){var $=1<<31-ze(R);U.entanglements[1]|=$,R&=~$}Gr(S),(Ht&6)===0&&(jh=ge()+500,Hu(0))}}break;case 31:case 13:U=Oa(S,2),U!==null&&Cn(U,S,2),Xh(),$m(S,2)}if(S=tg(p),S===null&&Hm(r,a,p,cf,f),S===y)break;y=S}y!==null&&p.stopPropagation()}else Hm(r,a,p,null,f)}}function tg(r){return r=np(r),ig(r)}var cf=null;function ig(r){if(cf=null,r=Dt(r),r!==null){var a=o(r);if(a===null)r=null;else{var f=a.tag;if(f===13){if(r=s(a),r!==null)return r;r=null}else if(f===31){if(r=c(a),r!==null)return r;r=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return cf=r,null}function mw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Ce:return 2;case Le:return 8;case Ue:case Ie:return 32;case C:return 268435456;default:return 32}default:return 32}}var ng=!1,ta=null,ia=null,na=null,Xu=new Map,Yu=new Map,ra=[],HC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gw(r,a){switch(r){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":Xu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(a.pointerId)}}function Zu(r,a,f,p,y,S){return r===null||r.nativeEvent!==S?(r={blockedOn:a,domEventName:f,eventSystemFlags:p,nativeEvent:S,targetContainers:[y]},a!==null&&(a=ri(a),a!==null&&dw(a)),r):(r.eventSystemFlags|=p,a=r.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),r)}function kC(r,a,f,p,y){switch(a){case"focusin":return ta=Zu(ta,r,a,f,p,y),!0;case"dragenter":return ia=Zu(ia,r,a,f,p,y),!0;case"mouseover":return na=Zu(na,r,a,f,p,y),!0;case"pointerover":var S=y.pointerId;return Xu.set(S,Zu(Xu.get(S)||null,r,a,f,p,y)),!0;case"gotpointercapture":return S=y.pointerId,Yu.set(S,Zu(Yu.get(S)||null,r,a,f,p,y)),!0}return!1}function _w(r){var a=Dt(r.target);if(a!==null){var f=o(a);if(f!==null){if(a=f.tag,a===13){if(a=s(f),a!==null){r.blockedOn=a,be(r.priority,function(){pw(f)});return}}else if(a===31){if(a=c(f),a!==null){r.blockedOn=a,be(r.priority,function(){pw(f)});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function hf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var f=tg(r.nativeEvent);if(f===null){f=r.nativeEvent;var p=new f.constructor(f.type,f);ip=p,f.target.dispatchEvent(p),ip=null}else return a=ri(f),a!==null&&dw(a),r.blockedOn=f,!1;a.shift()}return!0}function vw(r,a,f){hf(r)&&f.delete(a)}function GC(){ng=!1,ta!==null&&hf(ta)&&(ta=null),ia!==null&&hf(ia)&&(ia=null),na!==null&&hf(na)&&(na=null),Xu.forEach(vw),Yu.forEach(vw)}function ff(r,a){r.blockedOn===a&&(r.blockedOn=null,ng||(ng=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,GC)))}var df=null;function yw(r){df!==r&&(df=r,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){df===r&&(df=null);for(var a=0;a<r.length;a+=3){var f=r[a],p=r[a+1],y=r[a+2];if(typeof p!="function"){if(ig(p||f)===null)continue;break}var S=ri(f);S!==null&&(r.splice(a,3),a-=3,tm(S,{pending:!0,data:y,method:f.method,action:p},p,y))}}))}function cl(r){function a($){return ff($,r)}ta!==null&&ff(ta,r),ia!==null&&ff(ia,r),na!==null&&ff(na,r),Xu.forEach(a),Yu.forEach(a);for(var f=0;f<ra.length;f++){var p=ra[f];p.blockedOn===r&&(p.blockedOn=null)}for(;0<ra.length&&(f=ra[0],f.blockedOn===null);)_w(f),f.blockedOn===null&&ra.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var y=f[p],S=f[p+1],R=y[ke]||null;if(typeof S=="function")R||yw(f);else if(R){var U=null;if(S&&S.hasAttribute("formAction")){if(y=S,R=S[ke]||null)U=R.formAction;else if(ig(y)!==null)continue}else U=R.action;typeof U=="function"?f[p+1]=U:(f.splice(p,3),p-=3),yw(f)}}}function xw(){function r(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(R){return y=R})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function rg(r){this._internalRoot=r}pf.prototype.render=rg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var f=a.current,p=Vn();hw(f,p,r,a,null,null)},pf.prototype.unmount=rg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;hw(r.current,2,null,r,null,null),Xh(),a[Xe]=null}};function pf(r){this._internalRoot=r}pf.prototype.unstable_scheduleHydration=function(r){if(r){var a=le();r={blockedOn:null,target:r,priority:a};for(var f=0;f<ra.length&&a!==0&&a<ra[f].priority;f++);ra.splice(f,0,r),f===0&&_w(r)}};var ww=e.version;if(ww!=="19.2.4")throw Error(i(527,ww,"19.2.4"));Q.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(a),r=r!==null?d(r):null,r=r===null?null:r.stateNode,r};var VC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mf.isDisabled&&mf.supportsFiber)try{k=mf.inject(VC),ne=mf}catch{}}return Qu.createRoot=function(r,a){if(!n(r))throw Error(i(299));var f=!1,p="",y=Ry,S=Ay,R=Dy;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError)),a=uw(r,1,!1,null,null,f,p,null,y,S,R,xw),r[Xe]=a.current,Um(r),new rg(a)},Qu.hydrateRoot=function(r,a,f){if(!n(r))throw Error(i(299));var p=!1,y="",S=Ry,R=Ay,U=Dy,$=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(R=f.onCaughtError),f.onRecoverableError!==void 0&&(U=f.onRecoverableError),f.formState!==void 0&&($=f.formState)),a=uw(r,1,!0,a,f??null,p,y,$,S,R,U,xw),a.context=cw(null),f=a.current,p=Vn(),p=ft(p),y=Vs(p),y.callback=null,Ws(f,y,p),f=p,a.current.lanes=f,Qe(a,f),Gr(a),r[Xe]=a.current,Um(r),new pf(a)},Qu.version="19.2.4",Qu}var Pw;function e2(){if(Pw)return og.exports;Pw=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),og.exports=$C(),og.exports}var t2=e2();const i2=Q_(t2);function Es(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function nT(l,e){l.prototype=Object.create(e.prototype),l.prototype.constructor=l,l.__proto__=e}var nr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ql={duration:.5,overwrite:!1,delay:0},$_,Ki,ai,br=1e8,Qt=1/br,l_=Math.PI*2,n2=l_/4,r2=0,rT=Math.sqrt,s2=Math.cos,a2=Math.sin,Vi=function(e){return typeof e=="string"},mi=function(e){return typeof e=="function"},Os=function(e){return typeof e=="number"},e0=function(e){return typeof e>"u"},es=function(e){return typeof e=="object"},Pn=function(e){return e!==!1},t0=function(){return typeof window<"u"},gf=function(e){return mi(e)||Vi(e)},sT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},on=Array.isArray,o2=/random\([^)]+\)/g,l2=/,\s*/g,Lw=/(?:-?\.?\d|\.)+/gi,aT=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Pl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,hg=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,oT=/[+-]=-?[.\d]+/,u2=/[^,'"\[\]\s]+/gi,c2=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ci,Wr,u_,i0,ar={},_d={},lT,uT=function(e){return(_d=Xl(e,ar))&&Nn},n0=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Nc=function(e,t){return!t&&console.warn(e)},cT=function(e,t){return e&&(ar[e]=t)&&_d&&(_d[e]=t)||ar},Bc=function(){return 0},h2={suppressEvents:!0,isStart:!0,kill:!1},td={suppressEvents:!0,kill:!1},f2={suppressEvents:!0},r0={},ya=[],c_={},hT,Zn={},fg={},Ow=30,id=[],s0="",a0=function(e){var t=e[0],i,n;if(es(t)||mi(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(n=id.length;n--&&!id[n].targetTest(t););i=id[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new NT(e[n],i)))||e.splice(n,1);return e},co=function(e){return e._gsap||a0(Tr(e))[0]._gsap},fT=function(e,t,i){return(i=e[t])&&mi(i)?e[t]():e0(i)&&e.getAttribute&&e.getAttribute(t)||i},Ln=function(e,t){return(e=e.split(",")).forEach(t)||e},vi=function(e){return Math.round(e*1e5)/1e5||0},li=function(e){return Math.round(e*1e7)/1e7||0},Fl=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+n:i==="-"?e-n:i==="*"?e*n:e/n},d2=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},vd=function(){var e=ya.length,t=ya.slice(0),i,n;for(c_={},ya.length=0,i=0;i<e;i++)n=t[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},o0=function(e){return!!(e._initted||e._startAt||e.add)},dT=function(e,t,i,n){ya.length&&!Ki&&vd(),e.render(t,i,!!(Ki&&t<0&&o0(e))),ya.length&&!Ki&&vd()},pT=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(u2).length<2?t:Vi(e)?e.trim():e},mT=function(e){return e},or=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},p2=function(e){return function(t,i){for(var n in i)n in t||n==="duration"&&e||n==="ease"||(t[n]=i[n])}},Xl=function(e,t){for(var i in t)e[i]=t[i];return e},zw=function l(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=es(t[i])?l(e[i]||(e[i]={}),t[i]):t[i]);return e},yd=function(e,t){var i={},n;for(n in e)n in t||(i[n]=e[n]);return i},Sc=function(e){var t=e.parent||ci,i=e.keyframes?p2(on(e.keyframes)):or;if(Pn(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},m2=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},gT=function(e,t,i,n,o){var s=e[n],c;if(o)for(c=t[o];s&&s[o]>c;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=s,t.parent=t._dp=e,t},Hd=function(e,t,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var o=t._prev,s=t._next;o?o._next=s:e[i]===t&&(e[i]=s),s?s._prev=o:e[n]===t&&(e[n]=o),t._next=t._prev=t.parent=null},ba=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ho=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},g2=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},h_=function(e,t,i,n){return e._startAt&&(Ki?e._startAt.revert(td):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},_2=function l(e){return!e||e._ts&&l(e.parent)},Nw=function(e){return e._repeat?Yl(e._tTime,e=e.duration()+e._rDelay)*e:0},Yl=function(e,t){var i=Math.floor(e=li(e/t));return e&&i===e?i-1:i},xd=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},kd=function(e){return e._end=li(e._start+(e._tDur/Math.abs(e._ts||e._rts||Qt)||0))},Gd=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=li(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),kd(e),i._dirty||ho(i,e)),e},_T=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=xd(e.rawTime(),t),(!t._dur||Jc(0,t.totalDuration(),i)-t._tTime>Qt)&&t.render(i,!0)),ho(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Qt}},Yr=function(e,t,i,n){return t.parent&&ba(t),t._start=li((Os(i)?i:i||e!==ci?xr(e,i,t):e._time)+t._delay),t._end=li(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),gT(e,t,"_first","_last",e._sort?"_start":0),f_(t)||(e._recent=t),n||_T(e,t),e._ts<0&&Gd(e,e._tTime),e},vT=function(e,t){return(ar.ScrollTrigger||n0("scrollTrigger",t))&&ar.ScrollTrigger.create(t,e)},yT=function(e,t,i,n,o){if(u0(e,t,o),!e._initted)return 1;if(!i&&e._pt&&!Ki&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&hT!==Jn.frame)return ya.push(e),e._lazy=[o,n],1},v2=function l(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||l(t))},f_=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},y2=function(e,t,i,n){var o=e.ratio,s=t<0||!t&&(!e._start&&v2(e)&&!(!e._initted&&f_(e))||(e._ts<0||e._dp._ts<0)&&!f_(e))?0:1,c=e._rDelay,u=0,h,d,m;if(c&&e._repeat&&(u=Jc(0,e._tDur,t),d=Yl(u,c),e._yoyo&&d&1&&(s=1-s),d!==Yl(e._tTime,c)&&(o=1-s,e.vars.repeatRefresh&&e._initted&&e.invalidate())),s!==o||Ki||n||e._zTime===Qt||!t&&e._zTime){if(!e._initted&&yT(e,t,n,i,u))return;for(m=e._zTime,e._zTime=t||(i?Qt:0),i||(i=t&&!m),e.ratio=s,e._from&&(s=1-s),e._time=0,e._tTime=u,h=e._pt;h;)h.r(s,h.d),h=h._next;t<0&&h_(e,t,i,!0),e._onUpdate&&!i&&er(e,"onUpdate"),u&&e._repeat&&!i&&e.parent&&er(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===s&&(s&&ba(e,1),!i&&!Ki&&(er(e,s?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},x2=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<t)return n;n=n._prev}},Zl=function(e,t,i,n){var o=e._repeat,s=li(t)||0,c=e._tTime/e._tDur;return c&&!n&&(e._time*=s/e._dur),e._dur=s,e._tDur=o?o<0?1e10:li(s*(o+1)+e._rDelay*o):s,c>0&&!n&&Gd(e,e._tTime=e._tDur*c),e.parent&&kd(e),i||ho(e.parent,e),e},Bw=function(e){return e instanceof vn?ho(e):Zl(e,e._dur)},w2={_start:0,endTime:Bc,totalDuration:Bc},xr=function l(e,t,i){var n=e.labels,o=e._recent||w2,s=e.duration()>=br?o.endTime(!1):e._dur,c,u,h;return Vi(t)&&(isNaN(t)||t in n)?(u=t.charAt(0),h=t.substr(-1)==="%",c=t.indexOf("="),u==="<"||u===">"?(c>=0&&(t=t.replace(/=/,"")),(u==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(c<0?o:i).totalDuration()/100:1)):c<0?(t in n||(n[t]=s),n[t]):(u=parseFloat(t.charAt(c-1)+t.substr(c+1)),h&&i&&(u=u/100*(on(i)?i[0]:i).totalDuration()),c>1?l(e,t.substr(0,c-1),i)+u:s+u)):t==null?s:+t},bc=function(e,t,i){var n=Os(t[1]),o=(n?2:1)+(e<2?0:1),s=t[o],c,u;if(n&&(s.duration=t[1]),s.parent=i,e){for(c=s,u=i;u&&!("immediateRender"in c);)c=u.vars.defaults||{},u=Pn(u.vars.inherit)&&u.parent;s.immediateRender=Pn(c.immediateRender),e<2?s.runBackwards=1:s.startAt=t[o-1]}return new Mi(t[0],s,t[o+1])},Aa=function(e,t){return e||e===0?t(e):t},Jc=function(e,t,i){return i<e?e:i>t?t:i},sn=function(e,t){return!Vi(e)||!(t=c2.exec(e))?"":t[1]},S2=function(e,t,i){return Aa(i,function(n){return Jc(e,t,n)})},d_=[].slice,xT=function(e,t){return e&&es(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&es(e[0]))&&!e.nodeType&&e!==Wr},b2=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(n){var o;return Vi(n)&&!t||xT(n,1)?(o=i).push.apply(o,Tr(n)):i.push(n)})||i},Tr=function(e,t,i){return ai&&!t&&ai.selector?ai.selector(e):Vi(e)&&!i&&(u_||!Kl())?d_.call((t||i0).querySelectorAll(e),0):on(e)?b2(e,i):xT(e)?d_.call(e,0):e?[e]:[]},p_=function(e){return e=Tr(e)[0]||Nc("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Tr(t,i.querySelectorAll?i:i===e?Nc("Invalid scope")||i0.createElement("div"):e)}},wT=function(e){return e.sort(function(){return .5-Math.random()})},ST=function(e){if(mi(e))return e;var t=es(e)?e:{each:e},i=fo(t.ease),n=t.from||0,o=parseFloat(t.base)||0,s={},c=n>0&&n<1,u=isNaN(n)||c,h=t.axis,d=n,m=n;return Vi(n)?d=m={center:.5,edges:.5,end:1}[n]||0:!c&&u&&(d=n[0],m=n[1]),function(g,_,w){var v=(w||t).length,x=s[v],b,E,M,D,P,z,O,L,N;if(!x){if(N=t.grid==="auto"?0:(t.grid||[1,br])[1],!N){for(O=-br;O<(O=w[N++].getBoundingClientRect().left)&&N<v;);N<v&&N--}for(x=s[v]=[],b=u?Math.min(N,v)*d-.5:n%N,E=N===br?0:u?v*m/N-.5:n/N|0,O=0,L=br,z=0;z<v;z++)M=z%N-b,D=E-(z/N|0),x[z]=P=h?Math.abs(h==="y"?D:M):rT(M*M+D*D),P>O&&(O=P),P<L&&(L=P);n==="random"&&wT(x),x.max=O-L,x.min=L,x.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(N>v?v-1:h?h==="y"?v/N:N:Math.max(N,v/N))||0)*(n==="edges"?-1:1),x.b=v<0?o-v:o,x.u=sn(t.amount||t.each)||0,i=i&&v<0?LT(i):i}return v=(x[g]-x.min)/x.max||0,li(x.b+(i?i(v):v)*x.v)+x.u}},m_=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=li(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(Os(i)?0:sn(i))}},bT=function(e,t){var i=on(e),n,o;return!i&&es(e)&&(n=i=e.radius||br,e.values?(e=Tr(e.values),(o=!Os(e[0]))&&(n*=n)):e=m_(e.increment)),Aa(t,i?mi(e)?function(s){return o=e(s),Math.abs(o-s)<=n?o:s}:function(s){for(var c=parseFloat(o?s.x:s),u=parseFloat(o?s.y:0),h=br,d=0,m=e.length,g,_;m--;)o?(g=e[m].x-c,_=e[m].y-u,g=g*g+_*_):g=Math.abs(e[m]-c),g<h&&(h=g,d=m);return d=!n||h<=n?e[d]:s,o||d===s||Os(s)?d:d+sn(s)}:m_(e))},TT=function(e,t,i,n){return Aa(on(e)?!t:i===!0?!!(i=0):!n,function(){return on(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*n)/n})},T2=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduce(function(o,s){return s(o)},n)}},E2=function(e,t){return function(i){return e(parseFloat(i))+(t||sn(i))}},M2=function(e,t,i){return MT(e,t,0,1,i)},ET=function(e,t,i){return Aa(i,function(n){return e[~~t(n)]})},C2=function l(e,t,i){var n=t-e;return on(e)?ET(e,l(0,e.length),t):Aa(i,function(o){return(n+(o-e)%n)%n+e})},R2=function l(e,t,i){var n=t-e,o=n*2;return on(e)?ET(e,l(0,e.length-1),t):Aa(i,function(s){return s=(o+(s-e)%o)%o||0,e+(s>n?o-s:s)})},Fc=function(e){return e.replace(o2,function(t){var i=t.indexOf("[")+1,n=t.substring(i||7,i?t.indexOf("]"):t.length-1).split(l2);return TT(i?n:+n[0],i?0:+n[1],+n[2]||1e-5)})},MT=function(e,t,i,n,o){var s=t-e,c=n-i;return Aa(o,function(u){return i+((u-e)/s*c||0)})},A2=function l(e,t,i,n){var o=isNaN(e+t)?0:function(_){return(1-_)*e+_*t};if(!o){var s=Vi(e),c={},u,h,d,m,g;if(i===!0&&(n=1)&&(i=null),s)e={p:e},t={p:t};else if(on(e)&&!on(t)){for(d=[],m=e.length,g=m-2,h=1;h<m;h++)d.push(l(e[h-1],e[h]));m--,o=function(w){w*=m;var v=Math.min(g,~~w);return d[v](w-v)},i=t}else n||(e=Xl(on(e)?[]:{},e));if(!d){for(u in t)l0.call(c,e,u,"get",t[u]);o=function(w){return f0(w,c)||(s?e.p:e)}}}return Aa(i,o)},Fw=function(e,t,i){var n=e.labels,o=br,s,c,u;for(s in n)c=n[s]-t,c<0==!!i&&c&&o>(c=Math.abs(c))&&(u=s,o=c);return u},er=function(e,t,i){var n=e.vars,o=n[t],s=ai,c=e._ctx,u,h,d;if(o)return u=n[t+"Params"],h=n.callbackScope||e,i&&ya.length&&vd(),c&&(ai=c),d=u?o.apply(h,u):o.call(h),ai=s,d},cc=function(e){return ba(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ki),e.progress()<1&&er(e,"onInterrupt"),e},Ll,CT=[],RT=function(e){if(e)if(e=!e.name&&e.default||e,t0()||e.headless){var t=e.name,i=mi(e),n=t&&!i&&e.init?function(){this._props=[]}:e,o={init:Bc,render:f0,add:l0,kill:j2,modifier:W2,rawVars:0},s={targetTest:0,get:0,getSetter:h0,aliases:{},register:0};if(Kl(),e!==n){if(Zn[t])return;or(n,or(yd(e,o),s)),Xl(n.prototype,Xl(o,yd(e,s))),Zn[n.prop=t]=n,e.targetTest&&(id.push(n),r0[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}cT(t,n),e.register&&e.register(Nn,n,On)}else CT.push(e)},Kt=255,hc={aqua:[0,Kt,Kt],lime:[0,Kt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Kt],navy:[0,0,128],white:[Kt,Kt,Kt],olive:[128,128,0],yellow:[Kt,Kt,0],orange:[Kt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Kt,0,0],pink:[Kt,192,203],cyan:[0,Kt,Kt],transparent:[Kt,Kt,Kt,0]},dg=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Kt+.5|0},AT=function(e,t,i){var n=e?Os(e)?[e>>16,e>>8&Kt,e&Kt]:0:hc.black,o,s,c,u,h,d,m,g,_,w;if(!n){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),hc[e])n=hc[e];else if(e.charAt(0)==="#"){if(e.length<6&&(o=e.charAt(1),s=e.charAt(2),c=e.charAt(3),e="#"+o+o+s+s+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return n=parseInt(e.substr(1,6),16),[n>>16,n>>8&Kt,n&Kt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),n=[e>>16,e>>8&Kt,e&Kt]}else if(e.substr(0,3)==="hsl"){if(n=w=e.match(Lw),!t)u=+n[0]%360/360,h=+n[1]/100,d=+n[2]/100,s=d<=.5?d*(h+1):d+h-d*h,o=d*2-s,n.length>3&&(n[3]*=1),n[0]=dg(u+1/3,o,s),n[1]=dg(u,o,s),n[2]=dg(u-1/3,o,s);else if(~e.indexOf("="))return n=e.match(aT),i&&n.length<4&&(n[3]=1),n}else n=e.match(Lw)||hc.transparent;n=n.map(Number)}return t&&!w&&(o=n[0]/Kt,s=n[1]/Kt,c=n[2]/Kt,m=Math.max(o,s,c),g=Math.min(o,s,c),d=(m+g)/2,m===g?u=h=0:(_=m-g,h=d>.5?_/(2-m-g):_/(m+g),u=m===o?(s-c)/_+(s<c?6:0):m===s?(c-o)/_+2:(o-s)/_+4,u*=60),n[0]=~~(u+.5),n[1]=~~(h*100+.5),n[2]=~~(d*100+.5)),i&&n.length<4&&(n[3]=1),n},DT=function(e){var t=[],i=[],n=-1;return e.split(xa).forEach(function(o){var s=o.match(Pl)||[];t.push.apply(t,s),i.push(n+=s.length+1)}),t.c=i,t},Iw=function(e,t,i){var n="",o=(e+n).match(xa),s=t?"hsla(":"rgba(",c=0,u,h,d,m;if(!o)return e;if(o=o.map(function(g){return(g=AT(g,t,1))&&s+(t?g[0]+","+g[1]+"%,"+g[2]+"%,"+g[3]:g.join(","))+")"}),i&&(d=DT(e),u=i.c,u.join(n)!==d.c.join(n)))for(h=e.replace(xa,"1").split(Pl),m=h.length-1;c<m;c++)n+=h[c]+(~u.indexOf(c)?o.shift()||s+"0,0,0,0)":(d.length?d:o.length?o:i).shift());if(!h)for(h=e.split(xa),m=h.length-1;c<m;c++)n+=h[c]+o[c];return n+h[m]},xa=(function(){var l="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in hc)l+="|"+e+"\\b";return new RegExp(l+")","gi")})(),D2=/hsl[a]?\(/,PT=function(e){var t=e.join(" "),i;if(xa.lastIndex=0,xa.test(t))return i=D2.test(t),e[1]=Iw(e[1],i),e[0]=Iw(e[0],i,DT(e[1])),!0},Ic,Jn=(function(){var l=Date.now,e=500,t=33,i=l(),n=i,o=1e3/240,s=o,c=[],u,h,d,m,g,_,w=function v(x){var b=l()-n,E=x===!0,M,D,P,z;if((b>e||b<0)&&(i+=b-t),n+=b,P=n-i,M=P-s,(M>0||E)&&(z=++m.frame,g=P-m.time*1e3,m.time=P=P/1e3,s+=M+(M>=o?4:o-M),D=1),E||(u=h(v)),D)for(_=0;_<c.length;_++)c[_](P,g,z,x)};return m={time:0,frame:0,tick:function(){w(!0)},deltaRatio:function(x){return g/(1e3/(x||60))},wake:function(){lT&&(!u_&&t0()&&(Wr=u_=window,i0=Wr.document||{},ar.gsap=Nn,(Wr.gsapVersions||(Wr.gsapVersions=[])).push(Nn.version),uT(_d||Wr.GreenSockGlobals||!Wr.gsap&&Wr||{}),CT.forEach(RT)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&m.sleep(),h=d||function(x){return setTimeout(x,s-m.time*1e3+1|0)},Ic=1,w(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(u),Ic=0,h=Bc},lagSmoothing:function(x,b){e=x||1/0,t=Math.min(b||33,e)},fps:function(x){o=1e3/(x||240),s=m.time*1e3+o},add:function(x,b,E){var M=b?function(D,P,z,O){x(D,P,z,O),m.remove(M)}:x;return m.remove(x),c[E?"unshift":"push"](M),Kl(),M},remove:function(x,b){~(b=c.indexOf(x))&&c.splice(b,1)&&_>=b&&_--},_listeners:c},m})(),Kl=function(){return!Ic&&Jn.wake()},Bt={},P2=/^[\d.\-M][\d.\-,\s]/,L2=/["']/g,O2=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),n=i[0],o=1,s=i.length,c,u,h;o<s;o++)u=i[o],c=o!==s-1?u.lastIndexOf(","):u.length,h=u.substr(0,c),t[n]=isNaN(h)?h.replace(L2,"").trim():+h,n=u.substr(c+1).trim();return t},z2=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},N2=function(e){var t=(e+"").split("("),i=Bt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[O2(t[1])]:z2(e).split(",").map(pT)):Bt._CE&&P2.test(e)?Bt._CE("",e):i},LT=function(e){return function(t){return 1-e(1-t)}},OT=function l(e,t){for(var i=e._first,n;i;)i instanceof vn?l(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?l(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},fo=function(e,t){return e&&(mi(e)?e:Bt[e]||N2(e))||t},Do=function(e,t,i,n){i===void 0&&(i=function(u){return 1-t(1-u)}),n===void 0&&(n=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var o={easeIn:t,easeOut:i,easeInOut:n},s;return Ln(e,function(c){Bt[c]=ar[c]=o,Bt[s=c.toLowerCase()]=i;for(var u in o)Bt[s+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Bt[c+"."+u]=o[u]}),o},zT=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},pg=function l(e,t,i){var n=t>=1?t:1,o=(i||(e?.3:.45))/(t<1?t:1),s=o/l_*(Math.asin(1/n)||0),c=function(d){return d===1?1:n*Math.pow(2,-10*d)*a2((d-s)*o)+1},u=e==="out"?c:e==="in"?function(h){return 1-c(1-h)}:zT(c);return o=l_/o,u.config=function(h,d){return l(e,h,d)},u},mg=function l(e,t){t===void 0&&(t=1.70158);var i=function(s){return s?--s*s*((t+1)*s+t)+1:0},n=e==="out"?i:e==="in"?function(o){return 1-i(1-o)}:zT(i);return n.config=function(o){return l(e,o)},n};Ln("Linear,Quad,Cubic,Quart,Quint,Strong",function(l,e){var t=e<5?e+1:e;Do(l+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Bt.Linear.easeNone=Bt.none=Bt.Linear.easeIn;Do("Elastic",pg("in"),pg("out"),pg());(function(l,e){var t=1/e,i=2*t,n=2.5*t,o=function(c){return c<t?l*c*c:c<i?l*Math.pow(c-1.5/e,2)+.75:c<n?l*(c-=2.25/e)*c+.9375:l*Math.pow(c-2.625/e,2)+.984375};Do("Bounce",function(s){return 1-o(1-s)},o)})(7.5625,2.75);Do("Expo",function(l){return Math.pow(2,10*(l-1))*l+l*l*l*l*l*l*(1-l)});Do("Circ",function(l){return-(rT(1-l*l)-1)});Do("Sine",function(l){return l===1?1:-s2(l*n2)+1});Do("Back",mg("in"),mg("out"),mg());Bt.SteppedEase=Bt.steps=ar.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,n=e+(t?0:1),o=t?1:0,s=1-Qt;return function(c){return((n*Jc(0,s,c)|0)+o)*i}}};ql.ease=Bt["quad.out"];Ln("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(l){return s0+=l+","+l+"Params,"});var NT=function(e,t){this.id=r2++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:fT,this.set=t?t.getSetter:h0},Uc=(function(){function l(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Zl(this,+t.duration,1,1),this.data=t.data,ai&&(this._ctx=ai,ai.data.push(this)),Ic||Jn.wake()}var e=l.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Zl(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,n){if(Kl(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(Gd(this,i),!o._dp||o.parent||_T(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Yr(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Qt||!this._initted&&this._dur&&i||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),dT(this,i,n)),this},e.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Nw(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},e.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Nw(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,n){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*o,n):this._repeat?Yl(this._tTime,o)+1:1},e.timeScale=function(i,n){if(!arguments.length)return this._rts===-Qt?0:this._rts;if(this._rts===i)return this;var o=this.parent&&this._ts?xd(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Qt?0:this._rts,this.totalTime(Jc(-Math.abs(this._delay),this.totalDuration(),o),n!==!1),kd(this),g2(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Kl(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Qt&&(this._tTime-=Qt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=li(i);var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Yr(n,this,this._start-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Pn(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?xd(n.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=f2);var n=Ki;return Ki=i,o0(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ki=n,this},e.globalTime=function(i){for(var n=this,o=arguments.length?i:n.rawTime();n;)o=n._start+o/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):o},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Bw(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,Bw(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,n){return this.totalTime(xr(this,i),Pn(n))},e.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Pn(n)),this._dur||(this._zTime=-Qt),this},e.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},e.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Qt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Qt,this},e.isActive=function(){var i=this.parent||this._dp,n=this._start,o;return!!(!i||this._ts&&this._initted&&i.isActive()&&(o=i.rawTime(!0))>=n&&o<this.endTime(!0)-Qt)},e.eventCallback=function(i,n,o){var s=this.vars;return arguments.length>1?(n?(s[i]=n,o&&(s[i+"Params"]=o),i==="onUpdate"&&(this._onUpdate=n)):delete s[i],this):s[i]},e.then=function(i){var n=this,o=n._prom;return new Promise(function(s){var c=mi(i)?i:mT,u=function(){var d=n.then;n.then=null,o&&o(),mi(c)&&(c=c(n))&&(c.then||c===n)&&(n.then=d),s(c),n.then=d};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?u():n._prom=u})},e.kill=function(){cc(this)},l})();or(Uc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Qt,_prom:0,_ps:!1,_rts:1});var vn=(function(l){nT(e,l);function e(i,n){var o;return i===void 0&&(i={}),o=l.call(this,i)||this,o.labels={},o.smoothChildTiming=!!i.smoothChildTiming,o.autoRemoveChildren=!!i.autoRemoveChildren,o._sort=Pn(i.sortChildren),ci&&Yr(i.parent||ci,Es(o),n),i.reversed&&o.reverse(),i.paused&&o.paused(!0),i.scrollTrigger&&vT(Es(o),i.scrollTrigger),o}var t=e.prototype;return t.to=function(n,o,s){return bc(0,arguments,this),this},t.from=function(n,o,s){return bc(1,arguments,this),this},t.fromTo=function(n,o,s,c){return bc(2,arguments,this),this},t.set=function(n,o,s){return o.duration=0,o.parent=this,Sc(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new Mi(n,o,xr(this,s),1),this},t.call=function(n,o,s){return Yr(this,Mi.delayedCall(0,n,o),s)},t.staggerTo=function(n,o,s,c,u,h,d){return s.duration=o,s.stagger=s.stagger||c,s.onComplete=h,s.onCompleteParams=d,s.parent=this,new Mi(n,s,xr(this,u)),this},t.staggerFrom=function(n,o,s,c,u,h,d){return s.runBackwards=1,Sc(s).immediateRender=Pn(s.immediateRender),this.staggerTo(n,o,s,c,u,h,d)},t.staggerFromTo=function(n,o,s,c,u,h,d,m){return c.startAt=s,Sc(c).immediateRender=Pn(c.immediateRender),this.staggerTo(n,o,c,u,h,d,m)},t.render=function(n,o,s){var c=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,d=n<=0?0:li(n),m=this._zTime<0!=n<0&&(this._initted||!h),g,_,w,v,x,b,E,M,D,P,z,O;if(this!==ci&&d>u&&n>=0&&(d=u),d!==this._tTime||s||m){if(c!==this._time&&h&&(d+=this._time-c,n+=this._time-c),g=d,D=this._start,M=this._ts,b=!M,m&&(h||(c=this._zTime),(n||!o)&&(this._zTime=n)),this._repeat){if(z=this._yoyo,x=h+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(x*100+n,o,s);if(g=li(d%x),d===u?(v=this._repeat,g=h):(P=li(d/x),v=~~P,v&&v===P&&(g=h,v--),g>h&&(g=h)),P=Yl(this._tTime,x),!c&&this._tTime&&P!==v&&this._tTime-P*x-this._dur<=0&&(P=v),z&&v&1&&(g=h-g,O=1),v!==P&&!this._lock){var L=z&&P&1,N=L===(z&&v&1);if(v<P&&(L=!L),c=L?0:d%h?h:d,this._lock=1,this.render(c||(O?0:li(v*x)),o,!h)._lock=0,this._tTime=d,!o&&this.parent&&er(this,"onRepeat"),this.vars.repeatRefresh&&!O&&(this.invalidate()._lock=1,P=v),c&&c!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,N&&(this._lock=2,c=L?h:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!O&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;OT(this,O)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(E=x2(this,li(c),li(g)),E&&(d-=g-(g=E._start))),this._tTime=d,this._time=g,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,c=0),!c&&d&&h&&!o&&!P&&(er(this,"onStart"),this._tTime!==d))return this;if(g>=c&&n>=0)for(_=this._first;_;){if(w=_._next,(_._act||g>=_._start)&&_._ts&&E!==_){if(_.parent!==this)return this.render(n,o,s);if(_.render(_._ts>0?(g-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(g-_._start)*_._ts,o,s),g!==this._time||!this._ts&&!b){E=0,w&&(d+=this._zTime=-Qt);break}}_=w}else{_=this._last;for(var j=n<0?n:g;_;){if(w=_._prev,(_._act||j<=_._end)&&_._ts&&E!==_){if(_.parent!==this)return this.render(n,o,s);if(_.render(_._ts>0?(j-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(j-_._start)*_._ts,o,s||Ki&&o0(_)),g!==this._time||!this._ts&&!b){E=0,w&&(d+=this._zTime=j?-Qt:Qt);break}}_=w}}if(E&&!o&&(this.pause(),E.render(g>=c?0:-Qt)._zTime=g>=c?1:-1,this._ts))return this._start=D,kd(this),this.render(n,o,s);this._onUpdate&&!o&&er(this,"onUpdate",!0),(d===u&&this._tTime>=this.totalDuration()||!d&&c)&&(D===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((n||!h)&&(d===u&&this._ts>0||!d&&this._ts<0)&&ba(this,1),!o&&!(n<0&&!c)&&(d||c||!u)&&(er(this,d===u&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(n,o){var s=this;if(Os(o)||(o=xr(this,o,n)),!(n instanceof Uc)){if(on(n))return n.forEach(function(c){return s.add(c,o)}),this;if(Vi(n))return this.addLabel(n,o);if(mi(n))n=Mi.delayedCall(0,n);else return this}return this!==n?Yr(this,n,o):this},t.getChildren=function(n,o,s,c){n===void 0&&(n=!0),o===void 0&&(o=!0),s===void 0&&(s=!0),c===void 0&&(c=-br);for(var u=[],h=this._first;h;)h._start>=c&&(h instanceof Mi?o&&u.push(h):(s&&u.push(h),n&&u.push.apply(u,h.getChildren(!0,o,s)))),h=h._next;return u},t.getById=function(n){for(var o=this.getChildren(1,1,1),s=o.length;s--;)if(o[s].vars.id===n)return o[s]},t.remove=function(n){return Vi(n)?this.removeLabel(n):mi(n)?this.killTweensOf(n):(n.parent===this&&Hd(this,n),n===this._recent&&(this._recent=this._last),ho(this))},t.totalTime=function(n,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=li(Jn.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),l.prototype.totalTime.call(this,n,o),this._forcing=0,this):this._tTime},t.addLabel=function(n,o){return this.labels[n]=xr(this,o),this},t.removeLabel=function(n){return delete this.labels[n],this},t.addPause=function(n,o,s){var c=Mi.delayedCall(0,o||Bc,s);return c.data="isPause",this._hasPause=1,Yr(this,c,xr(this,n))},t.removePause=function(n){var o=this._first;for(n=xr(this,n);o;)o._start===n&&o.data==="isPause"&&ba(o),o=o._next},t.killTweensOf=function(n,o,s){for(var c=this.getTweensOf(n,s),u=c.length;u--;)da!==c[u]&&c[u].kill(n,o);return this},t.getTweensOf=function(n,o){for(var s=[],c=Tr(n),u=this._first,h=Os(o),d;u;)u instanceof Mi?d2(u._targets,c)&&(h?(!da||u._initted&&u._ts)&&u.globalTime(0)<=o&&u.globalTime(u.totalDuration())>o:!o||u.isActive())&&s.push(u):(d=u.getTweensOf(c,o)).length&&s.push.apply(s,d),u=u._next;return s},t.tweenTo=function(n,o){o=o||{};var s=this,c=xr(s,n),u=o,h=u.startAt,d=u.onStart,m=u.onStartParams,g=u.immediateRender,_,w=Mi.to(s,or({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:o.duration||Math.abs((c-(h&&"time"in h?h.time:s._time))/s.timeScale())||Qt,onStart:function(){if(s.pause(),!_){var x=o.duration||Math.abs((c-(h&&"time"in h?h.time:s._time))/s.timeScale());w._dur!==x&&Zl(w,x,0,1).render(w._time,!0,!0),_=1}d&&d.apply(w,m||[])}},o));return g?w.render(0):w},t.tweenFromTo=function(n,o,s){return this.tweenTo(o,or({startAt:{time:xr(this,n)}},s))},t.recent=function(){return this._recent},t.nextLabel=function(n){return n===void 0&&(n=this._time),Fw(this,xr(this,n))},t.previousLabel=function(n){return n===void 0&&(n=this._time),Fw(this,xr(this,n),1)},t.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Qt)},t.shiftChildren=function(n,o,s){s===void 0&&(s=0);var c=this._first,u=this.labels,h;for(n=li(n);c;)c._start>=s&&(c._start+=n,c._end+=n),c=c._next;if(o)for(h in u)u[h]>=s&&(u[h]+=n);return ho(this)},t.invalidate=function(n){var o=this._first;for(this._lock=0;o;)o.invalidate(n),o=o._next;return l.prototype.invalidate.call(this,n)},t.clear=function(n){n===void 0&&(n=!0);for(var o=this._first,s;o;)s=o._next,this.remove(o),o=s;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),ho(this)},t.totalDuration=function(n){var o=0,s=this,c=s._last,u=br,h,d,m;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-n:n));if(s._dirty){for(m=s.parent;c;)h=c._prev,c._dirty&&c.totalDuration(),d=c._start,d>u&&s._sort&&c._ts&&!s._lock?(s._lock=1,Yr(s,c,d-c._delay,1)._lock=0):u=d,d<0&&c._ts&&(o-=d,(!m&&!s._dp||m&&m.smoothChildTiming)&&(s._start+=li(d/s._ts),s._time-=d,s._tTime-=d),s.shiftChildren(-d,!1,-1/0),u=0),c._end>o&&c._ts&&(o=c._end),c=h;Zl(s,s===ci&&s._time>o?s._time:o,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(n){if(ci._ts&&(dT(ci,xd(n,ci)),hT=Jn.frame),Jn.frame>=Ow){Ow+=nr.autoSleep||120;var o=ci._first;if((!o||!o._ts)&&nr.autoSleep&&Jn._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||Jn.sleep()}}},e})(Uc);or(vn.prototype,{_lock:0,_hasPause:0,_forcing:0});var B2=function(e,t,i,n,o,s,c){var u=new On(this._pt,e,t,0,1,kT,null,o),h=0,d=0,m,g,_,w,v,x,b,E;for(u.b=i,u.e=n,i+="",n+="",(b=~n.indexOf("random("))&&(n=Fc(n)),s&&(E=[i,n],s(E,e,t),i=E[0],n=E[1]),g=i.match(hg)||[];m=hg.exec(n);)w=m[0],v=n.substring(h,m.index),_?_=(_+1)%5:v.substr(-5)==="rgba("&&(_=1),w!==g[d++]&&(x=parseFloat(g[d-1])||0,u._pt={_next:u._pt,p:v||d===1?v:",",s:x,c:w.charAt(1)==="="?Fl(x,w)-x:parseFloat(w)-x,m:_&&_<4?Math.round:0},h=hg.lastIndex);return u.c=h<n.length?n.substring(h,n.length):"",u.fp=c,(oT.test(n)||b)&&(u.e=0),this._pt=u,u},l0=function(e,t,i,n,o,s,c,u,h,d){mi(n)&&(n=n(o||0,e,s));var m=e[t],g=i!=="get"?i:mi(m)?h?e[t.indexOf("set")||!mi(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():m,_=mi(m)?h?k2:UT:c0,w;if(Vi(n)&&(~n.indexOf("random(")&&(n=Fc(n)),n.charAt(1)==="="&&(w=Fl(g,n)+(sn(g)||0),(w||w===0)&&(n=w))),!d||g!==n||g_)return!isNaN(g*n)&&n!==""?(w=new On(this._pt,e,t,+g||0,n-(g||0),typeof m=="boolean"?V2:HT,0,_),h&&(w.fp=h),c&&w.modifier(c,this,e),this._pt=w):(!m&&!(t in e)&&n0(t,n),B2.call(this,e,t,g,n,_,u||nr.stringFilter,h))},F2=function(e,t,i,n,o){if(mi(e)&&(e=Tc(e,o,t,i,n)),!es(e)||e.style&&e.nodeType||on(e)||sT(e))return Vi(e)?Tc(e,o,t,i,n):e;var s={},c;for(c in e)s[c]=Tc(e[c],o,t,i,n);return s},BT=function(e,t,i,n,o,s){var c,u,h,d;if(Zn[e]&&(c=new Zn[e]).init(o,c.rawVars?t[e]:F2(t[e],n,o,s,i),i,n,s)!==!1&&(i._pt=u=new On(i._pt,o,e,0,1,c.render,c,0,c.priority),i!==Ll))for(h=i._ptLookup[i._targets.indexOf(o)],d=c._props.length;d--;)h[c._props[d]]=u;return c},da,g_,u0=function l(e,t,i){var n=e.vars,o=n.ease,s=n.startAt,c=n.immediateRender,u=n.lazy,h=n.onUpdate,d=n.runBackwards,m=n.yoyoEase,g=n.keyframes,_=n.autoRevert,w=e._dur,v=e._startAt,x=e._targets,b=e.parent,E=b&&b.data==="nested"?b.vars.targets:x,M=e._overwrite==="auto"&&!$_,D=e.timeline,P,z,O,L,N,j,se,K,X,Z,he,Y,Q;if(D&&(!g||!o)&&(o="none"),e._ease=fo(o,ql.ease),e._yEase=m?LT(fo(m===!0?o:m,ql.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!D&&!!n.runBackwards,!D||g&&!n.stagger){if(K=x[0]?co(x[0]).harness:0,Y=K&&n[K.prop],P=yd(n,r0),v&&(v._zTime<0&&v.progress(1),t<0&&d&&c&&!_?v.render(-1,!0):v.revert(d&&w?td:h2),v._lazy=0),s){if(ba(e._startAt=Mi.set(x,or({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!v&&Pn(u),startAt:null,delay:0,onUpdate:h&&function(){return er(e,"onUpdate")},stagger:0},s))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ki||!c&&!_)&&e._startAt.revert(td),c&&w&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&w&&!v){if(t&&(c=!1),O=or({overwrite:!1,data:"isFromStart",lazy:c&&!v&&Pn(u),immediateRender:c,stagger:0,parent:b},P),Y&&(O[K.prop]=Y),ba(e._startAt=Mi.set(x,O)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ki?e._startAt.revert(td):e._startAt.render(-1,!0)),e._zTime=t,!c)l(e._startAt,Qt,Qt);else if(!t)return}for(e._pt=e._ptCache=0,u=w&&Pn(u)||u&&!w,z=0;z<x.length;z++){if(N=x[z],se=N._gsap||a0(x)[z]._gsap,e._ptLookup[z]=Z={},c_[se.id]&&ya.length&&vd(),he=E===x?z:E.indexOf(N),K&&(X=new K).init(N,Y||P,e,he,E)!==!1&&(e._pt=L=new On(e._pt,N,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(ee){Z[ee]=L}),X.priority&&(j=1)),!K||Y)for(O in P)Zn[O]&&(X=BT(O,P,e,he,N,E))?X.priority&&(j=1):Z[O]=L=l0.call(e,N,O,"get",P[O],he,E,0,n.stringFilter);e._op&&e._op[z]&&e.kill(N,e._op[z]),M&&e._pt&&(da=e,ci.killTweensOf(N,Z,e.globalTime(t)),Q=!e.parent,da=0),e._pt&&u&&(c_[se.id]=1)}j&&GT(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!Q,g&&t<=0&&D.render(br,!0,!0)},I2=function(e,t,i,n,o,s,c,u){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,m,g,_;if(!h)for(h=e._ptCache[t]=[],g=e._ptLookup,_=e._targets.length;_--;){if(d=g[_][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return g_=1,e.vars[t]="+=0",u0(e,c),g_=0,u?Nc(t+" not eligible for reset"):1;h.push(d)}for(_=h.length;_--;)m=h[_],d=m._pt||m,d.s=(n||n===0)&&!o?n:d.s+(n||0)+s*d.c,d.c=i-d.s,m.e&&(m.e=vi(i)+sn(m.e)),m.b&&(m.b=d.s+sn(m.b))},U2=function(e,t){var i=e[0]?co(e[0]).harness:0,n=i&&i.aliases,o,s,c,u;if(!n)return t;o=Xl({},t);for(s in n)if(s in o)for(u=n[s].split(","),c=u.length;c--;)o[u[c]]=o[s];return o},H2=function(e,t,i,n){var o=t.ease||n||"power1.inOut",s,c;if(on(t))c=i[e]||(i[e]=[]),t.forEach(function(u,h){return c.push({t:h/(t.length-1)*100,v:u,e:o})});else for(s in t)c=i[s]||(i[s]=[]),s==="ease"||c.push({t:parseFloat(e),v:t[s],e:o})},Tc=function(e,t,i,n,o){return mi(e)?e.call(t,i,n,o):Vi(e)&&~e.indexOf("random(")?Fc(e):e},FT=s0+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",IT={};Ln(FT+",id,stagger,delay,duration,paused,scrollTrigger",function(l){return IT[l]=1});var Mi=(function(l){nT(e,l);function e(i,n,o,s){var c;typeof n=="number"&&(o.duration=n,n=o,o=null),c=l.call(this,s?n:Sc(n))||this;var u=c.vars,h=u.duration,d=u.delay,m=u.immediateRender,g=u.stagger,_=u.overwrite,w=u.keyframes,v=u.defaults,x=u.scrollTrigger,b=u.yoyoEase,E=n.parent||ci,M=(on(i)||sT(i)?Os(i[0]):"length"in n)?[i]:Tr(i),D,P,z,O,L,N,j,se;if(c._targets=M.length?a0(M):Nc("GSAP target "+i+" not found. https://gsap.com",!nr.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=_,w||g||gf(h)||gf(d)){if(n=c.vars,D=c.timeline=new vn({data:"nested",defaults:v||{},targets:E&&E.data==="nested"?E.vars.targets:M}),D.kill(),D.parent=D._dp=Es(c),D._start=0,g||gf(h)||gf(d)){if(O=M.length,j=g&&ST(g),es(g))for(L in g)~FT.indexOf(L)&&(se||(se={}),se[L]=g[L]);for(P=0;P<O;P++)z=yd(n,IT),z.stagger=0,b&&(z.yoyoEase=b),se&&Xl(z,se),N=M[P],z.duration=+Tc(h,Es(c),P,N,M),z.delay=(+Tc(d,Es(c),P,N,M)||0)-c._delay,!g&&O===1&&z.delay&&(c._delay=d=z.delay,c._start+=d,z.delay=0),D.to(N,z,j?j(P,N,M):0),D._ease=Bt.none;D.duration()?h=d=0:c.timeline=0}else if(w){Sc(or(D.vars.defaults,{ease:"none"})),D._ease=fo(w.ease||n.ease||"none");var K=0,X,Z,he;if(on(w))w.forEach(function(Y){return D.to(M,Y,">")}),D.duration();else{z={};for(L in w)L==="ease"||L==="easeEach"||H2(L,w[L],z,w.easeEach);for(L in z)for(X=z[L].sort(function(Y,Q){return Y.t-Q.t}),K=0,P=0;P<X.length;P++)Z=X[P],he={ease:Z.e,duration:(Z.t-(P?X[P-1].t:0))/100*h},he[L]=Z.v,D.to(M,he,K),K+=he.duration;D.duration()<h&&D.to({},{duration:h-D.duration()})}}h||c.duration(h=D.duration())}else c.timeline=0;return _===!0&&!$_&&(da=Es(c),ci.killTweensOf(M),da=0),Yr(E,Es(c),o),n.reversed&&c.reverse(),n.paused&&c.paused(!0),(m||!h&&!w&&c._start===li(E._time)&&Pn(m)&&_2(Es(c))&&E.data!=="nested")&&(c._tTime=-Qt,c.render(Math.max(0,-d)||0)),x&&vT(Es(c),x),c}var t=e.prototype;return t.render=function(n,o,s){var c=this._time,u=this._tDur,h=this._dur,d=n<0,m=n>u-Qt&&!d?u:n<Qt?0:n,g,_,w,v,x,b,E,M,D;if(!h)y2(this,n,o,s);else if(m!==this._tTime||!n||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(g=m,M=this.timeline,this._repeat){if(v=h+this._rDelay,this._repeat<-1&&d)return this.totalTime(v*100+n,o,s);if(g=li(m%v),m===u?(w=this._repeat,g=h):(x=li(m/v),w=~~x,w&&w===x?(g=h,w--):g>h&&(g=h)),b=this._yoyo&&w&1,b&&(D=this._yEase,g=h-g),x=Yl(this._tTime,v),g===c&&!s&&this._initted&&w===x)return this._tTime=m,this;w!==x&&(M&&this._yEase&&OT(M,b),this.vars.repeatRefresh&&!b&&!this._lock&&g!==v&&this._initted&&(this._lock=s=1,this.render(li(v*w),!0).invalidate()._lock=0))}if(!this._initted){if(yT(this,d?n:g,s,o,m))return this._tTime=0,this;if(c!==this._time&&!(s&&this.vars.repeatRefresh&&w!==x))return this;if(h!==this._dur)return this.render(n,o,s)}if(this._tTime=m,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=E=(D||this._ease)(g/h),this._from&&(this.ratio=E=1-E),!c&&m&&!o&&!x&&(er(this,"onStart"),this._tTime!==m))return this;for(_=this._pt;_;)_.r(E,_.d),_=_._next;M&&M.render(n<0?n:M._dur*M._ease(g/this._dur),o,s)||this._startAt&&(this._zTime=n),this._onUpdate&&!o&&(d&&h_(this,n,o,s),er(this,"onUpdate")),this._repeat&&w!==x&&this.vars.onRepeat&&!o&&this.parent&&er(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(d&&!this._onUpdate&&h_(this,n,!0,!0),(n||!h)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&ba(this,1),!o&&!(d&&!c)&&(m||c||b)&&(er(this,m===u?"onComplete":"onReverseComplete",!0),this._prom&&!(m<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),l.prototype.invalidate.call(this,n)},t.resetTo=function(n,o,s,c,u){Ic||Jn.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||u0(this,h),d=this._ease(h/this._dur),I2(this,n,o,s,c,d,h,u)?this.resetTo(n,o,s,c,1):(Gd(this,0),this.parent||gT(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(n,o){if(o===void 0&&(o="all"),!n&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?cc(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ki),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(n,o,da&&da.vars.overwrite!==!0)._first||cc(this),this.parent&&s!==this.timeline.totalDuration()&&Zl(this,this._dur*this.timeline._tDur/s,0,1),this}var c=this._targets,u=n?Tr(n):c,h=this._ptLookup,d=this._pt,m,g,_,w,v,x,b;if((!o||o==="all")&&m2(c,u))return o==="all"&&(this._pt=0),cc(this);for(m=this._op=this._op||[],o!=="all"&&(Vi(o)&&(v={},Ln(o,function(E){return v[E]=1}),o=v),o=U2(c,o)),b=c.length;b--;)if(~u.indexOf(c[b])){g=h[b],o==="all"?(m[b]=o,w=g,_={}):(_=m[b]=m[b]||{},w=o);for(v in w)x=g&&g[v],x&&((!("kill"in x.d)||x.d.kill(v)===!0)&&Hd(this,x,"_pt"),delete g[v]),_!=="all"&&(_[v]=1)}return this._initted&&!this._pt&&d&&cc(this),this},e.to=function(n,o){return new e(n,o,arguments[2])},e.from=function(n,o){return bc(1,arguments)},e.delayedCall=function(n,o,s,c){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:o,onReverseComplete:o,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:c})},e.fromTo=function(n,o,s){return bc(2,arguments)},e.set=function(n,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(n,o)},e.killTweensOf=function(n,o,s){return ci.killTweensOf(n,o,s)},e})(Uc);or(Mi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ln("staggerTo,staggerFrom,staggerFromTo",function(l){Mi[l]=function(){var e=new vn,t=d_.call(arguments,0);return t.splice(l==="staggerFromTo"?5:4,0,0),e[l].apply(e,t)}});var c0=function(e,t,i){return e[t]=i},UT=function(e,t,i){return e[t](i)},k2=function(e,t,i,n){return e[t](n.fp,i)},G2=function(e,t,i){return e.setAttribute(t,i)},h0=function(e,t){return mi(e[t])?UT:e0(e[t])&&e.setAttribute?G2:c0},HT=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},V2=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},kT=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(e===1&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},f0=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},W2=function(e,t,i,n){for(var o=this._pt,s;o;)s=o._next,o.p===n&&o.modifier(e,t,i),o=s},j2=function(e){for(var t=this._pt,i,n;t;)n=t._next,t.p===e&&!t.op||t.op===e?Hd(this,t,"_pt"):t.dep||(i=1),t=n;return!i},q2=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},GT=function(e){for(var t=e._pt,i,n,o,s;t;){for(i=t._next,n=o;n&&n.pr>t.pr;)n=n._next;(t._prev=n?n._prev:s)?t._prev._next=t:o=t,(t._next=n)?n._prev=t:s=t,t=i}e._pt=o},On=(function(){function l(t,i,n,o,s,c,u,h,d){this.t=i,this.s=o,this.c=s,this.p=n,this.r=c||HT,this.d=u||this,this.set=h||c0,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=l.prototype;return e.modifier=function(i,n,o){this.mSet=this.mSet||this.set,this.set=q2,this.m=i,this.mt=o,this.tween=n},l})();Ln(s0+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(l){return r0[l]=1});ar.TweenMax=ar.TweenLite=Mi;ar.TimelineLite=ar.TimelineMax=vn;ci=new vn({sortChildren:!1,defaults:ql,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});nr.stringFilter=PT;var po=[],nd={},X2=[],Uw=0,Y2=0,gg=function(e){return(nd[e]||X2).map(function(t){return t()})},__=function(){var e=Date.now(),t=[];e-Uw>2&&(gg("matchMediaInit"),po.forEach(function(i){var n=i.queries,o=i.conditions,s,c,u,h;for(c in n)s=Wr.matchMedia(n[c]).matches,s&&(u=1),s!==o[c]&&(o[c]=s,h=1);h&&(i.revert(),u&&t.push(i))}),gg("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Uw=e,gg("matchMedia"))},VT=(function(){function l(t,i){this.selector=i&&p_(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Y2++,t&&this.add(t)}var e=l.prototype;return e.add=function(i,n,o){mi(i)&&(o=n,n=i,i=mi);var s=this,c=function(){var h=ai,d=s.selector,m;return h&&h!==s&&h.data.push(s),o&&(s.selector=p_(o)),ai=s,m=n.apply(s,arguments),mi(m)&&s._r.push(m),ai=h,s.selector=d,s.isReverted=!1,m};return s.last=c,i===mi?c(s,function(u){return s.add(null,u)}):i?s[i]=c:c},e.ignore=function(i){var n=ai;ai=null,i(this),ai=n},e.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof l?i.push.apply(i,n.getTweens()):n instanceof Mi&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,n){var o=this;if(i?(function(){for(var c=o.getTweens(),u=o.data.length,h;u--;)h=o.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(d){return c.splice(c.indexOf(d),1)}));for(c.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,m){return m.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),u=o.data.length;u--;)h=o.data[u],h instanceof vn?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Mi)&&h.revert&&h.revert(i);o._r.forEach(function(d){return d(i,o)}),o.isReverted=!0})():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),n)for(var s=po.length;s--;)po[s].id===this.id&&po.splice(s,1)},e.revert=function(i){this.kill(i||{})},l})(),Z2=(function(){function l(t){this.contexts=[],this.scope=t,ai&&ai.data.push(this)}var e=l.prototype;return e.add=function(i,n,o){es(i)||(i={matches:i});var s=new VT(0,o||this.scope),c=s.conditions={},u,h,d;ai&&!s.selector&&(s.selector=ai.selector),this.contexts.push(s),n=s.add("onMatch",n),s.queries=i;for(h in i)h==="all"?d=1:(u=Wr.matchMedia(i[h]),u&&(po.indexOf(s)<0&&po.push(s),(c[h]=u.matches)&&(d=1),u.addListener?u.addListener(__):u.addEventListener("change",__)));return d&&n(s,function(m){return s.add(null,m)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},l})(),wd={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(n){return RT(n)})},timeline:function(e){return new vn(e)},getTweensOf:function(e,t){return ci.getTweensOf(e,t)},getProperty:function(e,t,i,n){Vi(e)&&(e=Tr(e)[0]);var o=co(e||{}).get,s=i?mT:pT;return i==="native"&&(i=""),e&&(t?s((Zn[t]&&Zn[t].get||o)(e,t,i,n)):function(c,u,h){return s((Zn[c]&&Zn[c].get||o)(e,c,u,h))})},quickSetter:function(e,t,i){if(e=Tr(e),e.length>1){var n=e.map(function(d){return Nn.quickSetter(d,t,i)}),o=n.length;return function(d){for(var m=o;m--;)n[m](d)}}e=e[0]||{};var s=Zn[t],c=co(e),u=c.harness&&(c.harness.aliases||{})[t]||t,h=s?function(d){var m=new s;Ll._pt=0,m.init(e,i?d+i:d,Ll,0,[e]),m.render(1,m),Ll._pt&&f0(1,Ll)}:c.set(e,u);return s?h:function(d){return h(e,u,i?d+i:d,c,1)}},quickTo:function(e,t,i){var n,o=Nn.to(e,or((n={},n[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),s=function(u,h,d){return o.resetTo(t,u,h,d)};return s.tween=o,s},isTweening:function(e){return ci.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=fo(e.ease,ql.ease)),zw(ql,e||{})},config:function(e){return zw(nr,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,o=e.defaults,s=e.extendTimeline;(n||"").split(",").forEach(function(c){return c&&!Zn[c]&&!ar[c]&&Nc(t+" effect requires "+c+" plugin.")}),fg[t]=function(c,u,h){return i(Tr(c),or(u||{},o),h)},s&&(vn.prototype[t]=function(c,u,h){return this.add(fg[t](c,es(u)?u:(h=u)&&{},this),h)})},registerEase:function(e,t){Bt[e]=fo(t)},parseEase:function(e,t){return arguments.length?fo(e,t):Bt},getById:function(e){return ci.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new vn(e),n,o;for(i.smoothChildTiming=Pn(e.smoothChildTiming),ci.remove(i),i._dp=0,i._time=i._tTime=ci._time,n=ci._first;n;)o=n._next,(t||!(!n._dur&&n instanceof Mi&&n.vars.onComplete===n._targets[0]))&&Yr(i,n,n._start-n._delay),n=o;return Yr(ci,i,0),i},context:function(e,t){return e?new VT(e,t):ai},matchMedia:function(e){return new Z2(e)},matchMediaRefresh:function(){return po.forEach(function(e){var t=e.conditions,i,n;for(n in t)t[n]&&(t[n]=!1,i=1);i&&e.revert()})||__()},addEventListener:function(e,t){var i=nd[e]||(nd[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=nd[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:C2,wrapYoyo:R2,distribute:ST,random:TT,snap:bT,normalize:M2,getUnit:sn,clamp:S2,splitColor:AT,toArray:Tr,selector:p_,mapRange:MT,pipe:T2,unitize:E2,interpolate:A2,shuffle:wT},install:uT,effects:fg,ticker:Jn,updateRoot:vn.updateRoot,plugins:Zn,globalTimeline:ci,core:{PropTween:On,globals:cT,Tween:Mi,Timeline:vn,Animation:Uc,getCache:co,_removeLinkedListItem:Hd,reverting:function(){return Ki},context:function(e){return e&&ai&&(ai.data.push(e),e._ctx=ai),ai},suppressOverwrites:function(e){return $_=e}}};Ln("to,from,fromTo,delayedCall,set,killTweensOf",function(l){return wd[l]=Mi[l]});Jn.add(vn.updateRoot);Ll=wd.to({},{duration:0});var K2=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Q2=function(e,t){var i=e._targets,n,o,s;for(n in t)for(o=i.length;o--;)s=e._ptLookup[o][n],s&&(s=s.d)&&(s._pt&&(s=K2(s,n)),s&&s.modifier&&s.modifier(t[n],e,i[o],n))},_g=function(e,t){return{name:e,headless:1,rawVars:1,init:function(n,o,s){s._onInit=function(c){var u,h;if(Vi(o)&&(u={},Ln(o,function(d){return u[d]=1}),o=u),t){u={};for(h in o)u[h]=t(o[h]);o=u}Q2(c,o)}}}},Nn=wd.registerPlugin({name:"attr",init:function(e,t,i,n,o){var s,c,u;this.tween=i;for(s in t)u=e.getAttribute(s)||"",c=this.add(e,"setAttribute",(u||0)+"",t[s],n,o,0,0,s),c.op=s,c.b=u,this._props.push(s)},render:function(e,t){for(var i=t._pt;i;)Ki?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},_g("roundProps",m_),_g("modifiers"),_g("snap",bT))||wd;Mi.version=vn.version=Nn.version="3.14.2";lT=1;t0()&&Kl();Bt.Power0;Bt.Power1;Bt.Power2;Bt.Power3;Bt.Power4;Bt.Linear;Bt.Quad;Bt.Cubic;Bt.Quart;Bt.Quint;Bt.Strong;Bt.Elastic;Bt.Back;Bt.SteppedEase;Bt.Bounce;Bt.Sine;Bt.Expo;Bt.Circ;var Hw,pa,Il,d0,so,kw,p0,J2=function(){return typeof window<"u"},zs={},Ja=180/Math.PI,Ul=Math.PI/180,hl=Math.atan2,Gw=1e8,m0=/([A-Z])/g,$2=/(left|right|width|margin|padding|x)/i,eR=/[\s,\(]\S/,Zr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},v_=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},tR=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},iR=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},nR=function(e,t){return t.set(t.t,t.p,e===1?t.e:e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},rR=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},WT=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},jT=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},sR=function(e,t,i){return e.style[t]=i},aR=function(e,t,i){return e.style.setProperty(t,i)},oR=function(e,t,i){return e._gsap[t]=i},lR=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},uR=function(e,t,i,n,o){var s=e._gsap;s.scaleX=s.scaleY=i,s.renderTransform(o,s)},cR=function(e,t,i,n,o){var s=e._gsap;s[t]=i,s.renderTransform(o,s)},fi="transform",zn=fi+"Origin",hR=function l(e,t){var i=this,n=this.target,o=n.style,s=n._gsap;if(e in zs&&o){if(this.tfm=this.tfm||{},e!=="transform")e=Zr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return i.tfm[c]=Ms(n,c)}):this.tfm[e]=s.x?s[e]:Ms(n,e),e===zn&&(this.tfm.zOrigin=s.zOrigin);else return Zr.transform.split(",").forEach(function(c){return l.call(i,c,t)});if(this.props.indexOf(fi)>=0)return;s.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(zn,t,"")),e=fi}(o||t)&&this.props.push(e,t,o[e])},qT=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},fR=function(){var e=this.props,t=this.target,i=t.style,n=t._gsap,o,s;for(o=0;o<e.length;o+=3)e[o+1]?e[o+1]===2?t[e[o]](e[o+2]):t[e[o]]=e[o+2]:e[o+2]?i[e[o]]=e[o+2]:i.removeProperty(e[o].substr(0,2)==="--"?e[o]:e[o].replace(m0,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)n[s]=this.tfm[s];n.svg&&(n.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),o=p0(),(!o||!o.isStart)&&!i[fi]&&(qT(i),n.zOrigin&&i[zn]&&(i[zn]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},XT=function(e,t){var i={target:e,props:[],revert:fR,save:hR};return e._gsap||Nn.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(n){return i.save(n)}),i},YT,y_=function(e,t){var i=pa.createElementNS?pa.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):pa.createElement(e);return i&&i.style?i:pa.createElement(e)},tr=function l(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(m0,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&l(e,Ql(t)||t,1)||""},Vw="O,Moz,ms,Ms,Webkit".split(","),Ql=function(e,t,i){var n=t||so,o=n.style,s=5;if(e in o&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);s--&&!(Vw[s]+e in o););return s<0?null:(s===3?"ms":s>=0?Vw[s]:"")+e},x_=function(){J2()&&window.document&&(Hw=window,pa=Hw.document,Il=pa.documentElement,so=y_("div")||{style:{}},y_("div"),fi=Ql(fi),zn=fi+"Origin",so.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",YT=!!Ql("perspective"),p0=Nn.core.reverting,d0=1)},Ww=function(e){var t=e.ownerSVGElement,i=y_("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0),o;n.style.display="block",i.appendChild(n),Il.appendChild(i);try{o=n.getBBox()}catch{}return i.removeChild(n),Il.removeChild(i),o},jw=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},ZT=function(e){var t,i;try{t=e.getBBox()}catch{t=Ww(e),i=1}return t&&(t.width||t.height)||i||(t=Ww(e)),t&&!t.width&&!t.x&&!t.y?{x:+jw(e,["x","cx","x1"])||0,y:+jw(e,["y","cy","y1"])||0,width:0,height:0}:t},KT=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ZT(e))},Ta=function(e,t){if(t){var i=e.style,n;t in zs&&t!==zn&&(t=fi),i.removeProperty?(n=t.substr(0,2),(n==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(n==="--"?t:t.replace(m0,"-$1").toLowerCase())):i.removeAttribute(t)}},ma=function(e,t,i,n,o,s){var c=new On(e._pt,t,i,0,1,s?jT:WT);return e._pt=c,c.b=n,c.e=o,e._props.push(i),c},qw={deg:1,rad:1,turn:1},dR={grid:1,flex:1},Ea=function l(e,t,i,n){var o=parseFloat(i)||0,s=(i+"").trim().substr((o+"").length)||"px",c=so.style,u=$2.test(t),h=e.tagName.toLowerCase()==="svg",d=(h?"client":"offset")+(u?"Width":"Height"),m=100,g=n==="px",_=n==="%",w,v,x,b;if(n===s||!o||qw[n]||qw[s])return o;if(s!=="px"&&!g&&(o=l(e,t,i,"px")),b=e.getCTM&&KT(e),(_||s==="%")&&(zs[t]||~t.indexOf("adius")))return w=b?e.getBBox()[u?"width":"height"]:e[d],vi(_?o/w*m:o/100*w);if(c[u?"width":"height"]=m+(g?s:n),v=n!=="rem"&&~t.indexOf("adius")||n==="em"&&e.appendChild&&!h?e:e.parentNode,b&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===pa||!v.appendChild)&&(v=pa.body),x=v._gsap,x&&_&&x.width&&u&&x.time===Jn.time&&!x.uncache)return vi(o/x.width*m);if(_&&(t==="height"||t==="width")){var E=e.style[t];e.style[t]=m+n,w=e[d],E?e.style[t]=E:Ta(e,t)}else(_||s==="%")&&!dR[tr(v,"display")]&&(c.position=tr(e,"position")),v===e&&(c.position="static"),v.appendChild(so),w=so[d],v.removeChild(so),c.position="absolute";return u&&_&&(x=co(v),x.time=Jn.time,x.width=v[d]),vi(g?w*o/m:w&&o?m/w*o:0)},Ms=function(e,t,i,n){var o;return d0||x_(),t in Zr&&t!=="transform"&&(t=Zr[t],~t.indexOf(",")&&(t=t.split(",")[0])),zs[t]&&t!=="transform"?(o=kc(e,n),o=t!=="transformOrigin"?o[t]:o.svg?o.origin:bd(tr(e,zn))+" "+o.zOrigin+"px"):(o=e.style[t],(!o||o==="auto"||n||~(o+"").indexOf("calc("))&&(o=Sd[t]&&Sd[t](e,t,i)||tr(e,t)||fT(e,t)||(t==="opacity"?1:0))),i&&!~(o+"").trim().indexOf(" ")?Ea(e,t,o,i)+i:o},pR=function(e,t,i,n){if(!i||i==="none"){var o=Ql(t,e,1),s=o&&tr(e,o,1);s&&s!==i?(t=o,i=s):t==="borderColor"&&(i=tr(e,"borderTopColor"))}var c=new On(this._pt,e.style,t,0,1,kT),u=0,h=0,d,m,g,_,w,v,x,b,E,M,D,P;if(c.b=i,c.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=tr(e,n.substring(4,n.indexOf(")")))),n==="auto"&&(v=e.style[t],e.style[t]=n,n=tr(e,t)||n,v?e.style[t]=v:Ta(e,t)),d=[i,n],PT(d),i=d[0],n=d[1],g=i.match(Pl)||[],P=n.match(Pl)||[],P.length){for(;m=Pl.exec(n);)x=m[0],E=n.substring(u,m.index),w?w=(w+1)%5:(E.substr(-5)==="rgba("||E.substr(-5)==="hsla(")&&(w=1),x!==(v=g[h++]||"")&&(_=parseFloat(v)||0,D=v.substr((_+"").length),x.charAt(1)==="="&&(x=Fl(_,x)+D),b=parseFloat(x),M=x.substr((b+"").length),u=Pl.lastIndex-M.length,M||(M=M||nr.units[t]||D,u===n.length&&(n+=M,c.e+=M)),D!==M&&(_=Ea(e,t,v,M)||0),c._pt={_next:c._pt,p:E||h===1?E:",",s:_,c:b-_,m:w&&w<4||t==="zIndex"?Math.round:0});c.c=u<n.length?n.substring(u,n.length):""}else c.r=t==="display"&&n==="none"?jT:WT;return oT.test(n)&&(c.e=0),this._pt=c,c},Xw={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},mR=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(e=i,i=n,n=e),t[0]=Xw[i]||i,t[1]=Xw[n]||n,t.join(" ")},gR=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,n=i.style,o=t.u,s=i._gsap,c,u,h;if(o==="all"||o===!0)n.cssText="",u=1;else for(o=o.split(","),h=o.length;--h>-1;)c=o[h],zs[c]&&(u=1,c=c==="transformOrigin"?zn:fi),Ta(i,c);u&&(Ta(i,fi),s&&(s.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",kc(i,1),s.uncache=1,qT(n)))}},Sd={clearProps:function(e,t,i,n,o){if(o.data!=="isFromStart"){var s=e._pt=new On(e._pt,t,i,0,0,gR);return s.u=n,s.pr=-10,s.tween=o,e._props.push(i),1}}},Hc=[1,0,0,1,0,0],QT={},JT=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Yw=function(e){var t=tr(e,fi);return JT(t)?Hc:t.substr(7).match(aT).map(vi)},g0=function(e,t){var i=e._gsap||co(e),n=e.style,o=Yw(e),s,c,u,h;return i.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,o=[u.a,u.b,u.c,u.d,u.e,u.f],o.join(",")==="1,0,0,1,0,0"?Hc:o):(o===Hc&&!e.offsetParent&&e!==Il&&!i.svg&&(u=n.display,n.display="block",s=e.parentNode,(!s||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,c=e.nextElementSibling,Il.appendChild(e)),o=Yw(e),u?n.display=u:Ta(e,"display"),h&&(c?s.insertBefore(e,c):s?s.appendChild(e):Il.removeChild(e))),t&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},w_=function(e,t,i,n,o,s){var c=e._gsap,u=o||g0(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,m=c.xOffset||0,g=c.yOffset||0,_=u[0],w=u[1],v=u[2],x=u[3],b=u[4],E=u[5],M=t.split(" "),D=parseFloat(M[0])||0,P=parseFloat(M[1])||0,z,O,L,N;i?u!==Hc&&(O=_*x-w*v)&&(L=D*(x/O)+P*(-v/O)+(v*E-x*b)/O,N=D*(-w/O)+P*(_/O)-(_*E-w*b)/O,D=L,P=N):(z=ZT(e),D=z.x+(~M[0].indexOf("%")?D/100*z.width:D),P=z.y+(~(M[1]||M[0]).indexOf("%")?P/100*z.height:P)),n||n!==!1&&c.smooth?(b=D-h,E=P-d,c.xOffset=m+(b*_+E*v)-b,c.yOffset=g+(b*w+E*x)-E):c.xOffset=c.yOffset=0,c.xOrigin=D,c.yOrigin=P,c.smooth=!!n,c.origin=t,c.originIsAbsolute=!!i,e.style[zn]="0px 0px",s&&(ma(s,c,"xOrigin",h,D),ma(s,c,"yOrigin",d,P),ma(s,c,"xOffset",m,c.xOffset),ma(s,c,"yOffset",g,c.yOffset)),e.setAttribute("data-svg-origin",D+" "+P)},kc=function(e,t){var i=e._gsap||new NT(e);if("x"in i&&!t&&!i.uncache)return i;var n=e.style,o=i.scaleX<0,s="px",c="deg",u=getComputedStyle(e),h=tr(e,zn)||"0",d,m,g,_,w,v,x,b,E,M,D,P,z,O,L,N,j,se,K,X,Z,he,Y,Q,ee,_e,G,V,q,ie,me,ue;return d=m=g=v=x=b=E=M=D=0,_=w=1,i.svg=!!(e.getCTM&&KT(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(n[fi]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[fi]!=="none"?u[fi]:"")),n.scale=n.rotate=n.translate="none"),O=g0(e,i.svg),i.svg&&(i.uncache?(ee=e.getBBox(),h=i.xOrigin-ee.x+"px "+(i.yOrigin-ee.y)+"px",Q=""):Q=!t&&e.getAttribute("data-svg-origin"),w_(e,Q||h,!!Q||i.originIsAbsolute,i.smooth!==!1,O)),P=i.xOrigin||0,z=i.yOrigin||0,O!==Hc&&(se=O[0],K=O[1],X=O[2],Z=O[3],d=he=O[4],m=Y=O[5],O.length===6?(_=Math.sqrt(se*se+K*K),w=Math.sqrt(Z*Z+X*X),v=se||K?hl(K,se)*Ja:0,E=X||Z?hl(X,Z)*Ja+v:0,E&&(w*=Math.abs(Math.cos(E*Ul))),i.svg&&(d-=P-(P*se+z*X),m-=z-(P*K+z*Z))):(ue=O[6],ie=O[7],G=O[8],V=O[9],q=O[10],me=O[11],d=O[12],m=O[13],g=O[14],L=hl(ue,q),x=L*Ja,L&&(N=Math.cos(-L),j=Math.sin(-L),Q=he*N+G*j,ee=Y*N+V*j,_e=ue*N+q*j,G=he*-j+G*N,V=Y*-j+V*N,q=ue*-j+q*N,me=ie*-j+me*N,he=Q,Y=ee,ue=_e),L=hl(-X,q),b=L*Ja,L&&(N=Math.cos(-L),j=Math.sin(-L),Q=se*N-G*j,ee=K*N-V*j,_e=X*N-q*j,me=Z*j+me*N,se=Q,K=ee,X=_e),L=hl(K,se),v=L*Ja,L&&(N=Math.cos(L),j=Math.sin(L),Q=se*N+K*j,ee=he*N+Y*j,K=K*N-se*j,Y=Y*N-he*j,se=Q,he=ee),x&&Math.abs(x)+Math.abs(v)>359.9&&(x=v=0,b=180-b),_=vi(Math.sqrt(se*se+K*K+X*X)),w=vi(Math.sqrt(Y*Y+ue*ue)),L=hl(he,Y),E=Math.abs(L)>2e-4?L*Ja:0,D=me?1/(me<0?-me:me):0),i.svg&&(Q=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!JT(tr(e,fi)),Q&&e.setAttribute("transform",Q))),Math.abs(E)>90&&Math.abs(E)<270&&(o?(_*=-1,E+=v<=0?180:-180,v+=v<=0?180:-180):(w*=-1,E+=E<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+s,i.y=m-((i.yPercent=m&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-m)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+s,i.z=g+s,i.scaleX=vi(_),i.scaleY=vi(w),i.rotation=vi(v)+c,i.rotationX=vi(x)+c,i.rotationY=vi(b)+c,i.skewX=E+c,i.skewY=M+c,i.transformPerspective=D+s,(i.zOrigin=parseFloat(h.split(" ")[2])||!t&&i.zOrigin||0)&&(n[zn]=bd(h)),i.xOffset=i.yOffset=0,i.force3D=nr.force3D,i.renderTransform=i.svg?vR:YT?$T:_R,i.uncache=0,i},bd=function(e){return(e=e.split(" "))[0]+" "+e[1]},vg=function(e,t,i){var n=sn(t);return vi(parseFloat(t)+parseFloat(Ea(e,"x",i+"px",n)))+n},_R=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,$T(e,t)},qa="0deg",Ju="0px",Xa=") ",$T=function(e,t){var i=t||this,n=i.xPercent,o=i.yPercent,s=i.x,c=i.y,u=i.z,h=i.rotation,d=i.rotationY,m=i.rotationX,g=i.skewX,_=i.skewY,w=i.scaleX,v=i.scaleY,x=i.transformPerspective,b=i.force3D,E=i.target,M=i.zOrigin,D="",P=b==="auto"&&e&&e!==1||b===!0;if(M&&(m!==qa||d!==qa)){var z=parseFloat(d)*Ul,O=Math.sin(z),L=Math.cos(z),N;z=parseFloat(m)*Ul,N=Math.cos(z),s=vg(E,s,O*N*-M),c=vg(E,c,-Math.sin(z)*-M),u=vg(E,u,L*N*-M+M)}x!==Ju&&(D+="perspective("+x+Xa),(n||o)&&(D+="translate("+n+"%, "+o+"%) "),(P||s!==Ju||c!==Ju||u!==Ju)&&(D+=u!==Ju||P?"translate3d("+s+", "+c+", "+u+") ":"translate("+s+", "+c+Xa),h!==qa&&(D+="rotate("+h+Xa),d!==qa&&(D+="rotateY("+d+Xa),m!==qa&&(D+="rotateX("+m+Xa),(g!==qa||_!==qa)&&(D+="skew("+g+", "+_+Xa),(w!==1||v!==1)&&(D+="scale("+w+", "+v+Xa),E.style[fi]=D||"translate(0, 0)"},vR=function(e,t){var i=t||this,n=i.xPercent,o=i.yPercent,s=i.x,c=i.y,u=i.rotation,h=i.skewX,d=i.skewY,m=i.scaleX,g=i.scaleY,_=i.target,w=i.xOrigin,v=i.yOrigin,x=i.xOffset,b=i.yOffset,E=i.forceCSS,M=parseFloat(s),D=parseFloat(c),P,z,O,L,N;u=parseFloat(u),h=parseFloat(h),d=parseFloat(d),d&&(d=parseFloat(d),h+=d,u+=d),u||h?(u*=Ul,h*=Ul,P=Math.cos(u)*m,z=Math.sin(u)*m,O=Math.sin(u-h)*-g,L=Math.cos(u-h)*g,h&&(d*=Ul,N=Math.tan(h-d),N=Math.sqrt(1+N*N),O*=N,L*=N,d&&(N=Math.tan(d),N=Math.sqrt(1+N*N),P*=N,z*=N)),P=vi(P),z=vi(z),O=vi(O),L=vi(L)):(P=m,L=g,z=O=0),(M&&!~(s+"").indexOf("px")||D&&!~(c+"").indexOf("px"))&&(M=Ea(_,"x",s,"px"),D=Ea(_,"y",c,"px")),(w||v||x||b)&&(M=vi(M+w-(w*P+v*O)+x),D=vi(D+v-(w*z+v*L)+b)),(n||o)&&(N=_.getBBox(),M=vi(M+n/100*N.width),D=vi(D+o/100*N.height)),N="matrix("+P+","+z+","+O+","+L+","+M+","+D+")",_.setAttribute("transform",N),E&&(_.style[fi]=N)},yR=function(e,t,i,n,o){var s=360,c=Vi(o),u=parseFloat(o)*(c&&~o.indexOf("rad")?Ja:1),h=u-n,d=n+h+"deg",m,g;return c&&(m=o.split("_")[1],m==="short"&&(h%=s,h!==h%(s/2)&&(h+=h<0?s:-s)),m==="cw"&&h<0?h=(h+s*Gw)%s-~~(h/s)*s:m==="ccw"&&h>0&&(h=(h-s*Gw)%s-~~(h/s)*s)),e._pt=g=new On(e._pt,t,i,n,h,tR),g.e=d,g.u="deg",e._props.push(i),g},Zw=function(e,t){for(var i in t)e[i]=t[i];return e},xR=function(e,t,i){var n=Zw({},i._gsap),o="perspective,force3D,transformOrigin,svgOrigin",s=i.style,c,u,h,d,m,g,_,w;n.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),s[fi]=t,c=kc(i,1),Ta(i,fi),i.setAttribute("transform",h)):(h=getComputedStyle(i)[fi],s[fi]=t,c=kc(i,1),s[fi]=h);for(u in zs)h=n[u],d=c[u],h!==d&&o.indexOf(u)<0&&(_=sn(h),w=sn(d),m=_!==w?Ea(i,u,h,w):parseFloat(h),g=parseFloat(d),e._pt=new On(e._pt,c,u,m,g-m,v_),e._pt.u=w||0,e._props.push(u));Zw(c,n)};Ln("padding,margin,Width,Radius",function(l,e){var t="Top",i="Right",n="Bottom",o="Left",s=(e<3?[t,i,n,o]:[t+o,t+i,n+i,n+o]).map(function(c){return e<2?l+c:"border"+c+l});Sd[e>1?"border"+l:l]=function(c,u,h,d,m){var g,_;if(arguments.length<4)return g=s.map(function(w){return Ms(c,w,h)}),_=g.join(" "),_.split(g[0]).length===5?g[0]:_;g=(d+"").split(" "),_={},s.forEach(function(w,v){return _[w]=g[v]=g[v]||g[(v-1)/2|0]}),c.init(u,_,m)}});var e1={name:"css",register:x_,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,o){var s=this._props,c=e.style,u=i.vars.startAt,h,d,m,g,_,w,v,x,b,E,M,D,P,z,O,L,N;d0||x_(),this.styles=this.styles||XT(e),L=this.styles.props,this.tween=i;for(v in t)if(v!=="autoRound"&&(d=t[v],!(Zn[v]&&BT(v,t,i,n,e,o)))){if(_=typeof d,w=Sd[v],_==="function"&&(d=d.call(i,n,e,o),_=typeof d),_==="string"&&~d.indexOf("random(")&&(d=Fc(d)),w)w(this,e,v,d,i)&&(O=1);else if(v.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(v)+"").trim(),d+="",xa.lastIndex=0,xa.test(h)||(x=sn(h),b=sn(d),b?x!==b&&(h=Ea(e,v,h,b)+b):x&&(d+=x)),this.add(c,"setProperty",h,d,n,o,0,0,v),s.push(v),L.push(v,0,c[v]);else if(_!=="undefined"){if(u&&v in u?(h=typeof u[v]=="function"?u[v].call(i,n,e,o):u[v],Vi(h)&&~h.indexOf("random(")&&(h=Fc(h)),sn(h+"")||h==="auto"||(h+=nr.units[v]||sn(Ms(e,v))||""),(h+"").charAt(1)==="="&&(h=Ms(e,v))):h=Ms(e,v),g=parseFloat(h),E=_==="string"&&d.charAt(1)==="="&&d.substr(0,2),E&&(d=d.substr(2)),m=parseFloat(d),v in Zr&&(v==="autoAlpha"&&(g===1&&Ms(e,"visibility")==="hidden"&&m&&(g=0),L.push("visibility",0,c.visibility),ma(this,c,"visibility",g?"inherit":"hidden",m?"inherit":"hidden",!m)),v!=="scale"&&v!=="transform"&&(v=Zr[v],~v.indexOf(",")&&(v=v.split(",")[0]))),M=v in zs,M){if(this.styles.save(v),N=d,_==="string"&&d.substring(0,6)==="var(--"){if(d=tr(e,d.substring(4,d.indexOf(")"))),d.substring(0,5)==="calc("){var j=e.style.perspective;e.style.perspective=d,d=tr(e,"perspective"),j?e.style.perspective=j:Ta(e,"perspective")}m=parseFloat(d)}if(D||(P=e._gsap,P.renderTransform&&!t.parseTransform||kc(e,t.parseTransform),z=t.smoothOrigin!==!1&&P.smooth,D=this._pt=new On(this._pt,c,fi,0,1,P.renderTransform,P,0,-1),D.dep=1),v==="scale")this._pt=new On(this._pt,P,"scaleY",P.scaleY,(E?Fl(P.scaleY,E+m):m)-P.scaleY||0,v_),this._pt.u=0,s.push("scaleY",v),v+="X";else if(v==="transformOrigin"){L.push(zn,0,c[zn]),d=mR(d),P.svg?w_(e,d,0,z,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==P.zOrigin&&ma(this,P,"zOrigin",P.zOrigin,b),ma(this,c,v,bd(h),bd(d)));continue}else if(v==="svgOrigin"){w_(e,d,1,z,0,this);continue}else if(v in QT){yR(this,P,v,g,E?Fl(g,E+d):d);continue}else if(v==="smoothOrigin"){ma(this,P,"smooth",P.smooth,d);continue}else if(v==="force3D"){P[v]=d;continue}else if(v==="transform"){xR(this,d,e);continue}}else v in c||(v=Ql(v)||v);if(M||(m||m===0)&&(g||g===0)&&!eR.test(d)&&v in c)x=(h+"").substr((g+"").length),m||(m=0),b=sn(d)||(v in nr.units?nr.units[v]:x),x!==b&&(g=Ea(e,v,h,b)),this._pt=new On(this._pt,M?P:c,v,g,(E?Fl(g,E+m):m)-g,!M&&(b==="px"||v==="zIndex")&&t.autoRound!==!1?rR:v_),this._pt.u=b||0,M&&N!==d?(this._pt.b=h,this._pt.e=N,this._pt.r=nR):x!==b&&b!=="%"&&(this._pt.b=h,this._pt.r=iR);else if(v in c)pR.call(this,e,v,h,E?E+d:d);else if(v in e)this.add(e,v,h||e[v],E?E+d:d,n,o);else if(v!=="parseTransform"){n0(v,d);continue}M||(v in c?L.push(v,0,c[v]):typeof e[v]=="function"?L.push(v,2,e[v]()):L.push(v,1,h||e[v])),s.push(v)}}O&&GT(this)},render:function(e,t){if(t.tween._time||!p0())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ms,aliases:Zr,getSetter:function(e,t,i){var n=Zr[t];return n&&n.indexOf(",")<0&&(t=n),t in zs&&t!==zn&&(e._gsap.x||Ms(e,"x"))?i&&kw===i?t==="scale"?lR:oR:(kw=i||{})&&(t==="scale"?uR:cR):e.style&&!e0(e.style[t])?sR:~t.indexOf("-")?aR:h0(e,t)},core:{_removeProperty:Ta,_getMatrix:g0}};Nn.utils.checkPrefix=Ql;Nn.core.getStyleSaver=XT;(function(l,e,t,i){var n=Ln(l+","+e+","+t,function(o){zs[o]=1});Ln(e,function(o){nr.units[o]="deg",QT[o]=1}),Zr[n[13]]=l+","+e,Ln(i,function(o){var s=o.split(":");Zr[s[1]]=n[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ln("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(l){nr.units[l]="px"});Nn.registerPlugin(e1);var Mt=Nn.registerPlugin(e1)||Nn;Mt.core.Tween;function wR(l,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,i.key,i)}}function SR(l,e,t){return e&&wR(l.prototype,e),l}var Zi,rd,$n,ga,_a,Hl,t1,$a,Ec,i1,As,Lr,n1,r1=function(){return Zi||typeof window<"u"&&(Zi=window.gsap)&&Zi.registerPlugin&&Zi},s1=1,Ol=[],At=[],Qr=[],Mc=Date.now,S_=function(e,t){return t},bR=function(){var e=Ec.core,t=e.bridge||{},i=e._scrollers,n=e._proxies;i.push.apply(i,At),n.push.apply(n,Qr),At=i,Qr=n,S_=function(s,c){return t[s](c)}},wa=function(e,t){return~Qr.indexOf(e)&&Qr[Qr.indexOf(e)+1][t]},Cc=function(e){return!!~i1.indexOf(e)},fn=function(e,t,i,n,o){return e.addEventListener(t,i,{passive:n!==!1,capture:!!o})},cn=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},_f="scrollLeft",vf="scrollTop",b_=function(){return As&&As.isPressed||At.cache++},Td=function(e,t){var i=function n(o){if(o||o===0){s1&&($n.history.scrollRestoration="manual");var s=As&&As.isPressed;o=n.v=Math.round(o)||(As&&As.iOS?1:0),e(o),n.cacheID=At.cache,s&&S_("ss",o)}else(t||At.cache!==n.cacheID||S_("ref"))&&(n.cacheID=At.cache,n.v=e());return n.v+n.offset};return i.offset=0,e&&i},yn={s:_f,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Td(function(l){return arguments.length?$n.scrollTo(l,Di.sc()):$n.pageXOffset||ga[_f]||_a[_f]||Hl[_f]||0})},Di={s:vf,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:yn,sc:Td(function(l){return arguments.length?$n.scrollTo(yn.sc(),l):$n.pageYOffset||ga[vf]||_a[vf]||Hl[vf]||0})},An=function(e,t){return(t&&t._ctx&&t._ctx.selector||Zi.utils.toArray)(e)[0]||(typeof e=="string"&&Zi.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},TR=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},Ma=function(e,t){var i=t.s,n=t.sc;Cc(e)&&(e=ga.scrollingElement||_a);var o=At.indexOf(e),s=n===Di.sc?1:2;!~o&&(o=At.push(e)-1),At[o+s]||fn(e,"scroll",b_);var c=At[o+s],u=c||(At[o+s]=Td(wa(e,i),!0)||(Cc(e)?n:Td(function(h){return arguments.length?e[i]=h:e[i]})));return u.target=e,c||(u.smooth=Zi.getProperty(e,"scrollBehavior")==="smooth"),u},T_=function(e,t,i){var n=e,o=e,s=Mc(),c=s,u=t||50,h=Math.max(500,u*3),d=function(w,v){var x=Mc();v||x-s>u?(o=n,n=w,c=s,s=x):i?n+=w:n=o+(w-o)/(x-c)*(s-c)},m=function(){o=n=i?0:n,c=s=0},g=function(w){var v=c,x=o,b=Mc();return(w||w===0)&&w!==n&&d(w),s===c||b-c>h?0:(n+(i?x:-x))/((i?b:s)-v)*1e3};return{update:d,reset:m,getVelocity:g}},$u=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Kw=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},a1=function(){Ec=Zi.core.globals().ScrollTrigger,Ec&&Ec.core&&bR()},o1=function(e){return Zi=e||r1(),!rd&&Zi&&typeof document<"u"&&document.body&&($n=window,ga=document,_a=ga.documentElement,Hl=ga.body,i1=[$n,ga,_a,Hl],Zi.utils.clamp,n1=Zi.core.context||function(){},$a="onpointerenter"in Hl?"pointer":"mouse",t1=yi.isTouch=$n.matchMedia&&$n.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in $n||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Lr=yi.eventTypes=("ontouchstart"in _a?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in _a?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return s1=0},500),a1(),rd=1),rd};yn.op=Di;At.cache=0;var yi=(function(){function l(t){this.init(t)}var e=l.prototype;return e.init=function(i){rd||o1(Zi)||console.warn("Please gsap.registerPlugin(Observer)"),Ec||a1();var n=i.tolerance,o=i.dragMinimum,s=i.type,c=i.target,u=i.lineHeight,h=i.debounce,d=i.preventDefault,m=i.onStop,g=i.onStopDelay,_=i.ignore,w=i.wheelSpeed,v=i.event,x=i.onDragStart,b=i.onDragEnd,E=i.onDrag,M=i.onPress,D=i.onRelease,P=i.onRight,z=i.onLeft,O=i.onUp,L=i.onDown,N=i.onChangeX,j=i.onChangeY,se=i.onChange,K=i.onToggleX,X=i.onToggleY,Z=i.onHover,he=i.onHoverEnd,Y=i.onMove,Q=i.ignoreCheck,ee=i.isNormalizer,_e=i.onGestureStart,G=i.onGestureEnd,V=i.onWheel,q=i.onEnable,ie=i.onDisable,me=i.onClick,ue=i.scrollSpeed,ae=i.capture,Be=i.allowClicks,He=i.lockAxis,Fe=i.onLockAxis;this.target=c=An(c)||_a,this.vars=i,_&&(_=Zi.utils.toArray(_)),n=n||1e-9,o=o||0,w=w||1,ue=ue||1,s=s||"wheel,touch,pointer",h=h!==!1,u||(u=parseFloat($n.getComputedStyle(Hl).lineHeight)||22);var Ve,at,et,Ge,ht,Ct,T,F=this,te=0,oe=0,Ne=i.passive||!d&&i.passive!==!1,De=Ma(c,yn),H=Ma(c,Di),B=De(),ge=H(),we=~s.indexOf("touch")&&!~s.indexOf("pointer")&&Lr[0]==="pointerdown",Ce=Cc(c),Le=c.ownerDocument||ga,Ue=[0,0,0],Ie=[0,0,0],C=0,A=function(){return C=Mc()},I=function(Qe,gt){return(F.event=Qe)&&_&&TR(Qe.target,_)||gt&&we&&Qe.pointerType!=="touch"||Q&&Q(Qe,gt)},k=function(){F._vx.reset(),F._vy.reset(),at.pause(),m&&m(F)},ne=function(){var Qe=F.deltaX=Kw(Ue),gt=F.deltaY=Kw(Ie),qe=Math.abs(Qe)>=n,dt=Math.abs(gt)>=n;se&&(qe||dt)&&se(F,Qe,gt,Ue,Ie),qe&&(P&&F.deltaX>0&&P(F),z&&F.deltaX<0&&z(F),N&&N(F),K&&F.deltaX<0!=te<0&&K(F),te=F.deltaX,Ue[0]=Ue[1]=Ue[2]=0),dt&&(L&&F.deltaY>0&&L(F),O&&F.deltaY<0&&O(F),j&&j(F),X&&F.deltaY<0!=oe<0&&X(F),oe=F.deltaY,Ie[0]=Ie[1]=Ie[2]=0),(Ge||et)&&(Y&&Y(F),et&&(x&&et===1&&x(F),E&&E(F),et=0),Ge=!1),Ct&&!(Ct=!1)&&Fe&&Fe(F),ht&&(V(F),ht=!1),Ve=0},Te=function(Qe,gt,qe){Ue[qe]+=Qe,Ie[qe]+=gt,F._vx.update(Qe),F._vy.update(gt),h?Ve||(Ve=requestAnimationFrame(ne)):ne()},ze=function(Qe,gt){He&&!T&&(F.axis=T=Math.abs(Qe)>Math.abs(gt)?"x":"y",Ct=!0),T!=="y"&&(Ue[2]+=Qe,F._vx.update(Qe,!0)),T!=="x"&&(Ie[2]+=gt,F._vy.update(gt,!0)),h?Ve||(Ve=requestAnimationFrame(ne)):ne()},tt=function(Qe){if(!I(Qe,1)){Qe=$u(Qe,d);var gt=Qe.clientX,qe=Qe.clientY,dt=gt-F.x,st=qe-F.y,ft=F.isDragging;F.x=gt,F.y=qe,(ft||(dt||st)&&(Math.abs(F.startX-gt)>=o||Math.abs(F.startY-qe)>=o))&&(et||(et=ft?2:1),ft||(F.isDragging=!0),ze(dt,st))}},xt=F.onPress=function(Ke){I(Ke,1)||Ke&&Ke.button||(F.axis=T=null,at.pause(),F.isPressed=!0,Ke=$u(Ke),te=oe=0,F.startX=F.x=Ke.clientX,F.startY=F.y=Ke.clientY,F._vx.reset(),F._vy.reset(),fn(ee?c:Le,Lr[1],tt,Ne,!0),F.deltaX=F.deltaY=0,M&&M(F))},J=F.onRelease=function(Ke){if(!I(Ke,1)){cn(ee?c:Le,Lr[1],tt,!0);var Qe=!isNaN(F.y-F.startY),gt=F.isDragging,qe=gt&&(Math.abs(F.x-F.startX)>3||Math.abs(F.y-F.startY)>3),dt=$u(Ke);!qe&&Qe&&(F._vx.reset(),F._vy.reset(),d&&Be&&Zi.delayedCall(.08,function(){if(Mc()-C>300&&!Ke.defaultPrevented){if(Ke.target.click)Ke.target.click();else if(Le.createEvent){var st=Le.createEvent("MouseEvents");st.initMouseEvent("click",!0,!0,$n,1,dt.screenX,dt.screenY,dt.clientX,dt.clientY,!1,!1,!1,!1,0,null),Ke.target.dispatchEvent(st)}}})),F.isDragging=F.isGesturing=F.isPressed=!1,m&&gt&&!ee&&at.restart(!0),et&&ne(),b&&gt&&b(F),D&&D(F,qe)}},fe=function(Qe){return Qe.touches&&Qe.touches.length>1&&(F.isGesturing=!0)&&_e(Qe,F.isDragging)},Oe=function(){return(F.isGesturing=!1)||G(F)},We=function(Qe){if(!I(Qe)){var gt=De(),qe=H();Te((gt-B)*ue,(qe-ge)*ue,1),B=gt,ge=qe,m&&at.restart(!0)}},je=function(Qe){if(!I(Qe)){Qe=$u(Qe,d),V&&(ht=!0);var gt=(Qe.deltaMode===1?u:Qe.deltaMode===2?$n.innerHeight:1)*w;Te(Qe.deltaX*gt,Qe.deltaY*gt,0),m&&!ee&&at.restart(!0)}},ut=function(Qe){if(!I(Qe)){var gt=Qe.clientX,qe=Qe.clientY,dt=gt-F.x,st=qe-F.y;F.x=gt,F.y=qe,Ge=!0,m&&at.restart(!0),(dt||st)&&ze(dt,st)}},Ut=function(Qe){F.event=Qe,Z(F)},jt=function(Qe){F.event=Qe,he(F)},Ji=function(Qe){return I(Qe)||$u(Qe,d)&&me(F)};at=F._dc=Zi.delayedCall(g||.25,k).pause(),F.deltaX=F.deltaY=0,F._vx=T_(0,50,!0),F._vy=T_(0,50,!0),F.scrollX=De,F.scrollY=H,F.isDragging=F.isGesturing=F.isPressed=!1,n1(this),F.enable=function(Ke){return F.isEnabled||(fn(Ce?Le:c,"scroll",b_),s.indexOf("scroll")>=0&&fn(Ce?Le:c,"scroll",We,Ne,ae),s.indexOf("wheel")>=0&&fn(c,"wheel",je,Ne,ae),(s.indexOf("touch")>=0&&t1||s.indexOf("pointer")>=0)&&(fn(c,Lr[0],xt,Ne,ae),fn(Le,Lr[2],J),fn(Le,Lr[3],J),Be&&fn(c,"click",A,!0,!0),me&&fn(c,"click",Ji),_e&&fn(Le,"gesturestart",fe),G&&fn(Le,"gestureend",Oe),Z&&fn(c,$a+"enter",Ut),he&&fn(c,$a+"leave",jt),Y&&fn(c,$a+"move",ut)),F.isEnabled=!0,F.isDragging=F.isGesturing=F.isPressed=Ge=et=!1,F._vx.reset(),F._vy.reset(),B=De(),ge=H(),Ke&&Ke.type&&xt(Ke),q&&q(F)),F},F.disable=function(){F.isEnabled&&(Ol.filter(function(Ke){return Ke!==F&&Cc(Ke.target)}).length||cn(Ce?Le:c,"scroll",b_),F.isPressed&&(F._vx.reset(),F._vy.reset(),cn(ee?c:Le,Lr[1],tt,!0)),cn(Ce?Le:c,"scroll",We,ae),cn(c,"wheel",je,ae),cn(c,Lr[0],xt,ae),cn(Le,Lr[2],J),cn(Le,Lr[3],J),cn(c,"click",A,!0),cn(c,"click",Ji),cn(Le,"gesturestart",fe),cn(Le,"gestureend",Oe),cn(c,$a+"enter",Ut),cn(c,$a+"leave",jt),cn(c,$a+"move",ut),F.isEnabled=F.isPressed=F.isDragging=!1,ie&&ie(F))},F.kill=F.revert=function(){F.disable();var Ke=Ol.indexOf(F);Ke>=0&&Ol.splice(Ke,1),As===F&&(As=0)},Ol.push(F),ee&&Cc(c)&&(As=F),F.enable(v)},SR(l,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),l})();yi.version="3.14.2";yi.create=function(l){return new yi(l)};yi.register=o1;yi.getAll=function(){return Ol.slice()};yi.getById=function(l){return Ol.filter(function(e){return e.vars.id===l})[0]};r1()&&Zi.registerPlugin(yi);var $e,Rl,Rt,Jt,Kn,Gt,_0,Ed,Gc,Rc,fc,yf,nn,Vd,E_,mn,Qw,Jw,Al,l1,yg,u1,pn,M_,c1,h1,fa,C_,v0,kl,y0,Ac,R_,xg,xf=1,rn=Date.now,wg=rn(),Er=0,dc=0,$w=function(e,t,i){var n=Yn(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=n,n?e.substr(6,e.length-7):e},eS=function(e,t){return t&&(!Yn(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},ER=function l(){return dc&&requestAnimationFrame(l)},tS=function(){return Vd=1},iS=function(){return Vd=0},jr=function(e){return e},pc=function(e){return Math.round(e*1e5)/1e5||0},f1=function(){return typeof window<"u"},d1=function(){return $e||f1()&&($e=window.gsap)&&$e.registerPlugin&&$e},So=function(e){return!!~_0.indexOf(e)},p1=function(e){return(e==="Height"?y0:Rt["inner"+e])||Kn["client"+e]||Gt["client"+e]},m1=function(e){return wa(e,"getBoundingClientRect")||(So(e)?function(){return ud.width=Rt.innerWidth,ud.height=y0,ud}:function(){return Cs(e)})},MR=function(e,t,i){var n=i.d,o=i.d2,s=i.a;return(s=wa(e,"getBoundingClientRect"))?function(){return s()[n]}:function(){return(t?p1(o):e["client"+o])||0}},CR=function(e,t){return!t||~Qr.indexOf(e)?m1(e):function(){return ud}},Kr=function(e,t){var i=t.s,n=t.d2,o=t.d,s=t.a;return Math.max(0,(i="scroll"+n)&&(s=wa(e,i))?s()-m1(e)()[o]:So(e)?(Kn[i]||Gt[i])-p1(n):e[i]-e["offset"+n])},wf=function(e,t){for(var i=0;i<Al.length;i+=3)(!t||~t.indexOf(Al[i+1]))&&e(Al[i],Al[i+1],Al[i+2])},Yn=function(e){return typeof e=="string"},an=function(e){return typeof e=="function"},mc=function(e){return typeof e=="number"},eo=function(e){return typeof e=="object"},ec=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},Sg=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},fl=Math.abs,g1="left",_1="top",x0="right",w0="bottom",mo="width",go="height",Dc="Right",Pc="Left",Lc="Top",Oc="Bottom",Ei="padding",wr="margin",Jl="Width",S0="Height",Ai="px",Sr=function(e){return Rt.getComputedStyle(e)},RR=function(e){var t=Sr(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},nS=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Cs=function(e,t){var i=t&&Sr(e)[E_]!=="matrix(1, 0, 0, 1, 0, 0)"&&$e.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},Md=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},v1=function(e){var t=[],i=e.labels,n=e.duration(),o;for(o in i)t.push(i[o]/n);return t},AR=function(e){return function(t){return $e.utils.snap(v1(e),t)}},b0=function(e){var t=$e.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(n,o){return n-o});return i?function(n,o,s){s===void 0&&(s=.001);var c;if(!o)return t(n);if(o>0){for(n-=s,c=0;c<i.length;c++)if(i[c]>=n)return i[c];return i[c-1]}else for(c=i.length,n+=s;c--;)if(i[c]<=n)return i[c];return i[0]}:function(n,o,s){s===void 0&&(s=.001);var c=t(n);return!o||Math.abs(c-n)<s||c-n<0==o<0?c:t(o<0?n-e:n+e)}},DR=function(e){return function(t,i){return b0(v1(e))(t,i.direction)}},Sf=function(e,t,i,n){return i.split(",").forEach(function(o){return e(t,o,n)})},Gi=function(e,t,i,n,o){return e.addEventListener(t,i,{passive:!n,capture:!!o})},ki=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},bf=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},rS={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Tf={toggleActions:"play",anticipatePin:0},Cd={top:0,left:0,center:.5,bottom:1,right:1},sd=function(e,t){if(Yn(e)){var i=e.indexOf("="),n=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in Cd?Cd[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Ef=function(e,t,i,n,o,s,c,u){var h=o.startColor,d=o.endColor,m=o.fontSize,g=o.indent,_=o.fontWeight,w=Jt.createElement("div"),v=So(i)||wa(i,"pinType")==="fixed",x=e.indexOf("scroller")!==-1,b=v?Gt:i,E=e.indexOf("start")!==-1,M=E?h:d,D="border-color:"+M+";font-size:"+m+";color:"+M+";font-weight:"+_+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return D+="position:"+((x||u)&&v?"fixed;":"absolute;"),(x||u||!v)&&(D+=(n===Di?x0:w0)+":"+(s+parseFloat(g))+"px;"),c&&(D+="box-sizing:border-box;text-align:left;width:"+c.offsetWidth+"px;"),w._isStart=E,w.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),w.style.cssText=D,w.innerText=t||t===0?e+"-"+t:e,b.children[0]?b.insertBefore(w,b.children[0]):b.appendChild(w),w._offset=w["offset"+n.op.d2],ad(w,0,n,E),w},ad=function(e,t,i,n){var o={display:"block"},s=i[n?"os2":"p2"],c=i[n?"p2":"os2"];e._isFlipped=n,o[i.a+"Percent"]=n?-100:0,o[i.a]=n?"1px":0,o["border"+s+Jl]=1,o["border"+c+Jl]=0,o[i.p]=t+"px",$e.set(e,o)},Et=[],A_={},Vc,sS=function(){return rn()-Er>34&&(Vc||(Vc=requestAnimationFrame(Ps)))},dl=function(){(!pn||!pn.isPressed||pn.startX>Gt.clientWidth)&&(At.cache++,pn?Vc||(Vc=requestAnimationFrame(Ps)):Ps(),Er||To("scrollStart"),Er=rn())},bg=function(){h1=Rt.innerWidth,c1=Rt.innerHeight},gc=function(e){At.cache++,(e===!0||!nn&&!u1&&!Jt.fullscreenElement&&!Jt.webkitFullscreenElement&&(!M_||h1!==Rt.innerWidth||Math.abs(Rt.innerHeight-c1)>Rt.innerHeight*.25))&&Ed.restart(!0)},bo={},PR=[],y1=function l(){return ki(yt,"scrollEnd",l)||ao(!0)},To=function(e){return bo[e]&&bo[e].map(function(t){return t()})||PR},Xn=[],x1=function(e){for(var t=0;t<Xn.length;t+=5)(!e||Xn[t+4]&&Xn[t+4].query===e)&&(Xn[t].style.cssText=Xn[t+1],Xn[t].getBBox&&Xn[t].setAttribute("transform",Xn[t+2]||""),Xn[t+3].uncache=1)},w1=function(){return At.forEach(function(e){return an(e)&&++e.cacheID&&(e.rec=e())})},T0=function(e,t){var i;for(mn=0;mn<Et.length;mn++)i=Et[mn],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));Ac=!0,t&&x1(t),t||To("revert")},S1=function(e,t){At.cache++,(t||!gn)&&At.forEach(function(i){return an(i)&&i.cacheID++&&(i.rec=0)}),Yn(e)&&(Rt.history.scrollRestoration=v0=e)},gn,_o=0,aS,LR=function(){if(aS!==_o){var e=aS=_o;requestAnimationFrame(function(){return e===_o&&ao(!0)})}},b1=function(){Gt.appendChild(kl),y0=!pn&&kl.offsetHeight||Rt.innerHeight,Gt.removeChild(kl)},oS=function(e){return Gc(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},ao=function(e,t){if(Kn=Jt.documentElement,Gt=Jt.body,_0=[Rt,Jt,Kn,Gt],Er&&!e&&!Ac){Gi(yt,"scrollEnd",y1);return}b1(),gn=yt.isRefreshing=!0,Ac||w1();var i=To("refreshInit");l1&&yt.sort(),t||T0(),At.forEach(function(n){an(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),Et.slice(0).forEach(function(n){return n.refresh()}),Ac=!1,Et.forEach(function(n){if(n._subPinOffset&&n.pin){var o=n.vars.horizontal?"offsetWidth":"offsetHeight",s=n.pin[o];n.revert(!0,1),n.adjustPinSpacing(n.pin[o]-s),n.refresh()}}),R_=1,oS(!0),Et.forEach(function(n){var o=Kr(n.scroller,n._dir),s=n.vars.end==="max"||n._endClamp&&n.end>o,c=n._startClamp&&n.start>=o;(s||c)&&n.setPositions(c?o-1:n.start,s?Math.max(c?o:n.start+1,o):n.end,!0)}),oS(!1),R_=0,i.forEach(function(n){return n&&n.render&&n.render(-1)}),At.forEach(function(n){an(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),S1(v0,1),Ed.pause(),_o++,gn=2,Ps(2),Et.forEach(function(n){return an(n.vars.onRefresh)&&n.vars.onRefresh(n)}),gn=yt.isRefreshing=!1,To("refresh")},D_=0,od=1,zc,Ps=function(e){if(e===2||!gn&&!Ac){yt.isUpdating=!0,zc&&zc.update(0);var t=Et.length,i=rn(),n=i-wg>=50,o=t&&Et[0].scroll();if(od=D_>o?-1:1,gn||(D_=o),n&&(Er&&!Vd&&i-Er>200&&(Er=0,To("scrollEnd")),fc=wg,wg=i),od<0){for(mn=t;mn-- >0;)Et[mn]&&Et[mn].update(0,n);od=1}else for(mn=0;mn<t;mn++)Et[mn]&&Et[mn].update(0,n);yt.isUpdating=!1}Vc=0},P_=[g1,_1,w0,x0,wr+Oc,wr+Dc,wr+Lc,wr+Pc,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],ld=P_.concat([mo,go,"boxSizing","max"+Jl,"max"+S0,"position",wr,Ei,Ei+Lc,Ei+Dc,Ei+Oc,Ei+Pc]),OR=function(e,t,i){Gl(i);var n=e._gsap;if(n.spacerIsNative)Gl(n.spacerState);else if(e._gsap.swappedIn){var o=t.parentNode;o&&(o.insertBefore(e,t),o.removeChild(t))}e._gsap.swappedIn=!1},Tg=function(e,t,i,n){if(!e._gsap.swappedIn){for(var o=P_.length,s=t.style,c=e.style,u;o--;)u=P_[o],s[u]=i[u];s.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(s.display="inline-block"),c[w0]=c[x0]="auto",s.flexBasis=i.flexBasis||"auto",s.overflow="visible",s.boxSizing="border-box",s[mo]=Md(e,yn)+Ai,s[go]=Md(e,Di)+Ai,s[Ei]=c[wr]=c[_1]=c[g1]="0",Gl(n),c[mo]=c["max"+Jl]=i[mo],c[go]=c["max"+S0]=i[go],c[Ei]=i[Ei],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},zR=/([A-Z])/g,Gl=function(e){if(e){var t=e.t.style,i=e.length,n=0,o,s;for((e.t._gsap||$e.core.getCache(e.t)).uncache=1;n<i;n+=2)s=e[n+1],o=e[n],s?t[o]=s:t[o]&&t.removeProperty(o.replace(zR,"-$1").toLowerCase())}},Mf=function(e){for(var t=ld.length,i=e.style,n=[],o=0;o<t;o++)n.push(ld[o],i[ld[o]]);return n.t=e,n},NR=function(e,t,i){for(var n=[],o=e.length,s=i?8:0,c;s<o;s+=2)c=e[s],n.push(c,c in t?t[c]:e[s+1]);return n.t=e.t,n},ud={left:0,top:0},lS=function(e,t,i,n,o,s,c,u,h,d,m,g,_,w){an(e)&&(e=e(u)),Yn(e)&&e.substr(0,3)==="max"&&(e=g+(e.charAt(4)==="="?sd("0"+e.substr(3),i):0));var v=_?_.time():0,x,b,E;if(_&&_.seek(0),isNaN(e)||(e=+e),mc(e))_&&(e=$e.utils.mapRange(_.scrollTrigger.start,_.scrollTrigger.end,0,g,e)),c&&ad(c,i,n,!0);else{an(t)&&(t=t(u));var M=(e||"0").split(" "),D,P,z,O;E=An(t,u)||Gt,D=Cs(E)||{},(!D||!D.left&&!D.top)&&Sr(E).display==="none"&&(O=E.style.display,E.style.display="block",D=Cs(E),O?E.style.display=O:E.style.removeProperty("display")),P=sd(M[0],D[n.d]),z=sd(M[1]||"0",i),e=D[n.p]-h[n.p]-d+P+o-z,c&&ad(c,z,n,i-z<20||c._isStart&&z>20),i-=i-z}if(w&&(u[w]=e||-.001,e<0&&(e=0)),s){var L=e+i,N=s._isStart;x="scroll"+n.d2,ad(s,L,n,N&&L>20||!N&&(m?Math.max(Gt[x],Kn[x]):s.parentNode[x])<=L+1),m&&(h=Cs(c),m&&(s.style[n.op.p]=h[n.op.p]-n.op.m-s._offset+Ai))}return _&&E&&(x=Cs(E),_.seek(g),b=Cs(E),_._caScrollDist=x[n.p]-b[n.p],e=e/_._caScrollDist*g),_&&_.seek(v),_?e:Math.round(e)},BR=/(webkit|moz|length|cssText|inset)/i,uS=function(e,t,i,n){if(e.parentNode!==t){var o=e.style,s,c;if(t===Gt){e._stOrig=o.cssText,c=Sr(e);for(s in c)!+s&&!BR.test(s)&&c[s]&&typeof o[s]=="string"&&s!=="0"&&(o[s]=c[s]);o.top=i,o.left=n}else o.cssText=e._stOrig;$e.core.getCache(e).uncache=1,t.appendChild(e)}},T1=function(e,t,i){var n=t,o=n;return function(s){var c=Math.round(e());return c!==n&&c!==o&&Math.abs(c-n)>3&&Math.abs(c-o)>3&&(s=c,i&&i()),o=n,n=Math.round(s),n}},Cf=function(e,t,i){var n={};n[t.p]="+="+i,$e.set(e,n)},cS=function(e,t){var i=Ma(e,t),n="_scroll"+t.p2,o=function s(c,u,h,d,m){var g=s.tween,_=u.onComplete,w={};h=h||i();var v=T1(i,h,function(){g.kill(),s.tween=0});return m=d&&m||0,d=d||c-h,g&&g.kill(),u[n]=c,u.inherit=!1,u.modifiers=w,w[n]=function(){return v(h+d*g.ratio+m*g.ratio*g.ratio)},u.onUpdate=function(){At.cache++,s.tween&&Ps()},u.onComplete=function(){s.tween=0,_&&_.call(g)},g=s.tween=$e.to(e,u),g};return e[n]=i,i.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},Gi(e,"wheel",i.wheelHandler),yt.isTouch&&Gi(e,"touchmove",i.wheelHandler),o},yt=(function(){function l(t,i){Rl||l.register($e)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),C_(this),this.init(t,i)}var e=l.prototype;return e.init=function(i,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!dc){this.update=this.refresh=this.kill=jr;return}i=nS(Yn(i)||mc(i)||i.nodeType?{trigger:i}:i,Tf);var o=i,s=o.onUpdate,c=o.toggleClass,u=o.id,h=o.onToggle,d=o.onRefresh,m=o.scrub,g=o.trigger,_=o.pin,w=o.pinSpacing,v=o.invalidateOnRefresh,x=o.anticipatePin,b=o.onScrubComplete,E=o.onSnapComplete,M=o.once,D=o.snap,P=o.pinReparent,z=o.pinSpacer,O=o.containerAnimation,L=o.fastScrollEnd,N=o.preventOverlaps,j=i.horizontal||i.containerAnimation&&i.horizontal!==!1?yn:Di,se=!m&&m!==0,K=An(i.scroller||Rt),X=$e.core.getCache(K),Z=So(K),he=("pinType"in i?i.pinType:wa(K,"pinType")||Z&&"fixed")==="fixed",Y=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],Q=se&&i.toggleActions.split(" "),ee="markers"in i?i.markers:Tf.markers,_e=Z?0:parseFloat(Sr(K)["border"+j.p2+Jl])||0,G=this,V=i.onRefreshInit&&function(){return i.onRefreshInit(G)},q=MR(K,Z,j),ie=CR(K,Z),me=0,ue=0,ae=0,Be=Ma(K,j),He,Fe,Ve,at,et,Ge,ht,Ct,T,F,te,oe,Ne,De,H,B,ge,we,Ce,Le,Ue,Ie,C,A,I,k,ne,Te,ze,tt,xt,J,fe,Oe,We,je,ut,Ut,jt;if(G._startClamp=G._endClamp=!1,G._dir=j,x*=45,G.scroller=K,G.scroll=O?O.time.bind(O):Be,at=Be(),G.vars=i,n=n||i.animation,"refreshPriority"in i&&(l1=1,i.refreshPriority===-9999&&(zc=G)),X.tweenScroll=X.tweenScroll||{top:cS(K,Di),left:cS(K,yn)},G.tweenTo=He=X.tweenScroll[j.p],G.scrubDuration=function(qe){fe=mc(qe)&&qe,fe?J?J.duration(qe):J=$e.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:fe,paused:!0,onComplete:function(){return b&&b(G)}}):(J&&J.progress(1).kill(),J=0)},n&&(n.vars.lazy=!1,n._initted&&!G.isReverted||n.vars.immediateRender!==!1&&i.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),G.animation=n.pause(),n.scrollTrigger=G,G.scrubDuration(m),tt=0,u||(u=n.vars.id)),D&&((!eo(D)||D.push)&&(D={snapTo:D}),"scrollBehavior"in Gt.style&&$e.set(Z?[Gt,Kn]:K,{scrollBehavior:"auto"}),At.forEach(function(qe){return an(qe)&&qe.target===(Z?Jt.scrollingElement||Kn:K)&&(qe.smooth=!1)}),Ve=an(D.snapTo)?D.snapTo:D.snapTo==="labels"?AR(n):D.snapTo==="labelsDirectional"?DR(n):D.directional!==!1?function(qe,dt){return b0(D.snapTo)(qe,rn()-ue<500?0:dt.direction)}:$e.utils.snap(D.snapTo),Oe=D.duration||{min:.1,max:2},Oe=eo(Oe)?Rc(Oe.min,Oe.max):Rc(Oe,Oe),We=$e.delayedCall(D.delay||fe/2||.1,function(){var qe=Be(),dt=rn()-ue<500,st=He.tween;if((dt||Math.abs(G.getVelocity())<10)&&!st&&!Vd&&me!==qe){var ft=(qe-Ge)/De,W=n&&!se?n.totalProgress():ft,le=dt?0:(W-xt)/(rn()-fc)*1e3||0,be=$e.utils.clamp(-ft,1-ft,fl(le/2)*le/.185),ce=ft+(D.inertia===!1?0:be),xe,ke,Xe=D,lt=Xe.onStart,it=Xe.onInterrupt,pt=Xe.onComplete;if(xe=Ve(ce,G),mc(xe)||(xe=ce),ke=Math.max(0,Math.round(Ge+xe*De)),qe<=ht&&qe>=Ge&&ke!==qe){if(st&&!st._initted&&st.data<=fl(ke-qe))return;D.inertia===!1&&(be=xe-ft),He(ke,{duration:Oe(fl(Math.max(fl(ce-W),fl(xe-W))*.185/le/.05||0)),ease:D.ease||"power3",data:fl(ke-qe),onInterrupt:function(){return We.restart(!0)&&it&&it(G)},onComplete:function(){G.update(),me=Be(),n&&!se&&(J?J.resetTo("totalProgress",xe,n._tTime/n._tDur):n.progress(xe)),tt=xt=n&&!se?n.totalProgress():G.progress,E&&E(G),pt&&pt(G)}},qe,be*De,ke-qe-be*De),lt&&lt(G,He.tween)}}else G.isActive&&me!==qe&&We.restart(!0)}).pause()),u&&(A_[u]=G),g=G.trigger=An(g||_!==!0&&_),jt=g&&g._gsap&&g._gsap.stRevert,jt&&(jt=jt(G)),_=_===!0?g:An(_),Yn(c)&&(c={targets:g,className:c}),_&&(w===!1||w===wr||(w=!w&&_.parentNode&&_.parentNode.style&&Sr(_.parentNode).display==="flex"?!1:Ei),G.pin=_,Fe=$e.core.getCache(_),Fe.spacer?H=Fe.pinState:(z&&(z=An(z),z&&!z.nodeType&&(z=z.current||z.nativeElement),Fe.spacerIsNative=!!z,z&&(Fe.spacerState=Mf(z))),Fe.spacer=we=z||Jt.createElement("div"),we.classList.add("pin-spacer"),u&&we.classList.add("pin-spacer-"+u),Fe.pinState=H=Mf(_)),i.force3D!==!1&&$e.set(_,{force3D:!0}),G.spacer=we=Fe.spacer,ze=Sr(_),A=ze[w+j.os2],Le=$e.getProperty(_),Ue=$e.quickSetter(_,j.a,Ai),Tg(_,we,ze),ge=Mf(_)),ee){oe=eo(ee)?nS(ee,rS):rS,F=Ef("scroller-start",u,K,j,oe,0),te=Ef("scroller-end",u,K,j,oe,0,F),Ce=F["offset"+j.op.d2];var Ji=An(wa(K,"content")||K);Ct=this.markerStart=Ef("start",u,Ji,j,oe,Ce,0,O),T=this.markerEnd=Ef("end",u,Ji,j,oe,Ce,0,O),O&&(Ut=$e.quickSetter([Ct,T],j.a,Ai)),!he&&!(Qr.length&&wa(K,"fixedMarkers")===!0)&&(RR(Z?Gt:K),$e.set([F,te],{force3D:!0}),k=$e.quickSetter(F,j.a,Ai),Te=$e.quickSetter(te,j.a,Ai))}if(O){var Ke=O.vars.onUpdate,Qe=O.vars.onUpdateParams;O.eventCallback("onUpdate",function(){G.update(0,0,1),Ke&&Ke.apply(O,Qe||[])})}if(G.previous=function(){return Et[Et.indexOf(G)-1]},G.next=function(){return Et[Et.indexOf(G)+1]},G.revert=function(qe,dt){if(!dt)return G.kill(!0);var st=qe!==!1||!G.enabled,ft=nn;st!==G.isReverted&&(st&&(je=Math.max(Be(),G.scroll.rec||0),ae=G.progress,ut=n&&n.progress()),Ct&&[Ct,T,F,te].forEach(function(W){return W.style.display=st?"none":"block"}),st&&(nn=G,G.update(st)),_&&(!P||!G.isActive)&&(st?OR(_,we,H):Tg(_,we,Sr(_),I)),st||G.update(st),nn=ft,G.isReverted=st)},G.refresh=function(qe,dt,st,ft){if(!((nn||!G.enabled)&&!dt)){if(_&&qe&&Er){Gi(l,"scrollEnd",y1);return}!gn&&V&&V(G),nn=G,He.tween&&!st&&(He.tween.kill(),He.tween=0),J&&J.pause(),v&&n&&(n.revert({kill:!1}).invalidate(),n.getChildren?n.getChildren(!0,!0,!1).forEach(function(Fi){return Fi.vars.immediateRender&&Fi.render(0,!0,!0)}):n.vars.immediateRender&&n.render(0,!0,!0)),G.isReverted||G.revert(!0,!0),G._subPinOffset=!1;var W=q(),le=ie(),be=O?O.duration():Kr(K,j),ce=De<=.01||!De,xe=0,ke=ft||0,Xe=eo(st)?st.end:i.end,lt=i.endTrigger||g,it=eo(st)?st.start:i.start||(i.start===0||!g?0:_?"0 0":"0 100%"),pt=G.pinnedContainer=i.pinnedContainer&&An(i.pinnedContainer,G),mt=g&&Math.max(0,Et.indexOf(G))||0,rt=mt,wt,Dt,ri,zi,_t,Ze,Wi,ei,Ni,ln,Bi,ur,oi;for(ee&&eo(st)&&(ur=$e.getProperty(F,j.p),oi=$e.getProperty(te,j.p));rt-- >0;)Ze=Et[rt],Ze.end||Ze.refresh(0,1)||(nn=G),Wi=Ze.pin,Wi&&(Wi===g||Wi===_||Wi===pt)&&!Ze.isReverted&&(ln||(ln=[]),ln.unshift(Ze),Ze.revert(!0,!0)),Ze!==Et[rt]&&(mt--,rt--);for(an(it)&&(it=it(G)),it=$w(it,"start",G),Ge=lS(it,g,W,j,Be(),Ct,F,G,le,_e,he,be,O,G._startClamp&&"_startClamp")||(_?-.001:0),an(Xe)&&(Xe=Xe(G)),Yn(Xe)&&!Xe.indexOf("+=")&&(~Xe.indexOf(" ")?Xe=(Yn(it)?it.split(" ")[0]:"")+Xe:(xe=sd(Xe.substr(2),W),Xe=Yn(it)?it:(O?$e.utils.mapRange(0,O.duration(),O.scrollTrigger.start,O.scrollTrigger.end,Ge):Ge)+xe,lt=g)),Xe=$w(Xe,"end",G),ht=Math.max(Ge,lS(Xe||(lt?"100% 0":be),lt,W,j,Be()+xe,T,te,G,le,_e,he,be,O,G._endClamp&&"_endClamp"))||-.001,xe=0,rt=mt;rt--;)Ze=Et[rt]||{},Wi=Ze.pin,Wi&&Ze.start-Ze._pinPush<=Ge&&!O&&Ze.end>0&&(wt=Ze.end-(G._startClamp?Math.max(0,Ze.start):Ze.start),(Wi===g&&Ze.start-Ze._pinPush<Ge||Wi===pt)&&isNaN(it)&&(xe+=wt*(1-Ze.progress)),Wi===_&&(ke+=wt));if(Ge+=xe,ht+=xe,G._startClamp&&(G._startClamp+=xe),G._endClamp&&!gn&&(G._endClamp=ht||-.001,ht=Math.min(ht,Kr(K,j))),De=ht-Ge||(Ge-=.01)&&.001,ce&&(ae=$e.utils.clamp(0,1,$e.utils.normalize(Ge,ht,je))),G._pinPush=ke,Ct&&xe&&(wt={},wt[j.a]="+="+xe,pt&&(wt[j.p]="-="+Be()),$e.set([Ct,T],wt)),_&&!(R_&&G.end>=Kr(K,j)))wt=Sr(_),zi=j===Di,ri=Be(),Ie=parseFloat(Le(j.a))+ke,!be&&ht>1&&(Bi=(Z?Jt.scrollingElement||Kn:K).style,Bi={style:Bi,value:Bi["overflow"+j.a.toUpperCase()]},Z&&Sr(Gt)["overflow"+j.a.toUpperCase()]!=="scroll"&&(Bi.style["overflow"+j.a.toUpperCase()]="scroll")),Tg(_,we,wt),ge=Mf(_),Dt=Cs(_,!0),ei=he&&Ma(K,zi?yn:Di)(),w?(I=[w+j.os2,De+ke+Ai],I.t=we,rt=w===Ei?Md(_,j)+De+ke:0,rt&&(I.push(j.d,rt+Ai),we.style.flexBasis!=="auto"&&(we.style.flexBasis=rt+Ai)),Gl(I),pt&&Et.forEach(function(Fi){Fi.pin===pt&&Fi.vars.pinSpacing!==!1&&(Fi._subPinOffset=!0)}),he&&Be(je)):(rt=Md(_,j),rt&&we.style.flexBasis!=="auto"&&(we.style.flexBasis=rt+Ai)),he&&(_t={top:Dt.top+(zi?ri-Ge:ei)+Ai,left:Dt.left+(zi?ei:ri-Ge)+Ai,boxSizing:"border-box",position:"fixed"},_t[mo]=_t["max"+Jl]=Math.ceil(Dt.width)+Ai,_t[go]=_t["max"+S0]=Math.ceil(Dt.height)+Ai,_t[wr]=_t[wr+Lc]=_t[wr+Dc]=_t[wr+Oc]=_t[wr+Pc]="0",_t[Ei]=wt[Ei],_t[Ei+Lc]=wt[Ei+Lc],_t[Ei+Dc]=wt[Ei+Dc],_t[Ei+Oc]=wt[Ei+Oc],_t[Ei+Pc]=wt[Ei+Pc],B=NR(H,_t,P),gn&&Be(0)),n?(Ni=n._initted,yg(1),n.render(n.duration(),!0,!0),C=Le(j.a)-Ie+De+ke,ne=Math.abs(De-C)>1,he&&ne&&B.splice(B.length-2,2),n.render(0,!0,!0),Ni||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),yg(0)):C=De,Bi&&(Bi.value?Bi.style["overflow"+j.a.toUpperCase()]=Bi.value:Bi.style.removeProperty("overflow-"+j.a));else if(g&&Be()&&!O)for(Dt=g.parentNode;Dt&&Dt!==Gt;)Dt._pinOffset&&(Ge-=Dt._pinOffset,ht-=Dt._pinOffset),Dt=Dt.parentNode;ln&&ln.forEach(function(Fi){return Fi.revert(!1,!0)}),G.start=Ge,G.end=ht,at=et=gn?je:Be(),!O&&!gn&&(at<je&&Be(je),G.scroll.rec=0),G.revert(!1,!0),ue=rn(),We&&(me=-1,We.restart(!0)),nn=0,n&&se&&(n._initted||ut)&&n.progress()!==ut&&n.progress(ut||0,!0).render(n.time(),!0,!0),(ce||ae!==G.progress||O||v||n&&!n._initted)&&(n&&!se&&(n._initted||ae||n.vars.immediateRender!==!1)&&n.totalProgress(O&&Ge<-.001&&!ae?$e.utils.normalize(Ge,ht,0):ae,!0),G.progress=ce||(at-Ge)/De===ae?0:ae),_&&w&&(we._pinOffset=Math.round(G.progress*C)),J&&J.invalidate(),isNaN(ur)||(ur-=$e.getProperty(F,j.p),oi-=$e.getProperty(te,j.p),Cf(F,j,ur),Cf(Ct,j,ur-(ft||0)),Cf(te,j,oi),Cf(T,j,oi-(ft||0))),ce&&!gn&&G.update(),d&&!gn&&!Ne&&(Ne=!0,d(G),Ne=!1)}},G.getVelocity=function(){return(Be()-et)/(rn()-fc)*1e3||0},G.endAnimation=function(){ec(G.callbackAnimation),n&&(J?J.progress(1):n.paused()?se||ec(n,G.direction<0,1):ec(n,n.reversed()))},G.labelToScroll=function(qe){return n&&n.labels&&(Ge||G.refresh()||Ge)+n.labels[qe]/n.duration()*De||0},G.getTrailing=function(qe){var dt=Et.indexOf(G),st=G.direction>0?Et.slice(0,dt).reverse():Et.slice(dt+1);return(Yn(qe)?st.filter(function(ft){return ft.vars.preventOverlaps===qe}):st).filter(function(ft){return G.direction>0?ft.end<=Ge:ft.start>=ht})},G.update=function(qe,dt,st){if(!(O&&!st&&!qe)){var ft=gn===!0?je:G.scroll(),W=qe?0:(ft-Ge)/De,le=W<0?0:W>1?1:W||0,be=G.progress,ce,xe,ke,Xe,lt,it,pt,mt;if(dt&&(et=at,at=O?Be():ft,D&&(xt=tt,tt=n&&!se?n.totalProgress():le)),x&&_&&!nn&&!xf&&Er&&(!le&&Ge<ft+(ft-et)/(rn()-fc)*x?le=1e-4:le===1&&ht>ft+(ft-et)/(rn()-fc)*x&&(le=.9999)),le!==be&&G.enabled){if(ce=G.isActive=!!le&&le<1,xe=!!be&&be<1,it=ce!==xe,lt=it||!!le!=!!be,G.direction=le>be?1:-1,G.progress=le,lt&&!nn&&(ke=le&&!be?0:le===1?1:be===1?2:3,se&&(Xe=!it&&Q[ke+1]!=="none"&&Q[ke+1]||Q[ke],mt=n&&(Xe==="complete"||Xe==="reset"||Xe in n))),N&&(it||mt)&&(mt||m||!n)&&(an(N)?N(G):G.getTrailing(N).forEach(function(ri){return ri.endAnimation()})),se||(J&&!nn&&!xf?(J._dp._time-J._start!==J._time&&J.render(J._dp._time-J._start),J.resetTo?J.resetTo("totalProgress",le,n._tTime/n._tDur):(J.vars.totalProgress=le,J.invalidate().restart())):n&&n.totalProgress(le,!!(nn&&(ue||qe)))),_){if(qe&&w&&(we.style[w+j.os2]=A),!he)Ue(pc(Ie+C*le));else if(lt){if(pt=!qe&&le>be&&ht+1>ft&&ft+1>=Kr(K,j),P)if(!qe&&(ce||pt)){var rt=Cs(_,!0),wt=ft-Ge;uS(_,Gt,rt.top+(j===Di?wt:0)+Ai,rt.left+(j===Di?0:wt)+Ai)}else uS(_,we);Gl(ce||pt?B:ge),ne&&le<1&&ce||Ue(Ie+(le===1&&!pt?C:0))}}D&&!He.tween&&!nn&&!xf&&We.restart(!0),c&&(it||M&&le&&(le<1||!xg))&&Gc(c.targets).forEach(function(ri){return ri.classList[ce||M?"add":"remove"](c.className)}),s&&!se&&!qe&&s(G),lt&&!nn?(se&&(mt&&(Xe==="complete"?n.pause().totalProgress(1):Xe==="reset"?n.restart(!0).pause():Xe==="restart"?n.restart(!0):n[Xe]()),s&&s(G)),(it||!xg)&&(h&&it&&Sg(G,h),Y[ke]&&Sg(G,Y[ke]),M&&(le===1?G.kill(!1,1):Y[ke]=0),it||(ke=le===1?1:3,Y[ke]&&Sg(G,Y[ke]))),L&&!ce&&Math.abs(G.getVelocity())>(mc(L)?L:2500)&&(ec(G.callbackAnimation),J?J.progress(1):ec(n,Xe==="reverse"?1:!le,1))):se&&s&&!nn&&s(G)}if(Te){var Dt=O?ft/O.duration()*(O._caScrollDist||0):ft;k(Dt+(F._isFlipped?1:0)),Te(Dt)}Ut&&Ut(-ft/O.duration()*(O._caScrollDist||0))}},G.enable=function(qe,dt){G.enabled||(G.enabled=!0,Gi(K,"resize",gc),Z||Gi(K,"scroll",dl),V&&Gi(l,"refreshInit",V),qe!==!1&&(G.progress=ae=0,at=et=me=Be()),dt!==!1&&G.refresh())},G.getTween=function(qe){return qe&&He?He.tween:J},G.setPositions=function(qe,dt,st,ft){if(O){var W=O.scrollTrigger,le=O.duration(),be=W.end-W.start;qe=W.start+be*qe/le,dt=W.start+be*dt/le}G.refresh(!1,!1,{start:eS(qe,st&&!!G._startClamp),end:eS(dt,st&&!!G._endClamp)},ft),G.update()},G.adjustPinSpacing=function(qe){if(I&&qe){var dt=I.indexOf(j.d)+1;I[dt]=parseFloat(I[dt])+qe+Ai,I[1]=parseFloat(I[1])+qe+Ai,Gl(I)}},G.disable=function(qe,dt){if(qe!==!1&&G.revert(!0,!0),G.enabled&&(G.enabled=G.isActive=!1,dt||J&&J.pause(),je=0,Fe&&(Fe.uncache=1),V&&ki(l,"refreshInit",V),We&&(We.pause(),He.tween&&He.tween.kill()&&(He.tween=0)),!Z)){for(var st=Et.length;st--;)if(Et[st].scroller===K&&Et[st]!==G)return;ki(K,"resize",gc),Z||ki(K,"scroll",dl)}},G.kill=function(qe,dt){G.disable(qe,dt),J&&!dt&&J.kill(),u&&delete A_[u];var st=Et.indexOf(G);st>=0&&Et.splice(st,1),st===mn&&od>0&&mn--,st=0,Et.forEach(function(ft){return ft.scroller===G.scroller&&(st=1)}),st||gn||(G.scroll.rec=0),n&&(n.scrollTrigger=null,qe&&n.revert({kill:!1}),dt||n.kill()),Ct&&[Ct,T,F,te].forEach(function(ft){return ft.parentNode&&ft.parentNode.removeChild(ft)}),zc===G&&(zc=0),_&&(Fe&&(Fe.uncache=1),st=0,Et.forEach(function(ft){return ft.pin===_&&st++}),st||(Fe.spacer=0)),i.onKill&&i.onKill(G)},Et.push(G),G.enable(!1,!1),jt&&jt(G),n&&n.add&&!De){var gt=G.update;G.update=function(){G.update=gt,At.cache++,Ge||ht||G.refresh()},$e.delayedCall(.01,G.update),De=.01,Ge=ht=0}else G.refresh();_&&LR()},l.register=function(i){return Rl||($e=i||d1(),f1()&&window.document&&l.enable(),Rl=dc),Rl},l.defaults=function(i){if(i)for(var n in i)Tf[n]=i[n];return Tf},l.disable=function(i,n){dc=0,Et.forEach(function(s){return s[n?"kill":"disable"](i)}),ki(Rt,"wheel",dl),ki(Jt,"scroll",dl),clearInterval(yf),ki(Jt,"touchcancel",jr),ki(Gt,"touchstart",jr),Sf(ki,Jt,"pointerdown,touchstart,mousedown",tS),Sf(ki,Jt,"pointerup,touchend,mouseup",iS),Ed.kill(),wf(ki);for(var o=0;o<At.length;o+=3)bf(ki,At[o],At[o+1]),bf(ki,At[o],At[o+2])},l.enable=function(){if(Rt=window,Jt=document,Kn=Jt.documentElement,Gt=Jt.body,$e&&(Gc=$e.utils.toArray,Rc=$e.utils.clamp,C_=$e.core.context||jr,yg=$e.core.suppressOverwrites||jr,v0=Rt.history.scrollRestoration||"auto",D_=Rt.pageYOffset||0,$e.core.globals("ScrollTrigger",l),Gt)){dc=1,kl=document.createElement("div"),kl.style.height="100vh",kl.style.position="absolute",b1(),ER(),yi.register($e),l.isTouch=yi.isTouch,fa=yi.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),M_=yi.isTouch===1,Gi(Rt,"wheel",dl),_0=[Rt,Jt,Kn,Gt],$e.matchMedia?(l.matchMedia=function(h){var d=$e.matchMedia(),m;for(m in h)d.add(m,h[m]);return d},$e.addEventListener("matchMediaInit",function(){w1(),T0()}),$e.addEventListener("matchMediaRevert",function(){return x1()}),$e.addEventListener("matchMedia",function(){ao(0,1),To("matchMedia")}),$e.matchMedia().add("(orientation: portrait)",function(){return bg(),bg})):console.warn("Requires GSAP 3.11.0 or later"),bg(),Gi(Jt,"scroll",dl);var i=Gt.hasAttribute("style"),n=Gt.style,o=n.borderTopStyle,s=$e.core.Animation.prototype,c,u;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),n.borderTopStyle="solid",c=Cs(Gt),Di.m=Math.round(c.top+Di.sc())||0,yn.m=Math.round(c.left+yn.sc())||0,o?n.borderTopStyle=o:n.removeProperty("border-top-style"),i||(Gt.setAttribute("style",""),Gt.removeAttribute("style")),yf=setInterval(sS,250),$e.delayedCall(.5,function(){return xf=0}),Gi(Jt,"touchcancel",jr),Gi(Gt,"touchstart",jr),Sf(Gi,Jt,"pointerdown,touchstart,mousedown",tS),Sf(Gi,Jt,"pointerup,touchend,mouseup",iS),E_=$e.utils.checkPrefix("transform"),ld.push(E_),Rl=rn(),Ed=$e.delayedCall(.2,ao).pause(),Al=[Jt,"visibilitychange",function(){var h=Rt.innerWidth,d=Rt.innerHeight;Jt.hidden?(Qw=h,Jw=d):(Qw!==h||Jw!==d)&&gc()},Jt,"DOMContentLoaded",ao,Rt,"load",ao,Rt,"resize",gc],wf(Gi),Et.forEach(function(h){return h.enable(0,1)}),u=0;u<At.length;u+=3)bf(ki,At[u],At[u+1]),bf(ki,At[u],At[u+2])}},l.config=function(i){"limitCallbacks"in i&&(xg=!!i.limitCallbacks);var n=i.syncInterval;n&&clearInterval(yf)||(yf=n)&&setInterval(sS,n),"ignoreMobileResize"in i&&(M_=l.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(wf(ki)||wf(Gi,i.autoRefreshEvents||"none"),u1=(i.autoRefreshEvents+"").indexOf("resize")===-1)},l.scrollerProxy=function(i,n){var o=An(i),s=At.indexOf(o),c=So(o);~s&&At.splice(s,c?6:2),n&&(c?Qr.unshift(Rt,n,Gt,n,Kn,n):Qr.unshift(o,n))},l.clearMatchMedia=function(i){Et.forEach(function(n){return n._ctx&&n._ctx.query===i&&n._ctx.kill(!0,!0)})},l.isInViewport=function(i,n,o){var s=(Yn(i)?An(i):i).getBoundingClientRect(),c=s[o?mo:go]*n||0;return o?s.right-c>0&&s.left+c<Rt.innerWidth:s.bottom-c>0&&s.top+c<Rt.innerHeight},l.positionInViewport=function(i,n,o){Yn(i)&&(i=An(i));var s=i.getBoundingClientRect(),c=s[o?mo:go],u=n==null?c/2:n in Cd?Cd[n]*c:~n.indexOf("%")?parseFloat(n)*c/100:parseFloat(n)||0;return o?(s.left+u)/Rt.innerWidth:(s.top+u)/Rt.innerHeight},l.killAll=function(i){if(Et.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),i!==!0){var n=bo.killAll||[];bo={},n.forEach(function(o){return o()})}},l})();yt.version="3.14.2";yt.saveStyles=function(l){return l?Gc(l).forEach(function(e){if(e&&e.style){var t=Xn.indexOf(e);t>=0&&Xn.splice(t,5),Xn.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),$e.core.getCache(e),C_())}}):Xn};yt.revert=function(l,e){return T0(!l,e)};yt.create=function(l,e){return new yt(l,e)};yt.refresh=function(l){return l?gc(!0):(Rl||yt.register())&&ao(!0)};yt.update=function(l){return++At.cache&&Ps(l===!0?2:0)};yt.clearScrollMemory=S1;yt.maxScroll=function(l,e){return Kr(l,e?yn:Di)};yt.getScrollFunc=function(l,e){return Ma(An(l),e?yn:Di)};yt.getById=function(l){return A_[l]};yt.getAll=function(){return Et.filter(function(l){return l.vars.id!=="ScrollSmoother"})};yt.isScrolling=function(){return!!Er};yt.snapDirectional=b0;yt.addEventListener=function(l,e){var t=bo[l]||(bo[l]=[]);~t.indexOf(e)||t.push(e)};yt.removeEventListener=function(l,e){var t=bo[l],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};yt.batch=function(l,e){var t=[],i={},n=e.interval||.016,o=e.batchMax||1e9,s=function(h,d){var m=[],g=[],_=$e.delayedCall(n,function(){d(m,g),m=[],g=[]}).pause();return function(w){m.length||_.restart(!0),m.push(w.trigger),g.push(w),o<=m.length&&_.progress(1)}},c;for(c in e)i[c]=c.substr(0,2)==="on"&&an(e[c])&&c!=="onRefreshInit"?s(c,e[c]):e[c];return an(o)&&(o=o(),Gi(yt,"refresh",function(){return o=e.batchMax()})),Gc(l).forEach(function(u){var h={};for(c in i)h[c]=i[c];h.trigger=u,t.push(yt.create(h))}),t};var hS=function(e,t,i,n){return t>n?e(n):t<0&&e(0),i>n?(n-t)/(i-t):i<0?t/(t-i):1},Eg=function l(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(yi.isTouch?" pinch-zoom":""):"none",e===Kn&&l(Gt,t)},Rf={auto:1,scroll:1},FR=function(e){var t=e.event,i=e.target,n=e.axis,o=(t.changedTouches?t.changedTouches[0]:t).target,s=o._gsap||$e.core.getCache(o),c=rn(),u;if(!s._isScrollT||c-s._isScrollT>2e3){for(;o&&o!==Gt&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(Rf[(u=Sr(o)).overflowY]||Rf[u.overflowX]));)o=o.parentNode;s._isScroll=o&&o!==i&&!So(o)&&(Rf[(u=Sr(o)).overflowY]||Rf[u.overflowX]),s._isScrollT=c}(s._isScroll||n==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},E1=function(e,t,i,n){return yi.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&FR,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&Gi(Jt,yi.eventTypes[0],dS,!1,!0)},onDisable:function(){return ki(Jt,yi.eventTypes[0],dS,!0)}})},IR=/(input|label|select|textarea)/i,fS,dS=function(e){var t=IR.test(e.target.tagName);(t||fS)&&(e._gsapAllow=!0,fS=t)},UR=function(e){eo(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,n=t.momentum,o=t.allowNestedScroll,s=t.onRelease,c,u,h=An(e.target)||Kn,d=$e.core.globals().ScrollSmoother,m=d&&d.get(),g=fa&&(e.content&&An(e.content)||m&&e.content!==!1&&!m.smooth()&&m.content()),_=Ma(h,Di),w=Ma(h,yn),v=1,x=(yi.isTouch&&Rt.visualViewport?Rt.visualViewport.scale*Rt.visualViewport.width:Rt.outerWidth)/Rt.innerWidth,b=0,E=an(n)?function(){return n(c)}:function(){return n||2.8},M,D,P=E1(h,e.type,!0,o),z=function(){return D=!1},O=jr,L=jr,N=function(){u=Kr(h,Di),L=Rc(fa?1:0,u),i&&(O=Rc(0,Kr(h,yn))),M=_o},j=function(){g._gsap.y=pc(parseFloat(g._gsap.y)+_.offset)+"px",g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(g._gsap.y)+", 0, 1)",_.offset=_.cacheID=0},se=function(){if(D){requestAnimationFrame(z);var ee=pc(c.deltaY/2),_e=L(_.v-ee);if(g&&_e!==_.v+_.offset){_.offset=_e-_.v;var G=pc((parseFloat(g&&g._gsap.y)||0)-_.offset);g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+G+", 0, 1)",g._gsap.y=G+"px",_.cacheID=At.cache,Ps()}return!0}_.offset&&j(),D=!0},K,X,Z,he,Y=function(){N(),K.isActive()&&K.vars.scrollY>u&&(_()>u?K.progress(1)&&_(u):K.resetTo("scrollY",u))};return g&&$e.set(g,{y:"+=0"}),e.ignoreCheck=function(Q){return fa&&Q.type==="touchmove"&&se()||v>1.05&&Q.type!=="touchstart"||c.isGesturing||Q.touches&&Q.touches.length>1},e.onPress=function(){D=!1;var Q=v;v=pc((Rt.visualViewport&&Rt.visualViewport.scale||1)/x),K.pause(),Q!==v&&Eg(h,v>1.01?!0:i?!1:"x"),X=w(),Z=_(),N(),M=_o},e.onRelease=e.onGestureStart=function(Q,ee){if(_.offset&&j(),!ee)he.restart(!0);else{At.cache++;var _e=E(),G,V;i&&(G=w(),V=G+_e*.05*-Q.velocityX/.227,_e*=hS(w,G,V,Kr(h,yn)),K.vars.scrollX=O(V)),G=_(),V=G+_e*.05*-Q.velocityY/.227,_e*=hS(_,G,V,Kr(h,Di)),K.vars.scrollY=L(V),K.invalidate().duration(_e).play(.01),(fa&&K.vars.scrollY>=u||G>=u-1)&&$e.to({},{onUpdate:Y,duration:_e})}s&&s(Q)},e.onWheel=function(){K._ts&&K.pause(),rn()-b>1e3&&(M=0,b=rn())},e.onChange=function(Q,ee,_e,G,V){if(_o!==M&&N(),ee&&i&&w(O(G[2]===ee?X+(Q.startX-Q.x):w()+ee-G[1])),_e){_.offset&&j();var q=V[2]===_e,ie=q?Z+Q.startY-Q.y:_()+_e-V[1],me=L(ie);q&&ie!==me&&(Z+=me-ie),_(me)}(_e||ee)&&Ps()},e.onEnable=function(){Eg(h,i?!1:"x"),yt.addEventListener("refresh",Y),Gi(Rt,"resize",Y),_.smooth&&(_.target.style.scrollBehavior="auto",_.smooth=w.smooth=!1),P.enable()},e.onDisable=function(){Eg(h,!0),ki(Rt,"resize",Y),yt.removeEventListener("refresh",Y),P.kill()},e.lockAxis=e.lockAxis!==!1,c=new yi(e),c.iOS=fa,fa&&!_()&&_(1),fa&&$e.ticker.add(jr),he=c._dc,K=$e.to(c,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:T1(_,_(),function(){return K.pause()})},onUpdate:Ps,onComplete:he.vars.onComplete}),c};yt.sort=function(l){if(an(l))return Et.sort(l);var e=Rt.pageYOffset||0;return yt.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+Rt.innerHeight}),Et.sort(l||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};yt.observe=function(l){return new yi(l)};yt.normalizeScroll=function(l){if(typeof l>"u")return pn;if(l===!0&&pn)return pn.enable();if(l===!1){pn&&pn.kill(),pn=l;return}var e=l instanceof yi?l:UR(l);return pn&&pn.target===e.target&&pn.kill(),So(e.target)&&(pn=e),e};yt.core={_getVelocityProp:T_,_inputObserver:E1,_scrollers:At,_proxies:Qr,bridge:{ss:function(){Er||To("scrollStart"),Er=rn()},ref:function(){return nn}}};d1()&&$e.registerPlugin(yt);var HR="1.3.17";function M1(l,e,t){return Math.max(l,Math.min(e,t))}function kR(l,e,t){return(1-t)*l+t*e}function GR(l,e,t,i){return kR(l,e,1-Math.exp(-t*i))}function VR(l,e){return(l%e+e)%e}var WR=class{isRunning=!1;value=0;from=0;to=0;currentTime=0;lerp;duration;easing;onUpdate;advance(l){if(!this.isRunning)return;let e=!1;if(this.duration&&this.easing){this.currentTime+=l;const t=M1(0,this.currentTime/this.duration,1);e=t>=1;const i=e?1:this.easing(t);this.value=this.from+(this.to-this.from)*i}else this.lerp?(this.value=GR(this.value,this.to,this.lerp*60,l),Math.round(this.value)===this.to&&(this.value=this.to,e=!0)):(this.value=this.to,e=!0);e&&this.stop(),this.onUpdate?.(this.value,e)}stop(){this.isRunning=!1}fromTo(l,e,{lerp:t,duration:i,easing:n,onStart:o,onUpdate:s}){this.from=this.value=l,this.to=e,this.lerp=t,this.duration=i,this.easing=n,this.currentTime=0,this.isRunning=!0,o?.(),this.onUpdate=s}};function jR(l,e){let t;return function(...i){let n=this;clearTimeout(t),t=setTimeout(()=>{t=void 0,l.apply(n,i)},e)}}var qR=class{constructor(l,e,{autoResize:t=!0,debounce:i=250}={}){this.wrapper=l,this.content=e,t&&(this.debouncedResize=jR(this.resize,i),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}width=0;height=0;scrollHeight=0;scrollWidth=0;debouncedResize;wrapperResizeObserver;contentResizeObserver;destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}resize=()=>{this.onWrapperResize(),this.onContentResize()};onWrapperResize=()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)};onContentResize=()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)};get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},C1=class{events={};emit(l,...e){let t=this.events[l]||[];for(let i=0,n=t.length;i<n;i++)t[i]?.(...e)}on(l,e){return this.events[l]?.push(e)||(this.events[l]=[e]),()=>{this.events[l]=this.events[l]?.filter(t=>e!==t)}}off(l,e){this.events[l]=this.events[l]?.filter(t=>e!==t)}destroy(){this.events={}}},pS=100/6,aa={passive:!1},XR=class{constructor(l,e={wheelMultiplier:1,touchMultiplier:1}){this.element=l,this.options=e,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,aa),this.element.addEventListener("touchstart",this.onTouchStart,aa),this.element.addEventListener("touchmove",this.onTouchMove,aa),this.element.addEventListener("touchend",this.onTouchEnd,aa)}touchStart={x:0,y:0};lastDelta={x:0,y:0};window={width:0,height:0};emitter=new C1;on(l,e){return this.emitter.on(l,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,aa),this.element.removeEventListener("touchstart",this.onTouchStart,aa),this.element.removeEventListener("touchmove",this.onTouchMove,aa),this.element.removeEventListener("touchend",this.onTouchEnd,aa)}onTouchStart=l=>{const{clientX:e,clientY:t}=l.targetTouches?l.targetTouches[0]:l;this.touchStart.x=e,this.touchStart.y=t,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:l})};onTouchMove=l=>{const{clientX:e,clientY:t}=l.targetTouches?l.targetTouches[0]:l,i=-(e-this.touchStart.x)*this.options.touchMultiplier,n=-(t-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=e,this.touchStart.y=t,this.lastDelta={x:i,y:n},this.emitter.emit("scroll",{deltaX:i,deltaY:n,event:l})};onTouchEnd=l=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:l})};onWheel=l=>{let{deltaX:e,deltaY:t,deltaMode:i}=l;const n=i===1?pS:i===2?this.window.width:1,o=i===1?pS:i===2?this.window.height:1;e*=n,t*=o,e*=this.options.wheelMultiplier,t*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:e,deltaY:t,event:l})};onWindowResize=()=>{this.window={width:window.innerWidth,height:window.innerHeight}}},mS=l=>Math.min(1,1.001-Math.pow(2,-10*l)),YR=class{_isScrolling=!1;_isStopped=!1;_isLocked=!1;_preventNextNativeScrollEvent=!1;_resetVelocityTimeout=null;_rafId=null;isTouching;time=0;userData={};lastVelocity=0;velocity=0;direction=0;options;targetScroll;animatedScroll;animate=new WR;emitter=new C1;dimensions;virtualScroll;constructor({wrapper:l=window,content:e=document.documentElement,eventsTarget:t=l,smoothWheel:i=!0,syncTouch:n=!1,syncTouchLerp:o=.075,touchInertiaExponent:s=1.7,duration:c,easing:u,lerp:h=.1,infinite:d=!1,orientation:m="vertical",gestureOrientation:g=m==="horizontal"?"both":"vertical",touchMultiplier:_=1,wheelMultiplier:w=1,autoResize:v=!0,prevent:x,virtualScroll:b,overscroll:E=!0,autoRaf:M=!1,anchors:D=!1,autoToggle:P=!1,allowNestedScroll:z=!1,__experimental__naiveDimensions:O=!1,naiveDimensions:L=O,stopInertiaOnNavigate:N=!1}={}){window.lenisVersion=HR,(!l||l===document.documentElement)&&(l=window),typeof c=="number"&&typeof u!="function"?u=mS:typeof u=="function"&&typeof c!="number"&&(c=1),this.options={wrapper:l,content:e,eventsTarget:t,smoothWheel:i,syncTouch:n,syncTouchLerp:o,touchInertiaExponent:s,duration:c,easing:u,lerp:h,infinite:d,gestureOrientation:g,orientation:m,touchMultiplier:_,wheelMultiplier:w,autoResize:v,prevent:x,virtualScroll:b,overscroll:E,autoRaf:M,anchors:D,autoToggle:P,allowNestedScroll:z,naiveDimensions:L,stopInertiaOnNavigate:N},this.dimensions=new qR(l,e,{autoResize:v}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),(this.options.anchors||this.options.stopInertiaOnNavigate)&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new XR(t,{touchMultiplier:_,wheelMultiplier:w}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&(this.checkOverflow(),this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0})),this.options.autoRaf&&(this._rafId=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),(this.options.anchors||this.options.stopInertiaOnNavigate)&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this._rafId&&cancelAnimationFrame(this._rafId)}on(l,e){return this.emitter.on(l,e)}off(l,e){return this.emitter.off(l,e)}onScrollEnd=l=>{l instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&l.stopPropagation()};dispatchScrollendEvent=()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))};get overflow(){const l=this.isHorizontal?"overflow-x":"overflow-y";return getComputedStyle(this.rootElement)[l]}checkOverflow(){["hidden","clip"].includes(this.overflow)?this.internalStop():this.internalStart()}onTransitionEnd=l=>{l.propertyName.includes("overflow")&&this.checkOverflow()};setScroll(l){this.isHorizontal?this.options.wrapper.scrollTo({left:l,behavior:"instant"}):this.options.wrapper.scrollTo({top:l,behavior:"instant"})}onClick=l=>{const t=l.composedPath().filter(i=>i instanceof HTMLAnchorElement&&i.getAttribute("href"));if(this.options.anchors){const i=t.find(n=>n.getAttribute("href")?.includes("#"));if(i){const n=i.getAttribute("href");if(n){const o=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0,s=`#${n.split("#")[1]}`;this.scrollTo(s,o)}}}this.options.stopInertiaOnNavigate&&t.find(n=>n.host===window.location.host)&&this.reset()};onPointerDown=l=>{l.button===1&&this.reset()};onVirtualScroll=l=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(l)===!1)return;const{deltaX:e,deltaY:t,event:i}=l;if(this.emitter.emit("virtual-scroll",{deltaX:e,deltaY:t,event:i}),i.ctrlKey||i.lenisStopPropagation)return;const n=i.type.includes("touch"),o=i.type.includes("wheel");this.isTouching=i.type==="touchstart"||i.type==="touchmove";const s=e===0&&t===0;if(this.options.syncTouch&&n&&i.type==="touchstart"&&s&&!this.isStopped&&!this.isLocked){this.reset();return}const u=this.options.gestureOrientation==="vertical"&&t===0||this.options.gestureOrientation==="horizontal"&&e===0;if(s||u)return;let h=i.composedPath();h=h.slice(0,h.indexOf(this.rootElement));const d=this.options.prevent;if(h.find(x=>x instanceof HTMLElement&&(typeof d=="function"&&d?.(x)||x.hasAttribute?.("data-lenis-prevent")||n&&x.hasAttribute?.("data-lenis-prevent-touch")||o&&x.hasAttribute?.("data-lenis-prevent-wheel")||this.options.allowNestedScroll&&this.checkNestedScroll(x,{deltaX:e,deltaY:t}))))return;if(this.isStopped||this.isLocked){i.cancelable&&i.preventDefault();return}if(!(this.options.syncTouch&&n||this.options.smoothWheel&&o)){this.isScrolling="native",this.animate.stop(),i.lenisStopPropagation=!0;return}let g=t;this.options.gestureOrientation==="both"?g=Math.abs(t)>Math.abs(e)?t:e:this.options.gestureOrientation==="horizontal"&&(g=e),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&this.limit>0&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&t>0||this.animatedScroll===this.limit&&t<0))&&(i.lenisStopPropagation=!0),i.cancelable&&i.preventDefault();const _=n&&this.options.syncTouch,v=n&&i.type==="touchend";v&&(g=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+g,{programmatic:!1,..._?{lerp:v?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})};resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}onNativeScroll=()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const l=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-l,this.direction=Math.sign(this.animatedScroll-l),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}};reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}raf=l=>{const e=l-(this.time||l);this.time=l,this.animate.advance(e*.001),this.options.autoRaf&&(this._rafId=requestAnimationFrame(this.raf))};scrollTo(l,{offset:e=0,immediate:t=!1,lock:i=!1,programmatic:n=!0,lerp:o=n?this.options.lerp:void 0,duration:s=n?this.options.duration:void 0,easing:c=n?this.options.easing:void 0,onStart:u,onComplete:h,force:d=!1,userData:m}={}){if(!((this.isStopped||this.isLocked)&&!d)){if(typeof l=="string"&&["top","left","start","#"].includes(l))l=0;else if(typeof l=="string"&&["bottom","right","end"].includes(l))l=this.limit;else{let g;if(typeof l=="string"?(g=document.querySelector(l),g||(l==="#top"?l=0:console.warn("Lenis: Target not found",l))):l instanceof HTMLElement&&l?.nodeType&&(g=l),g){if(this.options.wrapper!==window){const w=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?w.left:w.top}const _=g.getBoundingClientRect();l=(this.isHorizontal?_.left:_.top)+this.animatedScroll}}if(typeof l=="number"){if(l+=e,l=Math.round(l),this.options.infinite){if(n){this.targetScroll=this.animatedScroll=this.scroll;const g=l-this.animatedScroll;g>this.limit/2?l=l-this.limit:g<-this.limit/2&&(l=l+this.limit)}}else l=M1(0,l,this.limit);if(l===this.targetScroll){u?.(this),h?.(this);return}if(this.userData=m??{},t){this.animatedScroll=this.targetScroll=l,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),h?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}n||(this.targetScroll=l),typeof s=="number"&&typeof c!="function"?c=mS:typeof c=="function"&&typeof s!="number"&&(s=1),this.animate.fromTo(this.animatedScroll,l,{duration:s,easing:c,lerp:o,onStart:()=>{i&&(this.isLocked=!0),this.isScrolling="smooth",u?.(this)},onUpdate:(g,_)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=g-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=g,this.setScroll(this.scroll),n&&(this.targetScroll=g),_||this.emit(),_&&(this.reset(),this.emit(),h?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(l,{deltaX:e,deltaY:t}){const i=Date.now(),n=l._lenis??={};let o,s,c,u,h,d,m,g;const _=this.options.gestureOrientation;if(i-(n.time??0)>2e3){n.time=Date.now();const P=window.getComputedStyle(l);n.computedStyle=P;const z=P.overflowX,O=P.overflowY;if(o=["auto","overlay","scroll"].includes(z),s=["auto","overlay","scroll"].includes(O),n.hasOverflowX=o,n.hasOverflowY=s,!o&&!s||_==="vertical"&&!s||_==="horizontal"&&!o)return!1;h=l.scrollWidth,d=l.scrollHeight,m=l.clientWidth,g=l.clientHeight,c=h>m,u=d>g,n.isScrollableX=c,n.isScrollableY=u,n.scrollWidth=h,n.scrollHeight=d,n.clientWidth=m,n.clientHeight=g}else c=n.isScrollableX,u=n.isScrollableY,o=n.hasOverflowX,s=n.hasOverflowY,h=n.scrollWidth,d=n.scrollHeight,m=n.clientWidth,g=n.clientHeight;if(!o&&!s||!c&&!u||_==="vertical"&&(!s||!u)||_==="horizontal"&&(!o||!c))return!1;let w;if(_==="horizontal")w="x";else if(_==="vertical")w="y";else{const P=e!==0,z=t!==0;P&&o&&c&&(w="x"),z&&s&&u&&(w="y")}if(!w)return!1;let v,x,b,E,M;if(w==="x")v=l.scrollLeft,x=h-m,b=e,E=o,M=c;else if(w==="y")v=l.scrollTop,x=d-g,b=t,E=s,M=u;else return!1;return(b>0?v<x:v>0)&&E&&M}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){const l=this.options.wrapper;return this.isHorizontal?l.scrollX??l.scrollLeft:l.scrollY??l.scrollTop}get scroll(){return this.options.infinite?VR(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(l){this._isScrolling!==l&&(this._isScrolling=l,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(l){this._isStopped!==l&&(this._isStopped=l,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(l){this._isLocked!==l&&(this._isLocked=l,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let l="lenis";return this.options.autoToggle&&(l+=" lenis-autoToggle"),this.isStopped&&(l+=" lenis-stopped"),this.isLocked&&(l+=" lenis-locked"),this.isScrolling&&(l+=" lenis-scrolling"),this.isScrolling==="smooth"&&(l+=" lenis-smooth"),l}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};function tc({title:l,id:e,className:t="",children:i}){return pe.jsxs("section",{className:`essay-section mx-auto mb-14 w-full max-w-[78ch] px-1 motion-safe:translate-y-10 motion-safe:opacity-0 ${t}`,id:e,children:[pe.jsx("h2",{className:"font-title text-[clamp(1.42rem,2.45vw,1.95rem)] font-semibold leading-tight tracking-tight text-slate-900",children:l}),pe.jsx("div",{className:"section-content mt-6 space-y-5 text-[clamp(1.06rem,1.14vw,1.18rem)] leading-8 text-slate-700",children:i})]})}const E0="149",ZR=0,gS=1,KR=2,R1=1,QR=2,_c=3,Ca=0,rr=1,va=2,Sa=0,Vl=1,_S=2,vS=3,yS=4,JR=5,Dl=100,$R=101,eA=102,xS=103,wS=104,tA=200,iA=201,nA=202,rA=203,A1=204,D1=205,sA=206,aA=207,oA=208,lA=209,uA=210,cA=0,hA=1,fA=2,L_=3,dA=4,pA=5,mA=6,gA=7,P1=0,_A=1,vA=2,Ls=0,yA=1,xA=2,wA=3,SA=4,bA=5,L1=300,$l=301,eu=302,O_=303,z_=304,Wd=306,N_=1e3,Nr=1001,B_=1002,_n=1003,SS=1004,Mg=1005,ui=1006,TA=1007,Wc=1008,Eo=1009,EA=1010,MA=1011,O1=1012,CA=1013,oo=1014,lo=1015,jc=1016,RA=1017,AA=1018,Wl=1020,DA=1021,Br=1023,PA=1024,LA=1025,vo=1026,tu=1027,OA=1028,zA=1029,NA=1030,BA=1031,FA=1033,Cg=33776,Rg=33777,Ag=33778,Dg=33779,bS=35840,TS=35841,ES=35842,MS=35843,IA=36196,CS=37492,RS=37496,AS=37808,DS=37809,PS=37810,LS=37811,OS=37812,zS=37813,NS=37814,BS=37815,FS=37816,IS=37817,US=37818,HS=37819,kS=37820,GS=37821,Pg=36492,UA=36283,VS=36284,WS=36285,jS=36286,Mo=3e3,ni=3001,HA=3200,kA=3201,GA=0,VA=1,qr="srgb",qc="srgb-linear",Lg=7680,WA=519,qS=35044,XS="300 es",F_=1035;class au{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const n=this._listeners[e];if(n!==void 0){const o=n.indexOf(t);o!==-1&&n.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const n=i.slice(0);for(let o=0,s=n.length;o<s;o++)n[o].call(this,e);e.target=null}}}const en=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Og=Math.PI/180,YS=180/Math.PI;function $c(){const l=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(en[l&255]+en[l>>8&255]+en[l>>16&255]+en[l>>24&255]+"-"+en[e&255]+en[e>>8&255]+"-"+en[e>>16&15|64]+en[e>>24&255]+"-"+en[t&63|128]+en[t>>8&255]+"-"+en[t>>16&255]+en[t>>24&255]+en[i&255]+en[i>>8&255]+en[i>>16&255]+en[i>>24&255]).toLowerCase()}function Qn(l,e,t){return Math.max(e,Math.min(t,l))}function jA(l,e){return(l%e+e)%e}function zg(l,e,t){return(1-t)*l+t*e}function ZS(l){return(l&l-1)===0&&l!==0}function I_(l){return Math.pow(2,Math.floor(Math.log(l)/Math.LN2))}function Af(l,e){switch(e.constructor){case Float32Array:return l;case Uint16Array:return l/65535;case Uint8Array:return l/255;case Int16Array:return Math.max(l/32767,-1);case Int8Array:return Math.max(l/127,-1);default:throw new Error("Invalid component type.")}}function Wn(l,e){switch(e.constructor){case Float32Array:return l;case Uint16Array:return Math.round(l*65535);case Uint8Array:return Math.round(l*255);case Int16Array:return Math.round(l*32767);case Int8Array:return Math.round(l*127);default:throw new Error("Invalid component type.")}}class $t{constructor(e=0,t=0){$t.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*n+e.x,this.y=o*n+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ir{constructor(){ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,n,o,s,c,u,h){const d=this.elements;return d[0]=e,d[1]=n,d[2]=c,d[3]=t,d[4]=o,d[5]=u,d[6]=i,d[7]=s,d[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,o=this.elements,s=i[0],c=i[3],u=i[6],h=i[1],d=i[4],m=i[7],g=i[2],_=i[5],w=i[8],v=n[0],x=n[3],b=n[6],E=n[1],M=n[4],D=n[7],P=n[2],z=n[5],O=n[8];return o[0]=s*v+c*E+u*P,o[3]=s*x+c*M+u*z,o[6]=s*b+c*D+u*O,o[1]=h*v+d*E+m*P,o[4]=h*x+d*M+m*z,o[7]=h*b+d*D+m*O,o[2]=g*v+_*E+w*P,o[5]=g*x+_*M+w*z,o[8]=g*b+_*D+w*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],o=e[3],s=e[4],c=e[5],u=e[6],h=e[7],d=e[8];return t*s*d-t*c*h-i*o*d+i*c*u+n*o*h-n*s*u}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],o=e[3],s=e[4],c=e[5],u=e[6],h=e[7],d=e[8],m=d*s-c*h,g=c*u-d*o,_=h*o-s*u,w=t*m+i*g+n*_;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/w;return e[0]=m*v,e[1]=(n*h-d*i)*v,e[2]=(c*i-n*s)*v,e[3]=g*v,e[4]=(d*t-n*u)*v,e[5]=(n*o-c*t)*v,e[6]=_*v,e[7]=(i*u-h*t)*v,e[8]=(s*t-i*o)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,o,s,c){const u=Math.cos(o),h=Math.sin(o);return this.set(i*u,i*h,-i*(u*s+h*c)+s+e,-n*h,n*u,-n*(-h*s+u*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Ng.makeScale(e,t)),this}rotate(e){return this.premultiply(Ng.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ng.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ng=new ir;function z1(l){for(let e=l.length-1;e>=0;--e)if(l[e]>=65535)return!0;return!1}function Xc(l){return document.createElementNS("http://www.w3.org/1999/xhtml",l)}function yo(l){return l<.04045?l*.0773993808:Math.pow(l*.9478672986+.0521327014,2.4)}function cd(l){return l<.0031308?l*12.92:1.055*Math.pow(l,.41666)-.055}const Bg={[qr]:{[qc]:yo},[qc]:{[qr]:cd}},hn={legacyMode:!0,get workingColorSpace(){return qc},set workingColorSpace(l){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(l,e,t){if(this.legacyMode||e===t||!e||!t)return l;if(Bg[e]&&Bg[e][t]!==void 0){const i=Bg[e][t];return l.r=i(l.r),l.g=i(l.g),l.b=i(l.b),l}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(l,e){return this.convert(l,this.workingColorSpace,e)},toWorkingColorSpace:function(l,e){return this.convert(l,e,this.workingColorSpace)}},N1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ri={r:0,g:0,b:0},Ar={h:0,s:0,l:0},Df={h:0,s:0,l:0};function Fg(l,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?l+(e-l)*6*t:t<1/2?e:t<2/3?l+(e-l)*6*(2/3-t):l}function Pf(l,e){return e.r=l.r,e.g=l.g,e.b=l.b,e}let hi=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=qr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,hn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,n=hn.workingColorSpace){return this.r=e,this.g=t,this.b=i,hn.toWorkingColorSpace(this,n),this}setHSL(e,t,i,n=hn.workingColorSpace){if(e=jA(e,1),t=Qn(t,0,1),i=Qn(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=Fg(s,o,e+1/3),this.g=Fg(s,o,e),this.b=Fg(s,o,e-1/3)}return hn.toWorkingColorSpace(this,n),this}setStyle(e,t=qr){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const s=n[1],c=n[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,hn.toWorkingColorSpace(this,t),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,hn.toWorkingColorSpace(this,t),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const u=parseFloat(o[1])/360,h=parseFloat(o[2])/100,d=parseFloat(o[3])/100;return i(o[4]),this.setHSL(u,h,d,t)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=n[1],s=o.length;if(s===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,hn.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,hn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=qr){const i=N1[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=yo(e.r),this.g=yo(e.g),this.b=yo(e.b),this}copyLinearToSRGB(e){return this.r=cd(e.r),this.g=cd(e.g),this.b=cd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=qr){return hn.fromWorkingColorSpace(Pf(this,Ri),e),Qn(Ri.r*255,0,255)<<16^Qn(Ri.g*255,0,255)<<8^Qn(Ri.b*255,0,255)<<0}getHexString(e=qr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=hn.workingColorSpace){hn.fromWorkingColorSpace(Pf(this,Ri),t);const i=Ri.r,n=Ri.g,o=Ri.b,s=Math.max(i,n,o),c=Math.min(i,n,o);let u,h;const d=(c+s)/2;if(c===s)u=0,h=0;else{const m=s-c;switch(h=d<=.5?m/(s+c):m/(2-s-c),s){case i:u=(n-o)/m+(n<o?6:0);break;case n:u=(o-i)/m+2;break;case o:u=(i-n)/m+4;break}u/=6}return e.h=u,e.s=h,e.l=d,e}getRGB(e,t=hn.workingColorSpace){return hn.fromWorkingColorSpace(Pf(this,Ri),t),e.r=Ri.r,e.g=Ri.g,e.b=Ri.b,e}getStyle(e=qr){return hn.fromWorkingColorSpace(Pf(this,Ri),e),e!==qr?`color(${e} ${Ri.r} ${Ri.g} ${Ri.b})`:`rgb(${Ri.r*255|0},${Ri.g*255|0},${Ri.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Ar),Ar.h+=e,Ar.s+=t,Ar.l+=i,this.setHSL(Ar.h,Ar.s,Ar.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ar),e.getHSL(Df);const i=zg(Ar.h,Df.h,t),n=zg(Ar.s,Df.s,t),o=zg(Ar.l,Df.l,t);return this.setHSL(i,n,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};hi.NAMES=N1;let pl;class B1{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{pl===void 0&&(pl=Xc("canvas")),pl.width=e.width,pl.height=e.height;const i=pl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=pl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Xc("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),o=n.data;for(let s=0;s<o.length;s++)o[s]=yo(o[s]/255)*255;return i.putImageData(n,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(yo(t[i]/255)*255):t[i]=yo(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class F1{constructor(e=null){this.isSource=!0,this.uuid=$c(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(n!==null){let o;if(Array.isArray(n)){o=[];for(let s=0,c=n.length;s<c;s++)n[s].isDataTexture?o.push(Ig(n[s].image)):o.push(Ig(n[s]))}else o=Ig(n);i.url=o}return t||(e.images[this.uuid]=i),i}}function Ig(l){return typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&l instanceof ImageBitmap?B1.getDataURL(l):l.data?{data:Array.from(l.data),width:l.width,height:l.height,type:l.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qA=0;class xn extends au{constructor(e=xn.DEFAULT_IMAGE,t=xn.DEFAULT_MAPPING,i=Nr,n=Nr,o=ui,s=Wc,c=Br,u=Eo,h=xn.DEFAULT_ANISOTROPY,d=Mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qA++}),this.uuid=$c(),this.name="",this.source=new F1(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=n,this.magFilter=o,this.minFilter=s,this.anisotropy=h,this.format=c,this.internalFormat=null,this.type=u,this.offset=new $t(0,0),this.repeat=new $t(1,1),this.center=new $t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==L1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case N_:e.x=e.x-Math.floor(e.x);break;case Nr:e.x=e.x<0?0:1;break;case B_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case N_:e.y=e.y-Math.floor(e.y);break;case Nr:e.y=e.y<0?0:1;break;case B_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}xn.DEFAULT_IMAGE=null;xn.DEFAULT_MAPPING=L1;xn.DEFAULT_ANISOTROPY=1;class Pi{constructor(e=0,t=0,i=0,n=1){Pi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*n+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*n+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*n+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,o;const u=e.elements,h=u[0],d=u[4],m=u[8],g=u[1],_=u[5],w=u[9],v=u[2],x=u[6],b=u[10];if(Math.abs(d-g)<.01&&Math.abs(m-v)<.01&&Math.abs(w-x)<.01){if(Math.abs(d+g)<.1&&Math.abs(m+v)<.1&&Math.abs(w+x)<.1&&Math.abs(h+_+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(h+1)/2,D=(_+1)/2,P=(b+1)/2,z=(d+g)/4,O=(m+v)/4,L=(w+x)/4;return M>D&&M>P?M<.01?(i=0,n=.707106781,o=.707106781):(i=Math.sqrt(M),n=z/i,o=O/i):D>P?D<.01?(i=.707106781,n=0,o=.707106781):(n=Math.sqrt(D),i=z/n,o=L/n):P<.01?(i=.707106781,n=.707106781,o=0):(o=Math.sqrt(P),i=O/o,n=L/o),this.set(i,n,o,t),this}let E=Math.sqrt((x-w)*(x-w)+(m-v)*(m-v)+(g-d)*(g-d));return Math.abs(E)<.001&&(E=1),this.x=(x-w)/E,this.y=(m-v)/E,this.z=(g-d)/E,this.w=Math.acos((h+_+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Co extends au{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Pi(0,0,e,t),this.scissorTest=!1,this.viewport=new Pi(0,0,e,t);const n={width:e,height:t,depth:1};this.texture=new xn(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:ui,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new F1(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class I1 extends xn{constructor(e=null,t=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=_n,this.minFilter=_n,this.wrapR=Nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class XA extends xn{constructor(e=null,t=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=_n,this.minFilter=_n,this.wrapR=Nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eh{constructor(e=0,t=0,i=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,o,s,c){let u=i[n+0],h=i[n+1],d=i[n+2],m=i[n+3];const g=o[s+0],_=o[s+1],w=o[s+2],v=o[s+3];if(c===0){e[t+0]=u,e[t+1]=h,e[t+2]=d,e[t+3]=m;return}if(c===1){e[t+0]=g,e[t+1]=_,e[t+2]=w,e[t+3]=v;return}if(m!==v||u!==g||h!==_||d!==w){let x=1-c;const b=u*g+h*_+d*w+m*v,E=b>=0?1:-1,M=1-b*b;if(M>Number.EPSILON){const P=Math.sqrt(M),z=Math.atan2(P,b*E);x=Math.sin(x*z)/P,c=Math.sin(c*z)/P}const D=c*E;if(u=u*x+g*D,h=h*x+_*D,d=d*x+w*D,m=m*x+v*D,x===1-c){const P=1/Math.sqrt(u*u+h*h+d*d+m*m);u*=P,h*=P,d*=P,m*=P}}e[t]=u,e[t+1]=h,e[t+2]=d,e[t+3]=m}static multiplyQuaternionsFlat(e,t,i,n,o,s){const c=i[n],u=i[n+1],h=i[n+2],d=i[n+3],m=o[s],g=o[s+1],_=o[s+2],w=o[s+3];return e[t]=c*w+d*m+u*_-h*g,e[t+1]=u*w+d*g+h*m-c*_,e[t+2]=h*w+d*_+c*g-u*m,e[t+3]=d*w-c*m-u*g-h*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,n=e._y,o=e._z,s=e._order,c=Math.cos,u=Math.sin,h=c(i/2),d=c(n/2),m=c(o/2),g=u(i/2),_=u(n/2),w=u(o/2);switch(s){case"XYZ":this._x=g*d*m+h*_*w,this._y=h*_*m-g*d*w,this._z=h*d*w+g*_*m,this._w=h*d*m-g*_*w;break;case"YXZ":this._x=g*d*m+h*_*w,this._y=h*_*m-g*d*w,this._z=h*d*w-g*_*m,this._w=h*d*m+g*_*w;break;case"ZXY":this._x=g*d*m-h*_*w,this._y=h*_*m+g*d*w,this._z=h*d*w+g*_*m,this._w=h*d*m-g*_*w;break;case"ZYX":this._x=g*d*m-h*_*w,this._y=h*_*m+g*d*w,this._z=h*d*w-g*_*m,this._w=h*d*m+g*_*w;break;case"YZX":this._x=g*d*m+h*_*w,this._y=h*_*m+g*d*w,this._z=h*d*w-g*_*m,this._w=h*d*m-g*_*w;break;case"XZY":this._x=g*d*m-h*_*w,this._y=h*_*m-g*d*w,this._z=h*d*w+g*_*m,this._w=h*d*m+g*_*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],o=t[8],s=t[1],c=t[5],u=t[9],h=t[2],d=t[6],m=t[10],g=i+c+m;if(g>0){const _=.5/Math.sqrt(g+1);this._w=.25/_,this._x=(d-u)*_,this._y=(o-h)*_,this._z=(s-n)*_}else if(i>c&&i>m){const _=2*Math.sqrt(1+i-c-m);this._w=(d-u)/_,this._x=.25*_,this._y=(n+s)/_,this._z=(o+h)/_}else if(c>m){const _=2*Math.sqrt(1+c-i-m);this._w=(o-h)/_,this._x=(n+s)/_,this._y=.25*_,this._z=(u+d)/_}else{const _=2*Math.sqrt(1+m-i-c);this._w=(s-n)/_,this._x=(o+h)/_,this._y=(u+d)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,o=e._z,s=e._w,c=t._x,u=t._y,h=t._z,d=t._w;return this._x=i*d+s*c+n*h-o*u,this._y=n*d+s*u+o*c-i*h,this._z=o*d+s*h+i*u-n*c,this._w=s*d-i*c-n*u-o*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,n=this._y,o=this._z,s=this._w;let c=s*e._w+i*e._x+n*e._y+o*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=s,this._x=i,this._y=n,this._z=o,this;const u=1-c*c;if(u<=Number.EPSILON){const _=1-t;return this._w=_*s+t*this._w,this._x=_*i+t*this._x,this._y=_*n+t*this._y,this._z=_*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(u),d=Math.atan2(h,c),m=Math.sin((1-t)*d)/h,g=Math.sin(t*d)/h;return this._w=s*m+this._w*g,this._x=i*m+this._x*g,this._y=n*m+this._y*g,this._z=o*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),n=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(n),i*Math.sin(o),i*Math.cos(o),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Me{constructor(e=0,t=0,i=0){Me.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(KS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(KS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*n,this.y=o[1]*t+o[4]*i+o[7]*n,this.z=o[2]*t+o[5]*i+o[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*n+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*n+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*n+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*n+o[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,o=e.x,s=e.y,c=e.z,u=e.w,h=u*t+s*n-c*i,d=u*i+c*t-o*n,m=u*n+o*i-s*t,g=-o*t-s*i-c*n;return this.x=h*u+g*-o+d*-c-m*-s,this.y=d*u+g*-s+m*-o-h*-c,this.z=m*u+g*-c+h*-s-d*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n,this.y=o[1]*t+o[5]*i+o[9]*n,this.z=o[2]*t+o[6]*i+o[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,o=e.z,s=t.x,c=t.y,u=t.z;return this.x=n*u-o*c,this.y=o*s-i*u,this.z=i*c-n*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ug.copy(this).projectOnVector(e),this.sub(Ug)}reflect(e){return this.sub(Ug.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Qn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ug=new Me,KS=new eh;class th{constructor(e=new Me(1/0,1/0,1/0),t=new Me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,n=1/0,o=-1/0,s=-1/0,c=-1/0;for(let u=0,h=e.length;u<h;u+=3){const d=e[u],m=e[u+1],g=e[u+2];d<t&&(t=d),m<i&&(i=m),g<n&&(n=g),d>o&&(o=d),m>s&&(s=m),g>c&&(c=g)}return this.min.set(t,i,n),this.max.set(o,s,c),this}setFromBufferAttribute(e){let t=1/0,i=1/0,n=1/0,o=-1/0,s=-1/0,c=-1/0;for(let u=0,h=e.count;u<h;u++){const d=e.getX(u),m=e.getY(u),g=e.getZ(u);d<t&&(t=d),m<i&&(i=m),g<n&&(n=g),d>o&&(o=d),m>s&&(s=m),g>c&&(c=g)}return this.min.set(t,i,n),this.max.set(o,s,c),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ya.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let s=0,c=o.count;s<c;s++)Ya.fromBufferAttribute(o,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Ya)}else i.boundingBox===null&&i.computeBoundingBox(),Hg.copy(i.boundingBox),Hg.applyMatrix4(e.matrixWorld),this.union(Hg);const n=e.children;for(let o=0,s=n.length;o<s;o++)this.expandByObject(n[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ya),Ya.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ic),Lf.subVectors(this.max,ic),ml.subVectors(e.a,ic),gl.subVectors(e.b,ic),_l.subVectors(e.c,ic),oa.subVectors(gl,ml),la.subVectors(_l,gl),Za.subVectors(ml,_l);let t=[0,-oa.z,oa.y,0,-la.z,la.y,0,-Za.z,Za.y,oa.z,0,-oa.x,la.z,0,-la.x,Za.z,0,-Za.x,-oa.y,oa.x,0,-la.y,la.x,0,-Za.y,Za.x,0];return!kg(t,ml,gl,_l,Lf)||(t=[1,0,0,0,1,0,0,0,1],!kg(t,ml,gl,_l,Lf))?!1:(Of.crossVectors(oa,la),t=[Of.x,Of.y,Of.z],kg(t,ml,gl,_l,Lf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ya.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ya).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ys[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ys[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ys[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ys[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ys[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ys[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ys[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ys[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ys),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ys=[new Me,new Me,new Me,new Me,new Me,new Me,new Me,new Me],Ya=new Me,Hg=new th,ml=new Me,gl=new Me,_l=new Me,oa=new Me,la=new Me,Za=new Me,ic=new Me,Lf=new Me,Of=new Me,Ka=new Me;function kg(l,e,t,i,n){for(let o=0,s=l.length-3;o<=s;o+=3){Ka.fromArray(l,o);const c=n.x*Math.abs(Ka.x)+n.y*Math.abs(Ka.y)+n.z*Math.abs(Ka.z),u=e.dot(Ka),h=t.dot(Ka),d=i.dot(Ka);if(Math.max(-Math.max(u,h,d),Math.min(u,h,d))>c)return!1}return!0}const YA=new th,nc=new Me,Gg=new Me;class M0{constructor(e=new Me,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):YA.setFromPoints(e).getCenter(i);let n=0;for(let o=0,s=e.length;o<s;o++)n=Math.max(n,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;nc.subVectors(e,this.center);const t=nc.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),n=(i-this.radius)*.5;this.center.addScaledVector(nc,n/i),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Gg.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(nc.copy(e.center).add(Gg)),this.expandByPoint(nc.copy(e.center).sub(Gg))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const xs=new Me,Vg=new Me,zf=new Me,ua=new Me,Wg=new Me,Nf=new Me,jg=new Me;class ZA{constructor(e=new Me,t=new Me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xs.copy(this.direction).multiplyScalar(t).add(this.origin),xs.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){Vg.copy(e).add(t).multiplyScalar(.5),zf.copy(t).sub(e).normalize(),ua.copy(this.origin).sub(Vg);const o=e.distanceTo(t)*.5,s=-this.direction.dot(zf),c=ua.dot(this.direction),u=-ua.dot(zf),h=ua.lengthSq(),d=Math.abs(1-s*s);let m,g,_,w;if(d>0)if(m=s*u-c,g=s*c-u,w=o*d,m>=0)if(g>=-w)if(g<=w){const v=1/d;m*=v,g*=v,_=m*(m+s*g+2*c)+g*(s*m+g+2*u)+h}else g=o,m=Math.max(0,-(s*g+c)),_=-m*m+g*(g+2*u)+h;else g=-o,m=Math.max(0,-(s*g+c)),_=-m*m+g*(g+2*u)+h;else g<=-w?(m=Math.max(0,-(-s*o+c)),g=m>0?-o:Math.min(Math.max(-o,-u),o),_=-m*m+g*(g+2*u)+h):g<=w?(m=0,g=Math.min(Math.max(-o,-u),o),_=g*(g+2*u)+h):(m=Math.max(0,-(s*o+c)),g=m>0?o:Math.min(Math.max(-o,-u),o),_=-m*m+g*(g+2*u)+h);else g=s>0?-o:o,m=Math.max(0,-(s*g+c)),_=-m*m+g*(g+2*u)+h;return i&&i.copy(this.direction).multiplyScalar(m).add(this.origin),n&&n.copy(zf).multiplyScalar(g).add(Vg),_}intersectSphere(e,t){xs.subVectors(e.center,this.origin);const i=xs.dot(this.direction),n=xs.dot(xs)-i*i,o=e.radius*e.radius;if(n>o)return null;const s=Math.sqrt(o-n),c=i-s,u=i+s;return c<0&&u<0?null:c<0?this.at(u,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,o,s,c,u;const h=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,g=this.origin;return h>=0?(i=(e.min.x-g.x)*h,n=(e.max.x-g.x)*h):(i=(e.max.x-g.x)*h,n=(e.min.x-g.x)*h),d>=0?(o=(e.min.y-g.y)*d,s=(e.max.y-g.y)*d):(o=(e.max.y-g.y)*d,s=(e.min.y-g.y)*d),i>s||o>n||((o>i||isNaN(i))&&(i=o),(s<n||isNaN(n))&&(n=s),m>=0?(c=(e.min.z-g.z)*m,u=(e.max.z-g.z)*m):(c=(e.max.z-g.z)*m,u=(e.min.z-g.z)*m),i>u||c>n)||((c>i||i!==i)&&(i=c),(u<n||n!==n)&&(n=u),n<0)?null:this.at(i>=0?i:n,t)}intersectsBox(e){return this.intersectBox(e,xs)!==null}intersectTriangle(e,t,i,n,o){Wg.subVectors(t,e),Nf.subVectors(i,e),jg.crossVectors(Wg,Nf);let s=this.direction.dot(jg),c;if(s>0){if(n)return null;c=1}else if(s<0)c=-1,s=-s;else return null;ua.subVectors(this.origin,e);const u=c*this.direction.dot(Nf.crossVectors(ua,Nf));if(u<0)return null;const h=c*this.direction.dot(Wg.cross(ua));if(h<0||u+h>s)return null;const d=-c*ua.dot(jg);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qi{constructor(){Qi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,n,o,s,c,u,h,d,m,g,_,w,v,x){const b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=n,b[1]=o,b[5]=s,b[9]=c,b[13]=u,b[2]=h,b[6]=d,b[10]=m,b[14]=g,b[3]=_,b[7]=w,b[11]=v,b[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qi().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/vl.setFromMatrixColumn(e,0).length(),o=1/vl.setFromMatrixColumn(e,1).length(),s=1/vl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,o=e.z,s=Math.cos(i),c=Math.sin(i),u=Math.cos(n),h=Math.sin(n),d=Math.cos(o),m=Math.sin(o);if(e.order==="XYZ"){const g=s*d,_=s*m,w=c*d,v=c*m;t[0]=u*d,t[4]=-u*m,t[8]=h,t[1]=_+w*h,t[5]=g-v*h,t[9]=-c*u,t[2]=v-g*h,t[6]=w+_*h,t[10]=s*u}else if(e.order==="YXZ"){const g=u*d,_=u*m,w=h*d,v=h*m;t[0]=g+v*c,t[4]=w*c-_,t[8]=s*h,t[1]=s*m,t[5]=s*d,t[9]=-c,t[2]=_*c-w,t[6]=v+g*c,t[10]=s*u}else if(e.order==="ZXY"){const g=u*d,_=u*m,w=h*d,v=h*m;t[0]=g-v*c,t[4]=-s*m,t[8]=w+_*c,t[1]=_+w*c,t[5]=s*d,t[9]=v-g*c,t[2]=-s*h,t[6]=c,t[10]=s*u}else if(e.order==="ZYX"){const g=s*d,_=s*m,w=c*d,v=c*m;t[0]=u*d,t[4]=w*h-_,t[8]=g*h+v,t[1]=u*m,t[5]=v*h+g,t[9]=_*h-w,t[2]=-h,t[6]=c*u,t[10]=s*u}else if(e.order==="YZX"){const g=s*u,_=s*h,w=c*u,v=c*h;t[0]=u*d,t[4]=v-g*m,t[8]=w*m+_,t[1]=m,t[5]=s*d,t[9]=-c*d,t[2]=-h*d,t[6]=_*m+w,t[10]=g-v*m}else if(e.order==="XZY"){const g=s*u,_=s*h,w=c*u,v=c*h;t[0]=u*d,t[4]=-m,t[8]=h*d,t[1]=g*m+v,t[5]=s*d,t[9]=_*m-w,t[2]=w*m-_,t[6]=c*d,t[10]=v*m+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(KA,e,QA)}lookAt(e,t,i){const n=this.elements;return jn.subVectors(e,t),jn.lengthSq()===0&&(jn.z=1),jn.normalize(),ca.crossVectors(i,jn),ca.lengthSq()===0&&(Math.abs(i.z)===1?jn.x+=1e-4:jn.z+=1e-4,jn.normalize(),ca.crossVectors(i,jn)),ca.normalize(),Bf.crossVectors(jn,ca),n[0]=ca.x,n[4]=Bf.x,n[8]=jn.x,n[1]=ca.y,n[5]=Bf.y,n[9]=jn.y,n[2]=ca.z,n[6]=Bf.z,n[10]=jn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,o=this.elements,s=i[0],c=i[4],u=i[8],h=i[12],d=i[1],m=i[5],g=i[9],_=i[13],w=i[2],v=i[6],x=i[10],b=i[14],E=i[3],M=i[7],D=i[11],P=i[15],z=n[0],O=n[4],L=n[8],N=n[12],j=n[1],se=n[5],K=n[9],X=n[13],Z=n[2],he=n[6],Y=n[10],Q=n[14],ee=n[3],_e=n[7],G=n[11],V=n[15];return o[0]=s*z+c*j+u*Z+h*ee,o[4]=s*O+c*se+u*he+h*_e,o[8]=s*L+c*K+u*Y+h*G,o[12]=s*N+c*X+u*Q+h*V,o[1]=d*z+m*j+g*Z+_*ee,o[5]=d*O+m*se+g*he+_*_e,o[9]=d*L+m*K+g*Y+_*G,o[13]=d*N+m*X+g*Q+_*V,o[2]=w*z+v*j+x*Z+b*ee,o[6]=w*O+v*se+x*he+b*_e,o[10]=w*L+v*K+x*Y+b*G,o[14]=w*N+v*X+x*Q+b*V,o[3]=E*z+M*j+D*Z+P*ee,o[7]=E*O+M*se+D*he+P*_e,o[11]=E*L+M*K+D*Y+P*G,o[15]=E*N+M*X+D*Q+P*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],o=e[12],s=e[1],c=e[5],u=e[9],h=e[13],d=e[2],m=e[6],g=e[10],_=e[14],w=e[3],v=e[7],x=e[11],b=e[15];return w*(+o*u*m-n*h*m-o*c*g+i*h*g+n*c*_-i*u*_)+v*(+t*u*_-t*h*g+o*s*g-n*s*_+n*h*d-o*u*d)+x*(+t*h*m-t*c*_-o*s*m+i*s*_+o*c*d-i*h*d)+b*(-n*c*d-t*u*m+t*c*g+n*s*m-i*s*g+i*u*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],o=e[3],s=e[4],c=e[5],u=e[6],h=e[7],d=e[8],m=e[9],g=e[10],_=e[11],w=e[12],v=e[13],x=e[14],b=e[15],E=m*x*h-v*g*h+v*u*_-c*x*_-m*u*b+c*g*b,M=w*g*h-d*x*h-w*u*_+s*x*_+d*u*b-s*g*b,D=d*v*h-w*m*h+w*c*_-s*v*_-d*c*b+s*m*b,P=w*m*u-d*v*u-w*c*g+s*v*g+d*c*x-s*m*x,z=t*E+i*M+n*D+o*P;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/z;return e[0]=E*O,e[1]=(v*g*o-m*x*o-v*n*_+i*x*_+m*n*b-i*g*b)*O,e[2]=(c*x*o-v*u*o+v*n*h-i*x*h-c*n*b+i*u*b)*O,e[3]=(m*u*o-c*g*o-m*n*h+i*g*h+c*n*_-i*u*_)*O,e[4]=M*O,e[5]=(d*x*o-w*g*o+w*n*_-t*x*_-d*n*b+t*g*b)*O,e[6]=(w*u*o-s*x*o-w*n*h+t*x*h+s*n*b-t*u*b)*O,e[7]=(s*g*o-d*u*o+d*n*h-t*g*h-s*n*_+t*u*_)*O,e[8]=D*O,e[9]=(w*m*o-d*v*o-w*i*_+t*v*_+d*i*b-t*m*b)*O,e[10]=(s*v*o-w*c*o+w*i*h-t*v*h-s*i*b+t*c*b)*O,e[11]=(d*c*o-s*m*o-d*i*h+t*m*h+s*i*_-t*c*_)*O,e[12]=P*O,e[13]=(d*v*n-w*m*n+w*i*g-t*v*g-d*i*x+t*m*x)*O,e[14]=(w*c*n-s*v*n-w*i*u+t*v*u+s*i*x-t*c*x)*O,e[15]=(s*m*n-d*c*n+d*i*u-t*m*u-s*i*g+t*c*g)*O,this}scale(e){const t=this.elements,i=e.x,n=e.y,o=e.z;return t[0]*=i,t[4]*=n,t[8]*=o,t[1]*=i,t[5]*=n,t[9]*=o,t[2]*=i,t[6]*=n,t[10]*=o,t[3]*=i,t[7]*=n,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),o=1-i,s=e.x,c=e.y,u=e.z,h=o*s,d=o*c;return this.set(h*s+i,h*c-n*u,h*u+n*c,0,h*c+n*u,d*c+i,d*u-n*s,0,h*u-n*c,d*u+n*s,o*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,o,s){return this.set(1,i,o,0,e,1,s,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,o=t._x,s=t._y,c=t._z,u=t._w,h=o+o,d=s+s,m=c+c,g=o*h,_=o*d,w=o*m,v=s*d,x=s*m,b=c*m,E=u*h,M=u*d,D=u*m,P=i.x,z=i.y,O=i.z;return n[0]=(1-(v+b))*P,n[1]=(_+D)*P,n[2]=(w-M)*P,n[3]=0,n[4]=(_-D)*z,n[5]=(1-(g+b))*z,n[6]=(x+E)*z,n[7]=0,n[8]=(w+M)*O,n[9]=(x-E)*O,n[10]=(1-(g+v))*O,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let o=vl.set(n[0],n[1],n[2]).length();const s=vl.set(n[4],n[5],n[6]).length(),c=vl.set(n[8],n[9],n[10]).length();this.determinant()<0&&(o=-o),e.x=n[12],e.y=n[13],e.z=n[14],Dr.copy(this);const h=1/o,d=1/s,m=1/c;return Dr.elements[0]*=h,Dr.elements[1]*=h,Dr.elements[2]*=h,Dr.elements[4]*=d,Dr.elements[5]*=d,Dr.elements[6]*=d,Dr.elements[8]*=m,Dr.elements[9]*=m,Dr.elements[10]*=m,t.setFromRotationMatrix(Dr),i.x=o,i.y=s,i.z=c,this}makePerspective(e,t,i,n,o,s){const c=this.elements,u=2*o/(t-e),h=2*o/(i-n),d=(t+e)/(t-e),m=(i+n)/(i-n),g=-(s+o)/(s-o),_=-2*s*o/(s-o);return c[0]=u,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=h,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=_,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,n,o,s){const c=this.elements,u=1/(t-e),h=1/(i-n),d=1/(s-o),m=(t+e)*u,g=(i+n)*h,_=(s+o)*d;return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-g,c[2]=0,c[6]=0,c[10]=-2*d,c[14]=-_,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const vl=new Me,Dr=new Qi,KA=new Me(0,0,0),QA=new Me(1,1,1),ca=new Me,Bf=new Me,jn=new Me,QS=new Qi,JS=new eh;class jd{constructor(e=0,t=0,i=0,n=jd.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const n=e.elements,o=n[0],s=n[4],c=n[8],u=n[1],h=n[5],d=n[9],m=n[2],g=n[6],_=n[10];switch(t){case"XYZ":this._y=Math.asin(Qn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,_),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(g,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Qn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-m,o),this._z=0);break;case"ZXY":this._x=Math.asin(Qn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,_),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(u,o));break;case"ZYX":this._y=Math.asin(-Qn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,_),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin(Qn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-m,o)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-Qn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return QS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(QS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return JS.setFromEuler(this),this.setFromQuaternion(JS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}jd.DEFAULT_ORDER="XYZ";class U1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let JA=0;const $S=new Me,yl=new eh,ws=new Qi,Ff=new Me,rc=new Me,$A=new Me,eD=new eh,eb=new Me(1,0,0),tb=new Me(0,1,0),ib=new Me(0,0,1),tD={type:"added"},nb={type:"removed"};class sr extends au{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JA++}),this.uuid=$c(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=sr.DEFAULT_UP.clone();const e=new Me,t=new jd,i=new eh,n=new Me(1,1,1);function o(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Qi},normalMatrix:{value:new ir}}),this.matrix=new Qi,this.matrixWorld=new Qi,this.matrixAutoUpdate=sr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=sr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new U1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return yl.setFromAxisAngle(e,t),this.quaternion.multiply(yl),this}rotateOnWorldAxis(e,t){return yl.setFromAxisAngle(e,t),this.quaternion.premultiply(yl),this}rotateX(e){return this.rotateOnAxis(eb,e)}rotateY(e){return this.rotateOnAxis(tb,e)}rotateZ(e){return this.rotateOnAxis(ib,e)}translateOnAxis(e,t){return $S.copy(e).applyQuaternion(this.quaternion),this.position.add($S.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(eb,e)}translateY(e){return this.translateOnAxis(tb,e)}translateZ(e){return this.translateOnAxis(ib,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ws.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Ff.copy(e):Ff.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),rc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ws.lookAt(rc,Ff,this.up):ws.lookAt(Ff,rc,this.up),this.quaternion.setFromRotationMatrix(ws),n&&(ws.extractRotation(n.matrixWorld),yl.setFromRotationMatrix(ws),this.quaternion.premultiply(yl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tD)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nb)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(nb)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ws.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ws.multiply(e.parent.matrixWorld)),e.applyMatrix4(ws),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let n=0,o=this.children.length;n<o;n++){const s=this.children[n].getObjectsByProperty(e,t);s.length>0&&(i=i.concat(s))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rc,e,$A),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rc,eD,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){const o=t[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const n=this.children;for(let o=0,s=n.length;o<s;o++){const c=n[o];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function o(c,u){return c[u.uuid]===void 0&&(c[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=o(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const u=c.shapes;if(Array.isArray(u))for(let h=0,d=u.length;h<d;h++){const m=u[h];o(e.shapes,m)}else o(e.shapes,u)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let u=0,h=this.material.length;u<h;u++)c.push(o(e.materials,this.material[u]));n.material=c}else n.material=o(e.materials,this.material);if(this.children.length>0){n.children=[];for(let c=0;c<this.children.length;c++)n.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let c=0;c<this.animations.length;c++){const u=this.animations[c];n.animations.push(o(e.animations,u))}}if(t){const c=s(e.geometries),u=s(e.materials),h=s(e.textures),d=s(e.images),m=s(e.shapes),g=s(e.skeletons),_=s(e.animations),w=s(e.nodes);c.length>0&&(i.geometries=c),u.length>0&&(i.materials=u),h.length>0&&(i.textures=h),d.length>0&&(i.images=d),m.length>0&&(i.shapes=m),g.length>0&&(i.skeletons=g),_.length>0&&(i.animations=_),w.length>0&&(i.nodes=w)}return i.object=n,i;function s(c){const u=[];for(const h in c){const d=c[h];delete d.metadata,u.push(d)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const n=e.children[i];this.add(n.clone())}return this}}sr.DEFAULT_UP=new Me(0,1,0);sr.DEFAULT_MATRIX_AUTO_UPDATE=!0;sr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Pr=new Me,Ss=new Me,qg=new Me,bs=new Me,xl=new Me,wl=new Me,rb=new Me,Xg=new Me,Yg=new Me,Zg=new Me;class Rs{constructor(e=new Me,t=new Me,i=new Me){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),Pr.subVectors(e,t),n.cross(Pr);const o=n.lengthSq();return o>0?n.multiplyScalar(1/Math.sqrt(o)):n.set(0,0,0)}static getBarycoord(e,t,i,n,o){Pr.subVectors(n,t),Ss.subVectors(i,t),qg.subVectors(e,t);const s=Pr.dot(Pr),c=Pr.dot(Ss),u=Pr.dot(qg),h=Ss.dot(Ss),d=Ss.dot(qg),m=s*h-c*c;if(m===0)return o.set(-2,-1,-1);const g=1/m,_=(h*u-c*d)*g,w=(s*d-c*u)*g;return o.set(1-_-w,w,_)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,bs),bs.x>=0&&bs.y>=0&&bs.x+bs.y<=1}static getUV(e,t,i,n,o,s,c,u){return this.getBarycoord(e,t,i,n,bs),u.set(0,0),u.addScaledVector(o,bs.x),u.addScaledVector(s,bs.y),u.addScaledVector(c,bs.z),u}static isFrontFacing(e,t,i,n){return Pr.subVectors(i,t),Ss.subVectors(e,t),Pr.cross(Ss).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Pr.subVectors(this.c,this.b),Ss.subVectors(this.a,this.b),Pr.cross(Ss).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Rs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Rs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,o){return Rs.getUV(e,this.a,this.b,this.c,t,i,n,o)}containsPoint(e){return Rs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Rs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,o=this.c;let s,c;xl.subVectors(n,i),wl.subVectors(o,i),Xg.subVectors(e,i);const u=xl.dot(Xg),h=wl.dot(Xg);if(u<=0&&h<=0)return t.copy(i);Yg.subVectors(e,n);const d=xl.dot(Yg),m=wl.dot(Yg);if(d>=0&&m<=d)return t.copy(n);const g=u*m-d*h;if(g<=0&&u>=0&&d<=0)return s=u/(u-d),t.copy(i).addScaledVector(xl,s);Zg.subVectors(e,o);const _=xl.dot(Zg),w=wl.dot(Zg);if(w>=0&&_<=w)return t.copy(o);const v=_*h-u*w;if(v<=0&&h>=0&&w<=0)return c=h/(h-w),t.copy(i).addScaledVector(wl,c);const x=d*w-_*m;if(x<=0&&m-d>=0&&_-w>=0)return rb.subVectors(o,n),c=(m-d)/(m-d+(_-w)),t.copy(n).addScaledVector(rb,c);const b=1/(x+v+g);return s=v*b,c=g*b,t.copy(i).addScaledVector(xl,s).addScaledVector(wl,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let iD=0;class qd extends au{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iD++}),this.uuid=$c(),this.name="",this.type="Material",this.blending=Vl,this.side=Ca,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=A1,this.blendDst=D1,this.blendEquation=Dl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=L_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Lg,this.stencilZFail=Lg,this.stencilZPass=Lg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const n=this[t];if(n===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Vl&&(i.blending=this.blending),this.side!==Ca&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function n(o){const s=[];for(const c in o){const u=o[c];delete u.metadata,s.push(u)}return s}if(t){const o=n(e.textures),s=n(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const n=t.length;i=new Array(n);for(let o=0;o!==n;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class H1 extends qd{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new hi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=P1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ti=new Me,If=new $t;class Jr{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=qS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,o=this.itemSize;n<o;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)If.fromBufferAttribute(this,t),If.applyMatrix3(e),this.setXY(t,If.x,If.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ti.fromBufferAttribute(this,t),Ti.applyMatrix3(e),this.setXYZ(t,Ti.x,Ti.y,Ti.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ti.fromBufferAttribute(this,t),Ti.applyMatrix4(e),this.setXYZ(t,Ti.x,Ti.y,Ti.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ti.fromBufferAttribute(this,t),Ti.applyNormalMatrix(e),this.setXYZ(t,Ti.x,Ti.y,Ti.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ti.fromBufferAttribute(this,t),Ti.transformDirection(e),this.setXYZ(t,Ti.x,Ti.y,Ti.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Af(t,this.array)),t}setX(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Af(t,this.array)),t}setY(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Af(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Af(t,this.array)),t}setW(e,t){return this.normalized&&(t=Wn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array),n=Wn(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,o){return e*=this.itemSize,this.normalized&&(t=Wn(t,this.array),i=Wn(i,this.array),n=Wn(n,this.array),o=Wn(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class k1 extends Jr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class G1 extends Jr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class xo extends Jr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let nD=0;const yr=new Qi,Kg=new sr,Sl=new Me,qn=new th,sc=new th,Hi=new Me;class Po extends au{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nD++}),this.uuid=$c(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(z1(e)?G1:k1)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new ir().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return yr.makeRotationFromQuaternion(e),this.applyMatrix4(yr),this}rotateX(e){return yr.makeRotationX(e),this.applyMatrix4(yr),this}rotateY(e){return yr.makeRotationY(e),this.applyMatrix4(yr),this}rotateZ(e){return yr.makeRotationZ(e),this.applyMatrix4(yr),this}translate(e,t,i){return yr.makeTranslation(e,t,i),this.applyMatrix4(yr),this}scale(e,t,i){return yr.makeScale(e,t,i),this.applyMatrix4(yr),this}lookAt(e){return Kg.lookAt(e),Kg.updateMatrix(),this.applyMatrix4(Kg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sl).negate(),this.translate(Sl.x,Sl.y,Sl.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new xo(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new th);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Me(-1/0,-1/0,-1/0),new Me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const o=t[i];qn.setFromBufferAttribute(o),this.morphTargetsRelative?(Hi.addVectors(this.boundingBox.min,qn.min),this.boundingBox.expandByPoint(Hi),Hi.addVectors(this.boundingBox.max,qn.max),this.boundingBox.expandByPoint(Hi)):(this.boundingBox.expandByPoint(qn.min),this.boundingBox.expandByPoint(qn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new M0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Me,1/0);return}if(e){const i=this.boundingSphere.center;if(qn.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){const c=t[o];sc.setFromBufferAttribute(c),this.morphTargetsRelative?(Hi.addVectors(qn.min,sc.min),qn.expandByPoint(Hi),Hi.addVectors(qn.max,sc.max),qn.expandByPoint(Hi)):(qn.expandByPoint(sc.min),qn.expandByPoint(sc.max))}qn.getCenter(i);let n=0;for(let o=0,s=e.count;o<s;o++)Hi.fromBufferAttribute(e,o),n=Math.max(n,i.distanceToSquared(Hi));if(t)for(let o=0,s=t.length;o<s;o++){const c=t[o],u=this.morphTargetsRelative;for(let h=0,d=c.count;h<d;h++)Hi.fromBufferAttribute(c,h),u&&(Sl.fromBufferAttribute(e,h),Hi.add(Sl)),n=Math.max(n,i.distanceToSquared(Hi))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,n=t.position.array,o=t.normal.array,s=t.uv.array,c=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jr(new Float32Array(4*c),4));const u=this.getAttribute("tangent").array,h=[],d=[];for(let j=0;j<c;j++)h[j]=new Me,d[j]=new Me;const m=new Me,g=new Me,_=new Me,w=new $t,v=new $t,x=new $t,b=new Me,E=new Me;function M(j,se,K){m.fromArray(n,j*3),g.fromArray(n,se*3),_.fromArray(n,K*3),w.fromArray(s,j*2),v.fromArray(s,se*2),x.fromArray(s,K*2),g.sub(m),_.sub(m),v.sub(w),x.sub(w);const X=1/(v.x*x.y-x.x*v.y);isFinite(X)&&(b.copy(g).multiplyScalar(x.y).addScaledVector(_,-v.y).multiplyScalar(X),E.copy(_).multiplyScalar(v.x).addScaledVector(g,-x.x).multiplyScalar(X),h[j].add(b),h[se].add(b),h[K].add(b),d[j].add(E),d[se].add(E),d[K].add(E))}let D=this.groups;D.length===0&&(D=[{start:0,count:i.length}]);for(let j=0,se=D.length;j<se;++j){const K=D[j],X=K.start,Z=K.count;for(let he=X,Y=X+Z;he<Y;he+=3)M(i[he+0],i[he+1],i[he+2])}const P=new Me,z=new Me,O=new Me,L=new Me;function N(j){O.fromArray(o,j*3),L.copy(O);const se=h[j];P.copy(se),P.sub(O.multiplyScalar(O.dot(se))).normalize(),z.crossVectors(L,se);const X=z.dot(d[j])<0?-1:1;u[j*4]=P.x,u[j*4+1]=P.y,u[j*4+2]=P.z,u[j*4+3]=X}for(let j=0,se=D.length;j<se;++j){const K=D[j],X=K.start,Z=K.count;for(let he=X,Y=X+Z;he<Y;he+=3)N(i[he+0]),N(i[he+1]),N(i[he+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Jr(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let g=0,_=i.count;g<_;g++)i.setXYZ(g,0,0,0);const n=new Me,o=new Me,s=new Me,c=new Me,u=new Me,h=new Me,d=new Me,m=new Me;if(e)for(let g=0,_=e.count;g<_;g+=3){const w=e.getX(g+0),v=e.getX(g+1),x=e.getX(g+2);n.fromBufferAttribute(t,w),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),d.subVectors(s,o),m.subVectors(n,o),d.cross(m),c.fromBufferAttribute(i,w),u.fromBufferAttribute(i,v),h.fromBufferAttribute(i,x),c.add(d),u.add(d),h.add(d),i.setXYZ(w,c.x,c.y,c.z),i.setXYZ(v,u.x,u.y,u.z),i.setXYZ(x,h.x,h.y,h.z)}else for(let g=0,_=t.count;g<_;g+=3)n.fromBufferAttribute(t,g+0),o.fromBufferAttribute(t,g+1),s.fromBufferAttribute(t,g+2),d.subVectors(s,o),m.subVectors(n,o),d.cross(m),i.setXYZ(g+0,d.x,d.y,d.z),i.setXYZ(g+1,d.x,d.y,d.z),i.setXYZ(g+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Hi.fromBufferAttribute(e,t),Hi.normalize(),e.setXYZ(t,Hi.x,Hi.y,Hi.z)}toNonIndexed(){function e(c,u){const h=c.array,d=c.itemSize,m=c.normalized,g=new h.constructor(u.length*d);let _=0,w=0;for(let v=0,x=u.length;v<x;v++){c.isInterleavedBufferAttribute?_=u[v]*c.data.stride+c.offset:_=u[v]*d;for(let b=0;b<d;b++)g[w++]=h[_++]}return new Jr(g,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Po,i=this.index.array,n=this.attributes;for(const c in n){const u=n[c],h=e(u,i);t.setAttribute(c,h)}const o=this.morphAttributes;for(const c in o){const u=[],h=o[c];for(let d=0,m=h.length;d<m;d++){const g=h[d],_=e(g,i);u.push(_)}t.morphAttributes[c]=u}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let c=0,u=s.length;c<u;c++){const h=s[c];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const n={};let o=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],d=[];for(let m=0,g=h.length;m<g;m++){const _=h[m];d.push(_.toJSON(e.data))}d.length>0&&(n[u]=d,o=!0)}o&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const n=e.attributes;for(const h in n){const d=n[h];this.setAttribute(h,d.clone(t))}const o=e.morphAttributes;for(const h in o){const d=[],m=o[h];for(let g=0,_=m.length;g<_;g++)d.push(m[g].clone(t));this.morphAttributes[h]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let h=0,d=s.length;h<d;h++){const m=s[h];this.addGroup(m.start,m.count,m.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const sb=new Qi,bl=new ZA,Qg=new M0,ac=new Me,oc=new Me,lc=new Me,Jg=new Me,Uf=new Me,Hf=new $t,kf=new $t,Gf=new $t,$g=new Me,Vf=new Me;class Ds extends sr{constructor(e=new Po,t=new H1){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const n=t[i[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=n.length;o<s;o++){const c=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const c=this.morphTargetInfluences;if(o&&c){Uf.set(0,0,0);for(let u=0,h=o.length;u<h;u++){const d=c[u],m=o[u];d!==0&&(Jg.fromBufferAttribute(m,e),s?Uf.addScaledVector(Jg,d):Uf.addScaledVector(Jg.sub(t),d))}t.add(Uf)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,n=this.material,o=this.matrixWorld;if(n===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Qg.copy(i.boundingSphere),Qg.applyMatrix4(o),e.ray.intersectsSphere(Qg)===!1)||(sb.copy(o).invert(),bl.copy(e.ray).applyMatrix4(sb),i.boundingBox!==null&&bl.intersectsBox(i.boundingBox)===!1))return;let s;const c=i.index,u=i.attributes.position,h=i.attributes.uv,d=i.attributes.uv2,m=i.groups,g=i.drawRange;if(c!==null)if(Array.isArray(n))for(let _=0,w=m.length;_<w;_++){const v=m[_],x=n[v.materialIndex],b=Math.max(v.start,g.start),E=Math.min(c.count,Math.min(v.start+v.count,g.start+g.count));for(let M=b,D=E;M<D;M+=3){const P=c.getX(M),z=c.getX(M+1),O=c.getX(M+2);s=Wf(this,x,e,bl,h,d,P,z,O),s&&(s.faceIndex=Math.floor(M/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const _=Math.max(0,g.start),w=Math.min(c.count,g.start+g.count);for(let v=_,x=w;v<x;v+=3){const b=c.getX(v),E=c.getX(v+1),M=c.getX(v+2);s=Wf(this,n,e,bl,h,d,b,E,M),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}else if(u!==void 0)if(Array.isArray(n))for(let _=0,w=m.length;_<w;_++){const v=m[_],x=n[v.materialIndex],b=Math.max(v.start,g.start),E=Math.min(u.count,Math.min(v.start+v.count,g.start+g.count));for(let M=b,D=E;M<D;M+=3){const P=M,z=M+1,O=M+2;s=Wf(this,x,e,bl,h,d,P,z,O),s&&(s.faceIndex=Math.floor(M/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const _=Math.max(0,g.start),w=Math.min(u.count,g.start+g.count);for(let v=_,x=w;v<x;v+=3){const b=v,E=v+1,M=v+2;s=Wf(this,n,e,bl,h,d,b,E,M),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}}}function rD(l,e,t,i,n,o,s,c){let u;if(e.side===rr?u=i.intersectTriangle(s,o,n,!0,c):u=i.intersectTriangle(n,o,s,e.side===Ca,c),u===null)return null;Vf.copy(c),Vf.applyMatrix4(l.matrixWorld);const h=t.ray.origin.distanceTo(Vf);return h<t.near||h>t.far?null:{distance:h,point:Vf.clone(),object:l}}function Wf(l,e,t,i,n,o,s,c,u){l.getVertexPosition(s,ac),l.getVertexPosition(c,oc),l.getVertexPosition(u,lc);const h=rD(l,e,t,i,ac,oc,lc,$g);if(h){n&&(Hf.fromBufferAttribute(n,s),kf.fromBufferAttribute(n,c),Gf.fromBufferAttribute(n,u),h.uv=Rs.getUV($g,ac,oc,lc,Hf,kf,Gf,new $t)),o&&(Hf.fromBufferAttribute(o,s),kf.fromBufferAttribute(o,c),Gf.fromBufferAttribute(o,u),h.uv2=Rs.getUV($g,ac,oc,lc,Hf,kf,Gf,new $t));const d={a:s,b:c,c:u,normal:new Me,materialIndex:0};Rs.getNormal(ac,oc,lc,d.normal),h.face=d}return h}class ih extends Po{constructor(e=1,t=1,i=1,n=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:o,depthSegments:s};const c=this;n=Math.floor(n),o=Math.floor(o),s=Math.floor(s);const u=[],h=[],d=[],m=[];let g=0,_=0;w("z","y","x",-1,-1,i,t,e,s,o,0),w("z","y","x",1,-1,i,t,-e,s,o,1),w("x","z","y",1,1,e,i,t,n,s,2),w("x","z","y",1,-1,e,i,-t,n,s,3),w("x","y","z",1,-1,e,t,i,n,o,4),w("x","y","z",-1,-1,e,t,-i,n,o,5),this.setIndex(u),this.setAttribute("position",new xo(h,3)),this.setAttribute("normal",new xo(d,3)),this.setAttribute("uv",new xo(m,2));function w(v,x,b,E,M,D,P,z,O,L,N){const j=D/O,se=P/L,K=D/2,X=P/2,Z=z/2,he=O+1,Y=L+1;let Q=0,ee=0;const _e=new Me;for(let G=0;G<Y;G++){const V=G*se-X;for(let q=0;q<he;q++){const ie=q*j-K;_e[v]=ie*E,_e[x]=V*M,_e[b]=Z,h.push(_e.x,_e.y,_e.z),_e[v]=0,_e[x]=0,_e[b]=z>0?1:-1,d.push(_e.x,_e.y,_e.z),m.push(q/O),m.push(1-G/L),Q+=1}}for(let G=0;G<L;G++)for(let V=0;V<O;V++){const q=g+V+he*G,ie=g+V+he*(G+1),me=g+(V+1)+he*(G+1),ue=g+(V+1)+he*G;u.push(q,ie,ue),u.push(ie,me,ue),ee+=6}c.addGroup(_,ee,N),_+=ee,g+=Q}}static fromJSON(e){return new ih(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function iu(l){const e={};for(const t in l){e[t]={};for(const i in l[t]){const n=l[t][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?e[t][i]=n.clone():Array.isArray(n)?e[t][i]=n.slice():e[t][i]=n}}return e}function dn(l){const e={};for(let t=0;t<l.length;t++){const i=iu(l[t]);for(const n in i)e[n]=i[n]}return e}function sD(l){const e=[];for(let t=0;t<l.length;t++)e.push(l[t].clone());return e}function V1(l){return l.getRenderTarget()===null&&l.outputEncoding===ni?qr:qc}const aD={clone:iu,merge:dn};var oD=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,lD=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ra extends qd{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=oD,this.fragmentShader=lD,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=iu(e.uniforms),this.uniformsGroups=sD(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const s=this.uniforms[n].value;s&&s.isTexture?t.uniforms[n]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[n]={type:"m4",value:s.toArray()}:t.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const n in this.extensions)this.extensions[n]===!0&&(i[n]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class W1 extends sr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qi,this.projectionMatrix=new Qi,this.projectionMatrixInverse=new Qi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Or extends W1{constructor(e=50,t=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=YS*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Og*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return YS*2*Math.atan(Math.tan(Og*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,n,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Og*.5*this.fov)/this.zoom,i=2*t,n=this.aspect*i,o=-.5*n;const s=this.view;if(this.view!==null&&this.view.enabled){const u=s.fullWidth,h=s.fullHeight;o+=s.offsetX*n/u,t-=s.offsetY*i/h,n*=s.width/u,i*=s.height/h}const c=this.filmOffset;c!==0&&(o+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tl=-90,El=1;class uD extends sr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new Or(Tl,El,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);const o=new Or(Tl,El,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(-1,0,0),this.add(o);const s=new Or(Tl,El,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const c=new Or(Tl,El,e,t);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),this.add(c);const u=new Or(Tl,El,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);const h=new Or(Tl,El,e,t);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(0,0,-1),this.add(h)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[n,o,s,c,u,h]=this.children,d=e.getRenderTarget(),m=e.toneMapping,g=e.xr.enabled;e.toneMapping=Ls,e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,n),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,c),e.setRenderTarget(i,4),e.render(t,u),i.texture.generateMipmaps=_,e.setRenderTarget(i,5),e.render(t,h),e.setRenderTarget(d),e.toneMapping=m,e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class j1 extends xn{constructor(e,t,i,n,o,s,c,u,h,d){e=e!==void 0?e:[],t=t!==void 0?t:$l,super(e,t,i,n,o,s,c,u,h,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cD extends Co{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];this.texture=new j1(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ui}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new ih(5,5,5),o=new Ra({name:"CubemapFromEquirect",uniforms:iu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:rr,blending:Sa});o.uniforms.tEquirect.value=t;const s=new Ds(n,o),c=t.minFilter;return t.minFilter===Wc&&(t.minFilter=ui),new uD(1,10,this).update(e,s),t.minFilter=c,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,n){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,n);e.setRenderTarget(o)}}const e_=new Me,hD=new Me,fD=new ir;class to{constructor(e=new Me(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=e_.subVectors(i,t).cross(hD.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(e_),n=this.normal.dot(i);if(n===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/n;return o<0||o>1?null:t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||fD.getNormalMatrix(e),n=this.coplanarPoint(e_).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ml=new M0,jf=new Me;class q1{constructor(e=new to,t=new to,i=new to,n=new to,o=new to,s=new to){this.planes=[e,t,i,n,o,s]}set(e,t,i,n,o,s){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(i),c[3].copy(n),c[4].copy(o),c[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,n=i[0],o=i[1],s=i[2],c=i[3],u=i[4],h=i[5],d=i[6],m=i[7],g=i[8],_=i[9],w=i[10],v=i[11],x=i[12],b=i[13],E=i[14],M=i[15];return t[0].setComponents(c-n,m-u,v-g,M-x).normalize(),t[1].setComponents(c+n,m+u,v+g,M+x).normalize(),t[2].setComponents(c+o,m+h,v+_,M+b).normalize(),t[3].setComponents(c-o,m-h,v-_,M-b).normalize(),t[4].setComponents(c-s,m-d,v-w,M-E).normalize(),t[5].setComponents(c+s,m+d,v+w,M+E).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ml.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ml)}intersectsSprite(e){return Ml.center.set(0,0,0),Ml.radius=.7071067811865476,Ml.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ml)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(jf.x=n.normal.x>0?e.max.x:e.min.x,jf.y=n.normal.y>0?e.max.y:e.min.y,jf.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(jf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function X1(){let l=null,e=!1,t=null,i=null;function n(o,s){t(o,s),i=l.requestAnimationFrame(n)}return{start:function(){e!==!0&&t!==null&&(i=l.requestAnimationFrame(n),e=!0)},stop:function(){l.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){l=o}}}function dD(l,e){const t=e.isWebGL2,i=new WeakMap;function n(h,d){const m=h.array,g=h.usage,_=l.createBuffer();l.bindBuffer(d,_),l.bufferData(d,m,g),h.onUploadCallback();let w;if(m instanceof Float32Array)w=5126;else if(m instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)w=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=5123;else if(m instanceof Int16Array)w=5122;else if(m instanceof Uint32Array)w=5125;else if(m instanceof Int32Array)w=5124;else if(m instanceof Int8Array)w=5120;else if(m instanceof Uint8Array)w=5121;else if(m instanceof Uint8ClampedArray)w=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:_,type:w,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version}}function o(h,d,m){const g=d.array,_=d.updateRange;l.bindBuffer(m,h),_.count===-1?l.bufferSubData(m,0,g):(t?l.bufferSubData(m,_.offset*g.BYTES_PER_ELEMENT,g,_.offset,_.count):l.bufferSubData(m,_.offset*g.BYTES_PER_ELEMENT,g.subarray(_.offset,_.offset+_.count)),_.count=-1),d.onUploadCallback()}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function c(h){h.isInterleavedBufferAttribute&&(h=h.data);const d=i.get(h);d&&(l.deleteBuffer(d.buffer),i.delete(h))}function u(h,d){if(h.isGLBufferAttribute){const g=i.get(h);(!g||g.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const m=i.get(h);m===void 0?i.set(h,n(h,d)):m.version<h.version&&(o(m.buffer,h,d),m.version=h.version)}return{get:s,remove:c,update:u}}class Xd extends Po{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const o=e/2,s=t/2,c=Math.floor(i),u=Math.floor(n),h=c+1,d=u+1,m=e/c,g=t/u,_=[],w=[],v=[],x=[];for(let b=0;b<d;b++){const E=b*g-s;for(let M=0;M<h;M++){const D=M*m-o;w.push(D,-E,0),v.push(0,0,1),x.push(M/c),x.push(1-b/u)}}for(let b=0;b<u;b++)for(let E=0;E<c;E++){const M=E+h*b,D=E+h*(b+1),P=E+1+h*(b+1),z=E+1+h*b;_.push(M,D,z),_.push(D,P,z)}this.setIndex(_),this.setAttribute("position",new xo(w,3)),this.setAttribute("normal",new xo(v,3)),this.setAttribute("uv",new xo(x,2))}static fromJSON(e){return new Xd(e.width,e.height,e.widthSegments,e.heightSegments)}}var pD=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,mD=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gD=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,_D=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,vD=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,yD=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,xD="vec3 transformed = vec3( position );",wD=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,SD=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,bD=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,TD=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ED=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,MD=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,CD=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,RD=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,AD=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,DD=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,PD=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,LD=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,OD=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,zD=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ND=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,BD=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,FD=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ID=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UD=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,HD="gl_FragColor = linearToOutputTexel( gl_FragColor );",kD=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,GD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VD=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,WD=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,jD=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,XD=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,YD=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ZD=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,KD=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,QD=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,JD=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,$D=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,iP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,nP=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,rP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,sP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,aP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,oP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,uP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,cP=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,hP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,fP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,dP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,gP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,_P=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,vP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,xP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wP=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,SP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bP=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,TP=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,EP=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,MP=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,CP=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,RP=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,AP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PP=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,LP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,OP=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,zP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,NP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,BP=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,FP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,IP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,UP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,HP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,kP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,GP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,WP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jP=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,qP=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,XP=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,YP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ZP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KP=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,QP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,JP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$P=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,e3=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,t3=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,i3=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,n3=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,r3=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,s3=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,a3=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,o3=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,l3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,u3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,c3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,h3=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const f3=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,d3=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,p3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,m3=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,g3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_3=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,v3=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,y3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,x3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,w3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,S3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,b3=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,T3=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,E3=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,M3=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,C3=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,R3=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,A3=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D3=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,P3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,O3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,z3=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,N3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B3=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,F3=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,I3=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,H3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,k3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,G3=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,W3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,j3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Tt={alphamap_fragment:pD,alphamap_pars_fragment:mD,alphatest_fragment:gD,alphatest_pars_fragment:_D,aomap_fragment:vD,aomap_pars_fragment:yD,begin_vertex:xD,beginnormal_vertex:wD,bsdfs:SD,iridescence_fragment:bD,bumpmap_pars_fragment:TD,clipping_planes_fragment:ED,clipping_planes_pars_fragment:MD,clipping_planes_pars_vertex:CD,clipping_planes_vertex:RD,color_fragment:AD,color_pars_fragment:DD,color_pars_vertex:PD,color_vertex:LD,common:OD,cube_uv_reflection_fragment:zD,defaultnormal_vertex:ND,displacementmap_pars_vertex:BD,displacementmap_vertex:FD,emissivemap_fragment:ID,emissivemap_pars_fragment:UD,encodings_fragment:HD,encodings_pars_fragment:kD,envmap_fragment:GD,envmap_common_pars_fragment:VD,envmap_pars_fragment:WD,envmap_pars_vertex:jD,envmap_physical_pars_fragment:nP,envmap_vertex:qD,fog_vertex:XD,fog_pars_vertex:YD,fog_fragment:ZD,fog_pars_fragment:KD,gradientmap_pars_fragment:QD,lightmap_fragment:JD,lightmap_pars_fragment:$D,lights_lambert_fragment:eP,lights_lambert_pars_fragment:tP,lights_pars_begin:iP,lights_toon_fragment:rP,lights_toon_pars_fragment:sP,lights_phong_fragment:aP,lights_phong_pars_fragment:oP,lights_physical_fragment:lP,lights_physical_pars_fragment:uP,lights_fragment_begin:cP,lights_fragment_maps:hP,lights_fragment_end:fP,logdepthbuf_fragment:dP,logdepthbuf_pars_fragment:pP,logdepthbuf_pars_vertex:mP,logdepthbuf_vertex:gP,map_fragment:_P,map_pars_fragment:vP,map_particle_fragment:yP,map_particle_pars_fragment:xP,metalnessmap_fragment:wP,metalnessmap_pars_fragment:SP,morphcolor_vertex:bP,morphnormal_vertex:TP,morphtarget_pars_vertex:EP,morphtarget_vertex:MP,normal_fragment_begin:CP,normal_fragment_maps:RP,normal_pars_fragment:AP,normal_pars_vertex:DP,normal_vertex:PP,normalmap_pars_fragment:LP,clearcoat_normal_fragment_begin:OP,clearcoat_normal_fragment_maps:zP,clearcoat_pars_fragment:NP,iridescence_pars_fragment:BP,output_fragment:FP,packing:IP,premultiplied_alpha_fragment:UP,project_vertex:HP,dithering_fragment:kP,dithering_pars_fragment:GP,roughnessmap_fragment:VP,roughnessmap_pars_fragment:WP,shadowmap_pars_fragment:jP,shadowmap_pars_vertex:qP,shadowmap_vertex:XP,shadowmask_pars_fragment:YP,skinbase_vertex:ZP,skinning_pars_vertex:KP,skinning_vertex:QP,skinnormal_vertex:JP,specularmap_fragment:$P,specularmap_pars_fragment:e3,tonemapping_fragment:t3,tonemapping_pars_fragment:i3,transmission_fragment:n3,transmission_pars_fragment:r3,uv_pars_fragment:s3,uv_pars_vertex:a3,uv_vertex:o3,uv2_pars_fragment:l3,uv2_pars_vertex:u3,uv2_vertex:c3,worldpos_vertex:h3,background_vert:f3,background_frag:d3,backgroundCube_vert:p3,backgroundCube_frag:m3,cube_vert:g3,cube_frag:_3,depth_vert:v3,depth_frag:y3,distanceRGBA_vert:x3,distanceRGBA_frag:w3,equirect_vert:S3,equirect_frag:b3,linedashed_vert:T3,linedashed_frag:E3,meshbasic_vert:M3,meshbasic_frag:C3,meshlambert_vert:R3,meshlambert_frag:A3,meshmatcap_vert:D3,meshmatcap_frag:P3,meshnormal_vert:L3,meshnormal_frag:O3,meshphong_vert:z3,meshphong_frag:N3,meshphysical_vert:B3,meshphysical_frag:F3,meshtoon_vert:I3,meshtoon_frag:U3,points_vert:H3,points_frag:k3,shadow_vert:G3,shadow_frag:V3,sprite_vert:W3,sprite_frag:j3},Ye={common:{diffuse:{value:new hi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ir},uv2Transform:{value:new ir},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new $t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new hi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ir}},sprite:{diffuse:{value:new hi(16777215)},opacity:{value:1},center:{value:new $t(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ir}}},Xr={basic:{uniforms:dn([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:dn([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new hi(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:dn([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,Ye.lights,{emissive:{value:new hi(0)},specular:{value:new hi(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:dn([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new hi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:dn([Ye.common,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new hi(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:dn([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:dn([Ye.points,Ye.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:dn([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:dn([Ye.common,Ye.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:dn([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:dn([Ye.sprite,Ye.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Tt.backgroundCube_vert,fragmentShader:Tt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:dn([Ye.common,Ye.displacementmap,{referencePosition:{value:new Me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:dn([Ye.lights,Ye.fog,{color:{value:new hi(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};Xr.physical={uniforms:dn([Xr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new $t(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new hi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new $t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new hi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new hi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};const qf={r:0,b:0,g:0};function q3(l,e,t,i,n,o,s){const c=new hi(0);let u=o===!0?0:1,h,d,m=null,g=0,_=null;function w(x,b){let E=!1,M=b.isScene===!0?b.background:null;M&&M.isTexture&&(M=(b.backgroundBlurriness>0?t:e).get(M));const D=l.xr,P=D.getSession&&D.getSession();P&&P.environmentBlendMode==="additive"&&(M=null),M===null?v(c,u):M&&M.isColor&&(v(M,1),E=!0),(l.autoClear||E)&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),M&&(M.isCubeTexture||M.mapping===Wd)?(d===void 0&&(d=new Ds(new ih(1,1,1),new Ra({name:"BackgroundCubeMaterial",uniforms:iu(Xr.backgroundCube.uniforms),vertexShader:Xr.backgroundCube.vertexShader,fragmentShader:Xr.backgroundCube.fragmentShader,side:rr,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(z,O,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(d)),d.material.uniforms.envMap.value=M,d.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,d.material.toneMapped=M.encoding!==ni,(m!==M||g!==M.version||_!==l.toneMapping)&&(d.material.needsUpdate=!0,m=M,g=M.version,_=l.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):M&&M.isTexture&&(h===void 0&&(h=new Ds(new Xd(2,2),new Ra({name:"BackgroundMaterial",uniforms:iu(Xr.background.uniforms),vertexShader:Xr.background.vertexShader,fragmentShader:Xr.background.fragmentShader,side:Ca,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(h)),h.material.uniforms.t2D.value=M,h.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,h.material.toneMapped=M.encoding!==ni,M.matrixAutoUpdate===!0&&M.updateMatrix(),h.material.uniforms.uvTransform.value.copy(M.matrix),(m!==M||g!==M.version||_!==l.toneMapping)&&(h.material.needsUpdate=!0,m=M,g=M.version,_=l.toneMapping),h.layers.enableAll(),x.unshift(h,h.geometry,h.material,0,0,null))}function v(x,b){x.getRGB(qf,V1(l)),i.buffers.color.setClear(qf.r,qf.g,qf.b,b,s)}return{getClearColor:function(){return c},setClearColor:function(x,b=1){c.set(x),u=b,v(c,u)},getClearAlpha:function(){return u},setClearAlpha:function(x){u=x,v(c,u)},render:w}}function X3(l,e,t,i){const n=l.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||o!==null,c={},u=x(null);let h=u,d=!1;function m(Z,he,Y,Q,ee){let _e=!1;if(s){const G=v(Q,Y,he);h!==G&&(h=G,_(h.object)),_e=b(Z,Q,Y,ee),_e&&E(Z,Q,Y,ee)}else{const G=he.wireframe===!0;(h.geometry!==Q.id||h.program!==Y.id||h.wireframe!==G)&&(h.geometry=Q.id,h.program=Y.id,h.wireframe=G,_e=!0)}ee!==null&&t.update(ee,34963),(_e||d)&&(d=!1,L(Z,he,Y,Q),ee!==null&&l.bindBuffer(34963,t.get(ee).buffer))}function g(){return i.isWebGL2?l.createVertexArray():o.createVertexArrayOES()}function _(Z){return i.isWebGL2?l.bindVertexArray(Z):o.bindVertexArrayOES(Z)}function w(Z){return i.isWebGL2?l.deleteVertexArray(Z):o.deleteVertexArrayOES(Z)}function v(Z,he,Y){const Q=Y.wireframe===!0;let ee=c[Z.id];ee===void 0&&(ee={},c[Z.id]=ee);let _e=ee[he.id];_e===void 0&&(_e={},ee[he.id]=_e);let G=_e[Q];return G===void 0&&(G=x(g()),_e[Q]=G),G}function x(Z){const he=[],Y=[],Q=[];for(let ee=0;ee<n;ee++)he[ee]=0,Y[ee]=0,Q[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:he,enabledAttributes:Y,attributeDivisors:Q,object:Z,attributes:{},index:null}}function b(Z,he,Y,Q){const ee=h.attributes,_e=he.attributes;let G=0;const V=Y.getAttributes();for(const q in V)if(V[q].location>=0){const me=ee[q];let ue=_e[q];if(ue===void 0&&(q==="instanceMatrix"&&Z.instanceMatrix&&(ue=Z.instanceMatrix),q==="instanceColor"&&Z.instanceColor&&(ue=Z.instanceColor)),me===void 0||me.attribute!==ue||ue&&me.data!==ue.data)return!0;G++}return h.attributesNum!==G||h.index!==Q}function E(Z,he,Y,Q){const ee={},_e=he.attributes;let G=0;const V=Y.getAttributes();for(const q in V)if(V[q].location>=0){let me=_e[q];me===void 0&&(q==="instanceMatrix"&&Z.instanceMatrix&&(me=Z.instanceMatrix),q==="instanceColor"&&Z.instanceColor&&(me=Z.instanceColor));const ue={};ue.attribute=me,me&&me.data&&(ue.data=me.data),ee[q]=ue,G++}h.attributes=ee,h.attributesNum=G,h.index=Q}function M(){const Z=h.newAttributes;for(let he=0,Y=Z.length;he<Y;he++)Z[he]=0}function D(Z){P(Z,0)}function P(Z,he){const Y=h.newAttributes,Q=h.enabledAttributes,ee=h.attributeDivisors;Y[Z]=1,Q[Z]===0&&(l.enableVertexAttribArray(Z),Q[Z]=1),ee[Z]!==he&&((i.isWebGL2?l:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Z,he),ee[Z]=he)}function z(){const Z=h.newAttributes,he=h.enabledAttributes;for(let Y=0,Q=he.length;Y<Q;Y++)he[Y]!==Z[Y]&&(l.disableVertexAttribArray(Y),he[Y]=0)}function O(Z,he,Y,Q,ee,_e){i.isWebGL2===!0&&(Y===5124||Y===5125)?l.vertexAttribIPointer(Z,he,Y,ee,_e):l.vertexAttribPointer(Z,he,Y,Q,ee,_e)}function L(Z,he,Y,Q){if(i.isWebGL2===!1&&(Z.isInstancedMesh||Q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;M();const ee=Q.attributes,_e=Y.getAttributes(),G=he.defaultAttributeValues;for(const V in _e){const q=_e[V];if(q.location>=0){let ie=ee[V];if(ie===void 0&&(V==="instanceMatrix"&&Z.instanceMatrix&&(ie=Z.instanceMatrix),V==="instanceColor"&&Z.instanceColor&&(ie=Z.instanceColor)),ie!==void 0){const me=ie.normalized,ue=ie.itemSize,ae=t.get(ie);if(ae===void 0)continue;const Be=ae.buffer,He=ae.type,Fe=ae.bytesPerElement;if(ie.isInterleavedBufferAttribute){const Ve=ie.data,at=Ve.stride,et=ie.offset;if(Ve.isInstancedInterleavedBuffer){for(let Ge=0;Ge<q.locationSize;Ge++)P(q.location+Ge,Ve.meshPerAttribute);Z.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let Ge=0;Ge<q.locationSize;Ge++)D(q.location+Ge);l.bindBuffer(34962,Be);for(let Ge=0;Ge<q.locationSize;Ge++)O(q.location+Ge,ue/q.locationSize,He,me,at*Fe,(et+ue/q.locationSize*Ge)*Fe)}else{if(ie.isInstancedBufferAttribute){for(let Ve=0;Ve<q.locationSize;Ve++)P(q.location+Ve,ie.meshPerAttribute);Z.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let Ve=0;Ve<q.locationSize;Ve++)D(q.location+Ve);l.bindBuffer(34962,Be);for(let Ve=0;Ve<q.locationSize;Ve++)O(q.location+Ve,ue/q.locationSize,He,me,ue*Fe,ue/q.locationSize*Ve*Fe)}}else if(G!==void 0){const me=G[V];if(me!==void 0)switch(me.length){case 2:l.vertexAttrib2fv(q.location,me);break;case 3:l.vertexAttrib3fv(q.location,me);break;case 4:l.vertexAttrib4fv(q.location,me);break;default:l.vertexAttrib1fv(q.location,me)}}}}z()}function N(){K();for(const Z in c){const he=c[Z];for(const Y in he){const Q=he[Y];for(const ee in Q)w(Q[ee].object),delete Q[ee];delete he[Y]}delete c[Z]}}function j(Z){if(c[Z.id]===void 0)return;const he=c[Z.id];for(const Y in he){const Q=he[Y];for(const ee in Q)w(Q[ee].object),delete Q[ee];delete he[Y]}delete c[Z.id]}function se(Z){for(const he in c){const Y=c[he];if(Y[Z.id]===void 0)continue;const Q=Y[Z.id];for(const ee in Q)w(Q[ee].object),delete Q[ee];delete Y[Z.id]}}function K(){X(),d=!0,h!==u&&(h=u,_(h.object))}function X(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:m,reset:K,resetDefaultState:X,dispose:N,releaseStatesOfGeometry:j,releaseStatesOfProgram:se,initAttributes:M,enableAttribute:D,disableUnusedAttributes:z}}function Y3(l,e,t,i){const n=i.isWebGL2;let o;function s(h){o=h}function c(h,d){l.drawArrays(o,h,d),t.update(d,o,1)}function u(h,d,m){if(m===0)return;let g,_;if(n)g=l,_="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[_](o,h,d,m),t.update(d,o,m)}this.setMode=s,this.render=c,this.renderInstances=u}function Z3(l,e,t){let i;function n(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");i=l.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(O){if(O==="highp"){if(l.getShaderPrecisionFormat(35633,36338).precision>0&&l.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";O="mediump"}return O==="mediump"&&l.getShaderPrecisionFormat(35633,36337).precision>0&&l.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&l instanceof WebGL2RenderingContext;let c=t.precision!==void 0?t.precision:"highp";const u=o(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=s||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,m=l.getParameter(34930),g=l.getParameter(35660),_=l.getParameter(3379),w=l.getParameter(34076),v=l.getParameter(34921),x=l.getParameter(36347),b=l.getParameter(36348),E=l.getParameter(36349),M=g>0,D=s||e.has("OES_texture_float"),P=M&&D,z=s?l.getParameter(36183):0;return{isWebGL2:s,drawBuffers:h,getMaxAnisotropy:n,getMaxPrecision:o,precision:c,logarithmicDepthBuffer:d,maxTextures:m,maxVertexTextures:g,maxTextureSize:_,maxCubemapSize:w,maxAttributes:v,maxVertexUniforms:x,maxVaryings:b,maxFragmentUniforms:E,vertexTextures:M,floatFragmentTextures:D,floatVertexTextures:P,maxSamples:z}}function K3(l){const e=this;let t=null,i=0,n=!1,o=!1;const s=new to,c=new ir,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g){const _=m.length!==0||g||i!==0||n;return n=g,i=m.length,_},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(m,g){t=d(m,g,0)},this.setState=function(m,g,_){const w=m.clippingPlanes,v=m.clipIntersection,x=m.clipShadows,b=l.get(m);if(!n||w===null||w.length===0||o&&!x)o?d(null):h();else{const E=o?0:i,M=E*4;let D=b.clippingState||null;u.value=D,D=d(w,g,M,_);for(let P=0;P!==M;++P)D[P]=t[P];b.clippingState=D,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=E}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(m,g,_,w){const v=m!==null?m.length:0;let x=null;if(v!==0){if(x=u.value,w!==!0||x===null){const b=_+v*4,E=g.matrixWorldInverse;c.getNormalMatrix(E),(x===null||x.length<b)&&(x=new Float32Array(b));for(let M=0,D=_;M!==v;++M,D+=4)s.copy(m[M]).applyMatrix4(E,c),s.normal.toArray(x,D),x[D+3]=s.constant}u.value=x,u.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,x}}function Q3(l){let e=new WeakMap;function t(s,c){return c===O_?s.mapping=$l:c===z_&&(s.mapping=eu),s}function i(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const c=s.mapping;if(c===O_||c===z_)if(e.has(s)){const u=e.get(s).texture;return t(u,s.mapping)}else{const u=s.image;if(u&&u.height>0){const h=new cD(u.height/2);return h.fromEquirectangularTexture(l,s),e.set(s,h),s.addEventListener("dispose",n),t(h.texture,s.mapping)}else return null}}return s}function n(s){const c=s.target;c.removeEventListener("dispose",n);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class Y1 extends W1{constructor(e=-1,t=1,i=1,n=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let o=i-e,s=i+e,c=n+t,u=n-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=h*this.view.offsetX,s=o+h*this.view.width,c-=d*this.view.offsetY,u=c-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,c,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const zl=4,ab=[.125,.215,.35,.446,.526,.582],ro=20,t_=new Y1,ob=new hi;let i_=null;const io=(1+Math.sqrt(5))/2,Cl=1/io,lb=[new Me(1,1,1),new Me(-1,1,1),new Me(1,1,-1),new Me(-1,1,-1),new Me(0,io,Cl),new Me(0,io,-Cl),new Me(Cl,0,io),new Me(-Cl,0,io),new Me(io,Cl,0),new Me(-io,Cl,0)];class ub{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){i_=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,n,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=fb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(i_),e.scissorTest=!1,Xf(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$l||e.mapping===eu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),i_=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ui,minFilter:ui,generateMipmaps:!1,type:jc,format:Br,encoding:Mo,depthBuffer:!1},n=cb(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=cb(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=J3(o)),this._blurMaterial=$3(o,e,t)}return n}_compileMaterial(e){const t=new Ds(this._lodPlanes[0],e);this._renderer.compile(t,t_)}_sceneToCubeUV(e,t,i,n){const c=new Or(90,1,t,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],d=this._renderer,m=d.autoClear,g=d.toneMapping;d.getClearColor(ob),d.toneMapping=Ls,d.autoClear=!1;const _=new H1({name:"PMREM.Background",side:rr,depthWrite:!1,depthTest:!1}),w=new Ds(new ih,_);let v=!1;const x=e.background;x?x.isColor&&(_.color.copy(x),e.background=null,v=!0):(_.color.copy(ob),v=!0);for(let b=0;b<6;b++){const E=b%3;E===0?(c.up.set(0,u[b],0),c.lookAt(h[b],0,0)):E===1?(c.up.set(0,0,u[b]),c.lookAt(0,h[b],0)):(c.up.set(0,u[b],0),c.lookAt(0,0,h[b]));const M=this._cubeSize;Xf(n,E*M,b>2?M:0,M,M),d.setRenderTarget(n),v&&d.render(w,c),d.render(e,c)}w.geometry.dispose(),w.material.dispose(),d.toneMapping=g,d.autoClear=m,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===$l||e.mapping===eu;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=fb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hb());const o=n?this._cubemapMaterial:this._equirectMaterial,s=new Ds(this._lodPlanes[0],o),c=o.uniforms;c.envMap.value=e;const u=this._cubeSize;Xf(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(s,t_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const o=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),s=lb[(n-1)%lb.length];this._blur(e,n-1,n,o,s)}t.autoClear=i}_blur(e,t,i,n,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,n,"latitudinal",o),this._halfBlur(s,e,i,i,n,"longitudinal",o)}_halfBlur(e,t,i,n,o,s,c){const u=this._renderer,h=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,m=new Ds(this._lodPlanes[n],h),g=h.uniforms,_=this._sizeLods[i]-1,w=isFinite(o)?Math.PI/(2*_):2*Math.PI/(2*ro-1),v=o/w,x=isFinite(o)?1+Math.floor(d*v):ro;x>ro&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${ro}`);const b=[];let E=0;for(let O=0;O<ro;++O){const L=O/v,N=Math.exp(-L*L/2);b.push(N),O===0?E+=N:O<x&&(E+=2*N)}for(let O=0;O<b.length;O++)b[O]=b[O]/E;g.envMap.value=e.texture,g.samples.value=x,g.weights.value=b,g.latitudinal.value=s==="latitudinal",c&&(g.poleAxis.value=c);const{_lodMax:M}=this;g.dTheta.value=w,g.mipInt.value=M-i;const D=this._sizeLods[n],P=3*D*(n>M-zl?n-M+zl:0),z=4*(this._cubeSize-D);Xf(t,P,z,3*D,2*D),u.setRenderTarget(t),u.render(m,t_)}}function J3(l){const e=[],t=[],i=[];let n=l;const o=l-zl+1+ab.length;for(let s=0;s<o;s++){const c=Math.pow(2,n);t.push(c);let u=1/c;s>l-zl?u=ab[s-l+zl-1]:s===0&&(u=0),i.push(u);const h=1/(c-2),d=-h,m=1+h,g=[d,d,m,d,m,m,d,d,m,m,d,m],_=6,w=6,v=3,x=2,b=1,E=new Float32Array(v*w*_),M=new Float32Array(x*w*_),D=new Float32Array(b*w*_);for(let z=0;z<_;z++){const O=z%3*2/3-1,L=z>2?0:-1,N=[O,L,0,O+2/3,L,0,O+2/3,L+1,0,O,L,0,O+2/3,L+1,0,O,L+1,0];E.set(N,v*w*z),M.set(g,x*w*z);const j=[z,z,z,z,z,z];D.set(j,b*w*z)}const P=new Po;P.setAttribute("position",new Jr(E,v)),P.setAttribute("uv",new Jr(M,x)),P.setAttribute("faceIndex",new Jr(D,b)),e.push(P),n>zl&&n--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function cb(l,e,t){const i=new Co(l,e,t);return i.texture.mapping=Wd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Xf(l,e,t,i,n){l.viewport.set(e,t,i,n),l.scissor.set(e,t,i,n)}function $3(l,e,t){const i=new Float32Array(ro),n=new Me(0,1,0);return new Ra({name:"SphericalGaussianBlur",defines:{n:ro,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${l}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:C0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Sa,depthTest:!1,depthWrite:!1})}function hb(){return new Ra({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:C0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Sa,depthTest:!1,depthWrite:!1})}function fb(){return new Ra({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:C0(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Sa,depthTest:!1,depthWrite:!1})}function C0(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function eL(l){let e=new WeakMap,t=null;function i(c){if(c&&c.isTexture){const u=c.mapping,h=u===O_||u===z_,d=u===$l||u===eu;if(h||d)if(c.isRenderTargetTexture&&c.needsPMREMUpdate===!0){c.needsPMREMUpdate=!1;let m=e.get(c);return t===null&&(t=new ub(l)),m=h?t.fromEquirectangular(c,m):t.fromCubemap(c,m),e.set(c,m),m.texture}else{if(e.has(c))return e.get(c).texture;{const m=c.image;if(h&&m&&m.height>0||d&&m&&n(m)){t===null&&(t=new ub(l));const g=h?t.fromEquirectangular(c):t.fromCubemap(c);return e.set(c,g),c.addEventListener("dispose",o),g.texture}else return null}}}return c}function n(c){let u=0;const h=6;for(let d=0;d<h;d++)c[d]!==void 0&&u++;return u===h}function o(c){const u=c.target;u.removeEventListener("dispose",o);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function tL(l){const e={};function t(i){if(e[i]!==void 0)return e[i];let n;switch(i){case"WEBGL_depth_texture":n=l.getExtension("WEBGL_depth_texture")||l.getExtension("MOZ_WEBGL_depth_texture")||l.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=l.getExtension(i)}return e[i]=n,n}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const n=t(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function iL(l,e,t,i){const n={},o=new WeakMap;function s(m){const g=m.target;g.index!==null&&e.remove(g.index);for(const w in g.attributes)e.remove(g.attributes[w]);g.removeEventListener("dispose",s),delete n[g.id];const _=o.get(g);_&&(e.remove(_),o.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function c(m,g){return n[g.id]===!0||(g.addEventListener("dispose",s),n[g.id]=!0,t.memory.geometries++),g}function u(m){const g=m.attributes;for(const w in g)e.update(g[w],34962);const _=m.morphAttributes;for(const w in _){const v=_[w];for(let x=0,b=v.length;x<b;x++)e.update(v[x],34962)}}function h(m){const g=[],_=m.index,w=m.attributes.position;let v=0;if(_!==null){const E=_.array;v=_.version;for(let M=0,D=E.length;M<D;M+=3){const P=E[M+0],z=E[M+1],O=E[M+2];g.push(P,z,z,O,O,P)}}else{const E=w.array;v=w.version;for(let M=0,D=E.length/3-1;M<D;M+=3){const P=M+0,z=M+1,O=M+2;g.push(P,z,z,O,O,P)}}const x=new(z1(g)?G1:k1)(g,1);x.version=v;const b=o.get(m);b&&e.remove(b),o.set(m,x)}function d(m){const g=o.get(m);if(g){const _=m.index;_!==null&&g.version<_.version&&h(m)}else h(m);return o.get(m)}return{get:c,update:u,getWireframeAttribute:d}}function nL(l,e,t,i){const n=i.isWebGL2;let o;function s(g){o=g}let c,u;function h(g){c=g.type,u=g.bytesPerElement}function d(g,_){l.drawElements(o,_,c,g*u),t.update(_,o,1)}function m(g,_,w){if(w===0)return;let v,x;if(n)v=l,x="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](o,_,c,g*u,w),t.update(_,o,w)}this.setMode=s,this.setIndex=h,this.render=d,this.renderInstances=m}function rL(l){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,c){switch(t.calls++,s){case 4:t.triangles+=c*(o/3);break;case 1:t.lines+=c*(o/2);break;case 3:t.lines+=c*(o-1);break;case 2:t.lines+=c*o;break;case 0:t.points+=c*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function n(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:n,update:i}}function sL(l,e){return l[0]-e[0]}function aL(l,e){return Math.abs(e[1])-Math.abs(l[1])}function oL(l,e,t){const i={},n=new Float32Array(8),o=new WeakMap,s=new Pi,c=[];for(let h=0;h<8;h++)c[h]=[h,0];function u(h,d,m,g){const _=h.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,x=v!==void 0?v.length:0;let b=o.get(d);if(b===void 0||b.count!==x){let Y=function(){Z.dispose(),o.delete(d),d.removeEventListener("dispose",Y)};var w=Y;b!==void 0&&b.texture.dispose();const D=d.morphAttributes.position!==void 0,P=d.morphAttributes.normal!==void 0,z=d.morphAttributes.color!==void 0,O=d.morphAttributes.position||[],L=d.morphAttributes.normal||[],N=d.morphAttributes.color||[];let j=0;D===!0&&(j=1),P===!0&&(j=2),z===!0&&(j=3);let se=d.attributes.position.count*j,K=1;se>e.maxTextureSize&&(K=Math.ceil(se/e.maxTextureSize),se=e.maxTextureSize);const X=new Float32Array(se*K*4*x),Z=new I1(X,se,K,x);Z.type=lo,Z.needsUpdate=!0;const he=j*4;for(let Q=0;Q<x;Q++){const ee=O[Q],_e=L[Q],G=N[Q],V=se*K*4*Q;for(let q=0;q<ee.count;q++){const ie=q*he;D===!0&&(s.fromBufferAttribute(ee,q),X[V+ie+0]=s.x,X[V+ie+1]=s.y,X[V+ie+2]=s.z,X[V+ie+3]=0),P===!0&&(s.fromBufferAttribute(_e,q),X[V+ie+4]=s.x,X[V+ie+5]=s.y,X[V+ie+6]=s.z,X[V+ie+7]=0),z===!0&&(s.fromBufferAttribute(G,q),X[V+ie+8]=s.x,X[V+ie+9]=s.y,X[V+ie+10]=s.z,X[V+ie+11]=G.itemSize===4?s.w:1)}}b={count:x,texture:Z,size:new $t(se,K)},o.set(d,b),d.addEventListener("dispose",Y)}let E=0;for(let D=0;D<_.length;D++)E+=_[D];const M=d.morphTargetsRelative?1:1-E;g.getUniforms().setValue(l,"morphTargetBaseInfluence",M),g.getUniforms().setValue(l,"morphTargetInfluences",_),g.getUniforms().setValue(l,"morphTargetsTexture",b.texture,t),g.getUniforms().setValue(l,"morphTargetsTextureSize",b.size)}else{const v=_===void 0?0:_.length;let x=i[d.id];if(x===void 0||x.length!==v){x=[];for(let P=0;P<v;P++)x[P]=[P,0];i[d.id]=x}for(let P=0;P<v;P++){const z=x[P];z[0]=P,z[1]=_[P]}x.sort(aL);for(let P=0;P<8;P++)P<v&&x[P][1]?(c[P][0]=x[P][0],c[P][1]=x[P][1]):(c[P][0]=Number.MAX_SAFE_INTEGER,c[P][1]=0);c.sort(sL);const b=d.morphAttributes.position,E=d.morphAttributes.normal;let M=0;for(let P=0;P<8;P++){const z=c[P],O=z[0],L=z[1];O!==Number.MAX_SAFE_INTEGER&&L?(b&&d.getAttribute("morphTarget"+P)!==b[O]&&d.setAttribute("morphTarget"+P,b[O]),E&&d.getAttribute("morphNormal"+P)!==E[O]&&d.setAttribute("morphNormal"+P,E[O]),n[P]=L,M+=L):(b&&d.hasAttribute("morphTarget"+P)===!0&&d.deleteAttribute("morphTarget"+P),E&&d.hasAttribute("morphNormal"+P)===!0&&d.deleteAttribute("morphNormal"+P),n[P]=0)}const D=d.morphTargetsRelative?1:1-M;g.getUniforms().setValue(l,"morphTargetBaseInfluence",D),g.getUniforms().setValue(l,"morphTargetInfluences",n)}}return{update:u}}function lL(l,e,t,i){let n=new WeakMap;function o(u){const h=i.render.frame,d=u.geometry,m=e.get(u,d);return n.get(m)!==h&&(e.update(m),n.set(m,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",c)===!1&&u.addEventListener("dispose",c),t.update(u.instanceMatrix,34962),u.instanceColor!==null&&t.update(u.instanceColor,34962)),m}function s(){n=new WeakMap}function c(u){const h=u.target;h.removeEventListener("dispose",c),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:o,dispose:s}}const Z1=new xn,K1=new I1,Q1=new XA,J1=new j1,db=[],pb=[],mb=new Float32Array(16),gb=new Float32Array(9),_b=new Float32Array(4);function ou(l,e,t){const i=l[0];if(i<=0||i>0)return l;const n=e*t;let o=db[n];if(o===void 0&&(o=new Float32Array(n),db[n]=o),e!==0){i.toArray(o,0);for(let s=1,c=0;s!==e;++s)c+=t,l[s].toArray(o,c)}return o}function Li(l,e){if(l.length!==e.length)return!1;for(let t=0,i=l.length;t<i;t++)if(l[t]!==e[t])return!1;return!0}function Oi(l,e){for(let t=0,i=e.length;t<i;t++)l[t]=e[t]}function Yd(l,e){let t=pb[e];t===void 0&&(t=new Int32Array(e),pb[e]=t);for(let i=0;i!==e;++i)t[i]=l.allocateTextureUnit();return t}function uL(l,e){const t=this.cache;t[0]!==e&&(l.uniform1f(this.addr,e),t[0]=e)}function cL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(l.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Li(t,e))return;l.uniform2fv(this.addr,e),Oi(t,e)}}function hL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(l.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(l.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Li(t,e))return;l.uniform3fv(this.addr,e),Oi(t,e)}}function fL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(l.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Li(t,e))return;l.uniform4fv(this.addr,e),Oi(t,e)}}function dL(l,e){const t=this.cache,i=e.elements;if(i===void 0){if(Li(t,e))return;l.uniformMatrix2fv(this.addr,!1,e),Oi(t,e)}else{if(Li(t,i))return;_b.set(i),l.uniformMatrix2fv(this.addr,!1,_b),Oi(t,i)}}function pL(l,e){const t=this.cache,i=e.elements;if(i===void 0){if(Li(t,e))return;l.uniformMatrix3fv(this.addr,!1,e),Oi(t,e)}else{if(Li(t,i))return;gb.set(i),l.uniformMatrix3fv(this.addr,!1,gb),Oi(t,i)}}function mL(l,e){const t=this.cache,i=e.elements;if(i===void 0){if(Li(t,e))return;l.uniformMatrix4fv(this.addr,!1,e),Oi(t,e)}else{if(Li(t,i))return;mb.set(i),l.uniformMatrix4fv(this.addr,!1,mb),Oi(t,i)}}function gL(l,e){const t=this.cache;t[0]!==e&&(l.uniform1i(this.addr,e),t[0]=e)}function _L(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(l.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Li(t,e))return;l.uniform2iv(this.addr,e),Oi(t,e)}}function vL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(l.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Li(t,e))return;l.uniform3iv(this.addr,e),Oi(t,e)}}function yL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(l.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Li(t,e))return;l.uniform4iv(this.addr,e),Oi(t,e)}}function xL(l,e){const t=this.cache;t[0]!==e&&(l.uniform1ui(this.addr,e),t[0]=e)}function wL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(l.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Li(t,e))return;l.uniform2uiv(this.addr,e),Oi(t,e)}}function SL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(l.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Li(t,e))return;l.uniform3uiv(this.addr,e),Oi(t,e)}}function bL(l,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(l.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Li(t,e))return;l.uniform4uiv(this.addr,e),Oi(t,e)}}function TL(l,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(l.uniform1i(this.addr,n),i[0]=n),t.setTexture2D(e||Z1,n)}function EL(l,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(l.uniform1i(this.addr,n),i[0]=n),t.setTexture3D(e||Q1,n)}function ML(l,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(l.uniform1i(this.addr,n),i[0]=n),t.setTextureCube(e||J1,n)}function CL(l,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(l.uniform1i(this.addr,n),i[0]=n),t.setTexture2DArray(e||K1,n)}function RL(l){switch(l){case 5126:return uL;case 35664:return cL;case 35665:return hL;case 35666:return fL;case 35674:return dL;case 35675:return pL;case 35676:return mL;case 5124:case 35670:return gL;case 35667:case 35671:return _L;case 35668:case 35672:return vL;case 35669:case 35673:return yL;case 5125:return xL;case 36294:return wL;case 36295:return SL;case 36296:return bL;case 35678:case 36198:case 36298:case 36306:case 35682:return TL;case 35679:case 36299:case 36307:return EL;case 35680:case 36300:case 36308:case 36293:return ML;case 36289:case 36303:case 36311:case 36292:return CL}}function AL(l,e){l.uniform1fv(this.addr,e)}function DL(l,e){const t=ou(e,this.size,2);l.uniform2fv(this.addr,t)}function PL(l,e){const t=ou(e,this.size,3);l.uniform3fv(this.addr,t)}function LL(l,e){const t=ou(e,this.size,4);l.uniform4fv(this.addr,t)}function OL(l,e){const t=ou(e,this.size,4);l.uniformMatrix2fv(this.addr,!1,t)}function zL(l,e){const t=ou(e,this.size,9);l.uniformMatrix3fv(this.addr,!1,t)}function NL(l,e){const t=ou(e,this.size,16);l.uniformMatrix4fv(this.addr,!1,t)}function BL(l,e){l.uniform1iv(this.addr,e)}function FL(l,e){l.uniform2iv(this.addr,e)}function IL(l,e){l.uniform3iv(this.addr,e)}function UL(l,e){l.uniform4iv(this.addr,e)}function HL(l,e){l.uniform1uiv(this.addr,e)}function kL(l,e){l.uniform2uiv(this.addr,e)}function GL(l,e){l.uniform3uiv(this.addr,e)}function VL(l,e){l.uniform4uiv(this.addr,e)}function WL(l,e,t){const i=this.cache,n=e.length,o=Yd(t,n);Li(i,o)||(l.uniform1iv(this.addr,o),Oi(i,o));for(let s=0;s!==n;++s)t.setTexture2D(e[s]||Z1,o[s])}function jL(l,e,t){const i=this.cache,n=e.length,o=Yd(t,n);Li(i,o)||(l.uniform1iv(this.addr,o),Oi(i,o));for(let s=0;s!==n;++s)t.setTexture3D(e[s]||Q1,o[s])}function qL(l,e,t){const i=this.cache,n=e.length,o=Yd(t,n);Li(i,o)||(l.uniform1iv(this.addr,o),Oi(i,o));for(let s=0;s!==n;++s)t.setTextureCube(e[s]||J1,o[s])}function XL(l,e,t){const i=this.cache,n=e.length,o=Yd(t,n);Li(i,o)||(l.uniform1iv(this.addr,o),Oi(i,o));for(let s=0;s!==n;++s)t.setTexture2DArray(e[s]||K1,o[s])}function YL(l){switch(l){case 5126:return AL;case 35664:return DL;case 35665:return PL;case 35666:return LL;case 35674:return OL;case 35675:return zL;case 35676:return NL;case 5124:case 35670:return BL;case 35667:case 35671:return FL;case 35668:case 35672:return IL;case 35669:case 35673:return UL;case 5125:return HL;case 36294:return kL;case 36295:return GL;case 36296:return VL;case 35678:case 36198:case 36298:case 36306:case 35682:return WL;case 35679:case 36299:case 36307:return jL;case 35680:case 36300:case 36308:case 36293:return qL;case 36289:case 36303:case 36311:case 36292:return XL}}class ZL{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=RL(t.type)}}class KL{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=YL(t.type)}}class QL{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let o=0,s=n.length;o!==s;++o){const c=n[o];c.setValue(e,t[c.id],i)}}}const n_=/(\w+)(\])?(\[|\.)?/g;function vb(l,e){l.seq.push(e),l.map[e.id]=e}function JL(l,e,t){const i=l.name,n=i.length;for(n_.lastIndex=0;;){const o=n_.exec(i),s=n_.lastIndex;let c=o[1];const u=o[2]==="]",h=o[3];if(u&&(c=c|0),h===void 0||h==="["&&s+2===n){vb(t,h===void 0?new ZL(c,l,e):new KL(c,l,e));break}else{let m=t.map[c];m===void 0&&(m=new QL(c),vb(t,m)),t=m}}}class hd{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let n=0;n<i;++n){const o=e.getActiveUniform(t,n),s=e.getUniformLocation(t,o.name);JL(o,s,this)}}setValue(e,t,i,n){const o=this.map[t];o!==void 0&&o.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];n!==void 0&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let o=0,s=t.length;o!==s;++o){const c=t[o],u=i[c.id];u.needsUpdate!==!1&&c.setValue(e,u.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,o=e.length;n!==o;++n){const s=e[n];s.id in t&&i.push(s)}return i}}function yb(l,e,t){const i=l.createShader(e);return l.shaderSource(i,t),l.compileShader(i),i}let $L=0;function eO(l,e){const t=l.split(`
`),i=[],n=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=n;s<o;s++){const c=s+1;i.push(`${c===e?">":" "} ${c}: ${t[s]}`)}return i.join(`
`)}function tO(l){switch(l){case Mo:return["Linear","( value )"];case ni:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",l),["Linear","( value )"]}}function xb(l,e,t){const i=l.getShaderParameter(e,35713),n=l.getShaderInfoLog(e).trim();if(i&&n==="")return"";const o=/ERROR: 0:(\d+)/.exec(n);if(o){const s=parseInt(o[1]);return t.toUpperCase()+`

`+n+`

`+eO(l.getShaderSource(e),s)}else return n}function iO(l,e){const t=tO(e);return"vec4 "+l+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function nO(l,e){let t;switch(e){case yA:t="Linear";break;case xA:t="Reinhard";break;case wA:t="OptimizedCineon";break;case SA:t="ACESFilmic";break;case bA:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+l+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function rO(l){return[l.extensionDerivatives||l.envMapCubeUVHeight||l.bumpMap||l.tangentSpaceNormalMap||l.clearcoatNormalMap||l.flatShading||l.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(l.extensionFragDepth||l.logarithmicDepthBuffer)&&l.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",l.extensionDrawBuffers&&l.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(l.extensionShaderTextureLOD||l.envMap||l.transmission)&&l.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(vc).join(`
`)}function sO(l){const e=[];for(const t in l){const i=l[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function aO(l,e){const t={},i=l.getProgramParameter(e,35721);for(let n=0;n<i;n++){const o=l.getActiveAttrib(e,n),s=o.name;let c=1;o.type===35674&&(c=2),o.type===35675&&(c=3),o.type===35676&&(c=4),t[s]={type:o.type,location:l.getAttribLocation(e,s),locationSize:c}}return t}function vc(l){return l!==""}function wb(l,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return l.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Sb(l,e){return l.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oO=/^[ \t]*#include +<([\w\d./]+)>/gm;function U_(l){return l.replace(oO,lO)}function lO(l,e){const t=Tt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return U_(t)}const uO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bb(l){return l.replace(uO,cO)}function cO(l,e,t,i){let n="";for(let o=parseInt(e);o<parseInt(t);o++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return n}function Tb(l){let e="precision "+l.precision+` float;
precision `+l.precision+" int;";return l.precision==="highp"?e+=`
#define HIGH_PRECISION`:l.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:l.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function hO(l){let e="SHADOWMAP_TYPE_BASIC";return l.shadowMapType===R1?e="SHADOWMAP_TYPE_PCF":l.shadowMapType===QR?e="SHADOWMAP_TYPE_PCF_SOFT":l.shadowMapType===_c&&(e="SHADOWMAP_TYPE_VSM"),e}function fO(l){let e="ENVMAP_TYPE_CUBE";if(l.envMap)switch(l.envMapMode){case $l:case eu:e="ENVMAP_TYPE_CUBE";break;case Wd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dO(l){let e="ENVMAP_MODE_REFLECTION";return l.envMap&&l.envMapMode===eu&&(e="ENVMAP_MODE_REFRACTION"),e}function pO(l){let e="ENVMAP_BLENDING_NONE";if(l.envMap)switch(l.combine){case P1:e="ENVMAP_BLENDING_MULTIPLY";break;case _A:e="ENVMAP_BLENDING_MIX";break;case vA:e="ENVMAP_BLENDING_ADD";break}return e}function mO(l){const e=l.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function gO(l,e,t,i){const n=l.getContext(),o=t.defines;let s=t.vertexShader,c=t.fragmentShader;const u=hO(t),h=fO(t),d=dO(t),m=pO(t),g=mO(t),_=t.isWebGL2?"":rO(t),w=sO(o),v=n.createProgram();let x,b,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=[w].filter(vc).join(`
`),x.length>0&&(x+=`
`),b=[_,w].filter(vc).join(`
`),b.length>0&&(b+=`
`)):(x=[Tb(t),"#define SHADER_NAME "+t.shaderName,w,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vc).join(`
`),b=[_,Tb(t),"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ls?"#define TONE_MAPPING":"",t.toneMapping!==Ls?Tt.tonemapping_pars_fragment:"",t.toneMapping!==Ls?nO("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tt.encodings_pars_fragment,iO("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(vc).join(`
`)),s=U_(s),s=wb(s,t),s=Sb(s,t),c=U_(c),c=wb(c,t),c=Sb(c,t),s=bb(s),c=bb(c),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,b=["#define varying in",t.glslVersion===XS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===XS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const M=E+x+s,D=E+b+c,P=yb(n,35633,M),z=yb(n,35632,D);if(n.attachShader(v,P),n.attachShader(v,z),t.index0AttributeName!==void 0?n.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),l.debug.checkShaderErrors){const N=n.getProgramInfoLog(v).trim(),j=n.getShaderInfoLog(P).trim(),se=n.getShaderInfoLog(z).trim();let K=!0,X=!0;if(n.getProgramParameter(v,35714)===!1){K=!1;const Z=xb(n,P,"vertex"),he=xb(n,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,35715)+`

Program Info Log: `+N+`
`+Z+`
`+he)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(j===""||se==="")&&(X=!1);X&&(this.diagnostics={runnable:K,programLog:N,vertexShader:{log:j,prefix:x},fragmentShader:{log:se,prefix:b}})}n.deleteShader(P),n.deleteShader(z);let O;this.getUniforms=function(){return O===void 0&&(O=new hd(n,v)),O};let L;return this.getAttributes=function(){return L===void 0&&(L=aO(n,v)),L},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=$L++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=P,this.fragmentShader=z,this}let _O=0;class vO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(n)===!1&&(s.add(n),n.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new yO(e),t.set(e,i)),i}}class yO{constructor(e){this.id=_O++,this.code=e,this.usedTimes=0}}function xO(l,e,t,i,n,o,s){const c=new U1,u=new vO,h=[],d=n.isWebGL2,m=n.logarithmicDepthBuffer,g=n.vertexTextures;let _=n.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(L,N,j,se,K){const X=se.fog,Z=K.geometry,he=L.isMeshStandardMaterial?se.environment:null,Y=(L.isMeshStandardMaterial?t:e).get(L.envMap||he),Q=Y&&Y.mapping===Wd?Y.image.height:null,ee=w[L.type];L.precision!==null&&(_=n.getMaxPrecision(L.precision),_!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",_,"instead."));const _e=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,G=_e!==void 0?_e.length:0;let V=0;Z.morphAttributes.position!==void 0&&(V=1),Z.morphAttributes.normal!==void 0&&(V=2),Z.morphAttributes.color!==void 0&&(V=3);let q,ie,me,ue;if(ee){const at=Xr[ee];q=at.vertexShader,ie=at.fragmentShader}else q=L.vertexShader,ie=L.fragmentShader,u.update(L),me=u.getVertexShaderID(L),ue=u.getFragmentShaderID(L);const ae=l.getRenderTarget(),Be=L.alphaTest>0,He=L.clearcoat>0,Fe=L.iridescence>0;return{isWebGL2:d,shaderID:ee,shaderName:L.type,vertexShader:q,fragmentShader:ie,defines:L.defines,customVertexShaderID:me,customFragmentShaderID:ue,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:_,instancing:K.isInstancedMesh===!0,instancingColor:K.isInstancedMesh===!0&&K.instanceColor!==null,supportsVertexTextures:g,outputEncoding:ae===null?l.outputEncoding:ae.isXRRenderTarget===!0?ae.texture.encoding:Mo,map:!!L.map,matcap:!!L.matcap,envMap:!!Y,envMapMode:Y&&Y.mapping,envMapCubeUVHeight:Q,lightMap:!!L.lightMap,aoMap:!!L.aoMap,emissiveMap:!!L.emissiveMap,bumpMap:!!L.bumpMap,normalMap:!!L.normalMap,objectSpaceNormalMap:L.normalMapType===VA,tangentSpaceNormalMap:L.normalMapType===GA,decodeVideoTexture:!!L.map&&L.map.isVideoTexture===!0&&L.map.encoding===ni,clearcoat:He,clearcoatMap:He&&!!L.clearcoatMap,clearcoatRoughnessMap:He&&!!L.clearcoatRoughnessMap,clearcoatNormalMap:He&&!!L.clearcoatNormalMap,iridescence:Fe,iridescenceMap:Fe&&!!L.iridescenceMap,iridescenceThicknessMap:Fe&&!!L.iridescenceThicknessMap,displacementMap:!!L.displacementMap,roughnessMap:!!L.roughnessMap,metalnessMap:!!L.metalnessMap,specularMap:!!L.specularMap,specularIntensityMap:!!L.specularIntensityMap,specularColorMap:!!L.specularColorMap,opaque:L.transparent===!1&&L.blending===Vl,alphaMap:!!L.alphaMap,alphaTest:Be,gradientMap:!!L.gradientMap,sheen:L.sheen>0,sheenColorMap:!!L.sheenColorMap,sheenRoughnessMap:!!L.sheenRoughnessMap,transmission:L.transmission>0,transmissionMap:!!L.transmissionMap,thicknessMap:!!L.thicknessMap,combine:L.combine,vertexTangents:!!L.normalMap&&!!Z.attributes.tangent,vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,vertexUvs:!!L.map||!!L.bumpMap||!!L.normalMap||!!L.specularMap||!!L.alphaMap||!!L.emissiveMap||!!L.roughnessMap||!!L.metalnessMap||!!L.clearcoatMap||!!L.clearcoatRoughnessMap||!!L.clearcoatNormalMap||!!L.iridescenceMap||!!L.iridescenceThicknessMap||!!L.displacementMap||!!L.transmissionMap||!!L.thicknessMap||!!L.specularIntensityMap||!!L.specularColorMap||!!L.sheenColorMap||!!L.sheenRoughnessMap,uvsVertexOnly:!(L.map||L.bumpMap||L.normalMap||L.specularMap||L.alphaMap||L.emissiveMap||L.roughnessMap||L.metalnessMap||L.clearcoatNormalMap||L.iridescenceMap||L.iridescenceThicknessMap||L.transmission>0||L.transmissionMap||L.thicknessMap||L.specularIntensityMap||L.specularColorMap||L.sheen>0||L.sheenColorMap||L.sheenRoughnessMap)&&!!L.displacementMap,fog:!!X,useFog:L.fog===!0,fogExp2:X&&X.isFogExp2,flatShading:!!L.flatShading,sizeAttenuation:L.sizeAttenuation,logarithmicDepthBuffer:m,skinning:K.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:V,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:L.dithering,shadowMapEnabled:l.shadowMap.enabled&&j.length>0,shadowMapType:l.shadowMap.type,toneMapping:L.toneMapped?l.toneMapping:Ls,physicallyCorrectLights:l.physicallyCorrectLights,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===va,flipSided:L.side===rr,useDepthPacking:!!L.depthPacking,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionDerivatives:L.extensions&&L.extensions.derivatives,extensionFragDepth:L.extensions&&L.extensions.fragDepth,extensionDrawBuffers:L.extensions&&L.extensions.drawBuffers,extensionShaderTextureLOD:L.extensions&&L.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:L.customProgramCacheKey()}}function x(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const j in L.defines)N.push(j),N.push(L.defines[j]);return L.isRawShaderMaterial===!1&&(b(N,L),E(N,L),N.push(l.outputEncoding)),N.push(L.customProgramCacheKey),N.join()}function b(L,N){L.push(N.precision),L.push(N.outputEncoding),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.combine),L.push(N.vertexUvs),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function E(L,N){c.disableAll(),N.isWebGL2&&c.enable(0),N.supportsVertexTextures&&c.enable(1),N.instancing&&c.enable(2),N.instancingColor&&c.enable(3),N.map&&c.enable(4),N.matcap&&c.enable(5),N.envMap&&c.enable(6),N.lightMap&&c.enable(7),N.aoMap&&c.enable(8),N.emissiveMap&&c.enable(9),N.bumpMap&&c.enable(10),N.normalMap&&c.enable(11),N.objectSpaceNormalMap&&c.enable(12),N.tangentSpaceNormalMap&&c.enable(13),N.clearcoat&&c.enable(14),N.clearcoatMap&&c.enable(15),N.clearcoatRoughnessMap&&c.enable(16),N.clearcoatNormalMap&&c.enable(17),N.iridescence&&c.enable(18),N.iridescenceMap&&c.enable(19),N.iridescenceThicknessMap&&c.enable(20),N.displacementMap&&c.enable(21),N.specularMap&&c.enable(22),N.roughnessMap&&c.enable(23),N.metalnessMap&&c.enable(24),N.gradientMap&&c.enable(25),N.alphaMap&&c.enable(26),N.alphaTest&&c.enable(27),N.vertexColors&&c.enable(28),N.vertexAlphas&&c.enable(29),N.vertexUvs&&c.enable(30),N.vertexTangents&&c.enable(31),N.uvsVertexOnly&&c.enable(32),L.push(c.mask),c.disableAll(),N.fog&&c.enable(0),N.useFog&&c.enable(1),N.flatShading&&c.enable(2),N.logarithmicDepthBuffer&&c.enable(3),N.skinning&&c.enable(4),N.morphTargets&&c.enable(5),N.morphNormals&&c.enable(6),N.morphColors&&c.enable(7),N.premultipliedAlpha&&c.enable(8),N.shadowMapEnabled&&c.enable(9),N.physicallyCorrectLights&&c.enable(10),N.doubleSided&&c.enable(11),N.flipSided&&c.enable(12),N.useDepthPacking&&c.enable(13),N.dithering&&c.enable(14),N.specularIntensityMap&&c.enable(15),N.specularColorMap&&c.enable(16),N.transmission&&c.enable(17),N.transmissionMap&&c.enable(18),N.thicknessMap&&c.enable(19),N.sheen&&c.enable(20),N.sheenColorMap&&c.enable(21),N.sheenRoughnessMap&&c.enable(22),N.decodeVideoTexture&&c.enable(23),N.opaque&&c.enable(24),L.push(c.mask)}function M(L){const N=w[L.type];let j;if(N){const se=Xr[N];j=aD.clone(se.uniforms)}else j=L.uniforms;return j}function D(L,N){let j;for(let se=0,K=h.length;se<K;se++){const X=h[se];if(X.cacheKey===N){j=X,++j.usedTimes;break}}return j===void 0&&(j=new gO(l,N,L,o),h.push(j)),j}function P(L){if(--L.usedTimes===0){const N=h.indexOf(L);h[N]=h[h.length-1],h.pop(),L.destroy()}}function z(L){u.remove(L)}function O(){u.dispose()}return{getParameters:v,getProgramCacheKey:x,getUniforms:M,acquireProgram:D,releaseProgram:P,releaseShaderCache:z,programs:h,dispose:O}}function wO(){let l=new WeakMap;function e(o){let s=l.get(o);return s===void 0&&(s={},l.set(o,s)),s}function t(o){l.delete(o)}function i(o,s,c){l.get(o)[s]=c}function n(){l=new WeakMap}return{get:e,remove:t,update:i,dispose:n}}function SO(l,e){return l.groupOrder!==e.groupOrder?l.groupOrder-e.groupOrder:l.renderOrder!==e.renderOrder?l.renderOrder-e.renderOrder:l.material.id!==e.material.id?l.material.id-e.material.id:l.z!==e.z?l.z-e.z:l.id-e.id}function Eb(l,e){return l.groupOrder!==e.groupOrder?l.groupOrder-e.groupOrder:l.renderOrder!==e.renderOrder?l.renderOrder-e.renderOrder:l.z!==e.z?e.z-l.z:l.id-e.id}function Mb(){const l=[];let e=0;const t=[],i=[],n=[];function o(){e=0,t.length=0,i.length=0,n.length=0}function s(m,g,_,w,v,x){let b=l[e];return b===void 0?(b={id:m.id,object:m,geometry:g,material:_,groupOrder:w,renderOrder:m.renderOrder,z:v,group:x},l[e]=b):(b.id=m.id,b.object=m,b.geometry=g,b.material=_,b.groupOrder=w,b.renderOrder=m.renderOrder,b.z=v,b.group=x),e++,b}function c(m,g,_,w,v,x){const b=s(m,g,_,w,v,x);_.transmission>0?i.push(b):_.transparent===!0?n.push(b):t.push(b)}function u(m,g,_,w,v,x){const b=s(m,g,_,w,v,x);_.transmission>0?i.unshift(b):_.transparent===!0?n.unshift(b):t.unshift(b)}function h(m,g){t.length>1&&t.sort(m||SO),i.length>1&&i.sort(g||Eb),n.length>1&&n.sort(g||Eb)}function d(){for(let m=e,g=l.length;m<g;m++){const _=l[m];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:i,transparent:n,init:o,push:c,unshift:u,finish:d,sort:h}}function bO(){let l=new WeakMap;function e(i,n){const o=l.get(i);let s;return o===void 0?(s=new Mb,l.set(i,[s])):n>=o.length?(s=new Mb,o.push(s)):s=o[n],s}function t(){l=new WeakMap}return{get:e,dispose:t}}function TO(){const l={};return{get:function(e){if(l[e.id]!==void 0)return l[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Me,color:new hi};break;case"SpotLight":t={position:new Me,direction:new Me,color:new hi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Me,color:new hi,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Me,skyColor:new hi,groundColor:new hi};break;case"RectAreaLight":t={color:new hi,position:new Me,halfWidth:new Me,halfHeight:new Me};break}return l[e.id]=t,t}}}function EO(){const l={};return{get:function(e){if(l[e.id]!==void 0)return l[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t,shadowCameraNear:1,shadowCameraFar:1e3};break}return l[e.id]=t,t}}}let MO=0;function CO(l,e){return(e.castShadow?2:0)-(l.castShadow?2:0)+(e.map?1:0)-(l.map?1:0)}function RO(l,e){const t=new TO,i=EO(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)n.probe.push(new Me);const o=new Me,s=new Qi,c=new Qi;function u(d,m){let g=0,_=0,w=0;for(let se=0;se<9;se++)n.probe[se].set(0,0,0);let v=0,x=0,b=0,E=0,M=0,D=0,P=0,z=0,O=0,L=0;d.sort(CO);const N=m!==!0?Math.PI:1;for(let se=0,K=d.length;se<K;se++){const X=d[se],Z=X.color,he=X.intensity,Y=X.distance,Q=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)g+=Z.r*he*N,_+=Z.g*he*N,w+=Z.b*he*N;else if(X.isLightProbe)for(let ee=0;ee<9;ee++)n.probe[ee].addScaledVector(X.sh.coefficients[ee],he);else if(X.isDirectionalLight){const ee=t.get(X);if(ee.color.copy(X.color).multiplyScalar(X.intensity*N),X.castShadow){const _e=X.shadow,G=i.get(X);G.shadowBias=_e.bias,G.shadowNormalBias=_e.normalBias,G.shadowRadius=_e.radius,G.shadowMapSize=_e.mapSize,n.directionalShadow[v]=G,n.directionalShadowMap[v]=Q,n.directionalShadowMatrix[v]=X.shadow.matrix,D++}n.directional[v]=ee,v++}else if(X.isSpotLight){const ee=t.get(X);ee.position.setFromMatrixPosition(X.matrixWorld),ee.color.copy(Z).multiplyScalar(he*N),ee.distance=Y,ee.coneCos=Math.cos(X.angle),ee.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),ee.decay=X.decay,n.spot[b]=ee;const _e=X.shadow;if(X.map&&(n.spotLightMap[O]=X.map,O++,_e.updateMatrices(X),X.castShadow&&L++),n.spotLightMatrix[b]=_e.matrix,X.castShadow){const G=i.get(X);G.shadowBias=_e.bias,G.shadowNormalBias=_e.normalBias,G.shadowRadius=_e.radius,G.shadowMapSize=_e.mapSize,n.spotShadow[b]=G,n.spotShadowMap[b]=Q,z++}b++}else if(X.isRectAreaLight){const ee=t.get(X);ee.color.copy(Z).multiplyScalar(he),ee.halfWidth.set(X.width*.5,0,0),ee.halfHeight.set(0,X.height*.5,0),n.rectArea[E]=ee,E++}else if(X.isPointLight){const ee=t.get(X);if(ee.color.copy(X.color).multiplyScalar(X.intensity*N),ee.distance=X.distance,ee.decay=X.decay,X.castShadow){const _e=X.shadow,G=i.get(X);G.shadowBias=_e.bias,G.shadowNormalBias=_e.normalBias,G.shadowRadius=_e.radius,G.shadowMapSize=_e.mapSize,G.shadowCameraNear=_e.camera.near,G.shadowCameraFar=_e.camera.far,n.pointShadow[x]=G,n.pointShadowMap[x]=Q,n.pointShadowMatrix[x]=X.shadow.matrix,P++}n.point[x]=ee,x++}else if(X.isHemisphereLight){const ee=t.get(X);ee.skyColor.copy(X.color).multiplyScalar(he*N),ee.groundColor.copy(X.groundColor).multiplyScalar(he*N),n.hemi[M]=ee,M++}}E>0&&(e.isWebGL2||l.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ye.LTC_FLOAT_1,n.rectAreaLTC2=Ye.LTC_FLOAT_2):l.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Ye.LTC_HALF_1,n.rectAreaLTC2=Ye.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=g,n.ambient[1]=_,n.ambient[2]=w;const j=n.hash;(j.directionalLength!==v||j.pointLength!==x||j.spotLength!==b||j.rectAreaLength!==E||j.hemiLength!==M||j.numDirectionalShadows!==D||j.numPointShadows!==P||j.numSpotShadows!==z||j.numSpotMaps!==O)&&(n.directional.length=v,n.spot.length=b,n.rectArea.length=E,n.point.length=x,n.hemi.length=M,n.directionalShadow.length=D,n.directionalShadowMap.length=D,n.pointShadow.length=P,n.pointShadowMap.length=P,n.spotShadow.length=z,n.spotShadowMap.length=z,n.directionalShadowMatrix.length=D,n.pointShadowMatrix.length=P,n.spotLightMatrix.length=z+O-L,n.spotLightMap.length=O,n.numSpotLightShadowsWithMaps=L,j.directionalLength=v,j.pointLength=x,j.spotLength=b,j.rectAreaLength=E,j.hemiLength=M,j.numDirectionalShadows=D,j.numPointShadows=P,j.numSpotShadows=z,j.numSpotMaps=O,n.version=MO++)}function h(d,m){let g=0,_=0,w=0,v=0,x=0;const b=m.matrixWorldInverse;for(let E=0,M=d.length;E<M;E++){const D=d[E];if(D.isDirectionalLight){const P=n.directional[g];P.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),P.direction.sub(o),P.direction.transformDirection(b),g++}else if(D.isSpotLight){const P=n.spot[w];P.position.setFromMatrixPosition(D.matrixWorld),P.position.applyMatrix4(b),P.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),P.direction.sub(o),P.direction.transformDirection(b),w++}else if(D.isRectAreaLight){const P=n.rectArea[v];P.position.setFromMatrixPosition(D.matrixWorld),P.position.applyMatrix4(b),c.identity(),s.copy(D.matrixWorld),s.premultiply(b),c.extractRotation(s),P.halfWidth.set(D.width*.5,0,0),P.halfHeight.set(0,D.height*.5,0),P.halfWidth.applyMatrix4(c),P.halfHeight.applyMatrix4(c),v++}else if(D.isPointLight){const P=n.point[_];P.position.setFromMatrixPosition(D.matrixWorld),P.position.applyMatrix4(b),_++}else if(D.isHemisphereLight){const P=n.hemi[x];P.direction.setFromMatrixPosition(D.matrixWorld),P.direction.transformDirection(b),x++}}}return{setup:u,setupView:h,state:n}}function Cb(l,e){const t=new RO(l,e),i=[],n=[];function o(){i.length=0,n.length=0}function s(m){i.push(m)}function c(m){n.push(m)}function u(m){t.setup(i,m)}function h(m){t.setupView(i,m)}return{init:o,state:{lightsArray:i,shadowsArray:n,lights:t},setupLights:u,setupLightsView:h,pushLight:s,pushShadow:c}}function AO(l,e){let t=new WeakMap;function i(o,s=0){const c=t.get(o);let u;return c===void 0?(u=new Cb(l,e),t.set(o,[u])):s>=c.length?(u=new Cb(l,e),c.push(u)):u=c[s],u}function n(){t=new WeakMap}return{get:i,dispose:n}}class DO extends qd{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=HA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class PO extends qd{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Me,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const LO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,OO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zO(l,e,t){let i=new q1;const n=new $t,o=new $t,s=new Pi,c=new DO({depthPacking:kA}),u=new PO,h={},d=t.maxTextureSize,m={[Ca]:rr,[rr]:Ca,[va]:va},g=new Ra({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $t},radius:{value:4}},vertexShader:LO,fragmentShader:OO}),_=g.clone();_.defines.HORIZONTAL_PASS=1;const w=new Po;w.setAttribute("position",new Jr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Ds(w,g),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=R1,this.render=function(D,P,z){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||D.length===0)return;const O=l.getRenderTarget(),L=l.getActiveCubeFace(),N=l.getActiveMipmapLevel(),j=l.state;j.setBlending(Sa),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);for(let se=0,K=D.length;se<K;se++){const X=D[se],Z=X.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;n.copy(Z.mapSize);const he=Z.getFrameExtents();if(n.multiply(he),o.copy(Z.mapSize),(n.x>d||n.y>d)&&(n.x>d&&(o.x=Math.floor(d/he.x),n.x=o.x*he.x,Z.mapSize.x=o.x),n.y>d&&(o.y=Math.floor(d/he.y),n.y=o.y*he.y,Z.mapSize.y=o.y)),Z.map===null){const Q=this.type!==_c?{minFilter:_n,magFilter:_n}:{};Z.map=new Co(n.x,n.y,Q),Z.map.texture.name=X.name+".shadowMap",Z.camera.updateProjectionMatrix()}l.setRenderTarget(Z.map),l.clear();const Y=Z.getViewportCount();for(let Q=0;Q<Y;Q++){const ee=Z.getViewport(Q);s.set(o.x*ee.x,o.y*ee.y,o.x*ee.z,o.y*ee.w),j.viewport(s),Z.updateMatrices(X,Q),i=Z.getFrustum(),M(P,z,Z.camera,X,this.type)}Z.isPointLightShadow!==!0&&this.type===_c&&b(Z,z),Z.needsUpdate=!1}x.needsUpdate=!1,l.setRenderTarget(O,L,N)};function b(D,P){const z=e.update(v);g.defines.VSM_SAMPLES!==D.blurSamples&&(g.defines.VSM_SAMPLES=D.blurSamples,_.defines.VSM_SAMPLES=D.blurSamples,g.needsUpdate=!0,_.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new Co(n.x,n.y)),g.uniforms.shadow_pass.value=D.map.texture,g.uniforms.resolution.value=D.mapSize,g.uniforms.radius.value=D.radius,l.setRenderTarget(D.mapPass),l.clear(),l.renderBufferDirect(P,null,z,g,v,null),_.uniforms.shadow_pass.value=D.mapPass.texture,_.uniforms.resolution.value=D.mapSize,_.uniforms.radius.value=D.radius,l.setRenderTarget(D.map),l.clear(),l.renderBufferDirect(P,null,z,_,v,null)}function E(D,P,z,O,L,N){let j=null;const se=z.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(se!==void 0)j=se;else if(j=z.isPointLight===!0?u:c,l.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const K=j.uuid,X=P.uuid;let Z=h[K];Z===void 0&&(Z={},h[K]=Z);let he=Z[X];he===void 0&&(he=j.clone(),Z[X]=he),j=he}return j.visible=P.visible,j.wireframe=P.wireframe,N===_c?j.side=P.shadowSide!==null?P.shadowSide:P.side:j.side=P.shadowSide!==null?P.shadowSide:m[P.side],j.alphaMap=P.alphaMap,j.alphaTest=P.alphaTest,j.map=P.map,j.clipShadows=P.clipShadows,j.clippingPlanes=P.clippingPlanes,j.clipIntersection=P.clipIntersection,j.displacementMap=P.displacementMap,j.displacementScale=P.displacementScale,j.displacementBias=P.displacementBias,j.wireframeLinewidth=P.wireframeLinewidth,j.linewidth=P.linewidth,z.isPointLight===!0&&j.isMeshDistanceMaterial===!0&&(j.referencePosition.setFromMatrixPosition(z.matrixWorld),j.nearDistance=O,j.farDistance=L),j}function M(D,P,z,O,L){if(D.visible===!1)return;if(D.layers.test(P.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&L===_c)&&(!D.frustumCulled||i.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,D.matrixWorld);const se=e.update(D),K=D.material;if(Array.isArray(K)){const X=se.groups;for(let Z=0,he=X.length;Z<he;Z++){const Y=X[Z],Q=K[Y.materialIndex];if(Q&&Q.visible){const ee=E(D,Q,O,z.near,z.far,L);l.renderBufferDirect(z,null,se,ee,D,Y)}}}else if(K.visible){const X=E(D,K,O,z.near,z.far,L);l.renderBufferDirect(z,null,se,X,D,null)}}const j=D.children;for(let se=0,K=j.length;se<K;se++)M(j[se],P,z,O,L)}}function NO(l,e,t){const i=t.isWebGL2;function n(){let J=!1;const fe=new Pi;let Oe=null;const We=new Pi(0,0,0,0);return{setMask:function(je){Oe!==je&&!J&&(l.colorMask(je,je,je,je),Oe=je)},setLocked:function(je){J=je},setClear:function(je,ut,Ut,jt,Ji){Ji===!0&&(je*=jt,ut*=jt,Ut*=jt),fe.set(je,ut,Ut,jt),We.equals(fe)===!1&&(l.clearColor(je,ut,Ut,jt),We.copy(fe))},reset:function(){J=!1,Oe=null,We.set(-1,0,0,0)}}}function o(){let J=!1,fe=null,Oe=null,We=null;return{setTest:function(je){je?Be(2929):He(2929)},setMask:function(je){fe!==je&&!J&&(l.depthMask(je),fe=je)},setFunc:function(je){if(Oe!==je){switch(je){case cA:l.depthFunc(512);break;case hA:l.depthFunc(519);break;case fA:l.depthFunc(513);break;case L_:l.depthFunc(515);break;case dA:l.depthFunc(514);break;case pA:l.depthFunc(518);break;case mA:l.depthFunc(516);break;case gA:l.depthFunc(517);break;default:l.depthFunc(515)}Oe=je}},setLocked:function(je){J=je},setClear:function(je){We!==je&&(l.clearDepth(je),We=je)},reset:function(){J=!1,fe=null,Oe=null,We=null}}}function s(){let J=!1,fe=null,Oe=null,We=null,je=null,ut=null,Ut=null,jt=null,Ji=null;return{setTest:function(Ke){J||(Ke?Be(2960):He(2960))},setMask:function(Ke){fe!==Ke&&!J&&(l.stencilMask(Ke),fe=Ke)},setFunc:function(Ke,Qe,gt){(Oe!==Ke||We!==Qe||je!==gt)&&(l.stencilFunc(Ke,Qe,gt),Oe=Ke,We=Qe,je=gt)},setOp:function(Ke,Qe,gt){(ut!==Ke||Ut!==Qe||jt!==gt)&&(l.stencilOp(Ke,Qe,gt),ut=Ke,Ut=Qe,jt=gt)},setLocked:function(Ke){J=Ke},setClear:function(Ke){Ji!==Ke&&(l.clearStencil(Ke),Ji=Ke)},reset:function(){J=!1,fe=null,Oe=null,We=null,je=null,ut=null,Ut=null,jt=null,Ji=null}}}const c=new n,u=new o,h=new s,d=new WeakMap,m=new WeakMap;let g={},_={},w=new WeakMap,v=[],x=null,b=!1,E=null,M=null,D=null,P=null,z=null,O=null,L=null,N=!1,j=null,se=null,K=null,X=null,Z=null;const he=l.getParameter(35661);let Y=!1,Q=0;const ee=l.getParameter(7938);ee.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(ee)[1]),Y=Q>=1):ee.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),Y=Q>=2);let _e=null,G={};const V=l.getParameter(3088),q=l.getParameter(2978),ie=new Pi().fromArray(V),me=new Pi().fromArray(q);function ue(J,fe,Oe){const We=new Uint8Array(4),je=l.createTexture();l.bindTexture(J,je),l.texParameteri(J,10241,9728),l.texParameteri(J,10240,9728);for(let ut=0;ut<Oe;ut++)l.texImage2D(fe+ut,0,6408,1,1,0,6408,5121,We);return je}const ae={};ae[3553]=ue(3553,3553,1),ae[34067]=ue(34067,34069,6),c.setClear(0,0,0,1),u.setClear(1),h.setClear(0),Be(2929),u.setFunc(L_),T(!1),F(gS),Be(2884),ht(Sa);function Be(J){g[J]!==!0&&(l.enable(J),g[J]=!0)}function He(J){g[J]!==!1&&(l.disable(J),g[J]=!1)}function Fe(J,fe){return _[J]!==fe?(l.bindFramebuffer(J,fe),_[J]=fe,i&&(J===36009&&(_[36160]=fe),J===36160&&(_[36009]=fe)),!0):!1}function Ve(J,fe){let Oe=v,We=!1;if(J)if(Oe=w.get(fe),Oe===void 0&&(Oe=[],w.set(fe,Oe)),J.isWebGLMultipleRenderTargets){const je=J.texture;if(Oe.length!==je.length||Oe[0]!==36064){for(let ut=0,Ut=je.length;ut<Ut;ut++)Oe[ut]=36064+ut;Oe.length=je.length,We=!0}}else Oe[0]!==36064&&(Oe[0]=36064,We=!0);else Oe[0]!==1029&&(Oe[0]=1029,We=!0);We&&(t.isWebGL2?l.drawBuffers(Oe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Oe))}function at(J){return x!==J?(l.useProgram(J),x=J,!0):!1}const et={[Dl]:32774,[$R]:32778,[eA]:32779};if(i)et[xS]=32775,et[wS]=32776;else{const J=e.get("EXT_blend_minmax");J!==null&&(et[xS]=J.MIN_EXT,et[wS]=J.MAX_EXT)}const Ge={[tA]:0,[iA]:1,[nA]:768,[A1]:770,[uA]:776,[oA]:774,[sA]:772,[rA]:769,[D1]:771,[lA]:775,[aA]:773};function ht(J,fe,Oe,We,je,ut,Ut,jt){if(J===Sa){b===!0&&(He(3042),b=!1);return}if(b===!1&&(Be(3042),b=!0),J!==JR){if(J!==E||jt!==N){if((M!==Dl||z!==Dl)&&(l.blendEquation(32774),M=Dl,z=Dl),jt)switch(J){case Vl:l.blendFuncSeparate(1,771,1,771);break;case _S:l.blendFunc(1,1);break;case vS:l.blendFuncSeparate(0,769,0,1);break;case yS:l.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case Vl:l.blendFuncSeparate(770,771,1,771);break;case _S:l.blendFunc(770,1);break;case vS:l.blendFuncSeparate(0,769,0,1);break;case yS:l.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}D=null,P=null,O=null,L=null,E=J,N=jt}return}je=je||fe,ut=ut||Oe,Ut=Ut||We,(fe!==M||je!==z)&&(l.blendEquationSeparate(et[fe],et[je]),M=fe,z=je),(Oe!==D||We!==P||ut!==O||Ut!==L)&&(l.blendFuncSeparate(Ge[Oe],Ge[We],Ge[ut],Ge[Ut]),D=Oe,P=We,O=ut,L=Ut),E=J,N=!1}function Ct(J,fe){J.side===va?He(2884):Be(2884);let Oe=J.side===rr;fe&&(Oe=!Oe),T(Oe),J.blending===Vl&&J.transparent===!1?ht(Sa):ht(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.premultipliedAlpha),u.setFunc(J.depthFunc),u.setTest(J.depthTest),u.setMask(J.depthWrite),c.setMask(J.colorWrite);const We=J.stencilWrite;h.setTest(We),We&&(h.setMask(J.stencilWriteMask),h.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),h.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),oe(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?Be(32926):He(32926)}function T(J){j!==J&&(J?l.frontFace(2304):l.frontFace(2305),j=J)}function F(J){J!==ZR?(Be(2884),J!==se&&(J===gS?l.cullFace(1029):J===KR?l.cullFace(1028):l.cullFace(1032))):He(2884),se=J}function te(J){J!==K&&(Y&&l.lineWidth(J),K=J)}function oe(J,fe,Oe){J?(Be(32823),(X!==fe||Z!==Oe)&&(l.polygonOffset(fe,Oe),X=fe,Z=Oe)):He(32823)}function Ne(J){J?Be(3089):He(3089)}function De(J){J===void 0&&(J=33984+he-1),_e!==J&&(l.activeTexture(J),_e=J)}function H(J,fe,Oe){Oe===void 0&&(_e===null?Oe=33984+he-1:Oe=_e);let We=G[Oe];We===void 0&&(We={type:void 0,texture:void 0},G[Oe]=We),(We.type!==J||We.texture!==fe)&&(_e!==Oe&&(l.activeTexture(Oe),_e=Oe),l.bindTexture(J,fe||ae[J]),We.type=J,We.texture=fe)}function B(){const J=G[_e];J!==void 0&&J.type!==void 0&&(l.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function ge(){try{l.compressedTexImage2D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function we(){try{l.compressedTexImage3D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ce(){try{l.texSubImage2D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Le(){try{l.texSubImage3D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ue(){try{l.compressedTexSubImage2D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ie(){try{l.compressedTexSubImage3D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function C(){try{l.texStorage2D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function A(){try{l.texStorage3D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function I(){try{l.texImage2D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function k(){try{l.texImage3D.apply(l,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ne(J){ie.equals(J)===!1&&(l.scissor(J.x,J.y,J.z,J.w),ie.copy(J))}function Te(J){me.equals(J)===!1&&(l.viewport(J.x,J.y,J.z,J.w),me.copy(J))}function ze(J,fe){let Oe=m.get(fe);Oe===void 0&&(Oe=new WeakMap,m.set(fe,Oe));let We=Oe.get(J);We===void 0&&(We=l.getUniformBlockIndex(fe,J.name),Oe.set(J,We))}function tt(J,fe){const We=m.get(fe).get(J);d.get(fe)!==We&&(l.uniformBlockBinding(fe,We,J.__bindingPointIndex),d.set(fe,We))}function xt(){l.disable(3042),l.disable(2884),l.disable(2929),l.disable(32823),l.disable(3089),l.disable(2960),l.disable(32926),l.blendEquation(32774),l.blendFunc(1,0),l.blendFuncSeparate(1,0,1,0),l.colorMask(!0,!0,!0,!0),l.clearColor(0,0,0,0),l.depthMask(!0),l.depthFunc(513),l.clearDepth(1),l.stencilMask(4294967295),l.stencilFunc(519,0,4294967295),l.stencilOp(7680,7680,7680),l.clearStencil(0),l.cullFace(1029),l.frontFace(2305),l.polygonOffset(0,0),l.activeTexture(33984),l.bindFramebuffer(36160,null),i===!0&&(l.bindFramebuffer(36009,null),l.bindFramebuffer(36008,null)),l.useProgram(null),l.lineWidth(1),l.scissor(0,0,l.canvas.width,l.canvas.height),l.viewport(0,0,l.canvas.width,l.canvas.height),g={},_e=null,G={},_={},w=new WeakMap,v=[],x=null,b=!1,E=null,M=null,D=null,P=null,z=null,O=null,L=null,N=!1,j=null,se=null,K=null,X=null,Z=null,ie.set(0,0,l.canvas.width,l.canvas.height),me.set(0,0,l.canvas.width,l.canvas.height),c.reset(),u.reset(),h.reset()}return{buffers:{color:c,depth:u,stencil:h},enable:Be,disable:He,bindFramebuffer:Fe,drawBuffers:Ve,useProgram:at,setBlending:ht,setMaterial:Ct,setFlipSided:T,setCullFace:F,setLineWidth:te,setPolygonOffset:oe,setScissorTest:Ne,activeTexture:De,bindTexture:H,unbindTexture:B,compressedTexImage2D:ge,compressedTexImage3D:we,texImage2D:I,texImage3D:k,updateUBOMapping:ze,uniformBlockBinding:tt,texStorage2D:C,texStorage3D:A,texSubImage2D:Ce,texSubImage3D:Le,compressedTexSubImage2D:Ue,compressedTexSubImage3D:Ie,scissor:ne,viewport:Te,reset:xt}}function BO(l,e,t,i,n,o,s){const c=n.isWebGL2,u=n.maxTextures,h=n.maxCubemapSize,d=n.maxTextureSize,m=n.maxSamples,g=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,_=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),w=new WeakMap;let v;const x=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(H,B){return b?new OffscreenCanvas(H,B):Xc("canvas")}function M(H,B,ge,we){let Ce=1;if((H.width>we||H.height>we)&&(Ce=we/Math.max(H.width,H.height)),Ce<1||B===!0)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap){const Le=B?I_:Math.floor,Ue=Le(Ce*H.width),Ie=Le(Ce*H.height);v===void 0&&(v=E(Ue,Ie));const C=ge?E(Ue,Ie):v;return C.width=Ue,C.height=Ie,C.getContext("2d").drawImage(H,0,0,Ue,Ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+H.width+"x"+H.height+") to ("+Ue+"x"+Ie+")."),C}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+H.width+"x"+H.height+")."),H;return H}function D(H){return ZS(H.width)&&ZS(H.height)}function P(H){return c?!1:H.wrapS!==Nr||H.wrapT!==Nr||H.minFilter!==_n&&H.minFilter!==ui}function z(H,B){return H.generateMipmaps&&B&&H.minFilter!==_n&&H.minFilter!==ui}function O(H){l.generateMipmap(H)}function L(H,B,ge,we,Ce=!1){if(c===!1)return B;if(H!==null){if(l[H]!==void 0)return l[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let Le=B;return B===6403&&(ge===5126&&(Le=33326),ge===5131&&(Le=33325),ge===5121&&(Le=33321)),B===33319&&(ge===5126&&(Le=33328),ge===5131&&(Le=33327),ge===5121&&(Le=33323)),B===6408&&(ge===5126&&(Le=34836),ge===5131&&(Le=34842),ge===5121&&(Le=we===ni&&Ce===!1?35907:32856),ge===32819&&(Le=32854),ge===32820&&(Le=32855)),(Le===33325||Le===33326||Le===33327||Le===33328||Le===34842||Le===34836)&&e.get("EXT_color_buffer_float"),Le}function N(H,B,ge){return z(H,ge)===!0||H.isFramebufferTexture&&H.minFilter!==_n&&H.minFilter!==ui?Math.log2(Math.max(B.width,B.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?B.mipmaps.length:1}function j(H){return H===_n||H===SS||H===Mg?9728:9729}function se(H){const B=H.target;B.removeEventListener("dispose",se),X(B),B.isVideoTexture&&w.delete(B)}function K(H){const B=H.target;B.removeEventListener("dispose",K),he(B)}function X(H){const B=i.get(H);if(B.__webglInit===void 0)return;const ge=H.source,we=x.get(ge);if(we){const Ce=we[B.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&Z(H),Object.keys(we).length===0&&x.delete(ge)}i.remove(H)}function Z(H){const B=i.get(H);l.deleteTexture(B.__webglTexture);const ge=H.source,we=x.get(ge);delete we[B.__cacheKey],s.memory.textures--}function he(H){const B=H.texture,ge=i.get(H),we=i.get(B);if(we.__webglTexture!==void 0&&(l.deleteTexture(we.__webglTexture),s.memory.textures--),H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)l.deleteFramebuffer(ge.__webglFramebuffer[Ce]),ge.__webglDepthbuffer&&l.deleteRenderbuffer(ge.__webglDepthbuffer[Ce]);else{if(l.deleteFramebuffer(ge.__webglFramebuffer),ge.__webglDepthbuffer&&l.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&l.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer)for(let Ce=0;Ce<ge.__webglColorRenderbuffer.length;Ce++)ge.__webglColorRenderbuffer[Ce]&&l.deleteRenderbuffer(ge.__webglColorRenderbuffer[Ce]);ge.__webglDepthRenderbuffer&&l.deleteRenderbuffer(ge.__webglDepthRenderbuffer)}if(H.isWebGLMultipleRenderTargets)for(let Ce=0,Le=B.length;Ce<Le;Ce++){const Ue=i.get(B[Ce]);Ue.__webglTexture&&(l.deleteTexture(Ue.__webglTexture),s.memory.textures--),i.remove(B[Ce])}i.remove(B),i.remove(H)}let Y=0;function Q(){Y=0}function ee(){const H=Y;return H>=u&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+u),Y+=1,H}function _e(H){const B=[];return B.push(H.wrapS),B.push(H.wrapT),B.push(H.wrapR||0),B.push(H.magFilter),B.push(H.minFilter),B.push(H.anisotropy),B.push(H.internalFormat),B.push(H.format),B.push(H.type),B.push(H.generateMipmaps),B.push(H.premultiplyAlpha),B.push(H.flipY),B.push(H.unpackAlignment),B.push(H.encoding),B.join()}function G(H,B){const ge=i.get(H);if(H.isVideoTexture&&Ne(H),H.isRenderTargetTexture===!1&&H.version>0&&ge.__version!==H.version){const we=H.image;if(we===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{He(ge,H,B);return}}t.bindTexture(3553,ge.__webglTexture,33984+B)}function V(H,B){const ge=i.get(H);if(H.version>0&&ge.__version!==H.version){He(ge,H,B);return}t.bindTexture(35866,ge.__webglTexture,33984+B)}function q(H,B){const ge=i.get(H);if(H.version>0&&ge.__version!==H.version){He(ge,H,B);return}t.bindTexture(32879,ge.__webglTexture,33984+B)}function ie(H,B){const ge=i.get(H);if(H.version>0&&ge.__version!==H.version){Fe(ge,H,B);return}t.bindTexture(34067,ge.__webglTexture,33984+B)}const me={[N_]:10497,[Nr]:33071,[B_]:33648},ue={[_n]:9728,[SS]:9984,[Mg]:9986,[ui]:9729,[TA]:9985,[Wc]:9987};function ae(H,B,ge){if(ge?(l.texParameteri(H,10242,me[B.wrapS]),l.texParameteri(H,10243,me[B.wrapT]),(H===32879||H===35866)&&l.texParameteri(H,32882,me[B.wrapR]),l.texParameteri(H,10240,ue[B.magFilter]),l.texParameteri(H,10241,ue[B.minFilter])):(l.texParameteri(H,10242,33071),l.texParameteri(H,10243,33071),(H===32879||H===35866)&&l.texParameteri(H,32882,33071),(B.wrapS!==Nr||B.wrapT!==Nr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),l.texParameteri(H,10240,j(B.magFilter)),l.texParameteri(H,10241,j(B.minFilter)),B.minFilter!==_n&&B.minFilter!==ui&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const we=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===_n||B.minFilter!==Mg&&B.minFilter!==Wc||B.type===lo&&e.has("OES_texture_float_linear")===!1||c===!1&&B.type===jc&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(l.texParameterf(H,we.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,n.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function Be(H,B){let ge=!1;H.__webglInit===void 0&&(H.__webglInit=!0,B.addEventListener("dispose",se));const we=B.source;let Ce=x.get(we);Ce===void 0&&(Ce={},x.set(we,Ce));const Le=_e(B);if(Le!==H.__cacheKey){Ce[Le]===void 0&&(Ce[Le]={texture:l.createTexture(),usedTimes:0},s.memory.textures++,ge=!0),Ce[Le].usedTimes++;const Ue=Ce[H.__cacheKey];Ue!==void 0&&(Ce[H.__cacheKey].usedTimes--,Ue.usedTimes===0&&Z(B)),H.__cacheKey=Le,H.__webglTexture=Ce[Le].texture}return ge}function He(H,B,ge){let we=3553;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(we=35866),B.isData3DTexture&&(we=32879);const Ce=Be(H,B),Le=B.source;t.bindTexture(we,H.__webglTexture,33984+ge);const Ue=i.get(Le);if(Le.version!==Ue.__version||Ce===!0){t.activeTexture(33984+ge),l.pixelStorei(37440,B.flipY),l.pixelStorei(37441,B.premultiplyAlpha),l.pixelStorei(3317,B.unpackAlignment),l.pixelStorei(37443,0);const Ie=P(B)&&D(B.image)===!1;let C=M(B.image,Ie,!1,d);C=De(B,C);const A=D(C)||c,I=o.convert(B.format,B.encoding);let k=o.convert(B.type),ne=L(B.internalFormat,I,k,B.encoding,B.isVideoTexture);ae(we,B,A);let Te;const ze=B.mipmaps,tt=c&&B.isVideoTexture!==!0,xt=Ue.__version===void 0||Ce===!0,J=N(B,C,A);if(B.isDepthTexture)ne=6402,c?B.type===lo?ne=36012:B.type===oo?ne=33190:B.type===Wl?ne=35056:ne=33189:B.type===lo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===vo&&ne===6402&&B.type!==O1&&B.type!==oo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=oo,k=o.convert(B.type)),B.format===tu&&ne===6402&&(ne=34041,B.type!==Wl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Wl,k=o.convert(B.type))),xt&&(tt?t.texStorage2D(3553,1,ne,C.width,C.height):t.texImage2D(3553,0,ne,C.width,C.height,0,I,k,null));else if(B.isDataTexture)if(ze.length>0&&A){tt&&xt&&t.texStorage2D(3553,J,ne,ze[0].width,ze[0].height);for(let fe=0,Oe=ze.length;fe<Oe;fe++)Te=ze[fe],tt?t.texSubImage2D(3553,fe,0,0,Te.width,Te.height,I,k,Te.data):t.texImage2D(3553,fe,ne,Te.width,Te.height,0,I,k,Te.data);B.generateMipmaps=!1}else tt?(xt&&t.texStorage2D(3553,J,ne,C.width,C.height),t.texSubImage2D(3553,0,0,0,C.width,C.height,I,k,C.data)):t.texImage2D(3553,0,ne,C.width,C.height,0,I,k,C.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){tt&&xt&&t.texStorage3D(35866,J,ne,ze[0].width,ze[0].height,C.depth);for(let fe=0,Oe=ze.length;fe<Oe;fe++)Te=ze[fe],B.format!==Br?I!==null?tt?t.compressedTexSubImage3D(35866,fe,0,0,0,Te.width,Te.height,C.depth,I,Te.data,0,0):t.compressedTexImage3D(35866,fe,ne,Te.width,Te.height,C.depth,0,Te.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tt?t.texSubImage3D(35866,fe,0,0,0,Te.width,Te.height,C.depth,I,k,Te.data):t.texImage3D(35866,fe,ne,Te.width,Te.height,C.depth,0,I,k,Te.data)}else{tt&&xt&&t.texStorage2D(3553,J,ne,ze[0].width,ze[0].height);for(let fe=0,Oe=ze.length;fe<Oe;fe++)Te=ze[fe],B.format!==Br?I!==null?tt?t.compressedTexSubImage2D(3553,fe,0,0,Te.width,Te.height,I,Te.data):t.compressedTexImage2D(3553,fe,ne,Te.width,Te.height,0,Te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tt?t.texSubImage2D(3553,fe,0,0,Te.width,Te.height,I,k,Te.data):t.texImage2D(3553,fe,ne,Te.width,Te.height,0,I,k,Te.data)}else if(B.isDataArrayTexture)tt?(xt&&t.texStorage3D(35866,J,ne,C.width,C.height,C.depth),t.texSubImage3D(35866,0,0,0,0,C.width,C.height,C.depth,I,k,C.data)):t.texImage3D(35866,0,ne,C.width,C.height,C.depth,0,I,k,C.data);else if(B.isData3DTexture)tt?(xt&&t.texStorage3D(32879,J,ne,C.width,C.height,C.depth),t.texSubImage3D(32879,0,0,0,0,C.width,C.height,C.depth,I,k,C.data)):t.texImage3D(32879,0,ne,C.width,C.height,C.depth,0,I,k,C.data);else if(B.isFramebufferTexture){if(xt)if(tt)t.texStorage2D(3553,J,ne,C.width,C.height);else{let fe=C.width,Oe=C.height;for(let We=0;We<J;We++)t.texImage2D(3553,We,ne,fe,Oe,0,I,k,null),fe>>=1,Oe>>=1}}else if(ze.length>0&&A){tt&&xt&&t.texStorage2D(3553,J,ne,ze[0].width,ze[0].height);for(let fe=0,Oe=ze.length;fe<Oe;fe++)Te=ze[fe],tt?t.texSubImage2D(3553,fe,0,0,I,k,Te):t.texImage2D(3553,fe,ne,I,k,Te);B.generateMipmaps=!1}else tt?(xt&&t.texStorage2D(3553,J,ne,C.width,C.height),t.texSubImage2D(3553,0,0,0,I,k,C)):t.texImage2D(3553,0,ne,I,k,C);z(B,A)&&O(we),Ue.__version=Le.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function Fe(H,B,ge){if(B.image.length!==6)return;const we=Be(H,B),Ce=B.source;t.bindTexture(34067,H.__webglTexture,33984+ge);const Le=i.get(Ce);if(Ce.version!==Le.__version||we===!0){t.activeTexture(33984+ge),l.pixelStorei(37440,B.flipY),l.pixelStorei(37441,B.premultiplyAlpha),l.pixelStorei(3317,B.unpackAlignment),l.pixelStorei(37443,0);const Ue=B.isCompressedTexture||B.image[0].isCompressedTexture,Ie=B.image[0]&&B.image[0].isDataTexture,C=[];for(let fe=0;fe<6;fe++)!Ue&&!Ie?C[fe]=M(B.image[fe],!1,!0,h):C[fe]=Ie?B.image[fe].image:B.image[fe],C[fe]=De(B,C[fe]);const A=C[0],I=D(A)||c,k=o.convert(B.format,B.encoding),ne=o.convert(B.type),Te=L(B.internalFormat,k,ne,B.encoding),ze=c&&B.isVideoTexture!==!0,tt=Le.__version===void 0||we===!0;let xt=N(B,A,I);ae(34067,B,I);let J;if(Ue){ze&&tt&&t.texStorage2D(34067,xt,Te,A.width,A.height);for(let fe=0;fe<6;fe++){J=C[fe].mipmaps;for(let Oe=0;Oe<J.length;Oe++){const We=J[Oe];B.format!==Br?k!==null?ze?t.compressedTexSubImage2D(34069+fe,Oe,0,0,We.width,We.height,k,We.data):t.compressedTexImage2D(34069+fe,Oe,Te,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ze?t.texSubImage2D(34069+fe,Oe,0,0,We.width,We.height,k,ne,We.data):t.texImage2D(34069+fe,Oe,Te,We.width,We.height,0,k,ne,We.data)}}}else{J=B.mipmaps,ze&&tt&&(J.length>0&&xt++,t.texStorage2D(34067,xt,Te,C[0].width,C[0].height));for(let fe=0;fe<6;fe++)if(Ie){ze?t.texSubImage2D(34069+fe,0,0,0,C[fe].width,C[fe].height,k,ne,C[fe].data):t.texImage2D(34069+fe,0,Te,C[fe].width,C[fe].height,0,k,ne,C[fe].data);for(let Oe=0;Oe<J.length;Oe++){const je=J[Oe].image[fe].image;ze?t.texSubImage2D(34069+fe,Oe+1,0,0,je.width,je.height,k,ne,je.data):t.texImage2D(34069+fe,Oe+1,Te,je.width,je.height,0,k,ne,je.data)}}else{ze?t.texSubImage2D(34069+fe,0,0,0,k,ne,C[fe]):t.texImage2D(34069+fe,0,Te,k,ne,C[fe]);for(let Oe=0;Oe<J.length;Oe++){const We=J[Oe];ze?t.texSubImage2D(34069+fe,Oe+1,0,0,k,ne,We.image[fe]):t.texImage2D(34069+fe,Oe+1,Te,k,ne,We.image[fe])}}}z(B,I)&&O(34067),Le.__version=Ce.version,B.onUpdate&&B.onUpdate(B)}H.__version=B.version}function Ve(H,B,ge,we,Ce){const Le=o.convert(ge.format,ge.encoding),Ue=o.convert(ge.type),Ie=L(ge.internalFormat,Le,Ue,ge.encoding);i.get(B).__hasExternalTextures||(Ce===32879||Ce===35866?t.texImage3D(Ce,0,Ie,B.width,B.height,B.depth,0,Le,Ue,null):t.texImage2D(Ce,0,Ie,B.width,B.height,0,Le,Ue,null)),t.bindFramebuffer(36160,H),oe(B)?g.framebufferTexture2DMultisampleEXT(36160,we,Ce,i.get(ge).__webglTexture,0,te(B)):(Ce===3553||Ce>=34069&&Ce<=34074)&&l.framebufferTexture2D(36160,we,Ce,i.get(ge).__webglTexture,0),t.bindFramebuffer(36160,null)}function at(H,B,ge){if(l.bindRenderbuffer(36161,H),B.depthBuffer&&!B.stencilBuffer){let we=33189;if(ge||oe(B)){const Ce=B.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===lo?we=36012:Ce.type===oo&&(we=33190));const Le=te(B);oe(B)?g.renderbufferStorageMultisampleEXT(36161,Le,we,B.width,B.height):l.renderbufferStorageMultisample(36161,Le,we,B.width,B.height)}else l.renderbufferStorage(36161,we,B.width,B.height);l.framebufferRenderbuffer(36160,36096,36161,H)}else if(B.depthBuffer&&B.stencilBuffer){const we=te(B);ge&&oe(B)===!1?l.renderbufferStorageMultisample(36161,we,35056,B.width,B.height):oe(B)?g.renderbufferStorageMultisampleEXT(36161,we,35056,B.width,B.height):l.renderbufferStorage(36161,34041,B.width,B.height),l.framebufferRenderbuffer(36160,33306,36161,H)}else{const we=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Ce=0;Ce<we.length;Ce++){const Le=we[Ce],Ue=o.convert(Le.format,Le.encoding),Ie=o.convert(Le.type),C=L(Le.internalFormat,Ue,Ie,Le.encoding),A=te(B);ge&&oe(B)===!1?l.renderbufferStorageMultisample(36161,A,C,B.width,B.height):oe(B)?g.renderbufferStorageMultisampleEXT(36161,A,C,B.width,B.height):l.renderbufferStorage(36161,C,B.width,B.height)}}l.bindRenderbuffer(36161,null)}function et(H,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,H),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),G(B.depthTexture,0);const we=i.get(B.depthTexture).__webglTexture,Ce=te(B);if(B.depthTexture.format===vo)oe(B)?g.framebufferTexture2DMultisampleEXT(36160,36096,3553,we,0,Ce):l.framebufferTexture2D(36160,36096,3553,we,0);else if(B.depthTexture.format===tu)oe(B)?g.framebufferTexture2DMultisampleEXT(36160,33306,3553,we,0,Ce):l.framebufferTexture2D(36160,33306,3553,we,0);else throw new Error("Unknown depthTexture format")}function Ge(H){const B=i.get(H),ge=H.isWebGLCubeRenderTarget===!0;if(H.depthTexture&&!B.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");et(B.__webglFramebuffer,H)}else if(ge){B.__webglDepthbuffer=[];for(let we=0;we<6;we++)t.bindFramebuffer(36160,B.__webglFramebuffer[we]),B.__webglDepthbuffer[we]=l.createRenderbuffer(),at(B.__webglDepthbuffer[we],H,!1)}else t.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=l.createRenderbuffer(),at(B.__webglDepthbuffer,H,!1);t.bindFramebuffer(36160,null)}function ht(H,B,ge){const we=i.get(H);B!==void 0&&Ve(we.__webglFramebuffer,H,H.texture,36064,3553),ge!==void 0&&Ge(H)}function Ct(H){const B=H.texture,ge=i.get(H),we=i.get(B);H.addEventListener("dispose",K),H.isWebGLMultipleRenderTargets!==!0&&(we.__webglTexture===void 0&&(we.__webglTexture=l.createTexture()),we.__version=B.version,s.memory.textures++);const Ce=H.isWebGLCubeRenderTarget===!0,Le=H.isWebGLMultipleRenderTargets===!0,Ue=D(H)||c;if(Ce){ge.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)ge.__webglFramebuffer[Ie]=l.createFramebuffer()}else{if(ge.__webglFramebuffer=l.createFramebuffer(),Le)if(n.drawBuffers){const Ie=H.texture;for(let C=0,A=Ie.length;C<A;C++){const I=i.get(Ie[C]);I.__webglTexture===void 0&&(I.__webglTexture=l.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&H.samples>0&&oe(H)===!1){const Ie=Le?B:[B];ge.__webglMultisampledFramebuffer=l.createFramebuffer(),ge.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer);for(let C=0;C<Ie.length;C++){const A=Ie[C];ge.__webglColorRenderbuffer[C]=l.createRenderbuffer(),l.bindRenderbuffer(36161,ge.__webglColorRenderbuffer[C]);const I=o.convert(A.format,A.encoding),k=o.convert(A.type),ne=L(A.internalFormat,I,k,A.encoding,H.isXRRenderTarget===!0),Te=te(H);l.renderbufferStorageMultisample(36161,Te,ne,H.width,H.height),l.framebufferRenderbuffer(36160,36064+C,36161,ge.__webglColorRenderbuffer[C])}l.bindRenderbuffer(36161,null),H.depthBuffer&&(ge.__webglDepthRenderbuffer=l.createRenderbuffer(),at(ge.__webglDepthRenderbuffer,H,!0)),t.bindFramebuffer(36160,null)}}if(Ce){t.bindTexture(34067,we.__webglTexture),ae(34067,B,Ue);for(let Ie=0;Ie<6;Ie++)Ve(ge.__webglFramebuffer[Ie],H,B,36064,34069+Ie);z(B,Ue)&&O(34067),t.unbindTexture()}else if(Le){const Ie=H.texture;for(let C=0,A=Ie.length;C<A;C++){const I=Ie[C],k=i.get(I);t.bindTexture(3553,k.__webglTexture),ae(3553,I,Ue),Ve(ge.__webglFramebuffer,H,I,36064+C,3553),z(I,Ue)&&O(3553)}t.unbindTexture()}else{let Ie=3553;(H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(c?Ie=H.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ie,we.__webglTexture),ae(Ie,B,Ue),Ve(ge.__webglFramebuffer,H,B,36064,Ie),z(B,Ue)&&O(Ie),t.unbindTexture()}H.depthBuffer&&Ge(H)}function T(H){const B=D(H)||c,ge=H.isWebGLMultipleRenderTargets===!0?H.texture:[H.texture];for(let we=0,Ce=ge.length;we<Ce;we++){const Le=ge[we];if(z(Le,B)){const Ue=H.isWebGLCubeRenderTarget?34067:3553,Ie=i.get(Le).__webglTexture;t.bindTexture(Ue,Ie),O(Ue),t.unbindTexture()}}}function F(H){if(c&&H.samples>0&&oe(H)===!1){const B=H.isWebGLMultipleRenderTargets?H.texture:[H.texture],ge=H.width,we=H.height;let Ce=16384;const Le=[],Ue=H.stencilBuffer?33306:36096,Ie=i.get(H),C=H.isWebGLMultipleRenderTargets===!0;if(C)for(let A=0;A<B.length;A++)t.bindFramebuffer(36160,Ie.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+A,36161,null),t.bindFramebuffer(36160,Ie.__webglFramebuffer),l.framebufferTexture2D(36009,36064+A,3553,null,0);t.bindFramebuffer(36008,Ie.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ie.__webglFramebuffer);for(let A=0;A<B.length;A++){Le.push(36064+A),H.depthBuffer&&Le.push(Ue);const I=Ie.__ignoreDepthValues!==void 0?Ie.__ignoreDepthValues:!1;if(I===!1&&(H.depthBuffer&&(Ce|=256),H.stencilBuffer&&(Ce|=1024)),C&&l.framebufferRenderbuffer(36008,36064,36161,Ie.__webglColorRenderbuffer[A]),I===!0&&(l.invalidateFramebuffer(36008,[Ue]),l.invalidateFramebuffer(36009,[Ue])),C){const k=i.get(B[A]).__webglTexture;l.framebufferTexture2D(36009,36064,3553,k,0)}l.blitFramebuffer(0,0,ge,we,0,0,ge,we,Ce,9728),_&&l.invalidateFramebuffer(36008,Le)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),C)for(let A=0;A<B.length;A++){t.bindFramebuffer(36160,Ie.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064+A,36161,Ie.__webglColorRenderbuffer[A]);const I=i.get(B[A]).__webglTexture;t.bindFramebuffer(36160,Ie.__webglFramebuffer),l.framebufferTexture2D(36009,36064+A,3553,I,0)}t.bindFramebuffer(36009,Ie.__webglMultisampledFramebuffer)}}function te(H){return Math.min(m,H.samples)}function oe(H){const B=i.get(H);return c&&H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function Ne(H){const B=s.render.frame;w.get(H)!==B&&(w.set(H,B),H.update())}function De(H,B){const ge=H.encoding,we=H.format,Ce=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||H.format===F_||ge!==Mo&&(ge===ni?c===!1?e.has("EXT_sRGB")===!0&&we===Br?(H.format=F_,H.minFilter=ui,H.generateMipmaps=!1):B=B1.sRGBToLinear(B):(we!==Br||Ce!==Eo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ge)),B}this.allocateTextureUnit=ee,this.resetTextureUnits=Q,this.setTexture2D=G,this.setTexture2DArray=V,this.setTexture3D=q,this.setTextureCube=ie,this.rebindTextures=ht,this.setupRenderTarget=Ct,this.updateRenderTargetMipmap=T,this.updateMultisampleRenderTarget=F,this.setupDepthRenderbuffer=Ge,this.setupFrameBufferTexture=Ve,this.useMultisampledRTT=oe}function FO(l,e,t){const i=t.isWebGL2;function n(o,s=null){let c;if(o===Eo)return 5121;if(o===RA)return 32819;if(o===AA)return 32820;if(o===EA)return 5120;if(o===MA)return 5122;if(o===O1)return 5123;if(o===CA)return 5124;if(o===oo)return 5125;if(o===lo)return 5126;if(o===jc)return i?5131:(c=e.get("OES_texture_half_float"),c!==null?c.HALF_FLOAT_OES:null);if(o===DA)return 6406;if(o===Br)return 6408;if(o===PA)return 6409;if(o===LA)return 6410;if(o===vo)return 6402;if(o===tu)return 34041;if(o===F_)return c=e.get("EXT_sRGB"),c!==null?c.SRGB_ALPHA_EXT:null;if(o===OA)return 6403;if(o===zA)return 36244;if(o===NA)return 33319;if(o===BA)return 33320;if(o===FA)return 36249;if(o===Cg||o===Rg||o===Ag||o===Dg)if(s===ni)if(c=e.get("WEBGL_compressed_texture_s3tc_srgb"),c!==null){if(o===Cg)return c.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===Rg)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===Ag)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===Dg)return c.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(c=e.get("WEBGL_compressed_texture_s3tc"),c!==null){if(o===Cg)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===Rg)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Ag)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Dg)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===bS||o===TS||o===ES||o===MS)if(c=e.get("WEBGL_compressed_texture_pvrtc"),c!==null){if(o===bS)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===TS)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===ES)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===MS)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===IA)return c=e.get("WEBGL_compressed_texture_etc1"),c!==null?c.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===CS||o===RS)if(c=e.get("WEBGL_compressed_texture_etc"),c!==null){if(o===CS)return s===ni?c.COMPRESSED_SRGB8_ETC2:c.COMPRESSED_RGB8_ETC2;if(o===RS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:c.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===AS||o===DS||o===PS||o===LS||o===OS||o===zS||o===NS||o===BS||o===FS||o===IS||o===US||o===HS||o===kS||o===GS)if(c=e.get("WEBGL_compressed_texture_astc"),c!==null){if(o===AS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:c.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===DS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:c.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===PS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:c.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===LS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:c.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===OS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:c.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===zS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:c.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===NS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:c.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===BS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:c.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===FS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:c.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===IS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:c.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===US)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:c.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===HS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:c.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===kS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:c.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===GS)return s===ni?c.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:c.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===Pg)if(c=e.get("EXT_texture_compression_bptc"),c!==null){if(o===Pg)return s===ni?c.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:c.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===UA||o===VS||o===WS||o===jS)if(c=e.get("EXT_texture_compression_rgtc"),c!==null){if(o===Pg)return c.COMPRESSED_RED_RGTC1_EXT;if(o===VS)return c.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===WS)return c.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===jS)return c.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Wl?i?34042:(c=e.get("WEBGL_depth_texture"),c!==null?c.UNSIGNED_INT_24_8_WEBGL:null):l[o]!==void 0?l[o]:null}return{convert:n}}class IO extends Or{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Yf extends sr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const UO={type:"move"};class r_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let n=null,o=null,s=null;const c=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){s=!0;for(const v of e.hand.values()){const x=t.getJointPose(v,i),b=this._getHandJoint(h,v);x!==null&&(b.matrix.fromArray(x.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=x.radius),b.visible=x!==null}const d=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],g=d.position.distanceTo(m.position),_=.02,w=.005;h.inputState.pinching&&g>_+w?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&g<=_-w&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(u.matrix.fromArray(o.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),o.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(o.linearVelocity)):u.hasLinearVelocity=!1,o.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(o.angularVelocity)):u.hasAngularVelocity=!1));c!==null&&(n=t.getPose(e.targetRaySpace,i),n===null&&o!==null&&(n=o),n!==null&&(c.matrix.fromArray(n.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),n.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(n.linearVelocity)):c.hasLinearVelocity=!1,n.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(n.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(UO)))}return c!==null&&(c.visible=n!==null),u!==null&&(u.visible=o!==null),h!==null&&(h.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Yf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class HO extends xn{constructor(e,t,i,n,o,s,c,u,h,d){if(d=d!==void 0?d:vo,d!==vo&&d!==tu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===vo&&(i=oo),i===void 0&&d===tu&&(i=Wl),super(null,n,o,s,c,u,d,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=c!==void 0?c:_n,this.minFilter=u!==void 0?u:_n,this.flipY=!1,this.generateMipmaps=!1}}class kO extends au{constructor(e,t){super();const i=this;let n=null,o=1,s=null,c="local-floor",u=1,h=null,d=null,m=null,g=null,_=null,w=null;const v=t.getContextAttributes();let x=null,b=null;const E=[],M=[],D=new Set,P=new Map,z=new Or;z.layers.enable(1),z.viewport=new Pi;const O=new Or;O.layers.enable(2),O.viewport=new Pi;const L=[z,O],N=new IO;N.layers.enable(1),N.layers.enable(2);let j=null,se=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ie=E[q];return ie===void 0&&(ie=new r_,E[q]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(q){let ie=E[q];return ie===void 0&&(ie=new r_,E[q]=ie),ie.getGripSpace()},this.getHand=function(q){let ie=E[q];return ie===void 0&&(ie=new r_,E[q]=ie),ie.getHandSpace()};function K(q){const ie=M.indexOf(q.inputSource);if(ie===-1)return;const me=E[ie];me!==void 0&&me.dispatchEvent({type:q.type,data:q.inputSource})}function X(){n.removeEventListener("select",K),n.removeEventListener("selectstart",K),n.removeEventListener("selectend",K),n.removeEventListener("squeeze",K),n.removeEventListener("squeezestart",K),n.removeEventListener("squeezeend",K),n.removeEventListener("end",X),n.removeEventListener("inputsourceschange",Z);for(let q=0;q<E.length;q++){const ie=M[q];ie!==null&&(M[q]=null,E[q].disconnect(ie))}j=null,se=null,e.setRenderTarget(x),_=null,g=null,m=null,n=null,b=null,V.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){o=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){c=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||s},this.setReferenceSpace=function(q){h=q},this.getBaseLayer=function(){return g!==null?g:_},this.getBinding=function(){return m},this.getFrame=function(){return w},this.getSession=function(){return n},this.setSession=async function(q){if(n=q,n!==null){if(x=e.getRenderTarget(),n.addEventListener("select",K),n.addEventListener("selectstart",K),n.addEventListener("selectend",K),n.addEventListener("squeeze",K),n.addEventListener("squeezestart",K),n.addEventListener("squeezeend",K),n.addEventListener("end",X),n.addEventListener("inputsourceschange",Z),v.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ie={antialias:n.renderState.layers===void 0?v.antialias:!0,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};_=new XRWebGLLayer(n,t,ie),n.updateRenderState({baseLayer:_}),b=new Co(_.framebufferWidth,_.framebufferHeight,{format:Br,type:Eo,encoding:e.outputEncoding,stencilBuffer:v.stencil})}else{let ie=null,me=null,ue=null;v.depth&&(ue=v.stencil?35056:33190,ie=v.stencil?tu:vo,me=v.stencil?Wl:oo);const ae={colorFormat:32856,depthFormat:ue,scaleFactor:o};m=new XRWebGLBinding(n,t),g=m.createProjectionLayer(ae),n.updateRenderState({layers:[g]}),b=new Co(g.textureWidth,g.textureHeight,{format:Br,type:Eo,depthTexture:new HO(g.textureWidth,g.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0});const Be=e.properties.get(b);Be.__ignoreDepthValues=g.ignoreDepthValues}b.isXRRenderTarget=!0,this.setFoveation(u),h=null,s=await n.requestReferenceSpace(c),V.setContext(n),V.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function Z(q){for(let ie=0;ie<q.removed.length;ie++){const me=q.removed[ie],ue=M.indexOf(me);ue>=0&&(M[ue]=null,E[ue].disconnect(me))}for(let ie=0;ie<q.added.length;ie++){const me=q.added[ie];let ue=M.indexOf(me);if(ue===-1){for(let Be=0;Be<E.length;Be++)if(Be>=M.length){M.push(me),ue=Be;break}else if(M[Be]===null){M[Be]=me,ue=Be;break}if(ue===-1)break}const ae=E[ue];ae&&ae.connect(me)}}const he=new Me,Y=new Me;function Q(q,ie,me){he.setFromMatrixPosition(ie.matrixWorld),Y.setFromMatrixPosition(me.matrixWorld);const ue=he.distanceTo(Y),ae=ie.projectionMatrix.elements,Be=me.projectionMatrix.elements,He=ae[14]/(ae[10]-1),Fe=ae[14]/(ae[10]+1),Ve=(ae[9]+1)/ae[5],at=(ae[9]-1)/ae[5],et=(ae[8]-1)/ae[0],Ge=(Be[8]+1)/Be[0],ht=He*et,Ct=He*Ge,T=ue/(-et+Ge),F=T*-et;ie.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(F),q.translateZ(T),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const te=He+T,oe=Fe+T,Ne=ht-F,De=Ct+(ue-F),H=Ve*Fe/oe*te,B=at*Fe/oe*te;q.projectionMatrix.makePerspective(Ne,De,H,B,te,oe)}function ee(q,ie){ie===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ie.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(n===null)return;N.near=O.near=z.near=q.near,N.far=O.far=z.far=q.far,(j!==N.near||se!==N.far)&&(n.updateRenderState({depthNear:N.near,depthFar:N.far}),j=N.near,se=N.far);const ie=q.parent,me=N.cameras;ee(N,ie);for(let ae=0;ae<me.length;ae++)ee(me[ae],ie);N.matrixWorld.decompose(N.position,N.quaternion,N.scale),q.matrix.copy(N.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale);const ue=q.children;for(let ae=0,Be=ue.length;ae<Be;ae++)ue[ae].updateMatrixWorld(!0);me.length===2?Q(N,z,O):N.projectionMatrix.copy(z.projectionMatrix)},this.getCamera=function(){return N},this.getFoveation=function(){if(!(g===null&&_===null))return u},this.setFoveation=function(q){u=q,g!==null&&(g.fixedFoveation=q),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=q)},this.getPlanes=function(){return D};let _e=null;function G(q,ie){if(d=ie.getViewerPose(h||s),w=ie,d!==null){const me=d.views;_!==null&&(e.setRenderTargetFramebuffer(b,_.framebuffer),e.setRenderTarget(b));let ue=!1;me.length!==N.cameras.length&&(N.cameras.length=0,ue=!0);for(let ae=0;ae<me.length;ae++){const Be=me[ae];let He=null;if(_!==null)He=_.getViewport(Be);else{const Ve=m.getViewSubImage(g,Be);He=Ve.viewport,ae===0&&(e.setRenderTargetTextures(b,Ve.colorTexture,g.ignoreDepthValues?void 0:Ve.depthStencilTexture),e.setRenderTarget(b))}let Fe=L[ae];Fe===void 0&&(Fe=new Or,Fe.layers.enable(ae),Fe.viewport=new Pi,L[ae]=Fe),Fe.matrix.fromArray(Be.transform.matrix),Fe.projectionMatrix.fromArray(Be.projectionMatrix),Fe.viewport.set(He.x,He.y,He.width,He.height),ae===0&&N.matrix.copy(Fe.matrix),ue===!0&&N.cameras.push(Fe)}}for(let me=0;me<E.length;me++){const ue=M[me],ae=E[me];ue!==null&&ae!==void 0&&ae.update(ue,ie,h||s)}if(_e&&_e(q,ie),ie.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:ie.detectedPlanes});let me=null;for(const ue of D)ie.detectedPlanes.has(ue)||(me===null&&(me=[]),me.push(ue));if(me!==null)for(const ue of me)D.delete(ue),P.delete(ue),i.dispatchEvent({type:"planeremoved",data:ue});for(const ue of ie.detectedPlanes)if(!D.has(ue))D.add(ue),P.set(ue,ie.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ue});else{const ae=P.get(ue);ue.lastChangedTime>ae&&(P.set(ue,ue.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ue}))}}w=null}const V=new X1;V.setAnimationLoop(G),this.setAnimationLoop=function(q){_e=q},this.dispose=function(){}}}function GO(l,e){function t(v,x){x.color.getRGB(v.fogColor.value,V1(l)),x.isFog?(v.fogNear.value=x.near,v.fogFar.value=x.far):x.isFogExp2&&(v.fogDensity.value=x.density)}function i(v,x,b,E,M){x.isMeshBasicMaterial||x.isMeshLambertMaterial?n(v,x):x.isMeshToonMaterial?(n(v,x),d(v,x)):x.isMeshPhongMaterial?(n(v,x),h(v,x)):x.isMeshStandardMaterial?(n(v,x),m(v,x),x.isMeshPhysicalMaterial&&g(v,x,M)):x.isMeshMatcapMaterial?(n(v,x),_(v,x)):x.isMeshDepthMaterial?n(v,x):x.isMeshDistanceMaterial?(n(v,x),w(v,x)):x.isMeshNormalMaterial?n(v,x):x.isLineBasicMaterial?(o(v,x),x.isLineDashedMaterial&&s(v,x)):x.isPointsMaterial?c(v,x,b,E):x.isSpriteMaterial?u(v,x):x.isShadowMaterial?(v.color.value.copy(x.color),v.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function n(v,x){v.opacity.value=x.opacity,x.color&&v.diffuse.value.copy(x.color),x.emissive&&v.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===rr&&(v.bumpScale.value*=-1)),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias),x.emissiveMap&&(v.emissiveMap.value=x.emissiveMap),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===rr&&v.normalScale.value.negate()),x.specularMap&&(v.specularMap.value=x.specularMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);const b=e.get(x).envMap;if(b&&(v.envMap.value=b,v.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=x.reflectivity,v.ior.value=x.ior,v.refractionRatio.value=x.refractionRatio),x.lightMap){v.lightMap.value=x.lightMap;const D=l.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=x.lightMapIntensity*D}x.aoMap&&(v.aoMap.value=x.aoMap,v.aoMapIntensity.value=x.aoMapIntensity);let E;x.map?E=x.map:x.specularMap?E=x.specularMap:x.displacementMap?E=x.displacementMap:x.normalMap?E=x.normalMap:x.bumpMap?E=x.bumpMap:x.roughnessMap?E=x.roughnessMap:x.metalnessMap?E=x.metalnessMap:x.alphaMap?E=x.alphaMap:x.emissiveMap?E=x.emissiveMap:x.clearcoatMap?E=x.clearcoatMap:x.clearcoatNormalMap?E=x.clearcoatNormalMap:x.clearcoatRoughnessMap?E=x.clearcoatRoughnessMap:x.iridescenceMap?E=x.iridescenceMap:x.iridescenceThicknessMap?E=x.iridescenceThicknessMap:x.specularIntensityMap?E=x.specularIntensityMap:x.specularColorMap?E=x.specularColorMap:x.transmissionMap?E=x.transmissionMap:x.thicknessMap?E=x.thicknessMap:x.sheenColorMap?E=x.sheenColorMap:x.sheenRoughnessMap&&(E=x.sheenRoughnessMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),v.uvTransform.value.copy(E.matrix));let M;x.aoMap?M=x.aoMap:x.lightMap&&(M=x.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),v.uv2Transform.value.copy(M.matrix))}function o(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity}function s(v,x){v.dashSize.value=x.dashSize,v.totalSize.value=x.dashSize+x.gapSize,v.scale.value=x.scale}function c(v,x,b,E){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.size.value=x.size*b,v.scale.value=E*.5,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);let M;x.map?M=x.map:x.alphaMap&&(M=x.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),v.uvTransform.value.copy(M.matrix))}function u(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.rotation.value=x.rotation,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.alphaTest>0&&(v.alphaTest.value=x.alphaTest);let b;x.map?b=x.map:x.alphaMap&&(b=x.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function h(v,x){v.specular.value.copy(x.specular),v.shininess.value=Math.max(x.shininess,1e-4)}function d(v,x){x.gradientMap&&(v.gradientMap.value=x.gradientMap)}function m(v,x){v.roughness.value=x.roughness,v.metalness.value=x.metalness,x.roughnessMap&&(v.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(v.metalnessMap.value=x.metalnessMap),e.get(x).envMap&&(v.envMapIntensity.value=x.envMapIntensity)}function g(v,x,b){v.ior.value=x.ior,x.sheen>0&&(v.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),v.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(v.sheenColorMap.value=x.sheenColorMap),x.sheenRoughnessMap&&(v.sheenRoughnessMap.value=x.sheenRoughnessMap)),x.clearcoat>0&&(v.clearcoat.value=x.clearcoat,v.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(v.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),v.clearcoatNormalMap.value=x.clearcoatNormalMap,x.side===rr&&v.clearcoatNormalScale.value.negate())),x.iridescence>0&&(v.iridescence.value=x.iridescence,v.iridescenceIOR.value=x.iridescenceIOR,v.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(v.iridescenceMap.value=x.iridescenceMap),x.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=x.iridescenceThicknessMap)),x.transmission>0&&(v.transmission.value=x.transmission,v.transmissionSamplerMap.value=b.texture,v.transmissionSamplerSize.value.set(b.width,b.height),x.transmissionMap&&(v.transmissionMap.value=x.transmissionMap),v.thickness.value=x.thickness,x.thicknessMap&&(v.thicknessMap.value=x.thicknessMap),v.attenuationDistance.value=x.attenuationDistance,v.attenuationColor.value.copy(x.attenuationColor)),v.specularIntensity.value=x.specularIntensity,v.specularColor.value.copy(x.specularColor),x.specularIntensityMap&&(v.specularIntensityMap.value=x.specularIntensityMap),x.specularColorMap&&(v.specularColorMap.value=x.specularColorMap)}function _(v,x){x.matcap&&(v.matcap.value=x.matcap)}function w(v,x){v.referencePosition.value.copy(x.referencePosition),v.nearDistance.value=x.nearDistance,v.farDistance.value=x.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function VO(l,e,t,i){let n={},o={},s=[];const c=t.isWebGL2?l.getParameter(35375):0;function u(E,M){const D=M.program;i.uniformBlockBinding(E,D)}function h(E,M){let D=n[E.id];D===void 0&&(w(E),D=d(E),n[E.id]=D,E.addEventListener("dispose",x));const P=M.program;i.updateUBOMapping(E,P);const z=e.render.frame;o[E.id]!==z&&(g(E),o[E.id]=z)}function d(E){const M=m();E.__bindingPointIndex=M;const D=l.createBuffer(),P=E.__size,z=E.usage;return l.bindBuffer(35345,D),l.bufferData(35345,P,z),l.bindBuffer(35345,null),l.bindBufferBase(35345,M,D),D}function m(){for(let E=0;E<c;E++)if(s.indexOf(E)===-1)return s.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(E){const M=n[E.id],D=E.uniforms,P=E.__cache;l.bindBuffer(35345,M);for(let z=0,O=D.length;z<O;z++){const L=D[z];if(_(L,z,P)===!0){const N=L.__offset,j=Array.isArray(L.value)?L.value:[L.value];let se=0;for(let K=0;K<j.length;K++){const X=j[K],Z=v(X);typeof X=="number"?(L.__data[0]=X,l.bufferSubData(35345,N+se,L.__data)):X.isMatrix3?(L.__data[0]=X.elements[0],L.__data[1]=X.elements[1],L.__data[2]=X.elements[2],L.__data[3]=X.elements[0],L.__data[4]=X.elements[3],L.__data[5]=X.elements[4],L.__data[6]=X.elements[5],L.__data[7]=X.elements[0],L.__data[8]=X.elements[6],L.__data[9]=X.elements[7],L.__data[10]=X.elements[8],L.__data[11]=X.elements[0]):(X.toArray(L.__data,se),se+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}l.bufferSubData(35345,N,L.__data)}}l.bindBuffer(35345,null)}function _(E,M,D){const P=E.value;if(D[M]===void 0){if(typeof P=="number")D[M]=P;else{const z=Array.isArray(P)?P:[P],O=[];for(let L=0;L<z.length;L++)O.push(z[L].clone());D[M]=O}return!0}else if(typeof P=="number"){if(D[M]!==P)return D[M]=P,!0}else{const z=Array.isArray(D[M])?D[M]:[D[M]],O=Array.isArray(P)?P:[P];for(let L=0;L<z.length;L++){const N=z[L];if(N.equals(O[L])===!1)return N.copy(O[L]),!0}}return!1}function w(E){const M=E.uniforms;let D=0;const P=16;let z=0;for(let O=0,L=M.length;O<L;O++){const N=M[O],j={boundary:0,storage:0},se=Array.isArray(N.value)?N.value:[N.value];for(let K=0,X=se.length;K<X;K++){const Z=se[K],he=v(Z);j.boundary+=he.boundary,j.storage+=he.storage}if(N.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=D,O>0){z=D%P;const K=P-z;z!==0&&K-j.boundary<0&&(D+=P-z,N.__offset=D)}D+=j.storage}return z=D%P,z>0&&(D+=P-z),E.__size=D,E.__cache={},this}function v(E){const M={boundary:0,storage:0};return typeof E=="number"?(M.boundary=4,M.storage=4):E.isVector2?(M.boundary=8,M.storage=8):E.isVector3||E.isColor?(M.boundary=16,M.storage=12):E.isVector4?(M.boundary=16,M.storage=16):E.isMatrix3?(M.boundary=48,M.storage=48):E.isMatrix4?(M.boundary=64,M.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),M}function x(E){const M=E.target;M.removeEventListener("dispose",x);const D=s.indexOf(M.__bindingPointIndex);s.splice(D,1),l.deleteBuffer(n[M.id]),delete n[M.id],delete o[M.id]}function b(){for(const E in n)l.deleteBuffer(n[E]);s=[],n={},o={}}return{bind:u,update:h,dispose:b}}function WO(){const l=Xc("canvas");return l.style.display="block",l}function $1(l={}){this.isWebGLRenderer=!0;const e=l.canvas!==void 0?l.canvas:WO(),t=l.context!==void 0?l.context:null,i=l.depth!==void 0?l.depth:!0,n=l.stencil!==void 0?l.stencil:!0,o=l.antialias!==void 0?l.antialias:!1,s=l.premultipliedAlpha!==void 0?l.premultipliedAlpha:!0,c=l.preserveDrawingBuffer!==void 0?l.preserveDrawingBuffer:!1,u=l.powerPreference!==void 0?l.powerPreference:"default",h=l.failIfMajorPerformanceCaveat!==void 0?l.failIfMajorPerformanceCaveat:!1;let d;t!==null?d=t.getContextAttributes().alpha:d=l.alpha!==void 0?l.alpha:!1;let m=null,g=null;const _=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Mo,this.physicallyCorrectLights=!1,this.toneMapping=Ls,this.toneMappingExposure=1;const v=this;let x=!1,b=0,E=0,M=null,D=-1,P=null;const z=new Pi,O=new Pi;let L=null,N=e.width,j=e.height,se=1,K=null,X=null;const Z=new Pi(0,0,N,j),he=new Pi(0,0,N,j);let Y=!1;const Q=new q1;let ee=!1,_e=!1,G=null;const V=new Qi,q=new $t,ie=new Me,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ue(){return M===null?se:1}let ae=t;function Be(W,le){for(let be=0;be<W.length;be++){const ce=W[be],xe=e.getContext(ce,le);if(xe!==null)return xe}return null}try{const W={alpha:!0,depth:i,stencil:n,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${E0}`),e.addEventListener("webglcontextlost",ne,!1),e.addEventListener("webglcontextrestored",Te,!1),e.addEventListener("webglcontextcreationerror",ze,!1),ae===null){const le=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&le.shift(),ae=Be(le,W),ae===null)throw Be(le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ae.getShaderPrecisionFormat===void 0&&(ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}let He,Fe,Ve,at,et,Ge,ht,Ct,T,F,te,oe,Ne,De,H,B,ge,we,Ce,Le,Ue,Ie,C,A;function I(){He=new tL(ae),Fe=new Z3(ae,He,l),He.init(Fe),Ie=new FO(ae,He,Fe),Ve=new NO(ae,He,Fe),at=new rL,et=new wO,Ge=new BO(ae,He,Ve,et,Fe,Ie,at),ht=new Q3(v),Ct=new eL(v),T=new dD(ae,Fe),C=new X3(ae,He,T,Fe),F=new iL(ae,T,at,C),te=new lL(ae,F,T,at),Ce=new oL(ae,Fe,Ge),B=new K3(et),oe=new xO(v,ht,Ct,He,Fe,C,B),Ne=new GO(v,et),De=new bO,H=new AO(He,Fe),we=new q3(v,ht,Ct,Ve,te,d,s),ge=new zO(v,te,Fe),A=new VO(ae,at,Fe,Ve),Le=new Y3(ae,He,at,Fe),Ue=new nL(ae,He,at,Fe),at.programs=oe.programs,v.capabilities=Fe,v.extensions=He,v.properties=et,v.renderLists=De,v.shadowMap=ge,v.state=Ve,v.info=at}I();const k=new kO(v,ae);this.xr=k,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const W=He.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=He.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return se},this.setPixelRatio=function(W){W!==void 0&&(se=W,this.setSize(N,j,!1))},this.getSize=function(W){return W.set(N,j)},this.setSize=function(W,le,be){if(k.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=W,j=le,e.width=Math.floor(W*se),e.height=Math.floor(le*se),be!==!1&&(e.style.width=W+"px",e.style.height=le+"px"),this.setViewport(0,0,W,le)},this.getDrawingBufferSize=function(W){return W.set(N*se,j*se).floor()},this.setDrawingBufferSize=function(W,le,be){N=W,j=le,se=be,e.width=Math.floor(W*be),e.height=Math.floor(le*be),this.setViewport(0,0,W,le)},this.getCurrentViewport=function(W){return W.copy(z)},this.getViewport=function(W){return W.copy(Z)},this.setViewport=function(W,le,be,ce){W.isVector4?Z.set(W.x,W.y,W.z,W.w):Z.set(W,le,be,ce),Ve.viewport(z.copy(Z).multiplyScalar(se).floor())},this.getScissor=function(W){return W.copy(he)},this.setScissor=function(W,le,be,ce){W.isVector4?he.set(W.x,W.y,W.z,W.w):he.set(W,le,be,ce),Ve.scissor(O.copy(he).multiplyScalar(se).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(W){Ve.setScissorTest(Y=W)},this.setOpaqueSort=function(W){K=W},this.setTransparentSort=function(W){X=W},this.getClearColor=function(W){return W.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(W=!0,le=!0,be=!0){let ce=0;W&&(ce|=16384),le&&(ce|=256),be&&(ce|=1024),ae.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ne,!1),e.removeEventListener("webglcontextrestored",Te,!1),e.removeEventListener("webglcontextcreationerror",ze,!1),De.dispose(),H.dispose(),et.dispose(),ht.dispose(),Ct.dispose(),te.dispose(),C.dispose(),A.dispose(),oe.dispose(),k.dispose(),k.removeEventListener("sessionstart",We),k.removeEventListener("sessionend",je),G&&(G.dispose(),G=null),ut.stop()};function ne(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const W=at.autoReset,le=ge.enabled,be=ge.autoUpdate,ce=ge.needsUpdate,xe=ge.type;I(),at.autoReset=W,ge.enabled=le,ge.autoUpdate=be,ge.needsUpdate=ce,ge.type=xe}function ze(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function tt(W){const le=W.target;le.removeEventListener("dispose",tt),xt(le)}function xt(W){J(W),et.remove(W)}function J(W){const le=et.get(W).programs;le!==void 0&&(le.forEach(function(be){oe.releaseProgram(be)}),W.isShaderMaterial&&oe.releaseShaderCache(W))}this.renderBufferDirect=function(W,le,be,ce,xe,ke){le===null&&(le=me);const Xe=xe.isMesh&&xe.matrixWorld.determinant()<0,lt=dt(W,le,be,ce,xe);Ve.setMaterial(ce,Xe);let it=be.index,pt=1;ce.wireframe===!0&&(it=F.getWireframeAttribute(be),pt=2);const mt=be.drawRange,rt=be.attributes.position;let wt=mt.start*pt,Dt=(mt.start+mt.count)*pt;ke!==null&&(wt=Math.max(wt,ke.start*pt),Dt=Math.min(Dt,(ke.start+ke.count)*pt)),it!==null?(wt=Math.max(wt,0),Dt=Math.min(Dt,it.count)):rt!=null&&(wt=Math.max(wt,0),Dt=Math.min(Dt,rt.count));const ri=Dt-wt;if(ri<0||ri===1/0)return;C.setup(xe,ce,lt,be,it);let zi,_t=Le;if(it!==null&&(zi=T.get(it),_t=Ue,_t.setIndex(zi)),xe.isMesh)ce.wireframe===!0?(Ve.setLineWidth(ce.wireframeLinewidth*ue()),_t.setMode(1)):_t.setMode(4);else if(xe.isLine){let Ze=ce.linewidth;Ze===void 0&&(Ze=1),Ve.setLineWidth(Ze*ue()),xe.isLineSegments?_t.setMode(1):xe.isLineLoop?_t.setMode(2):_t.setMode(3)}else xe.isPoints?_t.setMode(0):xe.isSprite&&_t.setMode(4);if(xe.isInstancedMesh)_t.renderInstances(wt,ri,xe.count);else if(be.isInstancedBufferGeometry){const Ze=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,Wi=Math.min(be.instanceCount,Ze);_t.renderInstances(wt,ri,Wi)}else _t.render(wt,ri)},this.compile=function(W,le){function be(ce,xe,ke){ce.transparent===!0&&ce.side===va&&ce.forceSinglePass===!1?(ce.side=rr,ce.needsUpdate=!0,gt(ce,xe,ke),ce.side=Ca,ce.needsUpdate=!0,gt(ce,xe,ke),ce.side=va):gt(ce,xe,ke)}g=H.get(W),g.init(),w.push(g),W.traverseVisible(function(ce){ce.isLight&&ce.layers.test(le.layers)&&(g.pushLight(ce),ce.castShadow&&g.pushShadow(ce))}),g.setupLights(v.physicallyCorrectLights),W.traverse(function(ce){const xe=ce.material;if(xe)if(Array.isArray(xe))for(let ke=0;ke<xe.length;ke++){const Xe=xe[ke];be(Xe,W,ce)}else be(xe,W,ce)}),w.pop(),g=null};let fe=null;function Oe(W){fe&&fe(W)}function We(){ut.stop()}function je(){ut.start()}const ut=new X1;ut.setAnimationLoop(Oe),typeof self<"u"&&ut.setContext(self),this.setAnimationLoop=function(W){fe=W,k.setAnimationLoop(W),W===null?ut.stop():ut.start()},k.addEventListener("sessionstart",We),k.addEventListener("sessionend",je),this.render=function(W,le){if(le!==void 0&&le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),le.parent===null&&le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),k.enabled===!0&&k.isPresenting===!0&&(k.cameraAutoUpdate===!0&&k.updateCamera(le),le=k.getCamera()),W.isScene===!0&&W.onBeforeRender(v,W,le,M),g=H.get(W,w.length),g.init(),w.push(g),V.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),Q.setFromProjectionMatrix(V),_e=this.localClippingEnabled,ee=B.init(this.clippingPlanes,_e),m=De.get(W,_.length),m.init(),_.push(m),Ut(W,le,0,v.sortObjects),m.finish(),v.sortObjects===!0&&m.sort(K,X),ee===!0&&B.beginShadows();const be=g.state.shadowsArray;if(ge.render(be,W,le),ee===!0&&B.endShadows(),this.info.autoReset===!0&&this.info.reset(),we.render(m,W),g.setupLights(v.physicallyCorrectLights),le.isArrayCamera){const ce=le.cameras;for(let xe=0,ke=ce.length;xe<ke;xe++){const Xe=ce[xe];jt(m,W,Xe,Xe.viewport)}}else jt(m,W,le);M!==null&&(Ge.updateMultisampleRenderTarget(M),Ge.updateRenderTargetMipmap(M)),W.isScene===!0&&W.onAfterRender(v,W,le),C.resetDefaultState(),D=-1,P=null,w.pop(),w.length>0?g=w[w.length-1]:g=null,_.pop(),_.length>0?m=_[_.length-1]:m=null};function Ut(W,le,be,ce){if(W.visible===!1)return;if(W.layers.test(le.layers)){if(W.isGroup)be=W.renderOrder;else if(W.isLOD)W.autoUpdate===!0&&W.update(le);else if(W.isLight)g.pushLight(W),W.castShadow&&g.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||Q.intersectsSprite(W)){ce&&ie.setFromMatrixPosition(W.matrixWorld).applyMatrix4(V);const Xe=te.update(W),lt=W.material;lt.visible&&m.push(W,Xe,lt,be,ie.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(W.isSkinnedMesh&&W.skeleton.frame!==at.render.frame&&(W.skeleton.update(),W.skeleton.frame=at.render.frame),!W.frustumCulled||Q.intersectsObject(W))){ce&&ie.setFromMatrixPosition(W.matrixWorld).applyMatrix4(V);const Xe=te.update(W),lt=W.material;if(Array.isArray(lt)){const it=Xe.groups;for(let pt=0,mt=it.length;pt<mt;pt++){const rt=it[pt],wt=lt[rt.materialIndex];wt&&wt.visible&&m.push(W,Xe,wt,be,ie.z,rt)}}else lt.visible&&m.push(W,Xe,lt,be,ie.z,null)}}const ke=W.children;for(let Xe=0,lt=ke.length;Xe<lt;Xe++)Ut(ke[Xe],le,be,ce)}function jt(W,le,be,ce){const xe=W.opaque,ke=W.transmissive,Xe=W.transparent;g.setupLightsView(be),ee===!0&&B.setGlobalState(v.clippingPlanes,be),ke.length>0&&Ji(xe,le,be),ce&&Ve.viewport(z.copy(ce)),xe.length>0&&Ke(xe,le,be),ke.length>0&&Ke(ke,le,be),Xe.length>0&&Ke(Xe,le,be),Ve.buffers.depth.setTest(!0),Ve.buffers.depth.setMask(!0),Ve.buffers.color.setMask(!0),Ve.setPolygonOffset(!1)}function Ji(W,le,be){const ce=Fe.isWebGL2;G===null&&(G=new Co(1,1,{generateMipmaps:!0,type:He.has("EXT_color_buffer_half_float")?jc:Eo,minFilter:Wc,samples:ce&&o===!0?4:0})),v.getDrawingBufferSize(q),ce?G.setSize(q.x,q.y):G.setSize(I_(q.x),I_(q.y));const xe=v.getRenderTarget();v.setRenderTarget(G),v.clear();const ke=v.toneMapping;v.toneMapping=Ls,Ke(W,le,be),v.toneMapping=ke,Ge.updateMultisampleRenderTarget(G),Ge.updateRenderTargetMipmap(G),v.setRenderTarget(xe)}function Ke(W,le,be){const ce=le.isScene===!0?le.overrideMaterial:null;for(let xe=0,ke=W.length;xe<ke;xe++){const Xe=W[xe],lt=Xe.object,it=Xe.geometry,pt=ce===null?Xe.material:ce,mt=Xe.group;lt.layers.test(be.layers)&&Qe(lt,le,be,it,pt,mt)}}function Qe(W,le,be,ce,xe,ke){W.onBeforeRender(v,le,be,ce,xe,ke),W.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),xe.onBeforeRender(v,le,be,ce,W,ke),xe.transparent===!0&&xe.side===va&&xe.forceSinglePass===!1?(xe.side=rr,xe.needsUpdate=!0,v.renderBufferDirect(be,le,ce,xe,W,ke),xe.side=Ca,xe.needsUpdate=!0,v.renderBufferDirect(be,le,ce,xe,W,ke),xe.side=va):v.renderBufferDirect(be,le,ce,xe,W,ke),W.onAfterRender(v,le,be,ce,xe,ke)}function gt(W,le,be){le.isScene!==!0&&(le=me);const ce=et.get(W),xe=g.state.lights,ke=g.state.shadowsArray,Xe=xe.state.version,lt=oe.getParameters(W,xe.state,ke,le,be),it=oe.getProgramCacheKey(lt);let pt=ce.programs;ce.environment=W.isMeshStandardMaterial?le.environment:null,ce.fog=le.fog,ce.envMap=(W.isMeshStandardMaterial?Ct:ht).get(W.envMap||ce.environment),pt===void 0&&(W.addEventListener("dispose",tt),pt=new Map,ce.programs=pt);let mt=pt.get(it);if(mt!==void 0){if(ce.currentProgram===mt&&ce.lightsStateVersion===Xe)return qe(W,lt),mt}else lt.uniforms=oe.getUniforms(W),W.onBuild(be,lt,v),W.onBeforeCompile(lt,v),mt=oe.acquireProgram(lt,it),pt.set(it,mt),ce.uniforms=lt.uniforms;const rt=ce.uniforms;(!W.isShaderMaterial&&!W.isRawShaderMaterial||W.clipping===!0)&&(rt.clippingPlanes=B.uniform),qe(W,lt),ce.needsLights=ft(W),ce.lightsStateVersion=Xe,ce.needsLights&&(rt.ambientLightColor.value=xe.state.ambient,rt.lightProbe.value=xe.state.probe,rt.directionalLights.value=xe.state.directional,rt.directionalLightShadows.value=xe.state.directionalShadow,rt.spotLights.value=xe.state.spot,rt.spotLightShadows.value=xe.state.spotShadow,rt.rectAreaLights.value=xe.state.rectArea,rt.ltc_1.value=xe.state.rectAreaLTC1,rt.ltc_2.value=xe.state.rectAreaLTC2,rt.pointLights.value=xe.state.point,rt.pointLightShadows.value=xe.state.pointShadow,rt.hemisphereLights.value=xe.state.hemi,rt.directionalShadowMap.value=xe.state.directionalShadowMap,rt.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,rt.spotShadowMap.value=xe.state.spotShadowMap,rt.spotLightMatrix.value=xe.state.spotLightMatrix,rt.spotLightMap.value=xe.state.spotLightMap,rt.pointShadowMap.value=xe.state.pointShadowMap,rt.pointShadowMatrix.value=xe.state.pointShadowMatrix);const wt=mt.getUniforms(),Dt=hd.seqWithValue(wt.seq,rt);return ce.currentProgram=mt,ce.uniformsList=Dt,mt}function qe(W,le){const be=et.get(W);be.outputEncoding=le.outputEncoding,be.instancing=le.instancing,be.skinning=le.skinning,be.morphTargets=le.morphTargets,be.morphNormals=le.morphNormals,be.morphColors=le.morphColors,be.morphTargetsCount=le.morphTargetsCount,be.numClippingPlanes=le.numClippingPlanes,be.numIntersection=le.numClipIntersection,be.vertexAlphas=le.vertexAlphas,be.vertexTangents=le.vertexTangents,be.toneMapping=le.toneMapping}function dt(W,le,be,ce,xe){le.isScene!==!0&&(le=me),Ge.resetTextureUnits();const ke=le.fog,Xe=ce.isMeshStandardMaterial?le.environment:null,lt=M===null?v.outputEncoding:M.isXRRenderTarget===!0?M.texture.encoding:Mo,it=(ce.isMeshStandardMaterial?Ct:ht).get(ce.envMap||Xe),pt=ce.vertexColors===!0&&!!be.attributes.color&&be.attributes.color.itemSize===4,mt=!!ce.normalMap&&!!be.attributes.tangent,rt=!!be.morphAttributes.position,wt=!!be.morphAttributes.normal,Dt=!!be.morphAttributes.color,ri=ce.toneMapped?v.toneMapping:Ls,zi=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,_t=zi!==void 0?zi.length:0,Ze=et.get(ce),Wi=g.state.lights;if(ee===!0&&(_e===!0||W!==P)){const Ii=W===P&&ce.id===D;B.setState(ce,W,Ii)}let ei=!1;ce.version===Ze.__version?(Ze.needsLights&&Ze.lightsStateVersion!==Wi.state.version||Ze.outputEncoding!==lt||xe.isInstancedMesh&&Ze.instancing===!1||!xe.isInstancedMesh&&Ze.instancing===!0||xe.isSkinnedMesh&&Ze.skinning===!1||!xe.isSkinnedMesh&&Ze.skinning===!0||Ze.envMap!==it||ce.fog===!0&&Ze.fog!==ke||Ze.numClippingPlanes!==void 0&&(Ze.numClippingPlanes!==B.numPlanes||Ze.numIntersection!==B.numIntersection)||Ze.vertexAlphas!==pt||Ze.vertexTangents!==mt||Ze.morphTargets!==rt||Ze.morphNormals!==wt||Ze.morphColors!==Dt||Ze.toneMapping!==ri||Fe.isWebGL2===!0&&Ze.morphTargetsCount!==_t)&&(ei=!0):(ei=!0,Ze.__version=ce.version);let Ni=Ze.currentProgram;ei===!0&&(Ni=gt(ce,le,xe));let ln=!1,Bi=!1,ur=!1;const oi=Ni.getUniforms(),Fi=Ze.uniforms;if(Ve.useProgram(Ni.program)&&(ln=!0,Bi=!0,ur=!0),ce.id!==D&&(D=ce.id,Bi=!0),ln||P!==W){if(oi.setValue(ae,"projectionMatrix",W.projectionMatrix),Fe.logarithmicDepthBuffer&&oi.setValue(ae,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),P!==W&&(P=W,Bi=!0,ur=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){const Ii=oi.map.cameraPosition;Ii!==void 0&&Ii.setValue(ae,ie.setFromMatrixPosition(W.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&oi.setValue(ae,"isOrthographic",W.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||xe.isSkinnedMesh)&&oi.setValue(ae,"viewMatrix",W.matrixWorldInverse)}if(xe.isSkinnedMesh){oi.setOptional(ae,xe,"bindMatrix"),oi.setOptional(ae,xe,"bindMatrixInverse");const Ii=xe.skeleton;Ii&&(Fe.floatVertexTextures?(Ii.boneTexture===null&&Ii.computeBoneTexture(),oi.setValue(ae,"boneTexture",Ii.boneTexture,Ge),oi.setValue(ae,"boneTextureSize",Ii.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Bs=be.morphAttributes;if((Bs.position!==void 0||Bs.normal!==void 0||Bs.color!==void 0&&Fe.isWebGL2===!0)&&Ce.update(xe,be,ce,Ni),(Bi||Ze.receiveShadow!==xe.receiveShadow)&&(Ze.receiveShadow=xe.receiveShadow,oi.setValue(ae,"receiveShadow",xe.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(Fi.envMap.value=it,Fi.flipEnvMap.value=it.isCubeTexture&&it.isRenderTargetTexture===!1?-1:1),Bi&&(oi.setValue(ae,"toneMappingExposure",v.toneMappingExposure),Ze.needsLights&&st(Fi,ur),ke&&ce.fog===!0&&Ne.refreshFogUniforms(Fi,ke),Ne.refreshMaterialUniforms(Fi,ce,se,j,G),hd.upload(ae,Ze.uniformsList,Fi,Ge)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(hd.upload(ae,Ze.uniformsList,Fi,Ge),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&oi.setValue(ae,"center",xe.center),oi.setValue(ae,"modelViewMatrix",xe.modelViewMatrix),oi.setValue(ae,"normalMatrix",xe.normalMatrix),oi.setValue(ae,"modelMatrix",xe.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Ii=ce.uniformsGroups;for(let Bn=0,wn=Ii.length;Bn<wn;Bn++)if(Fe.isWebGL2){const lu=Ii[Bn];A.update(lu,Ni),A.bind(lu,Ni)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ni}function st(W,le){W.ambientLightColor.needsUpdate=le,W.lightProbe.needsUpdate=le,W.directionalLights.needsUpdate=le,W.directionalLightShadows.needsUpdate=le,W.pointLights.needsUpdate=le,W.pointLightShadows.needsUpdate=le,W.spotLights.needsUpdate=le,W.spotLightShadows.needsUpdate=le,W.rectAreaLights.needsUpdate=le,W.hemisphereLights.needsUpdate=le}function ft(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&W.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(W,le,be){et.get(W.texture).__webglTexture=le,et.get(W.depthTexture).__webglTexture=be;const ce=et.get(W);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=be===void 0,ce.__autoAllocateDepthBuffer||He.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(W,le){const be=et.get(W);be.__webglFramebuffer=le,be.__useDefaultFramebuffer=le===void 0},this.setRenderTarget=function(W,le=0,be=0){M=W,b=le,E=be;let ce=!0,xe=null,ke=!1,Xe=!1;if(W){const it=et.get(W);it.__useDefaultFramebuffer!==void 0?(Ve.bindFramebuffer(36160,null),ce=!1):it.__webglFramebuffer===void 0?Ge.setupRenderTarget(W):it.__hasExternalTextures&&Ge.rebindTextures(W,et.get(W.texture).__webglTexture,et.get(W.depthTexture).__webglTexture);const pt=W.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(Xe=!0);const mt=et.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(xe=mt[le],ke=!0):Fe.isWebGL2&&W.samples>0&&Ge.useMultisampledRTT(W)===!1?xe=et.get(W).__webglMultisampledFramebuffer:xe=mt,z.copy(W.viewport),O.copy(W.scissor),L=W.scissorTest}else z.copy(Z).multiplyScalar(se).floor(),O.copy(he).multiplyScalar(se).floor(),L=Y;if(Ve.bindFramebuffer(36160,xe)&&Fe.drawBuffers&&ce&&Ve.drawBuffers(W,xe),Ve.viewport(z),Ve.scissor(O),Ve.setScissorTest(L),ke){const it=et.get(W.texture);ae.framebufferTexture2D(36160,36064,34069+le,it.__webglTexture,be)}else if(Xe){const it=et.get(W.texture),pt=le||0;ae.framebufferTextureLayer(36160,36064,it.__webglTexture,be||0,pt)}D=-1},this.readRenderTargetPixels=function(W,le,be,ce,xe,ke,Xe){if(!(W&&W.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=et.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&Xe!==void 0&&(lt=lt[Xe]),lt){Ve.bindFramebuffer(36160,lt);try{const it=W.texture,pt=it.format,mt=it.type;if(pt!==Br&&Ie.convert(pt)!==ae.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const rt=mt===jc&&(He.has("EXT_color_buffer_half_float")||Fe.isWebGL2&&He.has("EXT_color_buffer_float"));if(mt!==Eo&&Ie.convert(mt)!==ae.getParameter(35738)&&!(mt===lo&&(Fe.isWebGL2||He.has("OES_texture_float")||He.has("WEBGL_color_buffer_float")))&&!rt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}le>=0&&le<=W.width-ce&&be>=0&&be<=W.height-xe&&ae.readPixels(le,be,ce,xe,Ie.convert(pt),Ie.convert(mt),ke)}finally{const it=M!==null?et.get(M).__webglFramebuffer:null;Ve.bindFramebuffer(36160,it)}}},this.copyFramebufferToTexture=function(W,le,be=0){const ce=Math.pow(2,-be),xe=Math.floor(le.image.width*ce),ke=Math.floor(le.image.height*ce);Ge.setTexture2D(le,0),ae.copyTexSubImage2D(3553,be,0,0,W.x,W.y,xe,ke),Ve.unbindTexture()},this.copyTextureToTexture=function(W,le,be,ce=0){const xe=le.image.width,ke=le.image.height,Xe=Ie.convert(be.format),lt=Ie.convert(be.type);Ge.setTexture2D(be,0),ae.pixelStorei(37440,be.flipY),ae.pixelStorei(37441,be.premultiplyAlpha),ae.pixelStorei(3317,be.unpackAlignment),le.isDataTexture?ae.texSubImage2D(3553,ce,W.x,W.y,xe,ke,Xe,lt,le.image.data):le.isCompressedTexture?ae.compressedTexSubImage2D(3553,ce,W.x,W.y,le.mipmaps[0].width,le.mipmaps[0].height,Xe,le.mipmaps[0].data):ae.texSubImage2D(3553,ce,W.x,W.y,Xe,lt,le.image),ce===0&&be.generateMipmaps&&ae.generateMipmap(3553),Ve.unbindTexture()},this.copyTextureToTexture3D=function(W,le,be,ce,xe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ke=W.max.x-W.min.x+1,Xe=W.max.y-W.min.y+1,lt=W.max.z-W.min.z+1,it=Ie.convert(ce.format),pt=Ie.convert(ce.type);let mt;if(ce.isData3DTexture)Ge.setTexture3D(ce,0),mt=32879;else if(ce.isDataArrayTexture)Ge.setTexture2DArray(ce,0),mt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ae.pixelStorei(37440,ce.flipY),ae.pixelStorei(37441,ce.premultiplyAlpha),ae.pixelStorei(3317,ce.unpackAlignment);const rt=ae.getParameter(3314),wt=ae.getParameter(32878),Dt=ae.getParameter(3316),ri=ae.getParameter(3315),zi=ae.getParameter(32877),_t=be.isCompressedTexture?be.mipmaps[0]:be.image;ae.pixelStorei(3314,_t.width),ae.pixelStorei(32878,_t.height),ae.pixelStorei(3316,W.min.x),ae.pixelStorei(3315,W.min.y),ae.pixelStorei(32877,W.min.z),be.isDataTexture||be.isData3DTexture?ae.texSubImage3D(mt,xe,le.x,le.y,le.z,ke,Xe,lt,it,pt,_t.data):be.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ae.compressedTexSubImage3D(mt,xe,le.x,le.y,le.z,ke,Xe,lt,it,_t.data)):ae.texSubImage3D(mt,xe,le.x,le.y,le.z,ke,Xe,lt,it,pt,_t),ae.pixelStorei(3314,rt),ae.pixelStorei(32878,wt),ae.pixelStorei(3316,Dt),ae.pixelStorei(3315,ri),ae.pixelStorei(32877,zi),xe===0&&ce.generateMipmaps&&ae.generateMipmap(mt),Ve.unbindTexture()},this.initTexture=function(W){W.isCubeTexture?Ge.setTextureCube(W,0):W.isData3DTexture?Ge.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?Ge.setTexture2DArray(W,0):Ge.setTexture2D(W,0),Ve.unbindTexture()},this.resetState=function(){b=0,E=0,M=null,Ve.reset(),C.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class jO extends $1{}jO.prototype.isWebGL1Renderer=!0;class qO extends sr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Zf extends xn{constructor(e,t,i,n,o,s,c,u,h){super(e,t,i,n,o,s,c,u,h),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:ui,this.magFilter=o!==void 0?o:ui,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}const Rb={enabled:!1,files:{},add:function(l,e){this.enabled!==!1&&(this.files[l]=e)},get:function(l){if(this.enabled!==!1)return this.files[l]},remove:function(l){delete this.files[l]},clear:function(){this.files={}}};class XO{constructor(e,t,i){const n=this;let o=!1,s=0,c=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){c++,o===!1&&n.onStart!==void 0&&n.onStart(d,s,c),o=!0},this.itemEnd=function(d){s++,n.onProgress!==void 0&&n.onProgress(d,s,c),s===c&&(o=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(d){n.onError!==void 0&&n.onError(d)},this.resolveURL=function(d){return u?u(d):d},this.setURLModifier=function(d){return u=d,this},this.addHandler=function(d,m){return h.push(d,m),this},this.removeHandler=function(d){const m=h.indexOf(d);return m!==-1&&h.splice(m,2),this},this.getHandler=function(d){for(let m=0,g=h.length;m<g;m+=2){const _=h[m],w=h[m+1];if(_.global&&(_.lastIndex=0),_.test(d))return w}return null}}}const YO=new XO;class eE{constructor(e){this.manager=e!==void 0?e:YO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(n,o){i.load(e,n,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}class ZO extends eE{constructor(e){super(e)}load(e,t,i,n){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Rb.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const c=Xc("img");function u(){d(),Rb.add(e,this),t&&t(this),o.manager.itemEnd(e)}function h(m){d(),n&&n(m),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){c.removeEventListener("load",u,!1),c.removeEventListener("error",h,!1)}return c.addEventListener("load",u,!1),c.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),o.manager.itemStart(e),c.src=e,c}}class KO extends eE{constructor(e){super(e)}load(e,t,i,n){const o=new xn,s=new ZO(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(c){o.image=c,o.needsUpdate=!0,t!==void 0&&t(o)},i,n),o}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:E0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=E0);function QO(l){function e(){for(var ee=0;ee<arguments.length;ee++)if(arguments[ee]!==void 0)return arguments[ee]}console.log("%c Hover effect by Robin Delaporte: https://github.com/robin-dela/hover-effect ","color: #bada55; font-size: 0.8rem");var t=l.parent,i=l.displacementImage,n=l.image1,o=l.image2,s=e(l.imagesRatio,1),c=e(l.intensity1,l.intensity,1),u=e(l.intensity2,l.intensity,1),h=e(l.angle,Math.PI/4),d=e(l.angle1,h),m=e(l.angle2,3*-h),g=e(l.speedIn,l.speed,1.6),_=e(l.speedOut,l.speed,1.2),w=e(l.hover,!0),v=e(l.easing,"expo.out"),x=e(l.video,!1);if(t)if(n&&o&&i){var b=new qO,E=new Y1(t.offsetWidth/-2,t.offsetWidth/2,t.offsetHeight/2,t.offsetHeight/-2,1,1e3);E.position.z=1;var M=new $1({antialias:!1,alpha:!0});M.setPixelRatio(2),M.setClearColor(16777215,0),M.setSize(t.offsetWidth,t.offsetHeight),t.appendChild(M.domElement);var D=function(){M.render(b,E)},P=new KO;P.crossOrigin="";var z,O,L=P.load(i,D);if(L.magFilter=L.minFilter=ui,x){(function ee(){requestAnimationFrame(ee),M.render(b,E)})(),(x=document.createElement("video")).autoplay=!0,x.loop=!0,x.muted=!0,x.src=n,x.load();var N=document.createElement("video");N.autoplay=!0,N.loop=!0,N.muted=!0,N.src=o,N.load();var j=new Zf(x),se=new Zf(N);j.magFilter=se.magFilter=ui,j.minFilter=se.minFilter=ui,N.addEventListener("loadeddata",function(){N.play(),(se=new Zf(N)).magFilter=ui,se.minFilter=ui,X.uniforms.texture2.value=se},!1),x.addEventListener("loadeddata",function(){x.play(),(j=new Zf(x)).magFilter=ui,j.minFilter=ui,X.uniforms.texture1.value=j},!1)}else j=P.load(n,D),se=P.load(o,D),j.magFilter=se.magFilter=ui,j.minFilter=se.minFilter=ui;var K=s;t.offsetHeight/t.offsetWidth<K?(z=1,O=t.offsetHeight/t.offsetWidth/K):(z=t.offsetWidth/t.offsetHeight*K,O=1);var X=new Ra({uniforms:{intensity1:{type:"f",value:c},intensity2:{type:"f",value:u},dispFactor:{type:"f",value:0},angle1:{type:"f",value:d},angle2:{type:"f",value:m},texture1:{type:"t",value:j},texture2:{type:"t",value:se},disp:{type:"t",value:L},res:{type:"vec4",value:new Pi(t.offsetWidth,t.offsetHeight,z,O)},dpr:{type:"f",value:window.devicePixelRatio}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,fragmentShader:`
varying vec2 vUv;

uniform float dispFactor;
uniform float dpr;
uniform sampler2D disp;

uniform sampler2D texture1;
uniform sampler2D texture2;
uniform float angle1;
uniform float angle2;
uniform float intensity1;
uniform float intensity2;
uniform vec4 res;
uniform vec2 parent;

mat2 getRotM(float angle) {
  float s = sin(angle);
  float c = cos(angle);
  return mat2(c, -s, s, c);
}

void main() {
  vec4 disp = texture2D(disp, vUv);
  vec2 dispVec = vec2(disp.r, disp.g);

  vec2 uv = 0.5 * gl_FragCoord.xy / (res.xy) ;
  vec2 myUV = (uv - vec2(0.5))*res.zw + vec2(0.5);


  vec2 distortedPosition1 = myUV + getRotM(angle1) * dispVec * intensity1 * dispFactor;
  vec2 distortedPosition2 = myUV + getRotM(angle2) * dispVec * intensity2 * (1.0 - dispFactor);
  vec4 _texture1 = texture2D(texture1, distortedPosition1);
  vec4 _texture2 = texture2D(texture2, distortedPosition2);
  gl_FragColor = mix(_texture1, _texture2, dispFactor);
}
`,transparent:!0,opacity:1}),Z=new Xd(t.offsetWidth,t.offsetHeight,1),he=new Ds(Z,X);b.add(he),w&&(t.addEventListener("mouseenter",Y),t.addEventListener("touchstart",Y),t.addEventListener("mouseleave",Q),t.addEventListener("touchend",Q)),window.addEventListener("resize",function(ee){t.offsetHeight/t.offsetWidth<K?(z=1,O=t.offsetHeight/t.offsetWidth/K):(z=t.offsetWidth/t.offsetHeight*K,O=1),he.material.uniforms.res.value=new Pi(t.offsetWidth,t.offsetHeight,z,O),M.setSize(t.offsetWidth,t.offsetHeight),D()}),this.next=Y,this.previous=Q}else console.warn("One or more images are missing");else console.warn("Parent missing");function Y(){Mt.to(X.uniforms.dispFactor,{duration:g,value:1,ease:v,onUpdate:D,onComplete:D})}function Q(){Mt.to(X.uniforms.dispFactor,{duration:_,value:0,ease:v,onUpdate:D,onComplete:D})}}function JO({reducedMotion:l}){const e=kt.useRef(null),t=kt.useRef(null);return kt.useEffect(()=>{const i=e.current;if(!(l||!i))return t.current=new QO({parent:i,intensity:.14,speedIn:.6,speedOut:.6,easing:"power2.out",hover:!1,image1:"/DH6034/media/hero.jpg",image2:"/DH6034/media/hero.jpg",displacementImage:"/DH6034/media/liquid-displacement.svg"}),()=>{i.innerHTML="",t.current=null}},[l]),l?pe.jsx("div",{className:"hero-static hero-cover-fallback","aria-hidden":"true"}):pe.jsxs(pe.Fragment,{children:[pe.jsx("div",{className:"hero-static hero-cover-fallback","aria-hidden":"true"}),pe.jsx("div",{className:"hero-canvas hero-liquid",ref:e,"aria-hidden":"true"})]})}var fd={exports:{}},$O=fd.exports,Ab;function ez(){return Ab||(Ab=1,(function(l){function e(t){return new e.Viewer(t)}(function(t){t.version={versionStr:"6.0.1",major:parseInt("6",10),minor:parseInt("0",10),revision:parseInt("1",10)};const i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object HTMLUnknownElement]":"dom-node","[object HTMLImageElement]":"image","[object HTMLCanvasElement]":"canvas","[object CanvasRenderingContext2D]":"context2d"},n=Object.prototype.toString,o=Object.prototype.hasOwnProperty;t.isFunction=function(s){return t.type(s)==="function"},t.isArray=Array.isArray||function(s){return t.type(s)==="array"},t.isWindow=function(s){return s&&typeof s=="object"&&"setInterval"in s},t.type=function(s){return s==null?String(s):i[n.call(s)]||"object"},t.isPlainObject=function(s){if(!s||e.type(s)!=="object"||s.nodeType||t.isWindow(s)||s.constructor&&!o.call(s,"constructor")&&!o.call(s.constructor.prototype,"isPrototypeOf"))return!1;let c;for(const u in s)c=u;return c===void 0||o.call(s,c)},t.isEmptyObject=function(s){for(const c in s)return!1;return!0},t.freezeObject=function(s){return Object.freeze?t.freezeObject=Object.freeze:t.freezeObject=function(c){return c},t.freezeObject(s)},t.supportsCanvas=(function(){const s=document.createElement("canvas");return!!(t.isFunction(s.getContext)&&s.getContext("2d"))})(),t.isCanvasTainted=function(s){let c=!1;try{s.getContext("2d").getImageData(0,0,1,1)}catch{c=!0}return c},t.supportsAddEventListener=(function(){return!!(document.documentElement.addEventListener&&document.addEventListener)})(),t.supportsRemoveEventListener=(function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)})(),t.supportsEventListenerOptions=(function(){let s=0;if(t.supportsAddEventListener)try{const c={get capture(){return s++,!1},get once(){return s++,!1},get passive(){return s++,!1}};window.addEventListener("test",null,c),window.removeEventListener("test",null,c)}catch{s=0}return s>=3})(),t.supportsAsync=!0,t.getCurrentPixelDensityRatio=function(){if(t.supportsCanvas){const s=document.createElement("canvas").getContext("2d"),c=window.devicePixelRatio||1,u=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1;return Math.max(c,1)/u}else return 1},t.pixelDensityRatio=t.getCurrentPixelDensityRatio()})(e),(function(t){t.extend=function(){let u,h,d,m,g,_,w=arguments[0]||{};const v=arguments.length;let x=!1,b=1;for(typeof w=="boolean"&&(x=w,w=arguments[1]||{},b=2),typeof w!="object"&&!e.isFunction(w)&&(w={}),v===b&&(w=this,--b);b<v;b++)if(u=arguments[b],u!==null||u!==void 0)for(h in u){const E=Object.getOwnPropertyDescriptor(u,h);if(E!==void 0){if(E.get||E.set){Object.defineProperty(w,h,E);continue}m=E.value}else{t.console.warn('Could not copy inherited property "'+h+'".');continue}w!==m&&(x&&m&&(e.isPlainObject(m)||(g=e.isArray(m)))?(d=w[h],g?(g=!1,_=d&&e.isArray(d)?d:[]):_=d&&e.isPlainObject(d)?d:{},w[h]=e.extend(x,_,m)):m!==void 0&&(w[h]=m))}return w};const i=function(){if(typeof navigator!="object")return!1;const u=navigator.userAgent;return typeof u!="string"?!1:u.indexOf("iPhone")!==-1||u.indexOf("iPad")!==-1||u.indexOf("iPod")!==-1};t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,callTileLoadedWithCachedData:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,loadDestinationTilesOnAnimation:!0,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:i(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,maxTilesPerFrame:1,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,keyboardNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,overlayPreserveContentDirection:!0,opacity:1,compositeOperation:null,drawer:["auto","webgl","canvas","html"],drawerOptions:{},preload:!1,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},delegate:function(u,h){return function(){let d=arguments;return d===void 0&&(d=[]),h.apply(u,d)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(u){return t._viewers.get(this.getElement(u))},getElement:function(u){return typeof u=="string"&&(u=document.getElementById(u)),u},getElementPosition:function(u){let h=new t.Point,d,m;for(u=t.getElement(u),d=t.getElementStyle(u).position==="fixed",m=c(u,d);m;)h.x+=u.offsetLeft,h.y+=u.offsetTop,d&&(h=h.plus(t.getPageScroll())),u=m,d=t.getElementStyle(u).position==="fixed",m=c(u,d);return h},getElementOffset:function(u){u=t.getElement(u);const h=u&&u.ownerDocument;let d={top:0,left:0};if(!h)return new t.Point;const m=h.documentElement;typeof u.getBoundingClientRect<"u"&&(d=u.getBoundingClientRect());const g=h===h.window?h:h.nodeType===9?h.defaultView||h.parentWindow:!1;return new t.Point(d.left+(g.pageXOffset||m.scrollLeft)-(m.clientLeft||0),d.top+(g.pageYOffset||m.scrollTop)-(m.clientTop||0))},getElementSize:function(u){return u=t.getElement(u),new t.Point(u.clientWidth,u.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(u){return u=t.getElement(u),u.currentStyle}:function(u){return u=t.getElement(u),window.getComputedStyle(u,"")},getCssPropertyWithVendorPrefix:function(u){const h={};return t.getCssPropertyWithVendorPrefix=function(d){if(h[d]!==void 0)return h[d];const m=document.createElement("div").style;let g=null;if(m[d]!==void 0)g=d;else{const _=["Webkit","Moz","MS","O","webkit","moz","ms","o"],w=t.capitalizeFirstLetter(d);for(let v=0;v<_.length;v++){const x=_[v]+w;if(m[x]!==void 0){g=x;break}}}return h[d]=g,g},t.getCssPropertyWithVendorPrefix(u)},capitalizeFirstLetter:function(u){return u.charAt(0).toUpperCase()+u.slice(1)},positiveModulo:function(u,h){let d=u%h;return d<0&&(d+=h),d},pointInElement:function(u,h){u=t.getElement(u);const d=t.getElementOffset(u),m=t.getElementSize(u);return h.x>=d.x&&h.x<d.x+m.x&&h.y<d.y+m.y&&h.y>=d.y},getMousePosition:function(u){if(typeof u.pageX=="number")t.getMousePosition=function(h){const d=new t.Point;return d.x=h.pageX,d.y=h.pageY,d};else if(typeof u.clientX=="number")t.getMousePosition=function(h){const d=new t.Point;return d.x=h.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,d.y=h.clientY+document.body.scrollTop+document.documentElement.scrollTop,d};else throw new Error("Unknown event mouse position, no known technique.");return t.getMousePosition(u)},getPageScroll:function(){const u=document.documentElement||{},h=document.body||{};if(typeof window.pageXOffset=="number")t.getPageScroll=function(){return new t.Point(window.pageXOffset,window.pageYOffset)};else if(h.scrollLeft||h.scrollTop)t.getPageScroll=function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)};else if(u.scrollLeft||u.scrollTop)t.getPageScroll=function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new t.Point(0,0);return t.getPageScroll()},setPageScroll:function(u){if(typeof window.scrollTo<"u")t.setPageScroll=function(h){window.scrollTo(h.x,h.y)};else{const h=t.getPageScroll();if(h.x===u.x&&h.y===u.y)return;document.body.scrollLeft=u.x,document.body.scrollTop=u.y;let d=t.getPageScroll();if(d.x!==h.x&&d.y!==h.y){t.setPageScroll=function(m){document.body.scrollLeft=m.x,document.body.scrollTop=m.y};return}if(document.documentElement.scrollLeft=u.x,document.documentElement.scrollTop=u.y,d=t.getPageScroll(),d.x!==h.x&&d.y!==h.y){t.setPageScroll=function(m){document.documentElement.scrollLeft=m.x,document.documentElement.scrollTop=m.y};return}t.setPageScroll=function(m){}}t.setPageScroll(u)},getWindowSize:function(){const u=document.documentElement||{},h=document.body||{};if(typeof window.innerWidth=="number")t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(u.clientWidth||u.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(h.clientWidth||h.clientHeight)t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return t.getWindowSize()},makeCenteredNode:function(u){u=t.getElement(u);const h=[t.makeNeutralElement("div"),t.makeNeutralElement("div"),t.makeNeutralElement("div")];return t.extend(h[0].style,{display:"table",height:"100%",width:"100%"}),t.extend(h[1].style,{display:"table-row"}),t.extend(h[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),h[0].appendChild(h[1]),h[1].appendChild(h[2]),h[2].appendChild(u),h[0]},trace:function(u,h=!1){this.__traceLogs=[],setInterval(()=>{this.__traceLogs.length&&(console.log(this.__traceLogs.join(`
`)),this.__traceLogs=[])},2e3),this.trace=function(d,m=!1){if(typeof d=="string"){this.__traceLogs.push(d),m&&this.__traceLogs.push(...new Error().stack.split(`
`).slice(1));return}d instanceof e.Tile&&(d=d.getCache(d.originalCacheKey));const g=d._tiles[0];this.__traceLogs.push(`Cache ${g.toString()} loaded ${g.loaded} loading ${g.loading} cacheCount ${Object.keys(g._caches).length} - CACHE ${d.__invStamp}`),m&&this.__traceLogs.push(...new Error().stack.split(`
`).slice(1))},this.trace(u,h)},makeNeutralElement:function(u){const h=document.createElement(u),d=h.style;return d.background="transparent none",d.border="none",d.margin="0px",d.padding="0px",d.position="static",h},now:function(){return Date.now?t.now=Date.now:t.now=function(){return new Date().getTime()},t.now()},makeTransparentImage:function(u){const h=t.makeNeutralElement("img");return h.src=u,h},setElementOpacity:function(u,h,d){let m,g;u=t.getElement(u),d&&!t.Browser.alpha&&(h=Math.round(h)),t.Browser.opacity?u.style.opacity=h<1?h:"":h<1?(m=Math.round(100*h),g="alpha(opacity="+m+")",u.style.filter=g):u.style.filter=""},setElementTouchActionNone:function(u){u=t.getElement(u),typeof u.style.touchAction<"u"?u.style.touchAction="none":typeof u.style.msTouchAction<"u"&&(u.style.msTouchAction="none")},setElementPointerEvents:function(u,h){u=t.getElement(u),typeof u.style<"u"&&typeof u.style.pointerEvents<"u"&&(u.style.pointerEvents=h)},setElementPointerEventsNone:function(u){t.setElementPointerEvents(u,"none")},addClass:function(u,h){u=t.getElement(u),u.className?(" "+u.className+" ").indexOf(" "+h+" ")===-1&&(u.className+=" "+h):u.className=h},indexOf:function(u,h,d){return Array.prototype.indexOf?this.indexOf=function(m,g,_){return m.indexOf(g,_)}:this.indexOf=function(m,g,_){let w=_||0;if(!m)throw new TypeError;const v=m.length;if(v===0||w>=v)return-1;w<0&&(w=v-Math.abs(w));for(let x=w;x<v;x++)if(m[x]===g)return x;return-1},this.indexOf(u,h,d)},removeClass:function(u,h){const d=[];u=t.getElement(u);const m=u.className.split(/\s+/);for(let g=0;g<m.length;g++)m[g]&&m[g]!==h&&d.push(m[g]);u.className=d.join(" ")},normalizeEventListenerOptions:function(u){let h;return typeof u<"u"?typeof u=="boolean"?h=t.supportsEventListenerOptions?{capture:u}:u:h=t.supportsEventListenerOptions?u:typeof u.capture<"u"?u.capture:!1:h=t.supportsEventListenerOptions?{capture:!1}:!1,h},addEvent:(function(){if(t.supportsAddEventListener)return function(u,h,d,m){m=t.normalizeEventListenerOptions(m),u=t.getElement(u),u.addEventListener(h,d,m)};if(document.documentElement.attachEvent&&document.attachEvent)return function(u,h,d){u=t.getElement(u),u.attachEvent("on"+h,d)};throw new Error("No known event model.")})(),removeEvent:(function(){if(t.supportsRemoveEventListener)return function(u,h,d,m){m=t.normalizeEventListenerOptions(m),u=t.getElement(u),u.removeEventListener(h,d,m)};if(document.documentElement.detachEvent&&document.detachEvent)return function(u,h,d){u=t.getElement(u),u.detachEvent("on"+h,d)};throw new Error("No known event model.")})(),cancelEvent:function(u){u.preventDefault()},eventIsCanceled:function(u){return u.defaultPrevented},stopEvent:function(u){u.stopPropagation()},getUrlParameter:function(u){const h=s[u];return h||null},getUrlProtocol:function(u){const h=u.match(/^([a-z]+:)\/\//i);return h===null?window.location.protocol:h[1].toLowerCase()},createAjaxRequest:function(){if(window.XMLHttpRequest)return t.createAjaxRequest=function(){return new XMLHttpRequest},new XMLHttpRequest;throw new Error("Browser doesn't support XMLHttpRequest.")},makeAjaxRequest:function(u,h,d){let m,g,_,w;t.isPlainObject(u)?(h=u.success,d=u.error,m=u.withCredentials,g=u.headers,_=u.responseType||null,w=u.postData||null,u=u.url):t.console.warn("OpenSeadragon.makeAjaxRequest() deprecated usage!");const v=t.getUrlProtocol(u),x=t.createAjaxRequest();if(!t.isFunction(h))throw new Error("makeAjaxRequest requires a success callback");x.onreadystatechange=function(){x.readyState===4&&(x.onreadystatechange=function(){},x.status>=200&&x.status<300||x.status===0&&v!=="http:"&&v!=="https:"?h(x):t.isFunction(d)?d(x):t.console.error("AJAX request returned %d: %s",x.status,u))};const b=w?"POST":"GET";try{if(x.open(b,u,!0),_&&(x.responseType=_),g)for(const E in g)Object.prototype.hasOwnProperty.call(g,E)&&g[E]&&x.setRequestHeader(E,g[E]);m&&(x.withCredentials=!0),x.send(w)}catch(E){t.console.error("%s while making AJAX request: %s",E.name,E.message),x.onreadystatechange=function(){},t.isFunction(d)&&d(x,E)}return x},jsonp:function(u){let h,d=u.url;const m=document.head||document.getElementsByTagName("head")[0]||document.documentElement,g=u.callbackName||"openseadragon"+t.now(),_=window[g],w="$1"+g+"$2",v=u.param||"callback",x=u.callback;d=d.replace(/(=)\?(&|$)|\?\?/i,w),d+=(/\?/.test(d)?"&":"?")+v+"="+g,window[g]=function(b){if(_)window[g]=_;else try{delete window[g]}catch{}x&&t.isFunction(x)&&x(b)},h=document.createElement("script"),(u.async!==void 0||u.async!==!1)&&(h.async="async"),u.scriptCharset&&(h.charset=u.scriptCharset),h.src=d,h.onload=h.onreadystatechange=function(b,E){(E||!h.readyState||/loaded|complete/.test(h.readyState))&&(h.onload=h.onreadystatechange=null,m&&h.parentNode&&m.removeChild(h),h=void 0)},m.insertBefore(h,m.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(u){if(window.DOMParser)t.parseXml=function(h){let d=null;return d=new DOMParser().parseFromString(h,"text/xml"),d};else throw new Error("Browser doesn't support XML DOM.");return t.parseXml(u)},parseJSON:function(u){return t.parseJSON=window.JSON.parse,t.parseJSON(u)},imageFormatSupported:function(u){return u=u||"",!!o[u.toLowerCase()]},setImageFormatsSupported:function(u){t.extend(o,u)}});const n=function(u){};t.console=window.console||{log:n,debug:n,info:n,warn:n,error:n,assert:n},t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};const o={avif:!0,bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1,webp:!0},s={};(function(){const u=navigator.appVersion,h=navigator.userAgent;let d;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(h.substring(h.indexOf("MSIE")+5,h.indexOf(";",h.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(h.indexOf("Edge")>=0?(t.Browser.vendor=t.BROWSERS.EDGE,t.Browser.version=parseFloat(h.substring(h.indexOf("Edge")+5))):h.indexOf("Edg")>=0?(t.Browser.vendor=t.BROWSERS.CHROMEEDGE,t.Browser.version=parseFloat(h.substring(h.indexOf("Edg")+4))):h.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(h.substring(h.indexOf("Firefox")+8))):h.indexOf("Safari")>=0?(t.Browser.vendor=h.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(h.substring(h.substring(0,h.indexOf("Safari")).lastIndexOf("/")+1,h.indexOf("Safari")))):(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),d.exec(h)!==null&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(u);break}const g=window.location.search.substring(1).split("&");for(let _=0;_<g.length;_++){const w=g[_],v=w.indexOf("=");if(v>0){const x=w.substring(0,v),b=w.substring(v+1);try{s[x]=decodeURIComponent(b)}catch{t.console.error("Ignoring malformed URL parameter: %s=%s",x,b)}}}t.Browser.alpha=!(t.Browser.vendor===t.BROWSERS.CHROME&&t.Browser.version<2),t.Browser.opacity=!0,t.Browser.vendor===t.BROWSERS.IE&&t.console.error("Internet Explorer is not supported by OpenSeadragon")})(),(function(u){const h=u.requestAnimationFrame||u.mozRequestAnimationFrame||u.webkitRequestAnimationFrame||u.msRequestAnimationFrame,d=u.cancelAnimationFrame||u.mozCancelAnimationFrame||u.webkitCancelAnimationFrame||u.msCancelAnimationFrame;if(h&&d)t.requestAnimationFrame=function(){return h.apply(u,arguments)},t.cancelAnimationFrame=function(){return d.apply(u,arguments)};else{let m=[],g=[],_,w=0;t.requestAnimationFrame=function(v){return m.push([++w,v]),_||(_=setInterval(function(){if(m.length){const x=t.now(),b=g;for(g=m,m=b;g.length;)g.shift()[1](x)}else clearInterval(_),_=void 0},1e3/50)),w},t.cancelAnimationFrame=function(v){let x,b;for(x=0,b=m.length;x<b;x+=1)if(m[x][0]===v){m.splice(x,1);return}for(x=0,b=g.length;x<b;x+=1)if(g[x][0]===v){g.splice(x,1);return}}}})(window);function c(u,h){return h&&u!==document.body?document.body:u.offsetParent}t.Promise=window.Promise&&t.supportsAsync?window.Promise:class{constructor(u){this._error=!1,this.__value=void 0;try{u(h=>{for(;h instanceof t.Promise;)h=h._value;this._value=h},h=>{for(;h instanceof t.Promise;)h=h._value;this._value=h,this._error=!0})}catch(h){this._value=h,this._error=!0}}then(u){if(!this._error)try{this._value=u(this._value)}catch(h){this._value=h,this._error=!0}return this}catch(u){if(this._error)try{this._value=u(this._value),this._error=!1}catch(h){this._value=h,this._error=!0}return this}get _value(){return this.__value}set _value(u){u&&u.constructor===this.constructor&&(u=u._value),this.__value=u}static resolve(u){return new this(h=>h(u))}static reject(u){return new this((h,d)=>d(u))}static all(u){return new this(h=>h(u.map(d=>d())))}static race(u){return u.length<1?this.resolve():new this(h=>h(u[0]()))}}})(e),(function(t,i){l.exports?l.exports=i:(t||(t=typeof window=="object"&&window,t||i.console.error("OpenSeadragon must run in browser environment!")),t.OpenSeadragon=i)})($O,e),(function(t){class i{constructor(o){o||(o=[0,0,0,0,0,0,0,0,0]),this.values=o}static makeIdentity(){return new i([1,0,0,0,1,0,0,0,1])}static makeTranslation(o,s){return new i([1,0,0,0,1,0,o,s,1])}static makeRotation(o){const s=Math.cos(o),c=Math.sin(o);return new i([s,-c,0,c,s,0,0,0,1])}static makeScaling(o,s){return new i([o,0,0,0,s,0,0,0,1])}multiply(o){let s=this.values,c=o.values;const u=s[0],h=s[1],d=s[2],m=s[3],g=s[4],_=s[5],w=s[6],v=s[7],x=s[8],b=c[0],E=c[1],M=c[2],D=c[3],P=c[4],z=c[5],O=c[6],L=c[7],N=c[8];return new i([b*u+E*m+M*w,b*h+E*g+M*v,b*d+E*_+M*x,D*u+P*m+z*w,D*h+P*g+z*v,D*d+P*_+z*x,O*u+L*m+N*w,O*h+L*g+N*v,O*d+L*_+N*x])}setValues(o,s,c,u,h,d,m,g,_){this.values[0]=o,this.values[1]=s,this.values[2]=c,this.values[3]=u,this.values[4]=h,this.values[5]=d,this.values[6]=m,this.values[7]=g,this.values[8]=_}scaleAndTranslate(o,s,c,u){const h=this.values,d=h[0],m=h[1],g=h[2],_=h[3],w=h[4],v=h[5];return new i([o*d,o*m,o*g,s*_,s*w,s*v,c*d+u*_,c*m+u*w,c*g+u*v])}scaleAndTranslateSelf(o,s,c,u){const h=this.values,d=h[0],m=h[1],g=h[2],_=h[3],w=h[4],v=h[5];h[0]=o*d,h[1]=o*m,h[2]=o*g,h[3]=s*_,h[4]=s*w,h[5]=s*v,h[6]=c*d+u*_+h[6],h[7]=c*m+u*w+h[7],h[8]=c*g+u*v+h[8]}scaleAndTranslateOtherSetSelf(o){const s=o.values,c=this.values,u=c[0],h=c[4],d=c[6],m=c[7];c[0]=u*s[0],c[1]=u*s[1],c[2]=u*s[2],c[3]=h*s[3],c[4]=h*s[4],c[5]=h*s[5],c[6]=d*s[0]+m*s[3]+s[6],c[7]=d*s[1]+m*s[4]+s[7],c[8]=d*s[2]+m*s[5]+s[8]}}t.Mat3=i})(e),(function(t){const i={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.fullscreenElement},i.requestFullScreen=function(n){return n.requestFullscreen().catch(function(o){t.console.error("Fullscreen request failed: ",o)})},i.exitFullScreen=function(){document.exitFullscreen().catch(function(n){t.console.error("Error while exiting fullscreen: ",n)})},i.fullScreenEventName="fullscreenchange",i.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.msFullscreenElement},i.requestFullScreen=function(n){return n.msRequestFullscreen()},i.exitFullScreen=function(){document.msExitFullscreen()},i.fullScreenEventName="MSFullscreenChange",i.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitFullscreenElement},i.requestFullScreen=function(n){return n.webkitRequestFullscreen()},i.exitFullScreen=function(){document.webkitExitFullscreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},i.requestFullScreen=function(n){return n.webkitRequestFullScreen()},i.exitFullScreen=function(){document.webkitCancelFullScreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.mozFullScreenElement},i.requestFullScreen=function(n){return n.mozRequestFullScreen()},i.exitFullScreen=function(){document.mozCancelFullScreen()},i.fullScreenEventName="mozfullscreenchange",i.fullScreenErrorEventName="mozfullscreenerror"),i.isFullScreen=function(){return i.getFullScreenElement()!==null},i.cancelFullScreen=function(){t.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),i.exitFullScreen()},t.extend(t,i)})(e),(function(t){t.EventSource=function(){this.events={},this._rejectedEventList={}},t.EventSource.prototype={addOnceHandler:function(i,n,o,s,c){const u=this;s=s||1;let h=0;const d=function(m){return h++,h===s&&u.removeHandler(i,d),n(m)};return this.addHandler(i,d,o,c)},addHandler:function(i,n,o,s){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,i))return t.console.error(`Error adding handler for ${i}. ${this._rejectedEventList[i]}`),!1;let c=this.events[i];if(c||(this.events[i]=c=[]),n&&t.isFunction(n)){let u=c.length,h={handler:n,userData:o||null,priority:s||0};for(c[u]=h;u>0&&c[u-1].priority<c[u].priority;)c[u]=c[u-1],c[u-1]=h,u--}return!0},removeHandler:function(i,n){const o=this.events[i],s=[];if(o&&t.isArray(o)){for(let c=0;c<o.length;c++)o[c].handler!==n&&s.push(o[c]);this.events[i]=s}},numberOfHandlers:function(i){const n=this.events[i];return n?n.length:0},removeAllHandlers:function(i){if(i)this.events[i]=[];else for(let n in this.events)this.events[n]=[]},getHandler:function(i){let n=this.events[i];return!n||!n.length?null:(n=n.length===1?[n[0]]:Array.apply(null,n),function(o,s){let c=n.length;for(let u=0;u<c&&!(n[u]&&(s.eventSource=o,s.userData=n[u].userData,n[u].handler(s),s.stopPropagation&&(typeof s.stopPropagation!="function"||s.stopPropagation()===!0)));u++);})},getAwaitingHandler:function(i,n){let o=this.events[i];return!o||!o.length?null:(o=o.length===1?[o[0]]:Array.apply(null,o),function(s,c){return new t.Promise((u,h)=>{const d=o.length;function m(g){if(g>=d||!o[g])return u(n),null;c.eventSource=s,c.userData=o[g].userData;let _;try{_=o[g].handler(c)}catch(w){return h(w)}return _=!_||t.type(_)!=="promise"?t.Promise.resolve():_,_.then(()=>!c.stopPropagation||typeof c.stopPropagation=="function"&&c.stopPropagation()===!1?m(g+1):m(d))}m(0).catch(h)})})},raiseEvent:function(i,n){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,i))return t.console.error(`Error adding handler for ${i}. ${this._rejectedEventList[i]}`),!1;const o=this.getHandler(i);return o&&o(this,n||{}),!0},raiseEventAwaiting:function(i,n,o=null){const s=this.getAwaitingHandler(i,o);return s?s(this,n||{}):t.Promise.resolve(o)},rejectEventHandler(i,n=""){this._rejectedEventList[i]=n},allowEventHandler(i){delete this._rejectedEventList[i]}}})(e),(function(t){const i={};t.MouseTracker=function(C){const A=arguments;t.isPlainObject(C)||(C={element:A[0],clickTimeThreshold:A[1],clickDistThreshold:A[2]}),this.hash=Ie(),this.element=t.getElement(C.element),this.clickTimeThreshold=C.clickTimeThreshold||t.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=C.clickDistThreshold||t.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=C.dblClickTimeThreshold||t.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=C.dblClickDistThreshold||t.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=C.userData||null,this.stopDelay=C.stopDelay||50,this.preProcessEventHandler=C.preProcessEventHandler||null,this.contextMenuHandler=C.contextMenuHandler||null,this.enterHandler=C.enterHandler||null,this.leaveHandler=C.leaveHandler||null,this.exitHandler=C.exitHandler||null,this.overHandler=C.overHandler||null,this.outHandler=C.outHandler||null,this.pressHandler=C.pressHandler||null,this.nonPrimaryPressHandler=C.nonPrimaryPressHandler||null,this.releaseHandler=C.releaseHandler||null,this.nonPrimaryReleaseHandler=C.nonPrimaryReleaseHandler||null,this.moveHandler=C.moveHandler||null,this.scrollHandler=C.scrollHandler||null,this.clickHandler=C.clickHandler||null,this.dblClickHandler=C.dblClickHandler||null,this.dragHandler=C.dragHandler||null,this.dragEndHandler=C.dragEndHandler||null,this.pinchHandler=C.pinchHandler||null,this.stopHandler=C.stopHandler||null,this.keyDownHandler=C.keyDownHandler||null,this.keyUpHandler=C.keyUpHandler||null,this.keyHandler=C.keyHandler||null,this.focusHandler=C.focusHandler||null,this.blurHandler=C.blurHandler||null;const I=this;i[this.hash]={click:function(k){M(I,k)},dblclick:function(k){D(I,k)},keydown:function(k){P(I,k)},keyup:function(k){z(I,k)},keypress:function(k){O(I,k)},focus:function(k){L(I,k)},blur:function(k){N(I,k)},contextmenu:function(k){j(I,k)},wheel:function(k){se(I,k)},mousewheel:function(k){K(I,k)},DOMMouseScroll:function(k){K(I,k)},MozMousePixelScroll:function(k){K(I,k)},losecapture:function(k){Z(I,k)},mouseenter:function(k){ie(I,k)},mouseleave:function(k){me(I,k)},mouseover:function(k){ue(I,k)},mouseout:function(k){ae(I,k)},mousedown:function(k){Be(I,k)},mouseup:function(k){He(I,k)},mousemove:function(k){at(I,k)},touchstart:function(k){he(I,k)},touchend:function(k){Y(I,k)},touchmove:function(k){Q(I,k)},touchcancel:function(k){ee(I,k)},gesturestart:function(k){_e(I,k)},gesturechange:function(k){G(I,k)},gotpointercapture:function(k){V(I,k)},lostpointercapture:function(k){q(I,k)},pointerenter:function(k){ie(I,k)},pointerleave:function(k){me(I,k)},pointerover:function(k){ue(I,k)},pointerout:function(k){ae(I,k)},pointerdown:function(k){Be(I,k)},pointerup:function(k){He(I,k)},pointermove:function(k){at(I,k)},pointercancel:function(k){ht(I,k)},pointerupcaptured:function(k){Fe(I,k)},pointermovecaptured:function(k){et(I,k)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},t.MouseTracker.havePointerEvents&&t.setElementPointerEvents(this.element,"auto"),this.exitHandler&&t.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),C.startDisabled||this.setTracking(!0)},t.MouseTracker.prototype={destroy:function(){u(this),this.element=null,i[this.hash]=null,delete i[this.hash]},isTracking:function(){return i[this.hash].tracking},setTracking:function(C){return C?c(this):u(this),this},getActivePointersListByType:function(C){const A=i[this.hash],I=A?A.activePointersLists.length:0;let k;for(let ne=0;ne<I;ne++)if(A.activePointersLists[ne].type===C)return A.activePointersLists[ne];return k=new t.MouseTracker.GesturePointList(C),A&&A.activePointersLists.push(k),k},getActivePointerCount:function(){const C=i[this.hash],A=C.activePointersLists.length;let I=0;for(let k=0;k<A;k++)I+=C.activePointersLists[k].getLength();return I},get hasGestureHandlers(){return!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler)},get hasScrollHandler(){return!!this.scrollHandler},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};const n=(function(){try{return window.self!==window.top}catch{return!0}})();function o(C){try{return C.addEventListener&&C.removeEventListener}catch{return!1}}t.MouseTracker.gesturePointVelocityTracker=(function(){const C=[];let A=0,I=0;const k=function(tt,xt){return tt.hash.toString()+xt.type+xt.id.toString()},ne=function(){const tt=C.length,xt=t.now();let J,fe;const Oe=xt-I;I=xt;for(let We=0;We<tt;We++){const je=C[We],ut=je.gPoint;ut.direction=Math.atan2(ut.currentPos.y-je.lastPos.y,ut.currentPos.x-je.lastPos.x),J=je.lastPos.distanceTo(ut.currentPos),je.lastPos=ut.currentPos,fe=1e3*J/(Oe+1),ut.speed=.75*fe+.25*ut.speed}};return{addPoint:function(tt,xt){const J=k(tt,xt);C.push({guid:J,gPoint:xt,lastPos:xt.currentPos}),C.length===1&&(I=t.now(),A=window.setInterval(ne,50))},removePoint:function(tt,xt){const J=k(tt,xt);let fe=C.length;for(let Oe=0;Oe<fe;Oe++)if(C[Oe].guid===J){C.splice(Oe,1),fe--,fe===0&&window.clearInterval(A);break}}}})(),t.MouseTracker.captureElement=document,t.MouseTracker.wheelEventName="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",t.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",t.MouseTracker.wheelEventName],t.MouseTracker.wheelEventName==="DOMMouseScroll"&&t.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),t.MouseTracker.havePointerCapture=(function(){const C=document.createElement("div");return t.isFunction(C.setPointerCapture)&&t.isFunction(C.releasePointerCapture)})(),t.MouseTracker.havePointerCapture&&t.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(t.MouseTracker.havePointerEvents=!1,t.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),t.MouseTracker.mousePointerId="legacy-mouse",t.MouseTracker.havePointerCapture=(function(){const C=document.createElement("div");return t.isFunction(C.setCapture)&&t.isFunction(C.releaseCapture)})(),t.MouseTracker.havePointerCapture&&t.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&t.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&t.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),t.MouseTracker.GesturePointList=function(C){this._gPoints=[],this.type=C,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},t.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(C){return this._gPoints.push(C)},removeById:function(C){const A=this._gPoints.length;for(let I=0;I<A;I++)if(this._gPoints[I].id===C){this._gPoints.splice(I,1);break}return this._gPoints.length},getByIndex:function(C){return C<this._gPoints.length?this._gPoints[C]:null},getById:function(C){const A=this._gPoints.length;for(let I=0;I<A;I++)if(this._gPoints[I].id===C)return this._gPoints[I];return null},getPrimary:function(C){const A=this._gPoints.length;for(let I=0;I<A;I++)if(this._gPoints[I].isPrimary)return this._gPoints[I];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(t.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function s(C){const A=i[C.hash],I=A.activePointersLists.length;for(let k=0;k<I;k++){const ne=A.activePointersLists[k];if(ne.getLength()>0){const Te=[],ze=ne.asArray();for(let tt=0;tt<ze.length;tt++)Te.push(ze[tt]);for(let tt=0;tt<Te.length;tt++)T(C,ne,Te[tt])}}for(let k=0;k<I;k++)A.activePointersLists.pop();A.sentDragEvent=!1}function c(C){const A=i[C.hash];if(!A.tracking){for(let I=0;I<t.MouseTracker.subscribeEvents.length;I++){const k=t.MouseTracker.subscribeEvents[I];t.addEvent(C.element,k,A[k],k===t.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1)}s(C),A.tracking=!0}}function u(C){const A=i[C.hash];if(A.tracking){for(let I=0;I<t.MouseTracker.subscribeEvents.length;I++){const k=t.MouseTracker.subscribeEvents[I];t.removeEvent(C.element,k,A[k],!1)}s(C),A.tracking=!1}}function h(C,A){const I=i[C.hash];if(A==="pointerevent")return{upName:"pointerup",upHandler:I.pointerupcaptured,moveName:"pointermove",moveHandler:I.pointermovecaptured};if(A==="mouse")return{upName:"pointerup",upHandler:I.pointerupcaptured,moveName:"pointermove",moveHandler:I.pointermovecaptured};if(A==="touch")return{upName:"touchend",upHandler:I.touchendcaptured,moveName:"touchmove",moveHandler:I.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function d(C,A){if(t.MouseTracker.havePointerCapture)if(t.MouseTracker.havePointerEvents)try{C.element.setPointerCapture(A.id)}catch{t.console.warn("setPointerCapture() called on invalid pointer ID");return}else C.element.setCapture(!0);else{const I=h(C,t.MouseTracker.havePointerEvents?"pointerevent":A.type);n&&o(window.top)&&t.addEvent(window.top,I.upName,I.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,I.upName,I.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,I.moveName,I.moveHandler,!0)}oe(C,A,!0)}function m(C,A){if(t.MouseTracker.havePointerCapture)if(t.MouseTracker.havePointerEvents){const k=C.getActivePointersListByType(A.type).getById(A.id);if(!k||!k.captured)return;try{C.element.releasePointerCapture(A.id)}catch{}}else C.element.releaseCapture();else{const I=h(C,t.MouseTracker.havePointerEvents?"pointerevent":A.type);n&&o(window.top)&&t.removeEvent(window.top,I.upName,I.upHandler,!0),t.removeEvent(t.MouseTracker.captureElement,I.moveName,I.moveHandler,!0),t.removeEvent(t.MouseTracker.captureElement,I.upName,I.upHandler,!0)}oe(C,A,!1)}function g(C){return t.MouseTracker.havePointerEvents?C.pointerId:t.MouseTracker.mousePointerId}function _(C){return t.MouseTracker.havePointerEvents&&C.pointerType?C.pointerType:"mouse"}function w(C){return t.MouseTracker.havePointerEvents?C.isPrimary:!0}function v(C){return t.getMousePosition(C)}function x(C,A){return b(v(C),A)}function b(C,A){const I=t.getElementOffset(A);return C.minus(I)}function E(C,A){return new t.Point((C.x+A.x)/2,(C.y+A.y)/2)}function M(C,A){const I={originalEvent:A,eventType:"click",pointerType:"mouse",isEmulated:!1};te(C,I),I.preventDefault&&!I.defaultPrevented&&t.cancelEvent(A),I.stopPropagation&&t.stopEvent(A)}function D(C,A){const I={originalEvent:A,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};te(C,I),I.preventDefault&&!I.defaultPrevented&&t.cancelEvent(A),I.stopPropagation&&t.stopEvent(A)}function P(C,A){let I=null;const k={originalEvent:A,eventType:"keydown",pointerType:"",isEmulated:!1};te(C,k),C.keyDownHandler&&!k.preventGesture&&!k.defaultPrevented&&(I={eventSource:C,keyCode:A.keyCode?A.keyCode:A.charCode,ctrl:A.ctrlKey,shift:A.shiftKey,alt:A.altKey,meta:A.metaKey,originalEvent:A,preventDefault:k.preventDefault||k.defaultPrevented,userData:C.userData},C.keyDownHandler(I)),(I&&I.preventDefault||k.preventDefault&&!k.defaultPrevented)&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A)}function z(C,A){let I=null;const k={originalEvent:A,eventType:"keyup",pointerType:"",isEmulated:!1};te(C,k),C.keyUpHandler&&!k.preventGesture&&!k.defaultPrevented&&(I={eventSource:C,keyCode:A.keyCode?A.keyCode:A.charCode,ctrl:A.ctrlKey,shift:A.shiftKey,alt:A.altKey,meta:A.metaKey,originalEvent:A,preventDefault:k.preventDefault||k.defaultPrevented,userData:C.userData},C.keyUpHandler(I)),(I&&I.preventDefault||k.preventDefault&&!k.defaultPrevented)&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A)}function O(C,A){let I=null;const k={originalEvent:A,eventType:"keypress",pointerType:"",isEmulated:!1};te(C,k),C.keyHandler&&!k.preventGesture&&!k.defaultPrevented&&(I={eventSource:C,keyCode:A.keyCode?A.keyCode:A.charCode,ctrl:A.ctrlKey,shift:A.shiftKey,alt:A.altKey,meta:A.metaKey,originalEvent:A,preventDefault:k.preventDefault||k.defaultPrevented,userData:C.userData},C.keyHandler(I)),(I&&I.preventDefault||k.preventDefault&&!k.defaultPrevented)&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A)}function L(C,A){const I={originalEvent:A,eventType:"focus",pointerType:"",isEmulated:!1};te(C,I),C.focusHandler&&!I.preventGesture&&C.focusHandler({eventSource:C,originalEvent:A,userData:C.userData})}function N(C,A){const I={originalEvent:A,eventType:"blur",pointerType:"",isEmulated:!1};te(C,I),C.blurHandler&&!I.preventGesture&&C.blurHandler({eventSource:C,originalEvent:A,userData:C.userData})}function j(C,A){let I=null;const k={originalEvent:A,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};te(C,k),C.contextMenuHandler&&!k.preventGesture&&!k.defaultPrevented&&(I={eventSource:C,position:b(v(A),C.element),originalEvent:k.originalEvent,preventDefault:k.preventDefault||k.defaultPrevented,userData:C.userData},C.contextMenuHandler(I)),(I&&I.preventDefault||k.preventDefault&&!k.defaultPrevented)&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A)}function se(C,A){X(C,A,A)}function K(C,A){const I={target:A.target||A.srcElement,type:"wheel",shiftKey:A.shiftKey||!1,clientX:A.clientX,clientY:A.clientY,pageX:A.pageX?A.pageX:A.clientX,pageY:A.pageY?A.pageY:A.clientY,deltaMode:A.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};t.MouseTracker.wheelEventName==="mousewheel"?I.deltaY=-A.wheelDelta/t.DEFAULT_SETTINGS.pixelsPerWheelLine:I.deltaY=A.detail,X(C,I,A)}function X(C,A,I){let k=0,ne,Te=null;k=A.deltaY?A.deltaY<0?1:-1:0,ne={originalEvent:A,eventType:"wheel",pointerType:"mouse",isEmulated:A!==I},te(C,ne),C.scrollHandler&&!ne.preventGesture&&!ne.defaultPrevented&&(Te={eventSource:C,pointerType:"mouse",position:x(A,C.element),scroll:k,shift:A.shiftKey,isTouchEvent:!1,originalEvent:I,preventDefault:ne.preventDefault||ne.defaultPrevented,userData:C.userData},C.scrollHandler(Te)),ne.stopPropagation&&t.stopEvent(I),(Te&&Te.preventDefault||ne.preventDefault&&!ne.defaultPrevented)&&t.cancelEvent(I)}function Z(C,A){const I={id:t.MouseTracker.mousePointerId,type:"mouse"},k={originalEvent:A,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};te(C,k),A.target===C.element&&oe(C,I,!1),k.stopPropagation&&t.stopEvent(A)}function he(C,A){const I=A.changedTouches.length,k=C.getActivePointersListByType("touch"),ne=t.now();k.getLength()>A.touches.length-I&&t.console.warn("Tracked touch contact count doesn't match event.touches.length");const Te={originalEvent:A,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};te(C,Te);for(let ze=0;ze<I;ze++){const tt={id:A.changedTouches[ze].identifier,type:"touch",isPrimary:k.getLength()===0,currentPos:v(A.changedTouches[ze]),currentTime:ne};Ne(C,Te,tt),ge(C,Te,tt,0),oe(C,tt,!0)}Te.preventDefault&&!Te.defaultPrevented&&t.cancelEvent(A),Te.stopPropagation&&t.stopEvent(A)}function Y(C,A){const I=A.changedTouches.length,k=t.now(),ne={originalEvent:A,eventType:"pointerup",pointerType:"touch",isEmulated:!1};te(C,ne);for(let Te=0;Te<I;Te++){const ze={id:A.changedTouches[Te].identifier,type:"touch",currentPos:v(A.changedTouches[Te]),currentTime:k};we(C,ne,ze,0),oe(C,ze,!1),De(C,ne,ze)}ne.preventDefault&&!ne.defaultPrevented&&t.cancelEvent(A),ne.stopPropagation&&t.stopEvent(A)}function Q(C,A){const I=A.changedTouches.length,k=t.now(),ne={originalEvent:A,eventType:"pointermove",pointerType:"touch",isEmulated:!1};te(C,ne);for(let Te=0;Te<I;Te++){const ze={id:A.changedTouches[Te].identifier,type:"touch",currentPos:v(A.changedTouches[Te]),currentTime:k};Ce(C,ne,ze)}ne.preventDefault&&!ne.defaultPrevented&&t.cancelEvent(A),ne.stopPropagation&&t.stopEvent(A)}function ee(C,A){const I=A.changedTouches.length,k={originalEvent:A,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};te(C,k);for(let ne=0;ne<I;ne++){const Te={id:A.changedTouches[ne].identifier,type:"touch"};Le(C,k,Te)}k.stopPropagation&&t.stopEvent(A)}function _e(C,A){return t.eventIsCanceled(A)||A.preventDefault(),!1}function G(C,A){return t.eventIsCanceled(A)||A.preventDefault(),!1}function V(C,A){const I={originalEvent:A,eventType:"gotpointercapture",pointerType:_(A),isEmulated:!1};te(C,I),A.target===C.element&&oe(C,{id:A.pointerId,type:_(A)},!0),I.stopPropagation&&t.stopEvent(A)}function q(C,A){const I={originalEvent:A,eventType:"lostpointercapture",pointerType:_(A),isEmulated:!1};te(C,I),A.target===C.element&&oe(C,{id:A.pointerId,type:_(A)},!1),I.stopPropagation&&t.stopEvent(A)}function ie(C,A){const I={id:g(A),type:_(A),isPrimary:w(A),currentPos:v(A),currentTime:t.now()},k={originalEvent:A,eventType:"pointerenter",pointerType:I.type,isEmulated:!1};te(C,k),Ne(C,k,I)}function me(C,A){const I={id:g(A),type:_(A),isPrimary:w(A),currentPos:v(A),currentTime:t.now()},k={originalEvent:A,eventType:"pointerleave",pointerType:I.type,isEmulated:!1};te(C,k),De(C,k,I)}function ue(C,A){const I={id:g(A),type:_(A),isPrimary:w(A),currentPos:v(A),currentTime:t.now()},k={originalEvent:A,eventType:"pointerover",pointerType:I.type,isEmulated:!1};te(C,k),H(C,k,I),k.preventDefault&&!k.defaultPrevented&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A)}function ae(C,A){const I={id:g(A),type:_(A),isPrimary:w(A),currentPos:v(A),currentTime:t.now()},k={originalEvent:A,eventType:"pointerout",pointerType:I.type,isEmulated:!1};te(C,k),B(C,k,I),k.preventDefault&&!k.defaultPrevented&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A)}function Be(C,A){const I={id:g(A),type:_(A),isPrimary:w(A),currentPos:v(A),currentTime:t.now()},k=t.MouseTracker.havePointerEvents&&I.type==="touch",ne={originalEvent:A,eventType:"pointerdown",pointerType:I.type,isEmulated:!1};te(C,ne),ge(C,ne,I,A.button),ne.preventDefault&&!ne.defaultPrevented&&t.cancelEvent(A),ne.stopPropagation&&t.stopEvent(A),ne.shouldCapture&&(k?oe(C,I,!0):d(C,I))}function He(C,A){Ve(C,A)}function Fe(C,A){C.getActivePointersListByType(_(A)).getById(A.pointerId)&&Ve(C,A),t.stopEvent(A)}function Ve(C,A){const I={id:g(A),type:_(A),isPrimary:w(A),currentPos:v(A),currentTime:t.now()},k={originalEvent:A,eventType:"pointerup",pointerType:I.type,isEmulated:!1};te(C,k),we(C,k,I,A.button),k.preventDefault&&!k.defaultPrevented&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A),k.shouldReleaseCapture&&(A.target===C.element?m(C,I):oe(C,I,!1))}function at(C,A){Ge(C,A)}function et(C,A){C.getActivePointersListByType(_(A)).getById(A.pointerId)&&Ge(C,A),t.stopEvent(A)}function Ge(C,A){const I={id:g(A),type:_(A),isPrimary:w(A),currentPos:v(A),currentTime:t.now()},k={originalEvent:A,eventType:"pointermove",pointerType:I.type,isEmulated:!1};te(C,k),Ce(C,k,I),k.preventDefault&&!k.defaultPrevented&&t.cancelEvent(A),k.stopPropagation&&t.stopEvent(A)}function ht(C,A){const I={id:A.pointerId,type:_(A)},k={originalEvent:A,eventType:"pointercancel",pointerType:I.type,isEmulated:!1};te(C,k),Le(C,k,I),k.stopPropagation&&t.stopEvent(A)}function Ct(C,A){return A.speed=0,A.direction=0,A.contactPos=A.currentPos,A.contactTime=A.currentTime,A.lastPos=A.currentPos,A.lastTime=A.currentTime,C.add(A)}function T(C,A,I){let k;const ne=A.getById(I.id);return ne?(ne.captured&&(t.console.warn("stopTrackingPointer() called on captured pointer"),m(C,ne)),A.removeContact(),k=A.removeById(I.id)):k=A.getLength(),k}function F(C,A){switch(A.eventType){case"pointermove":A.isStoppable=!0,A.isCancelable=!0,A.preventDefault=!1,A.preventGesture=!C.hasGestureHandlers,A.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":A.isStoppable=!0,A.isCancelable=!0,A.preventDefault=!1,A.preventGesture=!1,A.stopPropagation=!1;break;case"pointerdown":A.isStoppable=!0,A.isCancelable=!0,A.preventDefault=!1,A.preventGesture=!C.hasGestureHandlers,A.stopPropagation=!1;break;case"pointerup":A.isStoppable=!0,A.isCancelable=!0,A.preventDefault=!1,A.preventGesture=!C.hasGestureHandlers,A.stopPropagation=!1;break;case"wheel":A.isStoppable=!0,A.isCancelable=!0,A.preventDefault=!1,A.preventGesture=!C.hasScrollHandler,A.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":A.isStoppable=!0,A.isCancelable=!1,A.preventDefault=!1,A.preventGesture=!1,A.stopPropagation=!1;break;case"click":A.isStoppable=!0,A.isCancelable=!0,A.preventDefault=!!C.clickHandler,A.preventGesture=!1,A.stopPropagation=!1;break;case"dblclick":A.isStoppable=!0,A.isCancelable=!0,A.preventDefault=!!C.dblClickHandler,A.preventGesture=!1,A.stopPropagation=!1;break;default:A.isStoppable=!1,A.isCancelable=!1,A.preventDefault=!1,A.preventGesture=!1,A.stopPropagation=!1;break}}function te(C,A){A.eventSource=C,A.eventPhase=A.originalEvent&&typeof A.originalEvent.eventPhase<"u"?A.originalEvent.eventPhase:0,A.defaultPrevented=t.eventIsCanceled(A.originalEvent),A.shouldCapture=!1,A.shouldReleaseCapture=!1,A.userData=C.userData,F(C,A),C.preProcessEventHandler&&C.preProcessEventHandler(A)}function oe(C,A,I){const k=C.getActivePointersListByType(A.type),ne=k.getById(A.id);ne?I&&!ne.captured?(ne.captured=!0,k.captureCount++):!I&&ne.captured&&(ne.captured=!1,k.captureCount--,k.captureCount<0&&(k.captureCount=0,t.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):t.console.warn("updatePointerCaptured() called on untracked pointer")}function Ne(C,A,I){const k=C.getActivePointersListByType(I.type),ne=k.getById(I.id);ne?(ne.insideElement=!0,ne.lastPos=ne.currentPos,ne.lastTime=ne.currentTime,ne.currentPos=I.currentPos,ne.currentTime=I.currentTime,I=ne):(I.captured=!1,I.insideElementPressed=!1,I.insideElement=!0,Ct(k,I)),C.enterHandler&&C.enterHandler({eventSource:C,pointerType:I.type,position:b(I.currentPos,C.element),buttons:k.buttons,pointers:C.getActivePointerCount(),insideElementPressed:I.insideElementPressed,buttonDownAny:k.buttons!==0,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData})}function De(C,A,I){const k=C.getActivePointersListByType(I.type),ne=k.getById(I.id);if(ne?(ne.captured?(ne.insideElement=!1,ne.lastPos=ne.currentPos,ne.lastTime=ne.currentTime,ne.currentPos=I.currentPos,ne.currentTime=I.currentTime):T(C,k,ne),I=ne):(I.captured=!1,I.insideElementPressed=!1),C.leaveHandler||C.exitHandler){const Te={eventSource:C,pointerType:I.type,position:I.currentPos&&b(I.currentPos,C.element),buttons:k.buttons,pointers:C.getActivePointerCount(),insideElementPressed:I.insideElementPressed,buttonDownAny:k.buttons!==0,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData};C.leaveHandler&&C.leaveHandler(Te),C.exitHandler&&C.exitHandler(Te)}}function H(C,A,I){const k=C.getActivePointersListByType(I.type),ne=k.getById(I.id);ne?I=ne:(I.captured=!1,I.insideElementPressed=!1),C.overHandler&&C.overHandler({eventSource:C,pointerType:I.type,position:b(I.currentPos,C.element),buttons:k.buttons,pointers:C.getActivePointerCount(),insideElementPressed:I.insideElementPressed,buttonDownAny:k.buttons!==0,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData})}function B(C,A,I){const k=C.getActivePointersListByType(I.type),ne=k.getById(I.id);ne?I=ne:(I.captured=!1,I.insideElementPressed=!1),C.outHandler&&C.outHandler({eventSource:C,pointerType:I.type,position:I.currentPos&&b(I.currentPos,C.element),buttons:k.buttons,pointers:C.getActivePointerCount(),insideElementPressed:I.insideElementPressed,buttonDownAny:k.buttons!==0,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData})}function ge(C,A,I,k){const ne=i[C.hash],Te=C.getActivePointersListByType(I.type);if(typeof A.originalEvent.buttons<"u"?Te.buttons=A.originalEvent.buttons:k===0?Te.buttons|=1:k===1?Te.buttons|=4:k===2?Te.buttons|=2:k===3?Te.buttons|=8:k===4?Te.buttons|=16:k===5&&(Te.buttons|=32),k!==0){A.shouldCapture=!1,A.shouldReleaseCapture=!1,C.nonPrimaryPressHandler&&!A.preventGesture&&!A.defaultPrevented&&(A.preventDefault=!0,C.nonPrimaryPressHandler({eventSource:C,pointerType:I.type,position:b(I.currentPos,C.element),button:k,buttons:Te.buttons,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData}));return}const ze=Te.getById(I.id);ze?(ze.insideElementPressed=!0,ze.insideElement=!0,ze.originalTarget=A.originalEvent.target,ze.contactPos=I.currentPos,ze.contactTime=I.currentTime,ze.lastPos=ze.currentPos,ze.lastTime=ze.currentTime,ze.currentPos=I.currentPos,ze.currentTime=I.currentTime,I=ze):(I.captured=!1,I.insideElementPressed=!0,I.insideElement=!0,I.originalTarget=A.originalEvent.target,Ct(Te,I)),Te.addContact(),!A.preventGesture&&!A.defaultPrevented?(A.shouldCapture=!0,A.shouldReleaseCapture=!1,A.preventDefault=!0,(C.dragHandler||C.dragEndHandler||C.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.addPoint(C,I),Te.contacts===1?C.pressHandler&&!A.preventGesture&&C.pressHandler({eventSource:C,pointerType:I.type,position:b(I.contactPos,C.element),buttons:Te.buttons,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData}):Te.contacts===2&&C.pinchHandler&&I.type==="touch"&&(ne.pinchGPoints=Te.asArray(),ne.lastPinchDist=ne.currentPinchDist=ne.pinchGPoints[0].currentPos.distanceTo(ne.pinchGPoints[1].currentPos),ne.lastPinchCenter=ne.currentPinchCenter=E(ne.pinchGPoints[0].currentPos,ne.pinchGPoints[1].currentPos))):(A.shouldCapture=!1,A.shouldReleaseCapture=!1)}function we(C,A,I,k){const ne=i[C.hash],Te=C.getActivePointersListByType(I.type);let ze,tt,xt=!1,J;if(typeof A.originalEvent.buttons<"u"?Te.buttons=A.originalEvent.buttons:k===0?Te.buttons^=-2:k===1?Te.buttons^=-5:k===2?Te.buttons^=-3:k===3?Te.buttons^=-9:k===4?Te.buttons^=-17:k===5&&(Te.buttons^=-33),A.shouldCapture=!1,k!==0){A.shouldReleaseCapture=!1,C.nonPrimaryReleaseHandler&&!A.preventGesture&&!A.defaultPrevented&&(A.preventDefault=!0,C.nonPrimaryReleaseHandler({eventSource:C,pointerType:I.type,position:b(I.currentPos,C.element),button:k,buttons:Te.buttons,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData}));return}let fe=Te.getById(I.id);fe?(Te.removeContact(),fe.captured&&(xt=!0),fe.lastPos=fe.currentPos,fe.lastTime=fe.currentTime,fe.currentPos=I.currentPos,fe.currentTime=I.currentTime,fe.insideElement||T(C,Te,fe),ze=fe.currentPos,tt=fe.currentTime):(I.captured=!1,I.insideElementPressed=!1,I.insideElement=!0,Ct(Te,I),fe=I),!A.preventGesture&&!A.defaultPrevented&&(xt?(A.shouldReleaseCapture=!0,A.preventDefault=!0,(C.dragHandler||C.dragEndHandler||C.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.removePoint(C,fe),Te.contacts===0?(C.releaseHandler&&ze&&C.releaseHandler({eventSource:C,pointerType:fe.type,position:b(ze,C.element),buttons:Te.buttons,insideElementPressed:fe.insideElementPressed,insideElementReleased:fe.insideElement,isTouchEvent:fe.type==="touch",originalEvent:A.originalEvent,userData:C.userData}),C.dragEndHandler&&ne.sentDragEvent&&C.dragEndHandler({eventSource:C,pointerType:fe.type,position:b(fe.currentPos,C.element),speed:fe.speed,direction:fe.direction,shift:A.originalEvent.shiftKey,isTouchEvent:fe.type==="touch",originalEvent:A.originalEvent,userData:C.userData}),ne.sentDragEvent=!1,(C.clickHandler||C.dblClickHandler)&&fe.insideElement&&(J=tt-fe.contactTime<=C.clickTimeThreshold&&fe.contactPos.distanceTo(ze)<=C.clickDistThreshold,C.clickHandler&&C.clickHandler({eventSource:C,pointerType:fe.type,position:b(fe.currentPos,C.element),quick:J,shift:A.originalEvent.shiftKey,isTouchEvent:fe.type==="touch",originalEvent:A.originalEvent,originalTarget:fe.originalTarget,userData:C.userData}),C.dblClickHandler&&J&&(Te.clicks++,Te.clicks===1?(ne.lastClickPos=ze,ne.dblClickTimeOut=setTimeout(function(){Te.clicks=0},C.dblClickTimeThreshold)):Te.clicks===2&&(clearTimeout(ne.dblClickTimeOut),Te.clicks=0,ne.lastClickPos.distanceTo(ze)<=C.dblClickDistThreshold&&C.dblClickHandler({eventSource:C,pointerType:fe.type,position:b(fe.currentPos,C.element),shift:A.originalEvent.shiftKey,isTouchEvent:fe.type==="touch",originalEvent:A.originalEvent,userData:C.userData}),ne.lastClickPos=null)))):Te.contacts===2&&C.pinchHandler&&fe.type==="touch"&&(ne.pinchGPoints=Te.asArray(),ne.lastPinchDist=ne.currentPinchDist=ne.pinchGPoints[0].currentPos.distanceTo(ne.pinchGPoints[1].currentPos),ne.lastPinchCenter=ne.currentPinchCenter=E(ne.pinchGPoints[0].currentPos,ne.pinchGPoints[1].currentPos))):(A.shouldReleaseCapture=!1,C.releaseHandler&&ze&&(C.releaseHandler({eventSource:C,pointerType:fe.type,position:b(ze,C.element),buttons:Te.buttons,insideElementPressed:fe.insideElementPressed,insideElementReleased:fe.insideElement,isTouchEvent:fe.type==="touch",originalEvent:A.originalEvent,userData:C.userData}),A.preventDefault=!0)))}function Ce(C,A,I){const k=i[C.hash],ne=C.getActivePointersListByType(I.type);let Te;typeof A.originalEvent.buttons<"u"&&(ne.buttons=A.originalEvent.buttons);let ze=ne.getById(I.id);if(ze)ze.lastPos=ze.currentPos,ze.lastTime=ze.currentTime,ze.currentPos=I.currentPos,ze.currentTime=I.currentTime;else return;if(A.shouldCapture=!1,A.shouldReleaseCapture=!1,C.stopHandler&&I.type==="mouse"&&(clearTimeout(C.stopTimeOut),C.stopTimeOut=setTimeout(function(){Ue(C,A.originalEvent,I.type)},C.stopDelay)),ne.contacts===0)C.moveHandler&&C.moveHandler({eventSource:C,pointerType:I.type,position:b(I.currentPos,C.element),buttons:ne.buttons,isTouchEvent:I.type==="touch",originalEvent:A.originalEvent,userData:C.userData});else if(ne.contacts===1)C.moveHandler&&(ze=ne.asArray()[0],C.moveHandler({eventSource:C,pointerType:ze.type,position:b(ze.currentPos,C.element),buttons:ne.buttons,isTouchEvent:ze.type==="touch",originalEvent:A.originalEvent,userData:C.userData})),C.dragHandler&&!A.preventGesture&&!A.defaultPrevented&&(ze=ne.asArray()[0],Te=ze.currentPos.minus(ze.lastPos),C.dragHandler({eventSource:C,pointerType:ze.type,position:b(ze.currentPos,C.element),buttons:ne.buttons,delta:Te,speed:ze.speed,direction:ze.direction,shift:A.originalEvent.shiftKey,isTouchEvent:ze.type==="touch",originalEvent:A.originalEvent,userData:C.userData}),A.preventDefault=!0,k.sentDragEvent=!0);else if(ne.contacts===2){if(C.moveHandler){const tt=ne.asArray();C.moveHandler({eventSource:C,pointerType:tt[0].type,position:b(E(tt[0].currentPos,tt[1].currentPos),C.element),buttons:ne.buttons,isTouchEvent:tt[0].type==="touch",originalEvent:A.originalEvent,userData:C.userData})}C.pinchHandler&&I.type==="touch"&&!A.preventGesture&&!A.defaultPrevented&&(Te=k.pinchGPoints[0].currentPos.distanceTo(k.pinchGPoints[1].currentPos),Te!==k.currentPinchDist&&(k.lastPinchDist=k.currentPinchDist,k.currentPinchDist=Te,k.lastPinchCenter=k.currentPinchCenter,k.currentPinchCenter=E(k.pinchGPoints[0].currentPos,k.pinchGPoints[1].currentPos),C.pinchHandler({eventSource:C,pointerType:"touch",gesturePoints:k.pinchGPoints,lastCenter:b(k.lastPinchCenter,C.element),center:b(k.currentPinchCenter,C.element),lastDistance:k.lastPinchDist,distance:k.currentPinchDist,shift:A.originalEvent.shiftKey,originalEvent:A.originalEvent,userData:C.userData}),A.preventDefault=!0))}}function Le(C,A,I){const k=C.getActivePointersListByType(I.type),ne=k.getById(I.id);ne&&T(C,k,ne)}function Ue(C,A,I){C.stopHandler&&C.stopHandler({eventSource:C,pointerType:I,position:x(A,C.element),buttons:C.getActivePointersListByType(I).buttons,isTouchEvent:I==="touch",originalEvent:A,userData:C.userData})}function Ie(){let C=Date.now().toString(36)+Math.random().toString(36).substring(2);for(;C in i;)C=Date.now().toString(36)+Math.random().toString(36).substring(2);return C}})(e),(function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},t.Control=function(i,n,o){const s=i.parentNode;typeof n=="number"&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=typeof n.attachToViewer>"u"?!0:n.attachToViewer,this.autoFade=typeof n.autoFade>"u"?!0:n.autoFade,this.element=i,this.anchor=n.anchor,this.container=o,this.anchor===t.ControlAnchor.ABSOLUTE?(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof n.top=="number"?n.top+"px":n.top,this.wrapper.style.left=typeof n.left=="number"?n.left+"px":n.left,this.wrapper.style.height=typeof n.height=="number"?n.height+"px":n.height,this.wrapper.style.width=typeof n.width=="number"?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor===t.ControlAnchor.TOP_RIGHT||this.anchor===t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):s.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==t.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(i){this.wrapper.style.display=i?this.anchor===t.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(i){t.setElementOpacity(this.wrapper,i,!0)}}})(e),(function(t){t.ControlDock=function(n){const o=["topleft","topright","bottomright","bottomleft"];t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(Math.random()*1e6),container:t.makeNeutralElement("div"),controls:[]},n),this.container.onsubmit=function(){return!1},this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),t.getElementStyle(this.element).position==="static"&&(this.element.style.position="relative"),this.container.style.width="100%",this.container.style.height="100%");for(let s=0;s<o.length;s++){let c=o[s];this.controls[c]=t.makeNeutralElement("div"),this.controls[c].style.position="absolute",c.match("left")&&(this.controls[c].style.left="0px"),c.match("right")&&(this.controls[c].style.right="0px"),c.match("top")&&(this.controls[c].style.top="0px"),c.match("bottom")&&(this.controls[c].style.bottom="0px")}this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(n,o){n=t.getElement(n);let s=null;if(!(i(this,n)>=0)){switch(o.anchor){case t.ControlAnchor.TOP_RIGHT:s=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:s=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:s=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:s=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.ABSOLUTE:s=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case t.ControlAnchor.NONE:s=this.container,n.style.margin="0px",n.style.padding="0px";break}this.controls.push(new t.Control(n,o,s)),n.style.display="inline-block"}},removeControl:function(n){n=t.getElement(n);const o=i(this,n);return o>=0&&(this.controls[o].destroy(),this.controls.splice(o,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){for(let n=this.controls.length-1;n>=0;n--)if(this.controls[n].isVisible())return!0;return!1},setControlsEnabled:function(n){for(let o=this.controls.length-1;o>=0;o--)this.controls[o].setVisible(n);return this}};function i(n,o){const s=n.controls;for(let c=s.length-1;c>=0;c--)if(s[c].element===o)return c;return-1}})(e),(function(t){t.Placement=t.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})})(e),(function(t){const i={};let n=1;t.Viewer=function(T){const F=arguments,te=this;let oe;t.isPlainObject(T)||(T={id:F[0],xmlPath:F.length>1?F[1]:void 0,prefixUrl:F.length>2?F[2]:void 0,controls:F.length>3?F[3]:void 0,overlays:F.length>4?F[4]:void 0}),T.config&&(t.extend(!0,T,T.config),delete T.config);const Ne=["useCanvas"];if(T.drawerOptions=Object.assign({},Ne.reduce((H,B)=>(H[B]=T[B],delete T[B],H),{}),T.drawerOptions),t.extend(!0,this,{id:T.id,hash:T.hash||n++,viewer:null,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousDisplayValuesOfBodyChildren:[],customControls:[],source:null,drawer:null,drawerCandidates:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},t.DEFAULT_SETTINGS,T),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");if(typeof i[this.hash]<"u"&&t.console.warn("Hash "+this.hash+" has already been used."),i[this.hash]={fsBoundsDelta:new t.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=t.now(),this._fullyLoaded=!1,this._navActionFrames={},this._navActionVirtuallyHeld={},this._minNavActionFrames=10,this._activeActions={panUp:!1,panDown:!1,panLeft:!1,panRight:!1,zoomIn:!1,zoomOut:!1},t.EventSource.call(this),this.addHandler("open-failed",function(H){const B=t.getString("Errors.OpenFailed",H.eventSource,H.message);te._showMessage(B)}),t.ControlDock.call(this,T),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=t.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",!document.querySelector("style[data-openseadragon-mobile-css]")){const H=document.createElement("style");H.setAttribute("data-openseadragon-mobile-css","true"),H.textContent="@media (hover: none) {    .openseadragon-canvas:focus {        outline: none !important;    }}",document.head.appendChild(H)}(function(H){H.width="100%",H.height="100%",H.overflow="hidden",H.position="absolute",H.top="0px",H.left="0px"})(this.canvas.style),t.setElementTouchActionNone(this.canvas),T.tabIndex!==""&&(this.canvas.tabIndex=T.tabIndex===void 0?0:T.tabIndex),this.container.className="openseadragon-container",(function(H){H.width="100%",H.height="100%",H.position="relative",H.overflow="hidden",H.left="0px",H.top="0px",H.textAlign="left"})(this.container.style),t.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new t.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:t.delegate(this,v),keyDownHandler:t.delegate(this,E),keyUpHandler:t.delegate(this,b),keyHandler:t.delegate(this,M),clickHandler:t.delegate(this,D),dblClickHandler:t.delegate(this,P),dragHandler:t.delegate(this,z),dragEndHandler:t.delegate(this,O),enterHandler:t.delegate(this,L),leaveHandler:t.delegate(this,N),pressHandler:t.delegate(this,j),releaseHandler:t.delegate(this,se),nonPrimaryPressHandler:t.delegate(this,K),nonPrimaryReleaseHandler:t.delegate(this,X),scrollHandler:t.delegate(this,Q),pinchHandler:t.delegate(this,Z),focusHandler:t.delegate(this,he),blurHandler:t.delegate(this,Y)}),this.outerTracker=new t.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:t.delegate(this,ee),leaveHandler:t.delegate(this,_e)}),this.toolbar&&(this.toolbar=new t.ControlDock({element:this.toolbar})),this.bindStandardControls(),i[this.hash].prevContainerSize=o(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){i[te.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new t.World({viewer:this}),this.world.addHandler("add-item",function(H){te.source=te.world.getItemAt(0).source,i[te.hash].forceRedraw=!0,te._updateRequestId||(te._updateRequestId=u(te,G));const B=H.item,ge=function(){const we=te._areAllFullyLoaded();we!==te._fullyLoaded&&(te._fullyLoaded=we,te.raiseEvent("fully-loaded-change",{fullyLoaded:we}))};B._fullyLoadedHandlerForViewer=ge,B.addHandler("fully-loaded-change",ge)}),this.world.addHandler("remove-item",function(H){const B=H.item;B._fullyLoadedHandlerForViewer&&(B.removeHandler("fully-loaded-change",B._fullyLoadedHandlerForViewer),delete B._fullyLoadedHandlerForViewer),te.world.getItemCount()?te.source=te.world.getItemAt(0).source:te.source=null,i[te.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(H){te.viewport&&te.viewport._setContentBounds(te.world.getHomeBounds(),te.world.getContentFactor())}),this.world.addHandler("item-index-change",function(H){te.source=te.world.getItemAt(0).source}),this.viewport=new t.Viewport({containerSize:i[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,overlayPreserveContentDirection:this.overlayPreserveContentDirection,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new t.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:T.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new t.TileCache({viewer:this,maxImageCacheCount:this.maxImageCacheCount}),Object.prototype.hasOwnProperty.call(this.drawerOptions,"useCanvas")&&(t.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'),this.drawerOptions.useCanvas||(this.drawer=t.HTMLDrawer),delete this.drawerOptions.useCanvas);let De=Array.isArray(this.drawer)?this.drawer:[this.drawer];De.length===0&&(De=[t.DEFAULT_SETTINGS.drawer].flat(),t.console.warn("No valid drawers were selected. Using the default value.")),De=De.flatMap(function(H){return H==="auto"?Ct():[H]}),De=De.filter(function(H,B,ge){return ge.indexOf(H)===B}),this.drawerCandidates=De.map(ht).filter(Boolean),this.drawer=null;for(const H of De)if(this.requestDrawer(H,{mainDrawer:!0,redrawImmediately:!1}))break;if(!this.drawer)throw t.console.error("No drawer could be created!"),"Error with creating the selected drawer(s)";for(this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),this.overlaysContainer=t.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(oe=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(oe,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(oe=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(oe,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),("navigatorAutoResize"in this)&&t.console.warn("navigatorAutoResize is deprecated, this value will be ignored."),this.showNavigator&&(this.navigator=new t.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime,drawer:this.drawer.getType(),drawerOptions:this.drawerOptions,loadTilesWithAjax:this.loadTilesWithAjax,ajaxHeaders:this.ajaxHeaders,ajaxWithCredentials:this.ajaxWithCredentials})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),oe=0;oe<this.customControls.length;oe++)this.addControl(this.customControls[oe].id,{anchor:this.customControls[oe].anchor});t.requestAnimationFrame(function(){d(te)}),t._viewers.set(this.element,this)},t.extend(t.Viewer.prototype,t.EventSource.prototype,t.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},_areAllFullyLoaded:function(){const T=this.world.getItemCount();for(let F=0;F<T;F++)if(!this.world.getItemAt(F).getFullyLoaded())return!1;return!0},getFullyLoaded:function(){return this._fullyLoaded},whenFullyLoaded:function(T){this.getFullyLoaded()?setTimeout(T,1):this.addOnceHandler("fully-loaded-change",function(){T()})},openDzi:function(T){return t.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(T)},openTileSource:function(T){return t.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(T)},get buttons(){return t.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(T,F=void 0){const te=this;if(this.close(),!T)return this;if(this.sequenceMode&&t.isArray(T))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof F<"u"&&!isNaN(F)&&(this.initialPage=F),this.tileSources=T,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(t.isArray(T)||(T=[T]),!T.length)return this;this._opening=!0;const oe=T.length;let Ne=0,De=0,H;const B=function(){if(Ne+De===oe)if(Ne){(te._firstOpen||!te.preserveViewport)&&(te.viewport.goHome(!0),te.viewport.update()),te._firstOpen=!1;let we=T[0];if(we.tileSource&&(we=we.tileSource),te.overlays&&!te.preserveOverlays)for(let Ce=0;Ce<te.overlays.length;Ce++)te.currentOverlays[Ce]=s(te,te.overlays[Ce]);te._drawOverlays(),te._opening=!1,te.raiseEvent("open",{source:we})}else te._opening=!1,te.raiseEvent("open-failed",H)},ge=function(we,Ce){(!t.isPlainObject(Ce)||!Ce.tileSource)&&(Ce={tileSource:Ce}),Ce.index!==void 0&&(t.console.warn("[Viewer.open] Ignoring user-supplied index; preserving order by setting index to "+we+". If you need to set indexes, use addTiledImage instead."),delete Ce.index,Ce.index=we),Ce.collectionImmediately===void 0&&(Ce.collectionImmediately=!0);const Le=Ce.success;Ce.success=function(Ie){if(Ne++,Ce.tileSource.overlays)for(let C=0;C<Ce.tileSource.overlays.length;C++)te.addOverlay(Ce.tileSource.overlays[C]);Le&&Le(Ie),B()};const Ue=Ce.error;Ce.error=function(Ie){De++,H||(H=Ie),Ue&&Ue(Ie),B()},te.addTiledImage(Ce)};for(let we=0;we<T.length;we++)ge(we,T[we]);return this},requestInvalidate:function(T=!0){if(!i[this.hash]||!this._drawerList)return t.Promise.resolve();const F=t.now();return t.Promise.all(this._drawerList.map(te=>te.viewer.world.requestInvalidate(T,F)))},close:function(){return i[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),i[this.hash].animating=!1,this.world.removeAll(),this.tileCache.clear(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(i[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(t.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),i[this.navigator.hash]=null,delete i[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();this.paging&&this.paging.destroy(),this.container&&this.container.parentNode===this.element&&this.element.removeChild(this.container),this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),i[this.hash]=null,delete i[this.hash],this.canvas=null,this.container=null,t._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isDestroyed(){return!i[this.hash]},requestDrawer(T,F){const te={mainDrawer:!0,redrawImmediately:!0,drawerOptions:null};F=t.extend(!0,te,F);const oe=F.mainDrawer,Ne=F.redrawImmediately,De=F.drawerOptions,H=this.drawer;let B=null;T&&T.prototype instanceof t.DrawerBase?(B=T,T="custom"):typeof T=="string"&&(B=t.determineDrawer(T)),B||t.console.warn("Unsupported drawer %s! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase.",T);let ge=!1;if(B)try{ge=B.isSupported()}catch(we){t.console.warn("Error in %s isSupported(); treating this drawer as unsupported:",T,we&&we.message?we.message:we)}if(ge){H&&oe&&H.destroy();const we=new B({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor,options:De||this.drawerOptions[T]});return oe&&(this.drawer=we,Ne&&this.forceRedraw()),we}return!1},isMouseNavEnabled:function(){return this.innerTracker.tracking},setMouseNavEnabled:function(T){return this.innerTracker.setTracking(T),this.outerTracker.setTracking(T),this.raiseEvent("mouse-enabled",{enabled:T}),this},isKeyboardNavEnabled:function(){return this.keyboardNavEnabled},setKeyboardNavEnabled:function(T){return this.keyboardNavEnabled=T,this.raiseEvent("keyboard-enabled",{enabled:T}),this},areControlsEnabled:function(){let T=this.controls.length;for(let F=0;F<this.controls.length;F++)T=T&&this.controls[F].isVisible();return T},setControlsEnabled:function(T){return T?g(this):d(this),this.raiseEvent("controls-enabled",{enabled:T}),this},setDebugMode:function(T){for(let F=0;F<this.world.getItemCount();F++)this.world.getItemAt(F).debugMode=T;this.debugMode=T,this.forceRedraw()},setAjaxHeaders:function(T,F){if(T===null&&(T={}),!t.isPlainObject(T)){t.console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(F===void 0&&(F=!0),this.ajaxHeaders=T,F){for(let te=0;te<this.world.getItemCount();te++)this.world.getItemAt(te)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(const te in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[te].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(T){this.buttonGroup.addButton(T)},isFullPage:function(){return i[this.hash]&&i[this.hash].fullPage},setFullPage:function(T){const F=document.body,te=F.style,oe=document.documentElement.style,Ne=this;let De;if(T===this.isFullPage())return this;const H={fullPage:T,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",H),H.preventDefaultAction)return this;if(T&&this.element){this.elementSize=t.getElementSize(this.element),this.pageScroll=t.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=te.margin,this.docMargin=oe.margin,te.margin="0",oe.margin="0",this.bodyPadding=te.padding,this.docPadding=oe.padding,te.padding="0",oe.padding="0",this.bodyWidth=te.width,this.docWidth=oe.width,te.width="100%",oe.width="100%",this.bodyHeight=te.height,this.docHeight=oe.height,te.height="100%",oe.height="100%",this.bodyDisplay=te.display,te.display="block",this.previousDisplayValuesOfBodyChildren=[],i[this.hash].prevElementParent=this.element.parentNode,i[this.hash].prevNextSibling=this.element.nextSibling,i[this.hash].prevElementWidth=this.element.style.width,i[this.hash].prevElementHeight=this.element.style.height,De=F.children.length;for(let B=0;B<De;B++){const ge=F.children[B];ge!==this.element&&(this.previousDisplayValuesOfBodyChildren.push({element:ge,display:ge.style.display}),ge.style.display="none")}this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,F.appendChild(this.toolbar.element),t.addClass(this.toolbar.element,"fullpage")),t.addClass(this.element,"fullpage"),F.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=t.getElementSize(this.element).y-t.getElementSize(this.toolbar.element).y+"px"),i[this.hash].fullPage=!0,t.delegate(this,ee)({})}else{this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,te.margin=this.bodyMargin,oe.margin=this.docMargin,te.padding=this.bodyPadding,oe.padding=this.docPadding,te.width=this.bodyWidth,oe.width=this.docWidth,te.height=this.bodyHeight,oe.height=this.docHeight,te.display=this.bodyDisplay,F.removeChild(this.element),De=this.previousDisplayValuesOfBodyChildren.length;for(let we=0;we<De;we++){const{element:Ce,display:Le}=this.previousDisplayValuesOfBodyChildren[we];Ce.style.display=Le}t.removeClass(this.element,"fullpage"),i[this.hash].prevElementParent.insertBefore(this.element,i[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(F.removeChild(this.toolbar.element),t.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=i[this.hash].prevElementWidth,this.element.style.height=i[this.hash].prevElementHeight;let B=0;const ge=function(){t.setPageScroll(Ne.pageScroll);const we=t.getPageScroll();B++,B<10&&(we.x!==Ne.pageScroll.x||we.y!==Ne.pageScroll.y)&&t.requestAnimationFrame(ge)};t.requestAnimationFrame(ge),i[this.hash].fullPage=!1,t.delegate(this,_e)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:T}),this},setFullScreen:function(T){const F=this;if(!t.supportsFullScreen)return this.setFullPage(T);if(t.isFullScreen()===T)return this;const te={fullScreen:T,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",te),te.preventDefaultAction)return this;if(T){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";const oe=function(){if(!i[F.hash]){t.removeEvent(document,t.fullScreenEventName,oe),t.removeEvent(document,t.fullScreenErrorEventName,oe);return}const Ne=t.isFullScreen();Ne||(t.removeEvent(document,t.fullScreenEventName,oe),t.removeEvent(document,t.fullScreenErrorEventName,oe),F.setFullPage(!1),F.isFullPage()&&(F.element.style.width=F.fullPageStyleWidth,F.element.style.height=F.fullPageStyleHeight)),F.navigator&&F.viewport&&setTimeout(function(){F.navigator.update(F.viewport)}),F.raiseEvent("full-screen",{fullScreen:Ne})};t.addEvent(document,t.fullScreenEventName,oe),t.addEvent(document,t.fullScreenErrorEventName,oe),t.requestFullScreen(document.body)}else t.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return t.isFullScreen()&&this.isFullPage()},setVisible:function(T){return this.container.style.visibility=T?"":"hidden",this.raiseEvent("visible",{visible:T}),this},addTiledImage:function(T){t.console.assert(T,"[Viewer.addTiledImage] options is required"),t.console.assert(T.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),t.console.assert(!T.replace||T.index>-1&&T.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world"),this._hideMessage();const F=T.success,te=T.error;T.replace&&(T.replaceItem=this.world.getItemAt(T.index));const oe={options:T};this._loadQueue.push(oe);const Ne=H=>{this.collectionMode&&(this.world.arrange({immediately:H.options.collectionImmediately,rows:this.collectionRows,columns:this.collectionColumns,layout:this.collectionLayout,tileSize:this.collectionTileSize,tileMargin:this.collectionTileMargin}),this.world.setAutoRefigureSizes(!0))},De=H=>{for(let B=0;B<this._loadQueue.length;B++)if(this._loadQueue[B]===oe){this._loadQueue.splice(B,1);break}this._loadQueue.length===0&&Ne(oe),this.raiseEvent("add-item-failed",H),te&&te(H)};if(t.isArray(T.tileSource)){setTimeout(function(){De({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:T.tileSource,options:T})});return}delete oe.tiledImage,T.success=H=>{oe.tiledImage=H.item,oe.originalSuccess=F;let B,ge;for(;this._loadQueue.length;){B=this._loadQueue[0];const we=B.tiledImage;if(!we)break;this._loadQueue.splice(0,1);const Ce=we.source;if(B.options.replace){const Le=B.options.replaceItem,Ue=this.world.getIndexOfItem(Le);Ue!==-1&&(B.options.index=Ue),!Le._zombieCache&&Le.source.equals(Ce)&&Le.allowZombieCache(!0),this.world.removeItem(Le)}this.collectionMode&&this.world.setAutoRefigureSizes(!1),this.navigator&&(ge=t.extend({},B.options,{replace:!1,originalTiledImage:we,tileSource:Ce}),this.navigator.addTiledImage(ge)),this.world.addItem(we,{index:B.options.index}),this._loadQueue.length===0&&Ne(B),this.world.getItemCount()===1&&!this.preserveViewport&&this.viewport.goHome(!0),B.originalSuccess&&B.originalSuccess({item:we}),this.drawer&&this.drawer.tiledImageCreated(we)}},T.error=De,this.instantiateTiledImageClass(T)},instantiateTiledImageClass:function(T){return this.instantiateTileSourceClass(T).then(F=>{const te=new t.TiledImage({viewer:this,source:F.source,viewport:this.viewport,drawer:this.drawer,tileCache:this.tileCache,imageLoader:this.imageLoader,x:T.x,y:T.y,width:T.width,height:T.height,fitBounds:T.fitBounds,fitBoundsPlacement:T.fitBoundsPlacement,clip:T.clip,placeholderFillStyle:T.placeholderFillStyle,opacity:T.opacity,preload:T.preload,degrees:T.degrees,flipped:T.flipped,compositeOperation:T.compositeOperation,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,maxTilesPerFrame:this.maxTilesPerFrame,loadDestinationTilesOnAnimation:this.loadDestinationTilesOnAnimation,immediateRender:this.immediateRender,blendTime:this.blendTime,alwaysBlend:this.alwaysBlend,minPixelRatio:this.minPixelRatio,smoothTileEdgesMinZoom:this.smoothTileEdgesMinZoom,iOSDevice:this.iOSDevice,crossOriginPolicy:T.crossOriginPolicy,ajaxWithCredentials:T.ajaxWithCredentials,loadTilesWithAjax:T.loadTilesWithAjax,ajaxHeaders:T.ajaxHeaders,debugMode:this.debugMode,subPixelRoundingForTransparency:this.subPixelRoundingForTransparency,callTileLoadedWithCachedData:this.callTileLoadedWithCachedData,originalDataType:T.originalDataType});return T.success({item:te}),te}).catch(F=>{if(T.error)return T.error(F),F;throw F})},instantiateTileSourceClass(T){return new t.Promise((F,te)=>{T.placeholderFillStyle===void 0&&(T.placeholderFillStyle=this.placeholderFillStyle),T.opacity===void 0&&(T.opacity=this.opacity),T.preload===void 0&&(T.preload=this.preload),T.compositeOperation===void 0&&(T.compositeOperation=this.compositeOperation),T.crossOriginPolicy===void 0&&(T.crossOriginPolicy=T.tileSource.crossOriginPolicy!==void 0?T.tileSource.crossOriginPolicy:this.crossOriginPolicy),T.ajaxWithCredentials===void 0&&(T.ajaxWithCredentials=this.ajaxWithCredentials),T.loadTilesWithAjax===void 0&&(T.loadTilesWithAjax=this.loadTilesWithAjax),t.isPlainObject(T.ajaxHeaders)||(T.ajaxHeaders={});let oe=T.tileSource;if(t.type(oe)==="string"){if(oe.match(/^\s*<.*>\s*$/))oe=t.parseXml(oe);else if(oe.match(/^\s*[{[].*[}\]]\s*$/))try{oe=t.parseJSON(oe)}catch{}}function Ne(De,H){De.ready?F({source:De}):(De.addHandler("ready",function(B){F({source:B.tileSource})}),De.addHandler("open-failed",function(B){te({message:B.message,source:H})}))}setTimeout(()=>{if(t.type(oe)==="string")oe=new t.TileSource({url:oe,crossOriginPolicy:T.crossOriginPolicy!==void 0?T.crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,ajaxHeaders:t.extend({},this.ajaxHeaders,T.ajaxHeaders),splitHashDataForPost:this.splitHashDataForPost}),Ne(oe,oe);else if(t.isPlainObject(oe)||oe.nodeType)if(oe.crossOriginPolicy===void 0&&(T.crossOriginPolicy!==void 0||this.crossOriginPolicy!==void 0)&&(oe.crossOriginPolicy=T.crossOriginPolicy!==void 0?T.crossOriginPolicy:this.crossOriginPolicy),oe.ajaxWithCredentials===void 0&&(oe.ajaxWithCredentials=this.ajaxWithCredentials),t.isFunction(oe.getTileUrl)){const De=new t.TileSource(oe);De.getTileUrl=oe.getTileUrl,oe.ready=!1,Ne(De,oe)}else{const De=t.TileSource.determineType(this,oe,null);if(!De){te({message:"Unable to load TileSource",source:oe,error:!0});return}const H=De.prototype.configure.apply(this,[oe]);H.ready=!1,Ne(new De(H),oe)}else Ne(oe,oe)})})},addSimpleImage:function(T){t.console.assert(T,"[Viewer.addSimpleImage] options is required"),t.console.assert(T.url,"[Viewer.addSimpleImage] options.url is required");const F=t.extend({},T,{tileSource:{type:"image",url:T.url}});delete F.url,this.addTiledImage(F)},addLayer:function(T){const F=this;t.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");const te=t.extend({},T,{success:function(oe){F.raiseEvent("add-layer",{options:T,drawer:oe.item})},error:function(oe){F.raiseEvent("add-layer-failed",oe)}});return this.addTiledImage(te),this},getLayerAtLevel:function(T){return t.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(T)},getLevelOfLayer:function(T){return t.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(T)},getLayersCount:function(){return t.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(T,F){return t.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(T,F)},removeLayer:function(T){return t.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(T)},forceRedraw:function(){return i[this.hash].forceRedraw=!0,this},forceResize:function(){i[this.hash].needsResize=!0,i[this.hash].forceResize=!0},bindSequenceControls:function(){const T=t.delegate(this,_),F=t.delegate(this,w),te=t.delegate(this,this.goToNextPage),oe=t.delegate(this,this.goToPreviousPage),Ne=this.navImages;let De=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(De=!1),this.previousButton=new t.Button({element:this.previousButton?t.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.PreviousPage"),srcRest:ue(this.prefixUrl,Ne.previous.REST),srcGroup:ue(this.prefixUrl,Ne.previous.GROUP),srcHover:ue(this.prefixUrl,Ne.previous.HOVER),srcDown:ue(this.prefixUrl,Ne.previous.DOWN),onRelease:oe,onFocus:T,onBlur:F}),this.nextButton=new t.Button({element:this.nextButton?t.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.NextPage"),srcRest:ue(this.prefixUrl,Ne.next.REST),srcGroup:ue(this.prefixUrl,Ne.next.GROUP),srcHover:ue(this.prefixUrl,Ne.next.HOVER),srcDown:ue(this.prefixUrl,Ne.next.DOWN),onRelease:te,onFocus:T,onBlur:F}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),De&&(this.paging=new t.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:t.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||t.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){const T=t.delegate(this,this.startZoomInAction),F=t.delegate(this,this.endZoomAction),te=t.delegate(this,this.singleZoomInAction),oe=t.delegate(this,this.startZoomOutAction),Ne=t.delegate(this,this.singleZoomOutAction),De=t.delegate(this,Fe),H=t.delegate(this,Ve),B=t.delegate(this,at),ge=t.delegate(this,et),we=t.delegate(this,Ge),Ce=t.delegate(this,_),Le=t.delegate(this,w),Ue=this.navImages,Ie=[];let C=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(C=!1),this.showZoomControl&&(Ie.push(this.zoomInButton=new t.Button({element:this.zoomInButton?t.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomIn"),srcRest:ue(this.prefixUrl,Ue.zoomIn.REST),srcGroup:ue(this.prefixUrl,Ue.zoomIn.GROUP),srcHover:ue(this.prefixUrl,Ue.zoomIn.HOVER),srcDown:ue(this.prefixUrl,Ue.zoomIn.DOWN),onPress:T,onRelease:F,onClick:te,onEnter:T,onExit:F,onFocus:Ce,onBlur:Le})),Ie.push(this.zoomOutButton=new t.Button({element:this.zoomOutButton?t.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomOut"),srcRest:ue(this.prefixUrl,Ue.zoomOut.REST),srcGroup:ue(this.prefixUrl,Ue.zoomOut.GROUP),srcHover:ue(this.prefixUrl,Ue.zoomOut.HOVER),srcDown:ue(this.prefixUrl,Ue.zoomOut.DOWN),onPress:oe,onRelease:F,onClick:Ne,onEnter:oe,onExit:F,onFocus:Ce,onBlur:Le}))),this.showHomeControl&&Ie.push(this.homeButton=new t.Button({element:this.homeButton?t.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Home"),srcRest:ue(this.prefixUrl,Ue.home.REST),srcGroup:ue(this.prefixUrl,Ue.home.GROUP),srcHover:ue(this.prefixUrl,Ue.home.HOVER),srcDown:ue(this.prefixUrl,Ue.home.DOWN),onRelease:De,onFocus:Ce,onBlur:Le})),this.showFullPageControl&&Ie.push(this.fullPageButton=new t.Button({element:this.fullPageButton?t.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.FullPage"),srcRest:ue(this.prefixUrl,Ue.fullpage.REST),srcGroup:ue(this.prefixUrl,Ue.fullpage.GROUP),srcHover:ue(this.prefixUrl,Ue.fullpage.HOVER),srcDown:ue(this.prefixUrl,Ue.fullpage.DOWN),onRelease:H,onFocus:Ce,onBlur:Le})),this.showRotationControl&&(Ie.push(this.rotateLeftButton=new t.Button({element:this.rotateLeftButton?t.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateLeft"),srcRest:ue(this.prefixUrl,Ue.rotateleft.REST),srcGroup:ue(this.prefixUrl,Ue.rotateleft.GROUP),srcHover:ue(this.prefixUrl,Ue.rotateleft.HOVER),srcDown:ue(this.prefixUrl,Ue.rotateleft.DOWN),onRelease:B,onFocus:Ce,onBlur:Le})),Ie.push(this.rotateRightButton=new t.Button({element:this.rotateRightButton?t.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateRight"),srcRest:ue(this.prefixUrl,Ue.rotateright.REST),srcGroup:ue(this.prefixUrl,Ue.rotateright.GROUP),srcHover:ue(this.prefixUrl,Ue.rotateright.HOVER),srcDown:ue(this.prefixUrl,Ue.rotateright.DOWN),onRelease:ge,onFocus:Ce,onBlur:Le}))),this.showFlipControl&&Ie.push(this.flipButton=new t.Button({element:this.flipButton?t.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Flip"),srcRest:ue(this.prefixUrl,Ue.flip.REST),srcGroup:ue(this.prefixUrl,Ue.flip.GROUP),srcHover:ue(this.prefixUrl,Ue.flip.HOVER),srcDown:ue(this.prefixUrl,Ue.flip.DOWN),onRelease:we,onFocus:Ce,onBlur:Le})),C?(this.buttonGroup=new t.ButtonGroup({buttons:Ie,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",t.delegate(this,He)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT})):this.customButtons=Ie),this},currentPage:function(){return this._sequenceIndex},goToPage:function(T){return this.tileSources&&T>=0&&T<this.tileSources.length&&(this._sequenceIndex=T,this._updateSequenceButtons(T),this.open(this.tileSources[T]),this.referenceStrip&&this.referenceStrip.setFocus(T),this.raiseEvent("page",{page:T})),this},addOverlay:function(T,F,te,oe){let Ne;if(t.isPlainObject(T)?Ne=T:Ne={element:T,location:F,placement:te,onDraw:oe},T=t.getElement(Ne.element),c(this.currentOverlays,T)>=0)return this;const De=s(this,Ne);return this.currentOverlays.push(De),De.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:T,location:Ne.location,placement:Ne.placement}),this},updateOverlay:function(T,F,te){T=t.getElement(T);const oe=c(this.currentOverlays,T);return oe>=0&&(this.currentOverlays[oe].update(F,te),i[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:T,location:F,placement:te})),this},removeOverlay:function(T){T=t.getElement(T);const F=c(this.currentOverlays,T);return F>=0&&(this.currentOverlays[F].destroy(),this.currentOverlays.splice(F,1),i[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:T})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return i[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(T){T=t.getElement(T);const F=c(this.currentOverlays,T);return F>=0?this.currentOverlays[F]:null},_registerDrawer:function(T){this._drawerList||(this._drawerList=[]),this._drawerList.push(T)},_unregisterDrawer:function(T){if(!this._drawerList){t.console.warn("Viewer._unregisterDrawer: cannot unregister on viewer that is not meant to share updates.");return}this._drawerList.splice(this._drawerList.indexOf(T),1)},_updateSequenceButtons:function(T){this.nextButton&&(!this.tileSources||this.tileSources.length-1===T?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(T>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(T){this._hideMessage();const F=t.makeNeutralElement("div");F.appendChild(document.createTextNode(T)),this.messageDiv=t.makeCenteredNode(F),t.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){const T=this.messageDiv;T&&(T.parentNode.removeChild(T),delete this.messageDiv)},gestureSettingsByDeviceType:function(T){switch(T){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){const T=this.currentOverlays.length;for(let F=0;F<T;F++)this.currentOverlays[F].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new t.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else t.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),t.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){t.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){const T=t.pixelDensityRatio,F=t.getCurrentPixelDensityRatio();T!==F&&(t.pixelDensityRatio=F,this.forceResize())},goToPreviousPage:function(){let T=this._sequenceIndex-1;this.navPrevNextWrap&&T<0&&(T+=this.tileSources.length),this.goToPage(T)},goToNextPage:function(){let T=this._sequenceIndex+1;this.navPrevNextWrap&&T>=this.tileSources.length&&(T=0),this.goToPage(T)},isAnimating:function(){return i[this.hash].animating},startZoomInAction:function(){i[this.hash].lastZoomTime=t.now(),i[this.hash].zoomFactor=this.zoomPerSecond,i[this.hash].zooming=!0,ae(this)},startZoomOutAction:function(){i[this.hash].lastZoomTime=t.now(),i[this.hash].zoomFactor=1/this.zoomPerSecond,i[this.hash].zooming=!0,ae(this)},endZoomAction:function(){i[this.hash].zooming=!1},singleZoomInAction:function(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())},singleZoomOutAction:function(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}});function o(T){return T=t.getElement(T),new t.Point(T.clientWidth===0?1:T.clientWidth,T.clientHeight===0?1:T.clientHeight)}function s(T,F){if(F instanceof t.Overlay)return F;let te=null;if(F.element)te=t.getElement(F.element);else{const B=F.id?F.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);te=t.getElement(F.id),te||(te=document.createElement("a"),te.href="#/overlay/"+B),te.id=B,t.addClass(te,F.className?F.className:"openseadragon-overlay")}let oe=F.location,Ne=F.width,De=F.height;if(!oe){let B=F.x,ge=F.y;if(F.px!==void 0){const we=T.viewport.imageToViewportRectangle(new t.Rect(F.px,F.py,Ne||0,De||0));B=we.x,ge=we.y,Ne=Ne!==void 0?we.width:void 0,De=De!==void 0?we.height:void 0}oe=new t.Point(B,ge)}let H=F.placement;return H&&t.type(H)==="string"&&(H=t.Placement[F.placement.toUpperCase()]),new t.Overlay({element:te,location:oe,placement:H,onDraw:F.onDraw,checkResize:F.checkResize,width:Ne,height:De,rotationMode:F.rotationMode})}function c(T,F){for(let te=T.length-1;te>=0;te--)if(T[te].element===F)return te;return-1}function u(T,F){return t.requestAnimationFrame(function(){F(T)})}function h(T){t.requestAnimationFrame(function(){m(T)})}function d(T){T.autoHideControls&&(T.controlsShouldFade=!0,T.controlsFadeBeginTime=t.now()+T.controlsFadeDelay,window.setTimeout(function(){h(T)},T.controlsFadeDelay))}function m(T){if(T.controlsShouldFade){let oe=1-(t.now()-T.controlsFadeBeginTime)/T.controlsFadeLength;oe=Math.min(1,oe),oe=Math.max(0,oe);for(let Ne=T.controls.length-1;Ne>=0;Ne--)T.controls[Ne].autoFade&&T.controls[Ne].setOpacity(oe);oe>0&&h(T)}}function g(T){T.controlsShouldFade=!1;for(let F=T.controls.length-1;F>=0;F--)T.controls[F].setOpacity(1)}function _(){g(this)}function w(){d(this)}function v(T){const F={tracker:T.eventSource,position:T.position,originalEvent:T.originalEvent,preventDefault:T.preventDefault};this.raiseEvent("canvas-contextmenu",F),T.preventDefault=F.preventDefault}function x(T,F){switch(T){case"ArrowUp":case"KeyW":return F?"zoomIn":"panUp";case"ArrowDown":case"KeyS":return F?"zoomOut":"panDown";case"ArrowLeft":case"KeyA":return"panLeft";case"ArrowRight":case"KeyD":return"panRight";case"Equal":return"zoomIn";case"Minus":return"zoomOut";default:return null}}function b(T){const F=(oe,Ne)=>{const De=x(oe,Ne);De&&this._activeActions[De]&&(this._activeActions[De]=!1,this._navActionFrames[De]<this._minNavActionFrames&&(this._navActionVirtuallyHeld[De]=!0))},te=T.originalEvent.code;F(te,!0),F(te,!1)}function E(T){const F={originalEvent:T.originalEvent,preventDefaultAction:!this.keyboardNavEnabled,preventVerticalPan:T.preventVerticalPan||!this.panVertical,preventHorizontalPan:T.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",F),!F.preventDefaultAction&&!T.ctrl&&!T.alt&&!T.meta){const te=T.originalEvent.code,oe=T.shift,Ne=x(te,oe);if(Ne&&!this._activeActions[Ne]){this._activeActions[Ne]=!0,this._navActionFrames[Ne]=0,T.preventDefault=!0;return}switch(T.keyCode){case 48:this.viewport.goHome(),this.viewport.applyConstraints(),T.preventDefault=!0;break;case 82:T.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),T.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),T.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:T.preventDefault=!1;break}}else T.preventDefault=!1}function M(T){const F={originalEvent:T.originalEvent};this.raiseEvent("canvas-key-press",F)}function D(T){let F;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(T.position.x=this.viewport.getContainerSize().x-T.position.x);const oe={tracker:T.eventSource,position:T.position,quick:T.quick,shift:T.shift,originalEvent:T.originalEvent,originalTarget:T.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",oe),!oe.preventDefaultAction&&this.viewport&&T.quick&&(F=this.gestureSettingsByDeviceType(T.pointerType),F.clickToZoom===!0&&(this.viewport.zoomBy(T.shift?1/this.zoomPerClick:this.zoomPerClick,F.zoomToRefPoint?this.viewport.pointFromPixel(T.position,!0):null),this.viewport.applyConstraints()),F.dblClickDragToZoom&&(i[this.hash].draggingToZoom===!0?(i[this.hash].lastClickTime=null,i[this.hash].draggingToZoom=!1):i[this.hash].lastClickTime=t.now()))}function P(T){let F;const te={tracker:T.eventSource,position:T.position,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",te),!te.preventDefaultAction&&this.viewport&&(F=this.gestureSettingsByDeviceType(T.pointerType),F.dblClickToZoom&&(this.viewport.zoomBy(T.shift?1/this.zoomPerClick:this.zoomPerClick,F.zoomToRefPoint?this.viewport.pointFromPixel(T.position,!0):null),this.viewport.applyConstraints()))}function z(T){let F;const te={tracker:T.eventSource,pointerType:T.pointerType,position:T.position,delta:T.delta,speed:T.speed,direction:T.direction,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",te),F=this.gestureSettingsByDeviceType(T.pointerType),!te.preventDefaultAction&&this.viewport){if(F.dblClickDragToZoom&&i[this.hash].draggingToZoom){const oe=Math.pow(this.zoomPerDblClickDrag,T.delta.y/50);this.viewport.zoomBy(oe)}else if(F.dragToPan&&!i[this.hash].draggingToZoom){if(this.panHorizontal||(T.delta.x=0),this.panVertical||(T.delta.y=0),this.viewport.flipped&&(T.delta.x=-T.delta.x),this.constrainDuringPan){const oe=this.viewport.deltaPointsFromPixels(T.delta.negate());this.viewport.centerSpringX.target.value+=oe.x,this.viewport.centerSpringY.target.value+=oe.y;const Ne=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=oe.x,this.viewport.centerSpringY.target.value-=oe.y,Ne.xConstrained&&(T.delta.x=0),Ne.yConstrained&&(T.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(T.delta.negate()),F.flickEnabled&&!this.constrainDuringPan)}}}function O(T){let F;const te={tracker:T.eventSource,pointerType:T.pointerType,position:T.position,speed:T.speed,direction:T.direction,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",te),F=this.gestureSettingsByDeviceType(T.pointerType),!te.preventDefaultAction&&this.viewport){if(!i[this.hash].draggingToZoom&&F.dragToPan&&F.flickEnabled&&T.speed>=F.flickMinSpeed){let oe=0;this.panHorizontal&&(oe=F.flickMomentum*T.speed*Math.cos(T.direction));let Ne=0;this.panVertical&&(Ne=F.flickMomentum*T.speed*Math.sin(T.direction));const De=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),H=this.viewport.pointFromPixel(new t.Point(De.x-oe,De.y-Ne));this.viewport.panTo(H,!1)}this.viewport.applyConstraints()}F.dblClickDragToZoom&&i[this.hash].draggingToZoom===!0&&(i[this.hash].draggingToZoom=!1)}function L(T){this.raiseEvent("canvas-enter",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function N(T){this.raiseEvent("canvas-exit",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function j(T){if(this.raiseEvent("canvas-press",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,insideElementPressed:T.insideElementPressed,insideElementReleased:T.insideElementReleased,originalEvent:T.originalEvent}),this.gestureSettingsByDeviceType(T.pointerType).dblClickDragToZoom){const te=i[this.hash].lastClickTime,oe=t.now();if(te===null)return;oe-te<this.dblClickTimeThreshold&&(i[this.hash].draggingToZoom=!0),i[this.hash].lastClickTime=null}}function se(T){this.raiseEvent("canvas-release",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,insideElementPressed:T.insideElementPressed,insideElementReleased:T.insideElementReleased,originalEvent:T.originalEvent})}function K(T){this.raiseEvent("canvas-nonprimary-press",{tracker:T.eventSource,position:T.position,pointerType:T.pointerType,button:T.button,buttons:T.buttons,originalEvent:T.originalEvent})}function X(T){this.raiseEvent("canvas-nonprimary-release",{tracker:T.eventSource,position:T.position,pointerType:T.pointerType,button:T.button,buttons:T.buttons,originalEvent:T.originalEvent})}function Z(T){let F,te,oe;const Ne={tracker:T.eventSource,pointerType:T.pointerType,gesturePoints:T.gesturePoints,lastCenter:T.lastCenter,center:T.center,lastDistance:T.lastDistance,distance:T.distance,shift:T.shift,originalEvent:T.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",Ne),this.viewport){let De=this.gestureSettingsByDeviceType(T.pointerType);if(De.pinchToZoom&&(!Ne.preventDefaultPanAction||!Ne.preventDefaultZoomAction)&&(F=this.viewport.pointFromPixel(T.center,!0),De.zoomToRefPoint&&!Ne.preventDefaultPanAction&&(te=this.viewport.pointFromPixel(T.lastCenter,!0),oe=te.minus(F),this.panHorizontal||(oe.x=0),this.panVertical||(oe.y=0),this.viewport.panBy(oe,!0)),Ne.preventDefaultZoomAction||this.viewport.zoomBy(T.distance/T.lastDistance,F,!0),this.viewport.applyConstraints()),De.pinchRotate&&!Ne.preventDefaultRotateAction){const H=Math.atan2(T.gesturePoints[0].currentPos.y-T.gesturePoints[1].currentPos.y,T.gesturePoints[0].currentPos.x-T.gesturePoints[1].currentPos.x),B=Math.atan2(T.gesturePoints[0].lastPos.y-T.gesturePoints[1].lastPos.y,T.gesturePoints[0].lastPos.x-T.gesturePoints[1].lastPos.x);F=this.viewport.pointFromPixel(T.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(H-B)*(180/Math.PI),F,!0)}}}function he(T){this.raiseEvent("canvas-focus",{tracker:T.eventSource,originalEvent:T.originalEvent})}function Y(T){for(const F in this._activeActions)this._activeActions[F]=!1;for(const F in this._navActionVirtuallyHeld)this._navActionVirtuallyHeld[F]=!1;this.raiseEvent("canvas-blur",{tracker:T.eventSource,originalEvent:T.originalEvent})}function Q(T){let F,te,oe;const Ne=t.now();Ne-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=Ne,F={tracker:T.eventSource,position:T.position,scroll:T.scroll,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",F),!F.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(T.position.x=this.viewport.getContainerSize().x-T.position.x),te=this.gestureSettingsByDeviceType(T.pointerType),te.scrollToZoom&&(oe=Math.pow(this.zoomPerScroll,T.scroll),this.viewport.zoomBy(oe,te.zoomToRefPoint?this.viewport.pointFromPixel(T.position,!0):null),this.viewport.applyConstraints())),T.preventDefault=F.preventDefault):T.preventDefault=!0}function ee(T){i[this.hash].mouseInside=!0,g(this),this.raiseEvent("container-enter",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function _e(T){T.pointers<1&&(i[this.hash].mouseInside=!1,i[this.hash].animating||d(this)),this.raiseEvent("container-exit",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function G(T){ie(T),T.isOpen()?T._updateRequestId=u(T,G):T._updateRequestId=!1}function V(T,F){const te=T.viewport,oe=te.getZoom(),Ne=te.getCenter();te.resize(F,T.preserveImageSizeOnResize),te.panTo(Ne,!0);let De;if(T.preserveImageSizeOnResize)De=i[T.hash].prevContainerSize.x/F.x;else{const H=new t.Point(0,0),B=new t.Point(i[T.hash].prevContainerSize.x,i[T.hash].prevContainerSize.y).distanceTo(H);De=new t.Point(F.x,F.y).distanceTo(H)/B*i[T.hash].prevContainerSize.x/F.x}te.zoomTo(oe*De,null,!0),i[T.hash].prevContainerSize=F,i[T.hash].forceRedraw=!0,i[T.hash].needsResize=!1,i[T.hash].forceResize=!1}function q(T){for(const H in T._activeActions)(T._activeActions[H]||T._navActionVirtuallyHeld[H])&&(T._navActionFrames[H]++,T._navActionFrames[H]>=T._minNavActionFrames&&(T._navActionVirtuallyHeld[H]=!1));function F(H){return T._activeActions[H]||T._navActionVirtuallyHeld[H]}const te=T.pixelsPerArrowPress/10,oe=T.viewport.deltaPointsFromPixels(new e.Point(te,te));if(F("zoomIn")){T.viewport.zoomBy(1.01,null,!0),T.viewport.applyConstraints();return}if(F("zoomOut")){T.viewport.zoomBy(.99,null,!0),T.viewport.applyConstraints();return}let Ne=0,De=0;T.preventVerticalPan||(F("panUp")&&(De-=oe.y),F("panDown")&&(De+=oe.y)),T.preventHorizontalPan||(F("panLeft")&&(Ne-=oe.x),F("panRight")&&(Ne+=oe.x)),(Ne!==0||De!==0)&&(T.viewport.panBy(new e.Point(Ne,De),!0),T.viewport.applyConstraints())}function ie(T){if(q(T),T._opening||!i[T.hash])return;let F=!1;if(T.autoResize||i[T.hash].forceResize){let H;if(T._autoResizePolling){H=o(T.container);const B=i[T.hash].prevContainerSize;H.equals(B)||(i[T.hash].needsResize=!0)}i[T.hash].needsResize&&(V(T,H||o(T.container)),F=!0)}const te=T.viewport.update()||F;let oe=T.world.update(te)||te;te&&T.raiseEvent("viewport-change"),T.referenceStrip&&(oe=T.referenceStrip.update(T.viewport)||oe);const Ne=i[T.hash].animating;!Ne&&oe&&(T.raiseEvent("animation-start"),g(T));const De=Ne&&!oe;De&&(i[T.hash].animating=!1),(oe||De||i[T.hash].forceRedraw||T.world.needsDraw())&&(me(T),T._drawOverlays(),T.navigator&&T.navigator.update(T.viewport),i[T.hash].forceRedraw=!1,oe&&T.raiseEvent("animation")),De&&(T.raiseEvent("animation-finish"),i[T.hash].mouseInside||d(T)),i[T.hash].animating=oe}function me(T){T.imageLoader.clear(),T.world.draw(),T.raiseEvent("update-viewport",{})}function ue(T,F){return T?T+F:F}function ae(T){t.requestAnimationFrame(t.delegate(T,Be))}function Be(){if(i[this.hash].zooming&&this.viewport){const T=t.now(),F=T-i[this.hash].lastZoomTime,te=Math.pow(i[this.hash].zoomFactor,F/1e3);this.viewport.zoomBy(te),this.viewport.applyConstraints(),i[this.hash].lastZoomTime=T,ae(this)}}function He(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Fe(){this.viewport&&this.viewport.goHome()}function Ve(){this.isFullPage()&&!t.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function at(){if(this.viewport){let T=this.viewport.getRotation();this.viewport.flipped?T+=this.rotationIncrement:T-=this.rotationIncrement,this.viewport.setRotation(T)}}function et(){if(this.viewport){let T=this.viewport.getRotation();this.viewport.flipped?T-=this.rotationIncrement:T+=this.rotationIncrement,this.viewport.setRotation(T)}}function Ge(){this.viewport.toggleFlip()}function ht(T){if(typeof T=="string")return T;const F=T&&T.prototype;if(F&&F instanceof e.DrawerBase&&t.isFunction(F.getType))return F.getType.call(T)}function Ct(){const T=window.matchMedia("(pointer: coarse)").matches;return/iPad|iPhone|iPod|Mac/.test(navigator.userAgent)&&T?["canvas"]:["webgl","canvas"]}t.determineDrawer=function(T){T==="auto"&&(T=Ct()[0]);for(const F in e){const te=e[F],oe=te.prototype;if(oe&&oe instanceof e.DrawerBase&&t.isFunction(oe.getType)&&oe.getType.call(te)===T)return te}return null}})(e),(function(t){t.Navigator=function(h){const d=h.viewer,m=this;let g,_;h.element||h.id?(h.element?(h.id&&t.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),h.element.id?h.id=h.element.id:h.id="navigator-"+t.now(),this.element=h.element):this.element=document.getElementById(h.id),h.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(h.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),h.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:h.autoFade},h.position&&(h.position==="BOTTOM_RIGHT"?h.controlOptions.anchor=t.ControlAnchor.BOTTOM_RIGHT:h.position==="BOTTOM_LEFT"?h.controlOptions.anchor=t.ControlAnchor.BOTTOM_LEFT:h.position==="TOP_RIGHT"?h.controlOptions.anchor=t.ControlAnchor.TOP_RIGHT:h.position==="TOP_LEFT"?h.controlOptions.anchor=t.ControlAnchor.TOP_LEFT:h.position==="ABSOLUTE"&&(h.controlOptions.anchor=t.ControlAnchor.ABSOLUTE,h.controlOptions.top=h.top,h.controlOptions.left=h.left,h.controlOptions.height=h.height,h.controlOptions.width=h.width))),this.element.id=h.id,this.element.className+=" navigator",h=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},h,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:h.animationTime,autoResize:!1,minZoomImageRatio:1,background:h.background,opacity:h.opacity,borderColor:h.borderColor,displayRegionColor:h.displayRegionColor}),h.minPixelRatio=this.minPixelRatio=d.minPixelRatio,t.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),h.controlOptions.anchor!==t.ControlAnchor.NONE&&(function(v,x){v.margin="0px",v.border=x+"px solid "+h.borderColor,v.padding="0px",v.background=h.background,v.opacity=h.opacity,v.overflow="hidden"})(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",(function(v,x){v.position="relative",v.top="0px",v.left="0px",v.fontSize="0px",v.overflow="hidden",v.border=x+"px solid "+h.displayRegionColor,v.margin="0px",v.padding="0px",v.background="transparent",v.float="left",v.cssFloat="left",v.zIndex=999999999,v.cursor="default",v.boxSizing="content-box"})(this.displayRegion.style,this.borderWidth),t.setElementPointerEventsNone(this.displayRegion),t.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=t.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",t.setElementPointerEventsNone(this.displayRegionContainer),t.setElementTouchActionNone(this.displayRegionContainer),d.addControl(this.element,h.controlOptions),this._resizeWithViewer=h.controlOptions.anchor!==t.ControlAnchor.ABSOLUTE&&h.controlOptions.anchor!==t.ControlAnchor.NONE,h.width&&h.height?(this.setWidth(h.width),this.setHeight(h.height)):this._resizeWithViewer&&(g=t.getElementSize(d.element),this.element.style.height=Math.round(g.y*h.sizeRatio)+"px",this.element.style.width=Math.round(g.x*h.sizeRatio)+"px",this.oldViewerSize=g,_=t.getElementSize(this.element),this.elementArea=_.x*_.y),this.oldContainerSize=new t.Point(0,0),t.Viewer.apply(this,[h]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function w(v,x){c(m.displayRegionContainer,v),c(m.displayRegion,-v),m.viewport.setRotation(v,x)}if(h.navigatorRotate){const v=h.viewer.viewport?h.viewer.viewport.getRotation():h.viewer.degrees||0;w(v,!0),h.viewer.addHandler("rotate",function(x){w(x.degrees,x.immediately)})}this.innerTracker.destroy(),this.innerTracker=new t.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:t.delegate(this,n),clickHandler:t.delegate(this,i),releaseHandler:t.delegate(this,o),scrollHandler:t.delegate(this,s),preProcessEventHandler:function(v){v.eventType==="wheel"&&(v.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",t.setElementPointerEventsNone(this.canvas),t.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){m.viewport&&m.viewport.goHome(!0)}),d.world.addHandler("item-index-change",function(v){window.setTimeout(function(){const x=m.world.getItemAt(v.previousIndex);m.world.setItemIndex(x,v.newIndex)},1)}),d.world.addHandler("remove-item",function(v){const x=v.item,b=m._getMatchingItem(x);b&&m.world.removeItem(b)}),this.update(d.viewport)},t.extend(t.Navigator.prototype,t.EventSource.prototype,t.Viewer.prototype,{updateSize:function(){if(this.viewport){const h=new t.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);h.equals(this.oldContainerSize)||(this.viewport.resize(h,!0),this.viewport.goHome(!0),this.oldContainerSize=h,this.world.update(),this.world.draw(),this.update(this.viewer.viewport))}},setWidth:function(h){this.width=h,this.element.style.width=typeof h=="number"?h+"px":h,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(h){this.height=h,this.element.style.height=typeof h=="number"?h+"px":h,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(h){return this.viewport.setFlip(h),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(h){u(this.canvas,h),u(this.element,h)},update:function(h){let d,m,g,_,w,v;if(h||(h=this.viewer.viewport),d=t.getElementSize(this.viewer.element),this._resizeWithViewer&&d.x&&d.y&&!d.equals(this.oldViewerSize)&&(this.oldViewerSize=d,this.maintainSizeRatio||!this.elementArea?(m=d.x*this.sizeRatio,g=d.y*this.sizeRatio):(m=Math.sqrt(this.elementArea*(d.x/d.y)),g=this.elementArea/m),this.element.style.width=Math.round(m)+"px",this.element.style.height=Math.round(g)+"px",this.elementArea||(this.elementArea=m*g),this.updateSize()),h&&this.viewport){if(_=h.getBoundsNoRotate(!0),w=this.viewport.pixelFromPointNoRotate(_.getTopLeft(),!1),v=this.viewport.pixelFromPointNoRotate(_.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){const M=h.getRotation(!0);c(this.displayRegion,-M)}const x=this.displayRegion.style;x.display=this.world.getItemCount()?"block":"none",x.top=w.y.toFixed(2)+"px",x.left=w.x.toFixed(2)+"px";const b=v.x-w.x,E=v.y-w.y;x.width=Math.round(Math.max(b,0))+"px",x.height=Math.round(Math.max(E,0))+"px"}},addTiledImage:function(h){const d=this,m=h.originalTiledImage;delete h.original;const g=t.extend({},h,{success:function(_){const w=_.item;w._originalForNavigator=m,d._matchBounds(w,m,!0),d._matchOpacity(w,m),d._matchCompositeOperation(w,m);function v(){d._matchBounds(w,m)}function x(){d._matchOpacity(w,m)}function b(){d._matchCompositeOperation(w,m)}m.addHandler("bounds-change",v),m.addHandler("clip-change",v),m.addHandler("opacity-change",x),m.addHandler("composite-operation-change",b)}});return t.Viewer.prototype.addTiledImage.apply(this,[g])},destroy:function(){return t.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(h){const d=this.world.getItemCount();for(let m=0;m<d;m++){let g=this.world.getItemAt(m);if(g._originalForNavigator===h)return g}return null},_matchBounds:function(h,d,m){const g=d.getBoundsNoRotate();h.setPosition(g.getTopLeft(),m),h.setWidth(g.width,m),h.setRotation(d.getRotation(),m),h.setClip(d.getClip()),h.setFlip(d.getFlip())},_matchOpacity:function(h,d){h.setOpacity(d.opacity)},_matchCompositeOperation:function(h,d){h.setCompositeOperation(d.compositeOperation)}});function i(h){const d={tracker:h.eventSource,position:h.position,quick:h.quick,shift:h.shift,originalEvent:h.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",d),!d.preventDefaultAction&&h.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(h.position.x=this.viewport.getContainerSize().x-h.position.x);const m=this.viewport.pointFromPixel(h.position);this.panVertical?this.panHorizontal||(m.x=this.viewer.viewport.getCenter(!0).x):m.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(m),this.viewer.viewport.applyConstraints()}}function n(h){const d={tracker:h.eventSource,position:h.position,delta:h.delta,speed:h.speed,direction:h.direction,shift:h.shift,originalEvent:h.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",d),!d.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(h.delta.x=0),this.panVertical||(h.delta.y=0),this.viewer.viewport.flipped&&(h.delta.x=-h.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(h.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function o(h){h.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function s(h){const d={tracker:h.eventSource,position:h.position,scroll:h.scroll,shift:h.shift,originalEvent:h.originalEvent,preventDefault:h.preventDefault};this.viewer.raiseEvent("navigator-scroll",d),h.preventDefault=d.preventDefault}function c(h,d){u(h,"rotate("+d+"deg)")}function u(h,d){h.style.webkitTransform=d,h.style.mozTransform=d,h.style.msTransform=d,h.style.oTransform=d,h.style.transform=d}})(e),(function(t){const i={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};t.extend(t,{getString:function(n){const o=n.split(".");let s=null;const c=arguments;let u=i,h;for(h=0;h<o.length-1;h++)u=u[o[h]]||{};return s=u[o[h]],typeof s!="string"&&(t.console.error("Untranslated source string:",n),s=""),s.replace(/\{\d+\}/g,function(d){const m=parseInt(d.match(/\d+/),10)+1;return m<c.length?c[m]:""})},setString:function(n,o){const s=n.split(".");let c=i,u;for(u=0;u<s.length-1;u++)c[s[u]]||(c[s[u]]={}),c=c[s[u]];c[s[u]]=o}})})(e),(function(t){t.Point=function(i,n){this.x=typeof i=="number"?i:0,this.y=typeof n=="number"?n:0},t.Point.prototype={clone:function(){return new t.Point(this.x,this.y)},plus:function(i){return new t.Point(this.x+i.x,this.y+i.y)},minus:function(i){return new t.Point(this.x-i.x,this.y-i.y)},times:function(i){return new t.Point(this.x*i,this.y*i)},divide:function(i){return new t.Point(this.x/i,this.y/i)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))},squaredDistanceTo:function(i){return Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)},apply:function(i){return new t.Point(i(this.x),i(this.y))},equals:function(i){return i instanceof t.Point&&this.x===i.x&&this.y===i.y},rotate:function(i,n){n=n||new t.Point(0,0);let o,s;if(i%90===0)switch(t.positiveModulo(i,360)){case 0:o=1,s=0;break;case 90:o=0,s=1;break;case 180:o=-1,s=0;break;case 270:o=0,s=-1;break}else{const h=i*Math.PI/180;o=Math.cos(h),s=Math.sin(h)}const c=o*(this.x-n.x)-s*(this.y-n.y)+n.x,u=s*(this.x-n.x)+o*(this.y-n.y)+n.y;return new t.Point(c,u)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}})(e),(function(t){t.TileSource=function(n){return t.EventSource.apply(this),this.url=null,this.addHandler("ready",o=>{const s=o.tileSource;this.ready=!0,this.aspectRatio=s.width&&s.height?s.width/s.height:1,this.dimensions=new t.Point(s.width,s.height),s.tileSize?(this._tileWidth=this._tileHeight=s.tileSize,delete this.tileSize):(s.tileWidth?(this._tileWidth=s.tileWidth,delete this.tileWidth):this._tileWidth=0,s.tileHeight?(this._tileHeight=s.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=s.tileOverlap?s.tileOverlap:0,this.minLevel=s.minLevel?s.minLevel:0,this.maxLevel=s.maxLevel!==void 0&&s.maxLevel!==null?s.maxLevel:s.width&&s.height?Math.ceil(Math.log(Math.max(s.width,s.height))/Math.log(2)):0,s.success&&t.isFunction(s.success)&&s.success(this)},null,1/0),t.type(n)==="string"?(this.url=n,n=void 0):t.extend(!0,this,n),this.url&&!this.ready?(this.aspectRatio=1,this.dimensions=new t.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this._uniqueIdentifier=this.url,setTimeout(()=>this.getImageInfo(this.url))):(this._uniqueIdentifier=Math.floor(Math.random()*1e10).toString(36),this.ready||this.ready===void 0?this.raiseEvent("ready",{tileSource:this}):setTimeout(()=>this.raiseEvent("ready",{tileSource:this}))),this},t.TileSource.prototype={getTileSize:function(n){return t.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(n){return this._tileWidth?this._tileWidth:this.getTileSize(n)},getTileHeight:function(n){return this._tileHeight?this._tileHeight:this.getTileSize(n)},setMaxLevel:function(n){this.maxLevel=n,this._memoizeLevelScale()},getLevelScale:function(n){return this._memoizeLevelScale(),this.getLevelScale(n)},_memoizeLevelScale:function(){const n={};let o;for(o=0;o<=this.maxLevel;o++)n[o]=1/Math.pow(2,this.maxLevel-o);this.getLevelScale=function(s){return n[s]}},getNumTiles:function(n){const o=this.getLevelScale(n),s=Math.ceil(o*this.dimensions.x/this.getTileWidth(n)),c=Math.ceil(o*this.dimensions.y/this.getTileHeight(n));return new t.Point(s,c)},getPixelRatio:function(n){const o=this.dimensions.times(this.getLevelScale(n)),s=1/o.x*t.pixelDensityRatio,c=1/o.y*t.pixelDensityRatio;return new t.Point(s,c)},getClosestLevel:function(){let n,o;for(n=this.minLevel+1;n<=this.maxLevel&&(o=this.getNumTiles(n),!(o.x>1||o.y>1));n++);return n-1},getTileAtPoint:function(n,o){const s=o.x>=0&&o.x<=1&&o.y>=0&&o.y<=1/this.aspectRatio;t.console.assert(s,"[TileSource.getTileAtPoint] must be called with a valid point.");const c=this.dimensions.x*this.getLevelScale(n),u=o.x*c,h=o.y*c;let d=Math.floor(u/this.getTileWidth(n)),m=Math.floor(h/this.getTileHeight(n));return o.x>=1&&(d=this.getNumTiles(n).x-1),o.y>=1/this.aspectRatio-1e-15&&(m=this.getNumTiles(n).y-1),new t.Point(d,m)},getTileBounds:function(n,o,s,c){const u=this.dimensions.times(this.getLevelScale(n)),h=this.getTileWidth(n),d=this.getTileHeight(n),m=o===0?0:h*o-this.tileOverlap,g=s===0?0:d*s-this.tileOverlap;let _=h+(o===0?1:2)*this.tileOverlap,w=d+(s===0?1:2)*this.tileOverlap;const v=1/u.x;return _=Math.min(_,u.x-m),w=Math.min(w,u.y-g),c?new t.Rect(0,0,_,w):new t.Rect(m*v,g*v,_*v,w*v)},getImageInfo:function(n){const o=this;let s,c,u,h,d,m,g;n&&(d=n.split("/"),m=d[d.length-1],g=m.lastIndexOf("."),g>-1&&(d[d.length-1]=m.slice(0,g)));let _=null;if(this.splitHashDataForPost){const w=n.indexOf("#");w!==-1&&(_=n.substring(w+1),n=n.substr(0,w))}c=function(w){typeof w=="string"&&(w=t.parseXml(w));const v=t.TileSource.determineType(o,w,n);if(!v){o.raiseEvent("open-failed",{message:"Unable to load TileSource",source:n});return}h=v.prototype.configure.apply(o,[w,n,_]),h.ajaxWithCredentials===void 0&&(h.ajaxWithCredentials=o.ajaxWithCredentials),h.ready=!0,u=new v(h),o.ready=!0,o.raiseEvent("ready",{tileSource:u})},n.match(/\.js$/)?(s=n.split("/").pop().replace(".js",""),t.jsonp({url:n,async:!1,callbackName:s,callback:c})):t.makeAjaxRequest({url:n,postData:_,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(w){const v=i(w);c(v)},error:function(w,v){let x;try{x="HTTP "+w.status+" attempting to load TileSource: "+n}catch{let E;typeof v>"u"||!v.toString?E="Unknown error":E=v.toString(),x=E+" attempting to load TileSource: "+n}t.console.error(x),o.raiseEvent("open-failed",{message:x,source:n,postData:_})}})},supports:function(n,o){return!1},equals:function(n){return this===n},batchEnabled(){return!1},batchCompatible(n){return!1},batchMaxJobs(){return-1},batchTimeout(){return 5},configure:function(n,o,s){throw new Error("Method not implemented.")},destroy:function(n){},getTileUrl:function(n,o,s){throw new Error("Method not implemented.")},getTilePostData:function(n,o,s){return null},getTileAjaxHeaders:function(n,o,s){return{}},getTileHashKey:function(n,o,s,c,u,h){function d(m){return u?m+"+"+JSON.stringify(u):m}return d(typeof c!="string"?this._uniqueIdentifier+":"+n+"/"+o+"_"+s:c)},tileExists:function(n,o,s){const c=this.getNumTiles(n);return n>=this.minLevel&&n<=this.maxLevel&&o>=0&&s>=0&&o<c.x&&s<c.y},hasTransparency:function(n,o,s,c){return o.match(".png")},downloadTileStart:function(n){if(n.loadWithAjax)n.userData.request=t.makeAjaxRequest({url:n.src,withCredentials:n.ajaxWithCredentials,headers:n.ajaxHeaders,responseType:"arraybuffer",postData:n.postData,success:function(o){let s;try{s=new window.Blob([o.response])}catch(c){const u=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(c.name==="TypeError"&&u){const h=new u;h.append(o.response),s=h.getBlob()}}s.size===0?n.fail("[downloadTileStart] Empty image response.",o):n.finish(s,o,"rasterBlob")},error:function(o){n.fail("[downloadTileStart] Image load aborted - XHR error",o)}});else{const o=new Image;n.userData.imageRequest=o,o.onload=function(){o.onload=o.onerror=o.onabort=null,n.finish(o,null,"image")},o.onabort=o.onerror=function(){o.onload=o.onerror=o.onabort=null,n.fail("[downloadTileStart] Image load aborted or errored out.",null)},typeof n.crossOriginPolicy=="string"&&(o.crossOrigin=n.crossOriginPolicy),o.src=n.src}},downloadTileAbort:function(n){if(n.userData.request&&n.userData.request.abort(),n.userData.imageRequest){const o=n.userData.imageRequest;o.onload=o.onerror=o.onabort=null,o.src=""}},downloadTileBatchStart(n){for(let o=0;o<n.jobs.length;o++)this.downloadTileStart(n.jobs[o])},downloadTileBatchAbort(n){for(let o=0;o<n.jobs.length;o++)this.downloadTileAbort(n.jobs[o])},createTileCache:function(n,o,s){t.console.error("[TileSource.createTileCache] has been deprecated. Use cache API of a tile instead.")},destroyTileCache:function(n){t.console.error("[TileSource.destroyTileCache] has been deprecated. Use cache API of a tile instead.")},getTileCacheData:function(n){return t.console.error("[TileSource.getTileCacheData] has been deprecated. Use cache API of a tile instead."),n.getDataAs(void 0,!1)},getTileCacheDataAsImage:function(n){return t.console.error("[TileSource.getTileCacheDataAsImage] has been deprecated. Use cache API of a tile instead."),n.getImage()},getTileCacheDataAsContext2D:function(n){return t.console.error("[TileSource.getTileCacheDataAsContext2D] has been deprecated. Use cache API of a tile instead."),n.getRenderedContext()}},t.extend(!0,t.TileSource.prototype,t.EventSource.prototype);function i(n){const o=n.responseText;let s=n.status,c,u;if(n){if(n.status!==200&&n.status!==0)throw s=n.status,c=s===404?"Not Found":n.statusText,new Error(t.getString("Errors.Status",s,c))}else throw new Error(t.getString("Errors.Security"));if(o.match(/^\s*<.*/))try{u=n.responseXML&&n.responseXML.documentElement?n.responseXML:t.parseXml(o)}catch{u=n.responseText}else if(o.match(/\s*[{[].*/))try{u=t.parseJSON(o)}catch{u=o}else u=o;return u}t.TileSource.determineType=function(n,o,s){for(const c in e)if(c.match(/.+TileSource$/)&&t.isFunction(e[c])&&t.isFunction(e[c].prototype.supports)&&e[c].prototype.supports.call(n,o,s))return e[c];return t.console.error("No TileSource was able to open %s %s",s,o),null}})(e),(function(t){t.DziTileSource=function(o,s,c,u,h,d,m,g,_){let w,v;if(t.isPlainObject(o)?v=o:v={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=v.tilesUrl,this.fileFormat=v.fileFormat,this.displayRects=v.displayRects,this.queryParams=v.queryParams||"",this.displayRects)for(let x=this.displayRects.length-1;x>=0;x--){const b=this.displayRects[x];for(w=b.minLevel;w<=b.maxLevel;w++)this._levelRects[w]||(this._levelRects[w]=[]),this._levelRects[w].push(b)}t.TileSource.apply(this,[v])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(o,s){let c;return o.Image?c=o.Image.xmlns:o.documentElement&&(o.documentElement.localName==="Image"||o.documentElement.tagName==="Image")&&(c=o.documentElement.namespaceURI),c=(c||"").toLowerCase(),c.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||c.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(o,s,c){let u;return t.isPlainObject(o)?u=n(this,o):u=i(this,o),s&&!u.tilesUrl&&(u.tilesUrl=s.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),s.search(/\.(dzi|xml|js)\?/)!==-1?u.queryParams=s.match(/\?.*/):u.queryParams=""),u},getTileUrl:function(o,s,c){return[this.tilesUrl,o,"/",s,"_",c,".",this.fileFormat,this.queryParams].join("")},equals:function(o){return o&&this.tilesUrl===o.tilesUrl},tileExists:function(o,s,c){const u=this._levelRects[o];let h,d,m,g,_;if(this.minLevel&&o<this.minLevel||this.maxLevel&&o>this.maxLevel)return!1;if(!u||!u.length)return!0;for(let w=u.length-1;w>=0;w--){const v=u[w];if(!(o<v.minLevel||o>v.maxLevel)&&(h=this.getLevelScale(o),d=v.x*h,m=v.y*h,g=d+v.width*h,_=m+v.height*h,d=Math.floor(d/this._tileWidth),m=Math.floor(m/this._tileWidth),g=Math.ceil(g/this._tileWidth),_=Math.ceil(_/this._tileWidth),d<=s&&s<g&&m<=c&&c<_))return!0}return!1}});function i(o,s){if(!s||!s.documentElement)throw new Error(t.getString("Errors.Xml"));const c=s.documentElement,u=c.localName||c.tagName,h=s.documentElement.namespaceURI;let d=null;const m=[];let g,_,w,v,x;if(u==="Image")try{if(v=c.getElementsByTagName("Size")[0],v===void 0&&(v=c.getElementsByTagNameNS(h,"Size")[0]),d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:c.getAttribute("Url"),Format:c.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(c.getAttribute("Overlap"),10),TileSize:parseInt(c.getAttribute("TileSize"),10),Size:{Height:parseInt(v.getAttribute("Height"),10),Width:parseInt(v.getAttribute("Width"),10)}}},!t.imageFormatSupported(d.Image.Format))throw new Error(t.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(g=c.getElementsByTagName("DisplayRect"),g===void 0&&(g=c.getElementsByTagNameNS(h,"DisplayRect")[0]),x=0;x<g.length;x++)_=g[x],w=_.getElementsByTagName("Rect")[0],w===void 0&&(w=_.getElementsByTagNameNS(h,"Rect")[0]),m.push({Rect:{X:parseInt(w.getAttribute("X"),10),Y:parseInt(w.getAttribute("Y"),10),Width:parseInt(w.getAttribute("Width"),10),Height:parseInt(w.getAttribute("Height"),10),MinLevel:parseInt(_.getAttribute("MinLevel"),10),MaxLevel:parseInt(_.getAttribute("MaxLevel"),10)}});return m.length&&(d.Image.DisplayRect=m),n(o,d)}catch(b){throw b instanceof Error?b:new Error(t.getString("Errors.Dzi"))}else{if(u==="Collection")throw new Error(t.getString("Errors.Dzc"));if(u==="Error"){const E=c.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(E)}}throw new Error(t.getString("Errors.Dzi"))}function n(o,s){const c=s.Image,u=c.Url,h=c.Format,d=c.Size,m=c.DisplayRect||[],g=parseInt(d.Width,10),_=parseInt(d.Height,10),w=parseInt(c.TileSize,10),v=parseInt(c.Overlap,10),x=[];let b;for(let E=0;E<m.length;E++)b=m[E].Rect,x.push(new t.DisplayRect(parseInt(b.X,10),parseInt(b.Y,10),parseInt(b.Width,10),parseInt(b.Height,10),parseInt(b.MinLevel,10),parseInt(b.MaxLevel,10)));return t.extend(!0,{width:g,height:_,tileSize:w,tileOverlap:v,minLevel:null,maxLevel:null,tilesUrl:u,fileFormat:h,displayRects:x},s)}})(e),(function(t){t.IIIFTileSource=function(u){if(t.extend(!0,this,u),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(u.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=u.version,this.isLevel0=i(u),this.tile_width&&this.tile_height)u.tileWidth=this.tile_width,u.tileHeight=this.tile_height;else if(this.tile_width)u.tileSize=this.tile_width;else if(this.tile_height)u.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)u.tileWidth=this.tiles[0].width,u.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(let h=0;h<this.tiles.length;h++)for(let d=0;d<this.tiles[h].scaleFactors.length;d++){const m=this.tiles[h].scaleFactors[d];this.scale_factors.push(m),u.tileSizePerScaleFactor[m]={width:this.tiles[h].width,height:this.tiles[h].height||this.tiles[h].width}}}else if(n(u)){const h=Math.min(this.height,this.width),d=[256,512,1024],m=[];for(let g=0;g<d.length;g++)d[g]<=h&&m.push(d[g]);m.length>0?u.tileSize=Math.max.apply(null,m):u.tileSize=h}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,u.levels=o(this),t.extend(!0,u,{width:u.levels[u.levels.length-1].width,height:u.levels[u.levels.length-1].height,tileSize:Math.max(u.height,u.width),tileOverlap:0,minLevel:0,maxLevel:u.levels.length-1}),this.levels=u.levels):t.console.error("Nothing in the info.json to construct image pyramids from");if(!u.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)u.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{const h=Math.max.apply(null,this.scale_factors);u.maxLevel=Math.round(Math.log(h)*Math.LOG2E)}if(this.sizes){let h=this.sizes.length;const d=this.sizes.slice().sort((m,g)=>m.width-g.width);if(d[h-1].width<this.width&&d[h-1].height<this.height&&(d.push({width:this.width,height:this.height}),h++),h===u.maxLevel+1){let m=1;if(this.scale_factors&&this.scale_factors.length===h)for(let g=0;g<h;g++){const _=this.scale_factors[h-g-1];if(Math.round(this.width/d[g].width)!==_||Math.round(this.height/d[g].height)!==_){m=0;break}}m===1&&(this.levelSizes=d)}}t.TileSource.apply(this,[u])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(u,h){return u.protocol&&u.protocol==="http://iiif.io/api/image"||u["@context"]&&(u["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||u["@context"]==="http://iiif.io/api/image/1/context.json")||u.profile&&u.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||u.identifier&&u.width&&u.height?!0:!!(u.documentElement&&u.documentElement.tagName==="info"&&u.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(u,h,d){if(t.isPlainObject(u)){if(!u["@context"])u["@context"]="http://iiif.io/api/image/1.0/context.json",u["@id"]=h.replace("/info.json",""),u.version=1;else{let m=u["@context"];if(Array.isArray(m)){for(let g=0;g<m.length;g++)if(typeof m[g]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(m[g])||m[g]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){m=m[g];break}}switch(m){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":u.version=1;break;case"http://iiif.io/api/image/2/context.json":u.version=2;break;case"http://iiif.io/api/image/3/context.json":u.version=3;break;default:t.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(u.preferredFormats){for(let m=0;m<u.preferredFormats.length;m++)if(t.imageFormatSupported(u.preferredFormats[m])){u.tileFormat=u.preferredFormats[m];break}}return u}else{const m=s(u);return m["@context"]="http://iiif.io/api/image/1.0/context.json",m["@id"]=h.replace("/info.xml",""),m.version=1,m}},getTileWidth:function(u){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileWidth.call(this,u);const h=Math.pow(2,this.maxLevel-u);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[h]?this.tileSizePerScaleFactor[h].width:this._tileWidth},getTileHeight:function(u){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileHeight.call(this,u);const h=Math.pow(2,this.maxLevel-u);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[h]?this.tileSizePerScaleFactor[h].height:this._tileHeight},getLevelScale:function(u){if(this.emulateLegacyImagePyramid){let h=NaN;return this.levels.length>0&&u>=this.minLevel&&u<=this.maxLevel&&(h=this.levels[u].width/this.levels[this.maxLevel].width),h}return t.TileSource.prototype.getLevelScale.call(this,u)},getNumTiles:function(u){if(this.emulateLegacyImagePyramid)return this.getLevelScale(u)?new t.Point(1,1):new t.Point(0,0);if(this.levelSizes){const h=this.levelSizes[u],d=Math.ceil(h.width/this.getTileWidth(u)),m=Math.ceil(h.height/this.getTileHeight(u));return new t.Point(d,m)}else return t.TileSource.prototype.getNumTiles.call(this,u)},getTileAtPoint:function(u,h){if(this.emulateLegacyImagePyramid)return new t.Point(0,0);if(this.levelSizes){const d=h.x>=0&&h.x<=1&&h.y>=0&&h.y<=1/this.aspectRatio;t.console.assert(d,"[TileSource.getTileAtPoint] must be called with a valid point.");const m=this.levelSizes[u].width,g=h.x*m,_=h.y*m;let w=Math.floor(g/this.getTileWidth(u)),v=Math.floor(_/this.getTileHeight(u));return h.x>=1&&(w=this.getNumTiles(u).x-1),h.y>=1/this.aspectRatio-1e-15&&(v=this.getNumTiles(u).y-1),new t.Point(w,v)}return t.TileSource.prototype.getTileAtPoint.call(this,u,h)},getTileUrl:function(u,h,d){if(this.emulateLegacyImagePyramid){let X=null;return this.levels.length>0&&u>=this.minLevel&&u<=this.maxLevel&&(X=this.levels[u].url),X}const m="0",g=Math.pow(.5,this.maxLevel-u);let _,w,v,x,b,E,M,D,P,z,O,L,N,j,se;return this.levelSizes?(_=this.levelSizes[u].width,w=this.levelSizes[u].height):(_=Math.ceil(this.width*g),w=Math.ceil(this.height*g)),v=this.getTileWidth(u),x=this.getTileHeight(u),b=Math.round(v/g),E=Math.round(x/g),this.version===1?se="native."+this.tileFormat:se="default."+this.tileFormat,_<v&&w<x?(this.version===2&&_===this.width?L="full":this.version===3&&_===this.width&&w===this.height?L="max":this.version===3?L=_+","+w:L=_+",",M="full"):(D=h*b,P=d*E,z=Math.min(b,this.width-D),O=Math.min(E,this.height-P),h===0&&d===0&&z===this.width&&O===this.height?M="full":M=[D,P,z,O].join(","),N=Math.min(v,_-h*v),j=Math.min(x,w-d*x),this.version===2&&N===this.width?L="full":this.version===3&&N===this.width&&j===this.height?L="max":this.isLevel0&&this.version<3?L=N+",":L=N+","+j),[this._id,M,L,m,se].join("/")},equals:function(u){return u&&this._id===u._id},__testonly__:{canBeTiled:n,constructLevels:o}});function i(u){const h=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],d=Array.isArray(u.profile)?u.profile[0]:u.profile;return h.indexOf(d)!==-1}function n(u){const h=i(u);let d=!1;return u.version===2&&u.profile.length>1&&u.profile[1].supports&&(d=u.profile[1].supports.indexOf("sizeByW")!==-1),u.version===3&&u.extraFeatures&&(d=u.extraFeatures.indexOf("sizeByWh")!==-1),!h||d}function o(u){const h=[];for(let d=0;d<u.sizes.length;d++)h.push({url:u._id+"/full/"+u.sizes[d].width+","+(u.version===3?u.sizes[d].height:"")+"/0/default."+u.tileFormat,width:u.sizes[d].width,height:u.sizes[d].height});return h.sort(function(d,m){return d.width-m.width})}function s(u){if(!u||!u.documentElement)throw new Error(t.getString("Errors.Xml"));const h=u.documentElement,d=h.tagName;let m=null;if(d==="info")try{return m={},c(h,m),m}catch(g){throw g instanceof Error?g:new Error(t.getString("Errors.IIIF"))}throw new Error(t.getString("Errors.IIIF"))}function c(u,h,d){if(u.nodeType===3&&d){let m=u.nodeValue.trim();m.match(/^\d*$/)&&(m=Number(m)),h[d]?(t.isArray(h[d])||(h[d]=[h[d]]),h[d].push(m)):h[d]=m}else if(u.nodeType===1)for(let m=0;m<u.childNodes.length;m++)c(u.childNodes[m],h,u.nodeName)}})(e),(function(t){t.IIPTileSource=function(i){if(t.EventSource.call(this),i&&i.iipsrv&&i.image){t.extend(this,i),this.aspectRatio=1,this.dimensions=new t.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1;const n=this.getMetadataUrl();this.getImageInfo(n)}},t.extend(t.IIPTileSource.prototype,t.TileSource.prototype,{getMetadataUrl:function(){return this.iipsrv+"?FIF="+this.image+"&obj=IIP,1.0&obj=Max-size&obj=Tile-size&obj=Resolution-number&obj=Resolutions"},supports:function(i,n){return i&&"iipsrv"in i&&"image"in i},parseIIP:function(i){let n=i.split("Max-size:");if(!n[1])throw new Error("No Max-size returned");let o=n[1].split(" ");if(this.width=parseInt(o[0],10),this.height=parseInt(o[1],10),this.dimensions=new t.Point(this.width,this.height),this.aspectRatio=this.width/this.height,n=i.split("Tile-size:"),!n[1])throw new Error("No Tile-size returned");o=n[1].split(" "),this._tileWidth=parseInt(o[0],10),this._tileHeight=parseInt(o[1],10),n=i.split("Resolution-number:");const s=parseInt(n[1],10);this.minLevel=0,this.maxLevel=s-1,this.tileOverlap=0,n=i.split("Resolutions:"),o=n[1].split(",");const c=o.length;this.levelSizes=new Array(c);for(let u=0;u<c;u++){const h=o[u].split(" "),d=parseInt(h[0],10),m=parseInt(h[1],10);this.levelSizes[u]={width:d,height:m}}},getImageInfo:function(i){const n=this;t.makeAjaxRequest({url:i,type:"GET",async:!1,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(o){try{e.IIPTileSource.prototype.parseIIP.call(n,o.responseText),n.ready=!0,n.raiseEvent("ready",{tileSource:n})}catch(s){const c="IIPTileSource: Error parsing IIP metadata: "+s.message;n.raiseEvent("open-failed",{message:c,source:i})}},error:function(o,s){const c="IIPTileSource: Unable to get IIP metadata from "+i;t.console.error(c),n.raiseEvent("open-failed",{message:c,source:i})}})},configure:function(i,n,o){return i},getNumTiles:function(i){const n=this.levelSizes[i];let o=Math.ceil(n.width/this._tileWidth),s=Math.ceil(n.height/this._tileHeight);return new t.Point(o,s)},getTileUrl:function(i,n,o){const s=this.levelSizes[i],c=Math.ceil(s.width/this._tileWidth);let u=this.iipsrv+"?FIF="+this.image+"&";this.transform&&(this.transform.stack&&(u+="SDS="+this.transform.stack+"&"),this.transform.contrast&&(u+="CNT="+this.transform.contrast+"&"),this.transform.gamma&&(u+="GAM="+this.transform.gamma+"&"),this.transform.invert&&this.transform.invert===!0&&(u+="INV&"),this.transform.color&&(u+="COL="+this.transform.color+"&"),this.transform.twist&&(u+="CTW="+this.transform.twist+"&"),this.transform.convolution&&(u+="CNV="+this.transform.convolution+"&"),this.transform.quality&&(u+="QLT="+this.transform.quality+"&"),this.transform.colormap&&(u+="CMP="+this.transform.colormap+"&"),this.transform.minmax&&(u+="MINMAX="+this.transform.minmax+"&"),this.transform.hillshade&&(u+="SHD="+this.transform.hillshade+"&"));let h="JTL";this.format==="png"?h="PTL":this.format==="webp"?h="WTL":this.format==="avif"&&(h="ATL");const d=o*c+n;return u+h+"="+i+","+d}}),t.extend(!0,t.IIPTileSource.prototype,t.EventSource.prototype)})(e),(function(t){t.IrisTileSource=function(i){if(t.TileSource.apply(this,[i]),!i.serverUrl||!i.slideId)throw new Error("IrisTileSource requires serverUrl and slideId");if(this.serverUrl=i.serverUrl,this.slideId=i.slideId,this.ready=!1,i.metadata)this.parseMetadata(i.metadata),this.ready=!0,this.raiseEvent("ready",{tileSource:this});else{const n=this.getMetadataUrl();this.getImageInfo(n)}},t.extend(t.IrisTileSource.prototype,t.TileSource.prototype,{getMetadataUrl:function(){return this.serverUrl+"/slides/"+this.slideId+"/metadata"},supports:function(i){return i&&i.type==="iris"&&i.serverUrl&&i.slideId},parseMetadata:function(i){this._tileWidth=256,this._tileHeight=256,this.tileSize=this._tileWidth,this.tileOverlap=0;const n=i.extent.layers,o=n.length-1,s=n[o].scale;this.width=Math.ceil(i.extent.width*s),this.height=Math.ceil(i.extent.height*s),this.dimensions=new t.Point(this.width,this.height),this.aspectRatio=this.width/this.height,this.levelSizes=n.map(c=>({width:Math.ceil(c.x_tiles*this._tileWidth),height:Math.ceil(c.y_tiles*this._tileHeight),xTiles:Math.ceil(c.x_tiles),yTiles:Math.ceil(c.y_tiles)})),this.levelScales=n.map(c=>c.scale/s),this.minLevel=0,this.maxLevel=Math.ceil(this.levelSizes.length-1)},getImageInfo:function(i){const n=this;t.makeAjaxRequest({url:i,type:"GET",async:!0,success:function(o){try{const s=JSON.parse(o.responseText);n.parseMetadata(s),n.ready=!0,n.raiseEvent("ready",{tileSource:n})}catch(s){const c="IrisTileSource: Error parsing metadata: "+s.message;t.console.error(c),n.raiseEvent("open-failed",{message:c,source:i})}},error:function(o,s){const c="IrisTileSource: Unable to get metadata from "+i;t.console.error(c),n.raiseEvent("open-failed",{message:c,source:i})}})},getNumTiles:function(i){return i<this.minLevel||i>this.maxLevel||!this.levelSizes[i]?new t.Point(0,0):new t.Point(Math.ceil(this.levelSizes[i].xTiles),Math.ceil(this.levelSizes[i].yTiles))},getTileUrl:function(i,n,o){const s=o*this.levelSizes[i].xTiles+n;return`${this.serverUrl}/slides/${this.slideId}/layers/${i}/tiles/${s}`},getLevelScale:function(i){return this.levelScales[i]},configure:function(i){return i}}),t.extend(!0,t.IrisTileSource.prototype,t.EventSource.prototype)})(e),(function(t){t.OsmTileSource=function(i,n,o,s,c){let u;t.isPlainObject(i)?u=i:u={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!u.width||!u.height)&&(u.width=67108864,u.height=67108864),u.tileSize||(u.tileSize=256,u.tileOverlap=0),u.tilesUrl||(u.tilesUrl="http://tile.openstreetmap.org/"),u.minLevel=8,t.TileSource.apply(this,[u])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(i,n){return i.type&&i.type==="openstreetmaps"},configure:function(i,n,o){return i},getTileUrl:function(i,n,o){return this.tilesUrl+(i-8)+"/"+n+"/"+o+".png"},equals:function(i){return i&&this.tilesUrl===i.tilesUrl}})})(e),(function(t){t.TmsTileSource=function(i,n,o,s,c){let u;t.isPlainObject(i)?u=i:u={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};const h=Math.ceil(u.width/256)*256,d=Math.ceil(u.height/256)*256;let m;h>d?m=h/256:m=d/256,u.maxLevel=Math.ceil(Math.log(m)/Math.log(2))-1,u.tileSize=256,u.width=h,u.height=d,t.TileSource.apply(this,[u])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(i,n){return i.type&&i.type==="tiledmapservice"},configure:function(i,n,o){return i},getTileUrl:function(i,n,o){const s=this.getNumTiles(i).y-1;return this.tilesUrl+i+"/"+n+"/"+(s-o)+".png"},equals:function(i){return i&&this.tilesUrl===i.tilesUrl}})})(e),(function(t){t.ZoomifyTileSource=function(i){typeof i.tileSize>"u"&&(i.tileSize=256),typeof i.fileFormat>"u"&&(i.fileFormat="jpg",this.fileFormat=i.fileFormat);const n={x:i.width,y:i.height};for(i.imageSizes=[{x:i.width,y:i.height}],i.gridSize=[this._getGridSize(i.width,i.height,i.tileSize)];parseInt(n.x,10)>i.tileSize||parseInt(n.y,10)>i.tileSize;)n.x=Math.floor(n.x/2),n.y=Math.floor(n.y/2),i.imageSizes.push({x:n.x,y:n.y}),i.gridSize.push(this._getGridSize(n.x,n.y,i.tileSize));i.imageSizes.reverse(),i.gridSize.reverse(),i.minLevel=0,i.maxLevel=i.gridSize.length-1,t.TileSource.apply(this,[i])},t.extend(t.ZoomifyTileSource.prototype,t.TileSource.prototype,{_getGridSize:function(i,n,o){return{x:Math.ceil(i/o),y:Math.ceil(n/o)}},_calculateAbsoluteTileNumber:function(i,n,o){let s=0,c={};for(let u=0;u<i;u++)c=this.gridSize[u],s+=c.x*c.y;return c=this.gridSize[i],s+=c.x*o+n,s},supports:function(i,n){return i.type&&i.type==="zoomifytileservice"},configure:function(i,n,o){return i},getTileUrl:function(i,n,o){let s=0;const c=this._calculateAbsoluteTileNumber(i,n,o);return s=Math.floor(c/256),this.tilesUrl+"TileGroup"+s+"/"+i+"-"+n+"-"+o+"."+this.fileFormat},equals:function(i){return i&&this.tilesUrl===i.tilesUrl}})})(e),(function(t){t.LegacyTileSource=function(s){let c,u,h;t.isArray(s)&&(c={type:"legacy-image-pyramid",levels:s}),c.levels=i(c.levels),c.levels.length>0?(u=c.levels[c.levels.length-1].width,h=c.levels[c.levels.length-1].height):(u=0,h=0,t.console.error("No supported image formats found")),t.extend(!0,c,{width:u,height:h,tileSize:Math.max(h,u),tileOverlap:0,minLevel:0,maxLevel:c.levels.length>0?c.levels.length-1:0}),t.TileSource.apply(this,[c]),this.levels=c.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(s,c){return s.type&&s.type==="legacy-image-pyramid"||s.documentElement&&s.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(s,c,u){let h;return t.isPlainObject(s)?h=o(this,s):h=n(this,s),h},getLevelScale:function(s){let c=NaN;return this.levels.length>0&&s>=this.minLevel&&s<=this.maxLevel&&(c=this.levels[s].width/this.levels[this.maxLevel].width),c},getNumTiles:function(s){return this.getLevelScale(s)?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(s,c,u){let h=null;return this.levels.length>0&&s>=this.minLevel&&s<=this.maxLevel&&(h=this.levels[s].url),h},equals:function(s){if(!s||!s.levels||s.levels.length!==this.levels.length)return!1;for(let c=this.minLevel;c<=this.maxLevel;c++)if(this.levels[c].url!==s.levels[c].url)return!1;return!0}});function i(s){const c=[];let u;for(let h=0;h<s.length;h++)u=s[h],u.height&&u.width&&u.url?c.push({url:u.url,width:Number(u.width),height:Number(u.height)}):t.console.error("Unsupported image format: %s",u.url?u.url:"<no URL>");return c.sort(function(h,d){return h.height-d.height})}function n(s,c){if(!c||!c.documentElement)throw new Error(t.getString("Errors.Xml"));const u=c.documentElement,h=u.tagName;let d=null,m=[],g;if(h==="image")try{d={type:u.getAttribute("type"),levels:[]},m=u.getElementsByTagName("level");for(let _=0;_<m.length;_++)g=m[_],d.levels.push({url:g.getAttribute("url"),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10)});return o(s,d)}catch(_){throw _ instanceof Error?_:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(h==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(h==="error")throw new Error("Error: "+c)}throw new Error("Unknown element "+h)}function o(s,c){return c.levels}})(e),(function(t){t.ImageTileSource=class extends t.TileSource{constructor(i){super(t.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1},i))}supports(i,n){return i.type&&i.type==="image"}configure(i,n,o){return i}getImageInfo(i){const n=new Image,o=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),t.addEvent(n,"load",function(){o.width=n.naturalWidth,o.height=n.naturalHeight,o.tileWidth=o.width,o.tileHeight=o.height,o.tileOverlap=0,o.minLevel=0,o.image=n,o.levels=o._buildLevels(n),o.maxLevel=o.levels.length-1,o.raiseEvent("ready",{tileSource:o})}),t.addEvent(n,"error",function(){o.image=null,o.raiseEvent("open-failed",{message:"Error loading image at "+i,source:i})}),n.src=i}getLevelScale(i){let n=NaN;return i>=this.minLevel&&i<=this.maxLevel&&(n=this.levels[i].width/this.levels[this.maxLevel].width),n}getNumTiles(i){return this.getLevelScale(i)?new t.Point(1,1):new t.Point(0,0)}getTileUrl(i,n,o){return i===this.maxLevel?this.url:`${this.url}?l=${i}&x=${n}&y=${o}`}equals(i){return this.url===i.url}getTilePostData(i,n,o){return{level:i,x:n,y:o}}getContext2D(i,n,o){return t.console.error("Using [TiledImage.getContext2D] (for plain images only) is deprecated. Use overridden downloadTileStart (https://openseadragon.github.io/examples/advanced-data-model/) instead."),this._createContext2D()}downloadTileStart(i){const n=i.postData;if(n.level===this.maxLevel){i.finish(this.image,null,"image");return}if(n.level>=this.minLevel&&n.level<=this.maxLevel){const o=this.levels[n.level],s=this._createContext2D(this.image,o.width,o.height);i.finish(s,null,"context2d");return}i.fail(`Invalid level ${n.level} for plain image source. Did you forget to set buildPyramid=true?`)}downloadTileAbort(i){}_buildLevels(i){const n=[{url:i.src,width:i.naturalWidth,height:i.naturalHeight}];if(!this.buildPyramid||!t.supportsCanvas||!this.useCanvas)return n;let o=i.naturalWidth,s=i.naturalHeight;for(;o>=2&&s>=2;)o=Math.floor(o/2),s=Math.floor(s/2),n.push({width:o,height:s});return n.reverse()}_createContext2D(i,n,o){const s=document.createElement("canvas"),c=s.getContext("2d");return s.width=n,s.height=o,c.drawImage(i,0,0,n,o),c}}})(e),(function(t){t.TileSourceCollection=function(i,n,o,s){t.console.error("TileSourceCollection is deprecated; use World instead")}})(e),(function(t){const i=t;i.PriorityQueue=class{constructor(o=void 0){this.nodes_=[],o&&this.insertAll(o)}insert(o,s){this.insertNode(new Node(o,s))}insertNode(o){const s=this.nodes_;o.index=s.length,s.push(o),this.moveUp_(o.index)}insertAll(o){let s,c;if(o instanceof t.PriorityQueue){if(s=o.getKeys(),c=o.getValues(),this.getCount()<=0){const u=this.nodes_;for(let h=0;h<s.length;h++){const d=new Node(s[h],c[h]);d.index=u.length,u.push(d)}return}}else throw"insertAll supports only OpenSeadragon.PriorityQueue object!";for(let u=0;u<s.length;u++)this.insert(s[u],c[u])}remove(){const o=this.nodes_,s=o.length,c=o[0];if(!(s<=0))return s==1?o.length=0:(o[0]=o.pop(),o[0]&&(o[0].index=0),this.moveDown_(0)),c&&delete c.index,c}peek(){const o=this.nodes_;if(o.length!=0)return o[0].value}peekKey(){return this.nodes_[0]&&this.nodes_[0].key}decreaseKey(o,s){o.index===void 0?(o.key=s,this.insertNode(o)):(o.key=s,this.moveUp_(o.index))}moveDown_(o){const s=this.nodes_,c=s.length,u=s[o];for(;o<c>>1;){const h=this.getLeftChildIndex_(o),d=this.getRightChildIndex_(o),m=d<c&&s[d].key<s[h].key?d:h;if(s[m].key>u.key)break;s[o]=s[m],s[o].index=o,o=m}s[o]=u,u&&(u.index=o)}moveUp_(o){const s=this.nodes_,c=s[o];for(;o>0;){const u=this.getParentIndex_(o);if(s[u].key>c.key)s[o]=s[u],s[o].index=o,o=u;else break}s[o]=c,c&&(c.index=o)}getLeftChildIndex_(o){return o*2+1}getRightChildIndex_(o){return o*2+2}getParentIndex_(o){return o-1>>1}getValues(){return this.nodes_.map(o=>o.value)}getKeys(){return this.nodes_.map(o=>o.key)}containsValue(o){return this.nodes_.some(s=>s.value==o)}containsKey(o){return this.nodes_.some(s=>s.value==o)}clone(){return new t.PriorityQueue(this)}getCount(){return this.nodes_.length}isEmpty(){return this.nodes_.length===0}clear(){this.nodes_.length=0}},i.PriorityQueue.Node=class tE{constructor(o,s){this.key=o,this.value=s,this.index=0}clone(){return new tE(this.key,this.value)}}})(e),(function(t){const i=t;class n{constructor(){this.adjacencyList={},this.vertices={}}addVertex(s){return this.vertices[s]?!1:(this.vertices[s]=new t.PriorityQueue.Node(0,s),this.adjacencyList[s]=[],!0)}addEdge(s,c,u,h){u<0&&t.console.error("WeightedGraph: negative weights will make for invalid shortest path computation!");const d=this.adjacencyList[s],m=d.findIndex(_=>_.target===this.vertices[c]),g={target:this.vertices[c],origin:this.vertices[s],weight:u,transform:h};return m<0?(this.adjacencyList[s].push(g),!0):(this.adjacencyList[s][m]=g,!1)}dijkstra(s,c){const u=[];if(s===c)return{path:u,cost:0};const h=new i.PriorityQueue;let d;for(let g in this.vertices)g=this.vertices[g],g.value===s?(g.key=0,h.insertNode(g)):(g.key=1/0,delete g.index),g._previous=null;for(;h.getCount()>0&&(d=h.remove(),d.value!==c);){const g=this.adjacencyList[d.value];for(const _ in g){const w=g[_],v=d.key+w.weight,x=w.target;v<x.key&&(x._previous=d,h.decreaseKey(x,v))}}if(!d||!d._previous||d.value!==c)return;const m=d.key;for(;d._previous;){const g=d.value,_=d._previous,w=_.value;u.push(this.adjacencyList[w].find(v=>v.target.value===g)),d=_}return{path:u.reverse(),cost:m}}}i.DataTypeConverter=class{constructor(){this.graph=new n,this.destructors={},this.copyings={};const s=(u,h)=>new t.Promise((d,m)=>{if(!t.supportsAsync)return m("Not supported in sync mode!");const g=new Image;g.onerror=g.onabort=_=>m(`Failed to load image: ${h}`),g.onload=()=>d(g),u.tiledImage&&u.tiledImage.crossOriginPolicy&&(g.crossOrigin=u.tiledImage.crossOriginPolicy),g.src=h}),c=(u,h)=>{const d=document.createElement("canvas");d.width=h.width,d.height=h.height;const m=d.getContext("2d",{willReadFrequently:!0});return m.drawImage(h,0,0),m};this.learn("rasterBlob","image",(u,h)=>new t.Promise((d,m)=>{const g=(window.URL||window.webkitURL).createObjectURL(h);if(!t.supportsAsync)return m("Not supported in sync mode!");const _=new Image;_.onerror=_.onabort=w=>{(window.URL||window.webkitURL).revokeObjectURL(h),m(w)},_.onload=()=>{(window.URL||window.webkitURL).revokeObjectURL(h),d(_)},_.decoding="async",_.src=g}),1,2),this.learn("context2d","rasterBlob",(u,h)=>new t.Promise((d,m)=>{if(!t.supportsAsync)return m("Not supported in sync mode!");h.canvas.toBlob(d)}),1,2),this.learn("rasterBlob","imageBitmap",(u,h)=>new t.Promise((d,m)=>{if(!t.supportsAsync)return m("Not supported in sync mode!");createImageBitmap(h,{colorSpaceConversion:"none"}).then(d).catch(m)}),1,1),this.learn("imageBitmap","context2d",(u,h)=>{const d=document.createElement("canvas");d.width=h.width,d.height=h.height;const m=d.getContext("2d",{willReadFrequently:!0});return m.drawImage(h,0,0),m},1,2),this.learn("image","imageBitmap",(u,h)=>createImageBitmap(h,{colorSpaceConversion:"none"}),1,2),this.learn("image","context2d",c,1,2),this.learn("image","image",(u,h)=>s(u,h.src),1,1),this.learn("context2d","context2d",(u,h)=>c(u,h.canvas)),this.learn("rasterBlob","rasterBlob",(u,h)=>h,0,1),this.learn("imageBitmap","imageBitmap",(u,h)=>new t.Promise((d,m)=>{try{if(!t.supportsAsync)return m("Not supported in sync mode!");if(!h)return m(new Error("No ImageBitmap to copy"));if(typeof OffscreenCanvas<"u"&&h.width&&h.height){const g=new OffscreenCanvas(h.width,h.height);if(g.getContext("2d",{willReadFrequently:!1}).drawImage(h,0,0),typeof g.transferToImageBitmap=="function"){const w=g.transferToImageBitmap();return d(w)}return createImageBitmap(g,{colorSpaceConversion:"none"}).then(d)}return createImageBitmap(h,{colorSpaceConversion:"none"}).then(d)}catch(g){return m(g)}}),1,1),this.learnDestroy("context2d",u=>{u.canvas.width=0,u.canvas.height=0})}guessType(s){if(Array.isArray(s)){const u=[];for(const h of s){if(h==null)continue;const d=this.guessType(h);u.includes(d)||u.push(d)}return u.sort(),`Array [${u.join(",")}]`}const c=t.type(s);return c==="dom-node"?c.nodeName.toLowerCase():c==="object"&&t.isFunction(s.getType)?s.getType():c}learn(s,c,u,h=0,d=1){t.console.assert(h>=0&&h<=7,"[DataTypeConverter] Conversion costPower must be between <0, 7>."),t.console.assert(t.isFunction(u),"[DataTypeConverter:learn] Callback must be a valid function!"),s===c?this.copyings[c]=u:(h++,d=Math.min(Math.max(d,1),15),this.graph.addVertex(s),this.graph.addVertex(c),this.graph.addEdge(s,c,h*10^5+d,u),this._known={})}learnDestroy(s,c){this.destructors[s]=c}convert(s,c,u,...h){const d=this.getConversionPath(u,h);if(!d)return t.console.error(`[OpenSeadragon.converter.convert] Conversion ${u} ---> ${h} cannot be done!`),t.Promise.resolve();const m=d.length,g=this,_=(w,v,x=!0)=>{if(v>=m)return t.Promise.resolve(w);const b=d[v];let E;try{E=b.transform(s,w)}catch{return x&&g.destroy(w,b.origin.value),t.Promise.reject(`[OpenSeadragon.converter.convert] sync failure (while converting using ${b.origin.value} -> ${b.target.value})`)}return E===void 0?(x&&g.destroy(w,b.origin.value),t.Promise.reject(`[OpenSeadragon.converter.convert] data mid result undefined value (while converting using ${b.origin.value} -> ${b.target.value})`)):(x&&g.destroy(w,b.origin.value),(t.type(E)==="promise"?E:t.Promise.resolve(E)).then(D=>_(D,v+1)))};return _(c,0,!1)}copy(s,c,u){const h=this.copyings[u];if(h){const d=h(s,c);return t.type(d)==="promise"?d:t.Promise.resolve(d)}return t.console.warn("[OpenSeadragon.converter.copy] is not supported with type %s",u),t.Promise.resolve(void 0)}destroy(s,c){const u=this.destructors[c];if(u){const h=u(s);return t.type(h)==="promise"?h:t.Promise.resolve(h)}}getConversionPath(s,c){let u,h=this._known[s];if(h||(this._known[s]=h={}),Array.isArray(c)){t.console.assert(c.length>0,"[getConversionPath] conversion 'to' type must be defined.");let d=1/0;for(const m of c){let g=h[m];g===void 0&&(h[m]=g=this.graph.dijkstra(s,m)),g&&d>g.cost&&(u=g,d=g.cost)}}else t.console.assert(typeof c=="string","[getConversionPath] conversion 'to' type must be defined."),u=h[c],u===void 0&&(u=this.graph.dijkstra(s,c),this._known[s][c]=u);return u?u.path:void 0}getConversionPathFinalType(s){if(!(!s||!s.length))return s[s.length-1].target.value}getKnownTypes(){return Object.keys(this.graph.vertices)}existsType(s){return!!this.graph.vertices[s]}},t.converter=new t.DataTypeConverter,t.converter.learn("__private__imageUrl","imageBitmap",(o,s)=>new t.Promise((c,u)=>{if(!t.supportsAsync)return u("Not supported in sync mode!");let h;if(o.tiledImage&&o.tiledImage.crossOriginPolicy){const d=o.tiledImage.crossOriginPolicy;d==="anonymous"?h={mode:"cors",credentials:"omit"}:d==="use-credentials"?h={mode:"cors",credentials:"include"}:d&&t.console.error(`Unsupported crossOriginPolicy ${d}. Ignoring the property.`)}return fetch(s,h).then(d=>{if(!d.ok)throw new Error(`HTTP ${d.status} loading ${s}`);return d.blob()}).then(d=>createImageBitmap(d,{colorSpaceConversion:"none"})).then(c).catch(u)}),1,1),t.converter.learn("__private__imageUrl","__private__imageUrl",(o,s)=>s,0,1)})(e),(function(t){t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(h){const d=this;t.EventSource.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},h),this.element=h.element||t.makeNeutralElement("div"),h.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,t.setElementPointerEventsNone(this.imgRest),t.setElementPointerEventsNone(this.imgGroup),t.setElementPointerEventsNone(this.imgHover),t.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",t.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(m){m.insideElementPressed?(c(d,t.ButtonState.DOWN),d.raiseEvent("enter",{originalEvent:m.originalEvent})):m.buttonDownAny||c(d,t.ButtonState.HOVER)},focusHandler:function(m){d.tracker.enterHandler(m),d.raiseEvent("focus",{originalEvent:m.originalEvent})},leaveHandler:function(m){u(d,t.ButtonState.GROUP),m.insideElementPressed&&d.raiseEvent("exit",{originalEvent:m.originalEvent})},blurHandler:function(m){d.tracker.leaveHandler(m),d.raiseEvent("blur",{originalEvent:m.originalEvent})},pressHandler:function(m){c(d,t.ButtonState.DOWN),d.raiseEvent("press",{originalEvent:m.originalEvent})},releaseHandler:function(m){m.insideElementPressed&&m.insideElementReleased?(u(d,t.ButtonState.HOVER),d.raiseEvent("release",{originalEvent:m.originalEvent})):m.insideElementPressed?u(d,t.ButtonState.GROUP):c(d,t.ButtonState.HOVER)},clickHandler:function(m){m.quick&&d.raiseEvent("click",{originalEvent:m.originalEvent})},keyHandler:function(m){m.keyCode===13?(d.raiseEvent("click",{originalEvent:m.originalEvent}),d.raiseEvent("release",{originalEvent:m.originalEvent}),m.preventDefault=!0):m.preventDefault=!1}}),u(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventSource.prototype,{notifyGroupEnter:function(){c(this,t.ButtonState.GROUP)},notifyGroupExit:function(){u(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function i(h){t.requestAnimationFrame(function(){n(h)})}function n(h){let d,m,g;h.shouldFade&&(d=t.now(),m=d-h.fadeBeginTime,g=1-m/h.fadeLength,g=Math.min(1,g),g=Math.max(0,g),h.imgGroup&&t.setElementOpacity(h.imgGroup,g,!0),g>0&&i(h))}function o(h){h.shouldFade=!0,h.fadeBeginTime=t.now()+h.fadeDelay,window.setTimeout(function(){i(h)},h.fadeDelay)}function s(h){h.shouldFade=!1,h.imgGroup&&t.setElementOpacity(h.imgGroup,1,!0)}function c(h,d){h.element.disabled||(d>=t.ButtonState.GROUP&&h.currentState===t.ButtonState.REST&&(s(h),h.currentState=t.ButtonState.GROUP),d>=t.ButtonState.HOVER&&h.currentState===t.ButtonState.GROUP&&(h.imgHover&&(h.imgHover.style.visibility=""),h.currentState=t.ButtonState.HOVER),d>=t.ButtonState.DOWN&&h.currentState===t.ButtonState.HOVER&&(h.imgDown&&(h.imgDown.style.visibility=""),h.currentState=t.ButtonState.DOWN))}function u(h,d){h.element.disabled||(d<=t.ButtonState.HOVER&&h.currentState===t.ButtonState.DOWN&&(h.imgDown&&(h.imgDown.style.visibility="hidden"),h.currentState=t.ButtonState.HOVER),d<=t.ButtonState.GROUP&&h.currentState===t.ButtonState.HOVER&&(h.imgHover&&(h.imgHover.style.visibility="hidden"),h.currentState=t.ButtonState.GROUP),d<=t.ButtonState.REST&&h.currentState===t.ButtonState.GROUP&&(o(h),h.currentState=t.ButtonState.REST))}})(e),(function(t){t.ButtonGroup=function(i){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},i);let n=this.buttons.concat([]),o=this,s;if(this.element=i.element||t.makeNeutralElement("div"),!i.group)for(this.element.style.display="inline-block",s=0;s<n.length;s++)this.element.appendChild(n[s].element);t.setElementTouchActionNone(this.element),this.tracker=new t.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(c){let u;for(u=0;u<o.buttons.length;u++)o.buttons[u].notifyGroupEnter()},leaveHandler:function(c){let u;if(!c.insideElementPressed)for(u=0;u<o.buttons.length;u++)o.buttons[u].notifyGroupExit()}})},t.ButtonGroup.prototype={addButton:function(i){this.buttons.push(i),this.element.appendChild(i.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){const i=this.buttons.pop();this.element.removeChild(i.element),i.destroy()}this.tracker.destroy(),this.element=null}}})(e),(function(t){t.Rect=function(i,n,o,s,c){this.x=typeof i=="number"?i:0,this.y=typeof n=="number"?n:0,this.width=typeof o=="number"?o:0,this.height=typeof s=="number"?s:0,this.degrees=typeof c=="number"?c:0,this.degrees=t.positiveModulo(this.degrees,360);let u,h;this.degrees>=270?(u=this.getTopRight(),this.x=u.x,this.y=u.y,h=this.height,this.height=this.width,this.width=h,this.degrees-=270):this.degrees>=180?(u=this.getBottomRight(),this.x=u.x,this.y=u.y,this.degrees-=180):this.degrees>=90&&(u=this.getBottomLeft(),this.x=u.x,this.y=u.y,h=this.height,this.height=this.width,this.width=h,this.degrees-=90)},t.Rect.fromSummits=function(i,n,o){const s=i.distanceTo(n),c=i.distanceTo(o),u=n.minus(i);let h=Math.atan(u.y/u.x);return u.x<0?h+=Math.PI:u.y<0&&(h+=2*Math.PI),new t.Rect(i.x,i.y,s,c,h/Math.PI*180)},t.Rect.prototype={clone:function(){return new t.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new t.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new t.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new t.Point(this.width,this.height)},equals:function(i){return i instanceof t.Rect&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height&&this.degrees===i.degrees},times:function(i){return new t.Rect(this.x*i,this.y*i,this.width*i,this.height*i,this.degrees)},translate:function(i){return new t.Rect(this.x+i.x,this.y+i.y,this.width,this.height,this.degrees)},union:function(i){const n=this.getBoundingBox(),o=i.getBoundingBox(),s=Math.min(n.x,o.x),c=Math.min(n.y,o.y),u=Math.max(n.x+n.width,o.x+o.width),h=Math.max(n.y+n.height,o.y+o.height);return new t.Rect(s,c,u-s,h-c)},intersection:function(i){const o=[],s=this.getTopLeft();i.containsPoint(s,1e-10)&&o.push(s);const c=this.getTopRight();i.containsPoint(c,1e-10)&&o.push(c);const u=this.getBottomLeft();i.containsPoint(u,1e-10)&&o.push(u);const h=this.getBottomRight();i.containsPoint(h,1e-10)&&o.push(h);const d=i.getTopLeft();this.containsPoint(d,1e-10)&&o.push(d);const m=i.getTopRight();this.containsPoint(m,1e-10)&&o.push(m);const g=i.getBottomLeft();this.containsPoint(g,1e-10)&&o.push(g);const _=i.getBottomRight();this.containsPoint(_,1e-10)&&o.push(_);const w=this._getSegments(),v=i._getSegments();for(let P=0;P<w.length;P++){const z=w[P];for(let O=0;O<v.length;O++){const L=v[O],N=x(z[0],z[1],L[0],L[1]);N&&o.push(N)}}function x(P,z,O,L){const N=z.minus(P),j=L.minus(O),se=-j.x*N.y+N.x*j.y;if(se===0)return null;const K=(N.x*(P.y-O.y)-N.y*(P.x-O.x))/se,X=(j.x*(P.y-O.y)-j.y*(P.x-O.x))/se;return-1e-10<=K&&K<=1-1e-10&&-1e-10<=X&&X<=1-1e-10?new t.Point(P.x+X*N.x,P.y+X*N.y):null}if(o.length===0)return null;let b=o[0].x,E=o[0].x,M=o[0].y,D=o[0].y;for(let P=1;P<o.length;P++){const z=o[P];z.x<b&&(b=z.x),z.x>E&&(E=z.x),z.y<M&&(M=z.y),z.y>D&&(D=z.y)}return new t.Rect(b,M,E-b,D-M)},_getSegments:function(){const i=this.getTopLeft(),n=this.getTopRight(),o=this.getBottomLeft(),s=this.getBottomRight();return[[i,n],[n,s],[s,o],[o,i]]},rotate:function(i,n){if(i=t.positiveModulo(i,360),i===0)return this.clone();n=n||this.getCenter();const o=this.getTopLeft().rotate(i,n);let c=this.getTopRight().rotate(i,n).minus(o);c=c.apply(function(h){return Math.abs(h)<1e-15?0:h});let u=Math.atan(c.y/c.x);return c.x<0?u+=Math.PI:c.y<0&&(u+=2*Math.PI),new t.Rect(o.x,o.y,this.width,this.height,u/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();const i=this.getTopLeft(),n=this.getTopRight(),o=this.getBottomLeft(),s=this.getBottomRight(),c=Math.min(i.x,n.x,o.x,s.x),u=Math.max(i.x,n.x,o.x,s.x),h=Math.min(i.y,n.y,o.y,s.y),d=Math.max(i.y,n.y,o.y,s.y);return new t.Rect(c,h,u-c,d-h)},getIntegerBoundingBox:function(){const i=this.getBoundingBox(),n=Math.floor(i.x),o=Math.floor(i.y),s=Math.ceil(i.width+i.x-n),c=Math.ceil(i.height+i.y-o);return new t.Rect(n,o,s,c)},containsPoint:function(i,n){n=n||0;const o=this.getTopLeft(),s=this.getTopRight(),c=this.getBottomLeft(),u=s.minus(o),h=c.minus(o);return(i.x-o.x)*u.x+(i.y-o.y)*u.y>=-n&&(i.x-s.x)*u.x+(i.y-s.y)*u.y<=n&&(i.x-o.x)*h.x+(i.y-o.y)*h.y>=-n&&(i.x-c.x)*h.x+(i.y-c.y)*h.y<=n},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}})(e),(function(t){const i={};t.ReferenceStrip=function(g){const _=this,w=g.viewer,v=t.getElementSize(w.element);let x,b;g.id||(g.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=g.id,this.element.className="referencestrip"),g=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},g,{element:this.element}),t.extend(this,g),i[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0;const E=this.element.style;for(E.marginTop="0px",E.marginRight="0px",E.marginBottom="0px",E.marginLeft="0px",E.left="0px",E.bottom="0px",E.border="0px",E.background="#000",E.position="relative",t.setElementTouchActionNone(this.element),t.setElementOpacity(this.element,.8),this.viewer=w,this.tracker=new t.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:t.delegate(this,n),dragHandler:t.delegate(this,o),scrollHandler:t.delegate(this,s),enterHandler:t.delegate(this,u),leaveHandler:t.delegate(this,h),keyDownHandler:t.delegate(this,d),keyHandler:t.delegate(this,m),preProcessEventHandler:function(M){M.eventType==="wheel"&&(M.preventDefault=!0)}}),g.width&&g.height?(this.element.style.width=g.width+"px",this.element.style.height=g.height+"px",w.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):g.scroll==="horizontal"?(this.element.style.width=v.x*g.sizeRatio*w.tileSources.length+12*w.tileSources.length+"px",this.element.style.height=v.y*g.sizeRatio+"px",w.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=v.y*g.sizeRatio*w.tileSources.length+12*w.tileSources.length+"px",this.element.style.width=v.x*g.sizeRatio+"px",w.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=v.x*this.sizeRatio+8,this.panelHeight=v.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},b=0;b<w.tileSources.length;b++)x=t.makeNeutralElement("div"),x.id=this.element.id+"-"+b,x.style.width=_.panelWidth+"px",x.style.height=_.panelHeight+"px",x.style.display="inline",x.style.float="left",x.style.cssFloat="left",x.style.padding="2px",t.setElementTouchActionNone(x),t.setElementPointerEventsNone(x),this.element.appendChild(x),x.activePanel=!1,this.panels.push(x);c(this,this.scroll==="vertical"?v.y:v.x,0),this.setFocus(0)},t.ReferenceStrip.prototype={setFocus:function(g){const _=this.element.querySelector("#"+this.element.id+"-"+g),w=t.getElementSize(this.viewer.canvas),v=Number(this.element.style.width.replace("px","")),x=Number(this.element.style.height.replace("px","")),b=-Number(this.element.style.marginLeft.replace("px","")),E=-Number(this.element.style.marginTop.replace("px",""));let M;this.currentSelected!==_&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=_,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(M=Number(g)*(this.panelWidth+3),M>b+w.x-this.panelWidth?(M=Math.min(M,v-w.x),this.element.style.marginLeft=-M+"px",c(this,w.x,-M)):M<b&&(M=Math.max(0,M-w.x/2),this.element.style.marginLeft=-M+"px",c(this,w.x,-M))):(M=Number(g)*(this.panelHeight+3),M>E+w.y-this.panelHeight?(M=Math.min(M,x-w.y),this.element.style.marginTop=-M+"px",c(this,w.y,-M)):M<E&&(M=Math.max(0,M-w.y/2),this.element.style.marginTop=-M+"px",c(this,w.y,-M))),this.currentPage=g,u.call(this,{eventSource:this.tracker}))},update:function(){return!!i[this.id].animating},destroy:function(){if(this.miniViewers)for(const g in this.miniViewers)this.miniViewers[g].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function n(g){if(g.quick){let _;this.scroll==="horizontal"?_=Math.floor(g.position.x/(this.panelWidth+4)):_=Math.floor(g.position.y/this.panelHeight),this.viewer.goToPage(_)}this.element.focus()}function o(g){if(this.dragging=!0,this.element){const _=Number(this.element.style.marginLeft.replace("px","")),w=Number(this.element.style.marginTop.replace("px","")),v=Number(this.element.style.width.replace("px","")),x=Number(this.element.style.height.replace("px","")),b=t.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-g.delta.x>0?_>-(v-b.x)&&(this.element.style.marginLeft=_+g.delta.x*2+"px",c(this,b.x,_+g.delta.x*2)):-g.delta.x<0&&_<0&&(this.element.style.marginLeft=_+g.delta.x*2+"px",c(this,b.x,_+g.delta.x*2)):-g.delta.y>0?w>-(x-b.y)&&(this.element.style.marginTop=w+g.delta.y*2+"px",c(this,b.y,w+g.delta.y*2)):-g.delta.y<0&&w<0&&(this.element.style.marginTop=w+g.delta.y*2+"px",c(this,b.y,w+g.delta.y*2))}}function s(g){if(this.element){const _=Number(this.element.style.marginLeft.replace("px","")),w=Number(this.element.style.marginTop.replace("px","")),v=Number(this.element.style.width.replace("px","")),x=Number(this.element.style.height.replace("px","")),b=t.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?g.scroll>0?_>-(v-b.x)&&(this.element.style.marginLeft=_-g.scroll*60+"px",c(this,b.x,_-g.scroll*60)):g.scroll<0&&_<0&&(this.element.style.marginLeft=_-g.scroll*60+"px",c(this,b.x,_-g.scroll*60)):g.scroll<0?w>b.y-x&&(this.element.style.marginTop=w+g.scroll*60+"px",c(this,b.y,w+g.scroll*60)):g.scroll>0&&w<0&&(this.element.style.marginTop=w+g.scroll*60+"px",c(this,b.y,w+g.scroll*60)),g.preventDefault=!0}}function c(g,_,w){let v,x,b,E,M,D;for(g.scroll==="horizontal"?v=g.panelWidth:v=g.panelHeight,x=Math.ceil(_/v)+5,b=Math.ceil((Math.abs(w)+_)/v)+1,x=b-x,x=x<0?0:x,M=x;M<b&&M<g.panels.length;M++)if(D=g.panels[M],!D.activePanel){let P;const z=g.viewer.tileSources[M];z.referenceStripThumbnailUrl?P={type:"image",url:z.referenceStripThumbnailUrl}:P=z,E=new t.Viewer({id:D.id,tileSources:[P],element:D,navigatorSizeRatio:g.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:g.viewer.loadTilesWithAjax,ajaxHeaders:g.viewer.ajaxHeaders,viewer:g.viewer,drawer:"canvas"}),t.setElementPointerEventsNone(E.canvas),t.setElementPointerEventsNone(E.container),E.innerTracker.setTracking(!1),E.outerTracker.setTracking(!1),g.miniViewers[D.id]=E,D.activePanel=!0}}function u(g){const _=g.eventSource.element;this.scroll==="horizontal"?_.style.marginBottom="0px":_.style.marginLeft="0px"}function h(g){const _=g.eventSource.element;this.scroll==="horizontal"?_.style.marginBottom="-"+t.getElementSize(_).y/2+"px":_.style.marginLeft="-"+t.getElementSize(_).x/2+"px"}function d(g){if(!g.ctrl&&!g.alt&&!g.meta)switch(g.keyCode){case 38:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),g.preventDefault=!0;break;case 40:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),g.preventDefault=!0;break;case 37:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),g.preventDefault=!0;break;case 39:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),g.preventDefault=!0;break;default:g.preventDefault=!1;break}else g.preventDefault=!1}function m(g){if(!g.ctrl&&!g.alt&&!g.meta)switch(g.keyCode){case 61:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),g.preventDefault=!0;break;case 45:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),g.preventDefault=!0;break;case 48:case 119:case 87:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),g.preventDefault=!0;break;case 115:case 83:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),g.preventDefault=!0;break;case 97:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),g.preventDefault=!0;break;case 100:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),g.preventDefault=!0;break;default:g.preventDefault=!1;break}else g.preventDefault=!1}})(e),(function(t){t.DisplayRect=function(i,n,o,s,c,u){t.Rect.apply(this,[i,n,o,s]),this.minLevel=c,this.maxLevel=u},t.extend(t.DisplayRect.prototype,t.Rect.prototype)})(e),(function(t){t.Spring=function(n){const o=arguments;typeof n!="object"&&(n={initial:o.length&&typeof o[0]=="number"?o[0]:void 0,springStiffness:o.length>1?o[1].springStiffness:5,animationTime:o.length>1?o[1].animationTime:1.5}),t.console.assert(typeof n.springStiffness=="number"&&n.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),t.console.assert(typeof n.animationTime=="number"&&n.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),n.exponential&&(this._exponential=!0,delete n.exponential),t.extend(!0,this,n),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:t.now()},t.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},t.Spring.prototype={resetTo:function(n){t.console.assert(!this._exponential||n!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=n,this.start.time=this.target.time=this.current.time=t.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(n){t.console.assert(!this._exponential||n!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=n,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(n){this.start.value+=n,this.target.value+=n,this._exponential&&(t.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(n){this._exponential=n,this._exponential&&(t.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=t.now();let n,o;if(this._exponential?(n=this.start._logValue,o=this.target._logValue):(n=this.start.value,o=this.target.value),this.current.time>=this.target.time)this.current.value=this.target.value;else{let s=n+(o-n)*i(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time));this._exponential?this.current.value=Math.exp(s):this.current.value=s}return this.current.value!==this.target.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function i(n,o){return(1-Math.exp(n*-o))/(1-Math.exp(-n))}})(e),(function(t){t.ImageJob=function(s){this.data=null,this.userData={},this.errorMsg=null,this.timeout=t.DEFAULT_SETTINGS.timeout,this.isBatched=!1,t.extend(!0,this,{jobId:null,tries:0},s)},t.ImageJob.prototype={start:function(){this.tries++;const s=this,c=this.abort;this.jobId=window.setTimeout(function(){s.fail("Image load exceeded timeout ("+s.timeout+" ms)",null)},this.timeout),this.abort=function(){s.source.downloadTileAbort(s),typeof c=="function"&&c(),s.fail("Image load aborted.",null)},this.source.downloadTileStart(this)},prepareForBatch:function(){this.tries++,this.jobId=-1},finish:function(s,c,u){if(this.jobId){if(o(s)){this.fail(u||"[downloadTileStart->finish()] Retrieved data is invalid!",c);return}this.data=s,this.request=c,this.errorMsg=null,this.dataType=u,window.clearTimeout(this.jobId),this.jobId=null,this.callback(this)}},fail:function(s,c){this.data=null,this.request=c,this.errorMsg=s,this.dataType=null,this.jobId&&(window.clearTimeout(this.jobId),this.jobId=null),this.callback(this)}},t.BatchImageJob=function(s){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null,data:null,dataType:null,errorMsg:null},s),this.jobs=s.jobs||[],this.source=s.source},t.BatchImageJob.prototype={start:function(){this._finishedJobs=0;const s=this;this.jobId=window.setTimeout(function(){s.fail("Batch image load exceeded timeout ("+s.timeout+" ms)",null)},this.timeout),this.abort=function(){s.source.downloadTileBatchAbort(s);for(let u of this.jobs)u.jobId&&u.abort&&u.abort()};const c=(u,h)=>(...d)=>{this.jobId&&(this._finishedJobs++,u.call(h,...d),this._finishedJobs===this.jobs.length&&(window.clearTimeout(this.jobId),this.jobId=null,this.callback&&this.callback(this)))};for(let u of this.jobs)u.finish=c(u.finish,u),u.fail=c(u.fail,u),u.prepareForBatch();this.source.downloadTileBatchStart(this)},finish:function(s,c,u){t.console.error("Finish call on batch job is not desirable: call finish on individual child jobs!",s,c)},fail:function(s,c){this.data=null,this.request=c,this.errorMsg=s,this.dataType=null;for(let u=0;u<this.jobs.length;u++)this.jobs[u].jobId&&this.jobs[u].fail(s||"Batch failed",c);this.jobId&&(window.clearTimeout(this.jobId),this.jobId=null),this.callback&&this.callback(this)}},t.ImageLoader=function(s){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,timeout:t.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},s),this._batchBuckets=[]},t.ImageLoader.prototype={addJob:function(s){s.source||(t.console.error("ImageLoader.prototype.addJob() requires [options.source]..."),s.source=t.TileSource.prototype);const c=this,u={src:s.src,tile:s.tile||{},source:s.source,loadWithAjax:s.loadWithAjax,ajaxHeaders:s.loadWithAjax?s.ajaxHeaders:null,crossOriginPolicy:s.crossOriginPolicy,ajaxWithCredentials:s.ajaxWithCredentials,postData:s.postData,callback:m=>i(c,m,s.callback),abort:s.abort,timeout:this.timeout},h=new t.ImageJob(u);return s.source&&s.source.batchEnabled()?(h.isBatched=!0,this._stageJobForBatching(h,s.source),!1):!this.jobLimit||this.jobsInProgress<this.jobLimit?(h.start(),this.jobsInProgress++,!0):(this.jobQueue.push(h),!1)},_stageJobForBatching:function(s,c){let u=null;for(let h=0;h<this._batchBuckets.length;h++)if(this._batchBuckets[h].source.batchCompatible(c)){u=this._batchBuckets[h];break}u&&!u.timer&&(t.console.error("Attempted to add a new job to a batch bucket that has already been flushed. Creating a new batch bucket for this source. Check batch logic and timing if this happens frequently. Bucket source:",c,"Job ID:",s&&s.jobId),u=null),u||(u={source:c,jobs:[],timer:null,waitTimeout:c.batchTimeout(),maxJobs:c.batchMaxJobs()},u.timer=setTimeout(()=>this._flushBatchBucket(u),u.waitTimeout),this._batchBuckets.push(u)),u.jobs.push(s),u.maxJobs>=1&&u.jobs.length>=u.maxJobs&&(clearTimeout(u.timer),this._flushBatchBucket(u))},_flushBatchBucket:function(s){s.timer=null;const c=this._batchBuckets.indexOf(s);if(c>-1&&this._batchBuckets.splice(c,1),s.jobs.length===0)return;const u=this,h=new t.BatchImageJob({source:s.source,jobs:s.jobs,timeout:this.timeout,callback:d=>n(u,d)});!this.jobLimit||this.jobsInProgress<this.jobLimit?(h.start(),this.jobsInProgress++):this.jobQueue.push(h)},canAcceptNewJob(){return!this.jobLimit||this.jobsInProgress<this.jobLimit},clear:function(){for(let s=0;s<this.jobQueue.length;s++){const c=this.jobQueue[s];typeof c.abort=="function"&&c.abort()}if(this.jobQueue=[],this._batchBuckets){for(let s=0;s<this._batchBuckets.length;s++){const c=this._batchBuckets[s];clearTimeout(c.timer),c.timer=null}this._batchBuckets=[]}}};function i(s,c,u){if(c.errorMsg&&c.data===null&&c.tries<1+s.tileRetryMax&&(c.isBatched=!1,s.failedTiles.push(c)),c.isBatched||s.jobsInProgress--,s.canAcceptNewJob()&&s.jobQueue.length>0&&(s.jobQueue.shift().start(),s.jobsInProgress++),s.tileRetryMax>0&&s.jobQueue.length===0&&s.canAcceptNewJob()&&s.failedTiles.length>0){let h=s.failedTiles.shift();setTimeout(function(){h.start()},s.tileRetryDelay),s.jobsInProgress++}u&&u(c.data,c.errorMsg,c.request,c.dataType,c.tries)}function n(s,c){s.jobsInProgress--,c.jobs.length=0}function o(s){return s==null||s===!1}})(e),(function(t){t.Tile=function(i,n,o,s,c,u,h,d,m,g,_,w){this.level=i,this.x=n,this.y=o,this.bounds=s,this.positionedBounds=new e.Rect(s.x,s.y,s.width,s.height),this.sourceBounds=g,this.exists=c,this._url=u,this.postData=_,h&&(this.context2D=h),this.loadWithAjax=d,this.ajaxHeaders=m,w===void 0&&(t.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),w=t.TileSource.prototype.getTileHashKey(i,n,o,u,m,_)),this._cKey=w||"",this._ocKey=w||"",this.loaded=!1,this.loading=!1,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1,this.tiledImage=null,this._caches={},this.processing=!1,this.processingPromise=t.Promise.resolve(this)},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},get cacheKey(){return this._cKey},set cacheKey(i){if(i===this.cacheKey)return;this.getCache(i)||t.console.warn("[Tile.cacheKey] should not be set manually. Use addCache() with setAsMain=true."),this._updateMainCacheKey(i)},set originalCacheKey(i){throw"Original Cache Key cannot be managed manually!"},get originalCacheKey(){return this._ocKey},get image(){return t.console.error("[Tile.image] property has been deprecated. Use [Tile.getData] instead."),this.getImage()},get url(){return t.console.error("[Tile.url] property has been deprecated. Use [Tile.getUrl] instead."),this.getUrl()},get element(){t.console.error("Tile::element property is deprecated. Use cache API instead. Moreover, this property might be unstable.");const i=this.getCache();return!i||!i.loaded?null:i.type!==e.HTMLDrawer.canvasCacheType||i.type!==e.HTMLDrawer.imageCacheType?(t.console.error("Access to HtmlDrawer property via Tile instance: HTMLDrawer must be used!"),null):i.data.element},get imgElement(){t.console.error("Tile::imgElement property is deprecated. Use cache API instead. Moreover, this property might be unstable.");const i=this.getCache();return!i||!i.loaded?null:i.type!==e.HTMLDrawer.canvasCacheType||i.type!==e.HTMLDrawer.imageCacheType?(t.console.error("Access to HtmlDrawer property via Tile instance: HTMLDrawer must be used!"),null):i.data.imgElement},get style(){t.console.error("Tile::style property is deprecated. Use cache API instead. Moreover, this property might be unstable.");const i=this.getCache();return!i||!i.loaded?null:i.type!==e.HTMLDrawer.canvasCacheType||i.type!==e.HTMLDrawer.imageCacheType?(t.console.error("Access to HtmlDrawer property via Tile instance: HTMLDrawer must be used!"),null):i.data.style},getImage:function(){t.console.error("[Tile.getImage] property has been deprecated. Use 'tile-invalidated' routine event instead.");const i=this.getCache(this.cacheKey);if(i)return i.transformTo("image"),i.data},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){t.console.error("[Tile.getCanvasContext] property has been deprecated. Use 'tile-invalidated' routine event instead.");const i=this.getCache(this.cacheKey);if(i)return i.transformTo("context2d"),i.data},get context2D(){return t.console.error("[Tile.context2D] property has been deprecated. Use 'tile-invalidated' routine event instead."),this.getCanvasContext()},set context2D(i){t.console.error("[Tile.context2D] property has been deprecated. Use 'tile-invalidated' routine event instead."),this._caches[this.cacheKey]&&this.removeCache(this.cacheKey),this.addCache(this.cacheKey,i,"context2d",!0,!1)},get cacheImageRecord(){return t.console.error("[Tile.cacheImageRecord] property has been deprecated. Use Tile::getCache."),this.getCache(this.cacheKey)},set cacheImageRecord(i){t.console.error("[Tile.cacheImageRecord] property has been deprecated. Use Tile::addCache."),this._caches[this.cacheKey]&&this.removeCache(this.cacheKey),i&&(i.loaded?this.addCache(this.cacheKey,i.data,i.type,!0,!1):i.await().then(o=>this.addCache(this.cacheKey,o,i.type,!0,!1)))},buildDistinctMainCacheKey:function(){return this.cacheKey===this.originalCacheKey?"mod://"+this.originalCacheKey:this.cacheKey},getCache:function(i=this._cKey){const n=this._caches[i];return n&&n.withTileReference(this),n},addCache:function(i,n,o=void 0,s=!1,c=!0){const u=this.tiledImage;if(!u)return null;o||(this.__typeWarningReported||(t.console.warn(this,"[Tile.addCache] called without type specification. Automated deduction is potentially unsafe: prefer specification of data type explicitly."),this.__typeWarningReported=!0),typeof n=="function"&&t.console.error("[TileCache.cacheTile] options.data as a callback requires type argument! Current is "+o),o=t.converter.guessType(n));const h=i===this.cacheKey;if(c&&(h||s)){const g=u.getDrawer().getSupportedDataFormats(),_=t.converter.getConversionPath(o,g);t.console.assert(_,`[Tile.addCache] data was set for the default tile cache we are unableto render. Make sure OpenSeadragon.converter was taught to convert ${o} to (one of): ${_.toString()}`)}const d=u._tileCache.cacheTile({data:n,dataType:o,tile:this,cacheKey:i,cutoff:u.source.getClosestLevel()}),m=this._caches[i];return m!==d&&(this._caches[i]=d,m&&(m.removeTile(this),u._tileCache.safeUnloadCache(m))),!h&&s&&this._updateMainCacheKey(i),d},setCache(i,n,o=!1,s=!0){const c=this.tiledImage;if(!c)return null;const u=i===this.cacheKey;if(s&&(t.console.assert(n instanceof t.CacheRecord,"[Tile.setCache] cache must be a CacheRecord object!"),u||o)){const d=c.getDrawer().getSupportedDataFormats(),m=t.converter.getConversionPath(n.type,d);t.console.assert(m,`[Tile.setCache] data was set for the default tile cache we are unableto render. Make sure OpenSeadragon.converter was taught to convert ${n.type} to (one of): ${m.toString()}`)}const h=this._caches[i];return h!==n&&(this._caches[i]=n,n.addTile(this),h&&(h.removeTile(this),c._tileCache.safeUnloadCache(h))),!u&&o&&this._updateMainCacheKey(i),n},_updateMainCacheKey:function(i){let n=this._caches[this._cKey];n&&n.destroyInternalCache(),this._cKey=i},getCacheSize:function(){return Object.keys(this._caches).length},removeCache:function(i,n=!0){const o=this._caches[i];if(!o){this.tiledImage._tileCache.unloadCacheForTile(this,i,n,!0);return}const s=this.cacheKey,c=this.originalCacheKey,u=s===c;if(!u&&c===i){t.console.warn("[Tile.removeCache] original data must not be manually deleted: other parts of the code might rely on it!","If you want the tile not to preserve the original data, toggle of data perseverance in tile.setData().");return}if(s===i)if(!u&&this._caches[c])this._updateMainCacheKey(c);else{t.console.warn("[Tile.removeCache] trying to remove the only cache that can be used to draw the tile!","If you want to remove the main cache, first set different cache as main with tile.addCache()");return}return this.tiledImage._tileCache.unloadCacheForTile(this,i,n,!1)&&delete this._caches[i],o},getScaleForEdgeSmoothing:function(){t.console.warn("[Tile.getScaleForEdgeSmoothing] is deprecated, the following error is the consequence:");const i=this.getCanvasContext();return i?i.canvas.width/(this.size.x*t.pixelDensityRatio):(t.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1)},getTranslationForEdgeSmoothing:function(i,n,o){const s=Math.max(1,Math.ceil((o.x-n.x)/2)),c=Math.max(1,Math.ceil((o.y-n.y)/2));return new t.Point(s,c).minus(this.position.times(t.pixelDensityRatio).times(i||1).apply(function(u){return u%1}))},reflectCacheRenamed:function(i,n){let o=this._caches[i];o&&(i===this._ocKey&&(this._ocKey=n),i===this._cKey&&(this._cKey=n),this._caches[n]=o,delete this._caches[i])},equals(i){return this._ocKey===i._ocKey},unload:function(i=!1){this.loaded&&this.tiledImage._tileCache.unloadTile(this,i)},_unload:function(){this.tiledImage=null,this._caches={},this.loaded=!1,this.loading=!1,this._cKey=this._ocKey}}})(e),(function(t){t.OverlayPlacement=t.Placement,t.OverlayRotationMode=t.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),t.Overlay=function(i,n,o){let s;t.isPlainObject(i)?s=i:s={element:i,location:n,placement:o},this.elementWrapper=document.createElement("div"),this.element=s.element,this.elementWrapper.appendChild(this.element),this.element.id&&(this.elementWrapper.id="overlay-wrapper-"+this.element.id),this.elementWrapper.classList.add("openseadragon-overlay-wrapper"),this.style=this.elementWrapper.style,this._init(s)},t.Overlay.prototype={_init:function(i){this.location=i.location,this.placement=i.placement===void 0?t.Placement.TOP_LEFT:i.placement,this.onDraw=i.onDraw,this.checkResize=i.checkResize===void 0?!0:i.checkResize,this.width=i.width===void 0?null:i.width,this.height=i.height===void 0?null:i.height,this.rotationMode=i.rotationMode||t.OverlayRotationMode.EXACT,this.location instanceof t.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=t.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new t.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(i,n){const o=t.Placement.properties[this.placement];o&&(o.isHorizontallyCentered?i.x-=n.x/2:o.isRight&&(i.x-=n.x),o.isVerticallyCentered?i.y-=n.y/2:o.isBottom&&(i.y-=n.y))},destroy:function(){const i=this.elementWrapper,n=this.style;i.parentNode&&(i.parentNode.removeChild(i),i.prevElementParent&&(n.display="none",document.body.appendChild(i))),this.onDraw=null,n.top="",n.left="",n.position="",this.width!==null&&(n.width=""),this.height!==null&&(n.height="");const o=t.getCssPropertyWithVendorPrefix("transformOrigin"),s=t.getCssPropertyWithVendorPrefix("transform");o&&s&&(n[o]="",n[s]="")},drawHTML:function(i,n){const o=this.elementWrapper;o.parentNode!==i&&(o.prevElementParent=o.parentNode,o.prevNextSibling=o.nextSibling,i.appendChild(o),this.style.position="absolute",this.size=t.getElementSize(this.elementWrapper));const s=this._getOverlayPositionAndSize(n),c=s.position,u=this.size=s.size;let h="";n.overlayPreserveContentDirection&&(h=n.flipped?" scaleX(-1)":" scaleX(1)");const d=n.flipped?-s.rotate:s.rotate,m=n.flipped?" scaleX(-1)":"";if(this.onDraw)this.onDraw(c,u,this.element);else{const g=this.style,_=this.element.style;_.display="block",g.left=c.x+"px",g.top=c.y+"px",this.width!==null&&(_.width=u.x+"px"),this.height!==null&&(_.height=u.y+"px");const w=t.getCssPropertyWithVendorPrefix("transformOrigin"),v=t.getCssPropertyWithVendorPrefix("transform");w&&v&&(d&&!n.flipped?(_[v]="",g[w]=this._getTransformOrigin(),g[v]="rotate("+d+"deg)"):!d&&n.flipped?(_[v]=h,g[w]=this._getTransformOrigin(),g[v]=m):d&&n.flipped?(_[v]=h,g[w]=this._getTransformOrigin(),g[v]="rotate("+d+"deg)"+m):(_[v]="",g[w]="",g[v]="")),g.display="flex"}},_getOverlayPositionAndSize:function(i){let n=i.pixelFromPoint(this.location,!0),o=this._getSizeInPixels(i);this.adjust(n,o);let s=0;if(i.getRotation(!0)&&this.rotationMode!==t.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){const c=new t.Rect(n.x,n.y,o.x,o.y),u=this._getBoundingBox(c,i.getRotation(!0));n=u.getTopLeft(),o=u.getSize()}else s=i.getRotation(!0);return i.flipped&&(n.x=i.getContainerSize().x-n.x),{position:n,size:o,rotate:s}},_getSizeInPixels:function(i){let n=this.size.x,o=this.size.y;if(this.width!==null||this.height!==null){const s=i.deltaPixelsFromPointsNoRotate(new t.Point(this.width||0,this.height||0),!0);this.width!==null&&(n=s.x),this.height!==null&&(o=s.y)}if(this.checkResize&&(this.width===null||this.height===null)){const s=this.size=t.getElementSize(this.elementWrapper);this.width===null&&(n=s.x),this.height===null&&(o=s.y)}return new t.Point(n,o)},_getBoundingBox:function(i,n){const o=this._getPlacementPoint(i);return i.rotate(n,o).getBoundingBox()},_getPlacementPoint:function(i){const n=new t.Point(i.x,i.y),o=t.Placement.properties[this.placement];return o&&(o.isHorizontallyCentered?n.x+=i.width/2:o.isRight&&(n.x+=i.width),o.isVerticallyCentered?n.y+=i.height/2:o.isBottom&&(n.y+=i.height)),n},_getTransformOrigin:function(){let i="";const n=t.Placement.properties[this.placement];return n&&(n.isLeft?i="left":n.isRight&&(i="right"),n.isTop?i+=" top":n.isBottom&&(i+=" bottom")),i},update:function(i,n){const o=t.isPlainObject(i)?i:{location:i,placement:n};this._init({location:o.location||this.location,placement:o.placement!==void 0?o.placement:this.placement,onDraw:o.onDraw||this.onDraw,checkResize:o.checkResize||this.checkResize,width:o.width!==void 0?o.width:this.width,height:o.height!==void 0?o.height:this.height,rotationMode:o.rotationMode||this.rotationMode})},getBounds:function(i){t.console.assert(i,"A viewport must now be passed to Overlay.getBounds.");let n=this.width,o=this.height;if(n===null||o===null){const c=i.deltaPointsFromPixelsNoRotate(this.size,!0);n===null&&(n=c.x),o===null&&(o=c.y)}const s=this.location.clone();return this.adjust(s,new t.Point(n,o)),this._adjustBoundsForRotation(i,new t.Rect(s.x,s.y,n,o))},_adjustBoundsForRotation:function(i,n){if(!i||i.getRotation(!0)===0||this.rotationMode===t.OverlayRotationMode.EXACT)return n;if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return n;const o=this._getOverlayPositionAndSize(i);return i.viewerElementToViewportRectangle(new t.Rect(o.position.x,o.position.y,o.size.x,o.size.y))}return n.rotate(-i.getRotation(!0),this._getPlacementPoint(n))}}})(e),(function(t){const i=t;i.DrawerBase=class{constructor(o){if(t.console.assert(o.viewer,"[Drawer] options.viewer is required"),t.console.assert(o.viewport,"[Drawer] options.viewport is required"),t.console.assert(o.element,"[Drawer] options.element is required"),this._id=this.getType()+t.now(),this.viewer=o.viewer,this.viewport=o.viewport,this.debugGridColor=typeof o.debugGridColor=="string"?[o.debugGridColor]:o.debugGridColor||t.DEFAULT_SETTINGS.debugGridColor,this.options=t.extend({usePrivateCache:!1,preloadCache:!0,offScreen:!1,broadCastTileInvalidation:!0},this.defaultOptions,o.options),this.container=t.getElement(o.element),this._renderingTarget=this._createDrawingElement(),!this.options.offScreen)if(this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.canvas.style.left="0",t.setElementOpacity(this.canvas,this.viewer.opacity,!0),t.setElementPointerEventsNone(this.canvas),t.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this.options.broadCastTileInvalidation){let s=this.viewer;for(;s.viewer;)s=s.viewer;this._parentViewer=s,s._registerDrawer(this)}else this.viewer._registerDrawer(this),this._parentViewer=this.viewer;this._checkInterfaceImplementation(),this.setInternalCacheNeedsRefresh()}get defaultOptions(){return{}}get canvas(){return this._renderingTarget}get element(){return t.console.error("Drawer.element is deprecated. Use Drawer.container instead."),this.container}getId(){return this._id}getType(){t.console.error("Drawer.getType must be implemented by child class")}getRequiredDataFormats(){return this.getSupportedDataFormats()}getSupportedDataFormats(){throw"Drawer.getSupportedDataFormats must define its supported rendering data types!"}getDataToDraw(o){const s=o.getCache(o.cacheKey);if(!s){t.console.warn("Attempt to draw tile %s when not cached!",o);return}const c=s.getDataForRendering(this,o);return c&&c.data}static isSupported(){t.console.error("Drawer.isSupported must be implemented by child class")}_createDrawingElement(){return t.console.error("Drawer._createDrawingElement must be implemented by child class"),null}draw(o){t.console.error("Drawer.draw must be implemented by child class")}canRotate(){t.console.error("Drawer.canRotate must be implemented by child class")}destroy(){this._parentViewer._unregisterDrawer(this)}destroyInternalCache(){this.viewer.tileCache.clearDrawerInternalCache(this)}minimumOverlapRequired(o){return!1}setImageSmoothingEnabled(o){t.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class")}drawDebuggingRect(o){t.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer")}clear(){t.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.")}internalCacheCreate(o,s){}internalCacheFree(o){}setInternalCacheNeedsRefresh(){this._dataNeedsRefresh=t.now()}tiledImageCreated(o){}_checkInterfaceImplementation(){if(this._createDrawingElement===t.DrawerBase.prototype._createDrawingElement)throw new Error("[drawer]._createDrawingElement must be implemented by child class");if(this.draw===t.DrawerBase.prototype.draw)throw new Error("[drawer].draw must be implemented by child class");if(this.canRotate===t.DrawerBase.prototype.canRotate)throw new Error("[drawer].canRotate must be implemented by child class");if(this.destroy===t.DrawerBase.prototype.destroy)throw new Error("[drawer].destroy must be implemented by child class");if(this.setImageSmoothingEnabled===t.DrawerBase.prototype.setImageSmoothingEnabled)throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class")}viewportToDrawerRectangle(o){const s=this.viewport.pixelFromPointNoRotate(o.getTopLeft(),!0),c=this.viewport.deltaPixelsFromPointsNoRotate(o.getSize(),!0);return new t.Rect(s.x*t.pixelDensityRatio,s.y*t.pixelDensityRatio,c.x*t.pixelDensityRatio,c.y*t.pixelDensityRatio)}viewportCoordToDrawerCoord(o){const s=this.viewport.pixelFromPointNoRotate(o,!0);return new t.Point(s.x*t.pixelDensityRatio,s.y*t.pixelDensityRatio)}_calculateCanvasSize(){const o=t.pixelDensityRatio,s=this.viewport.getContainerSize();return new i.Point(Math.round(s.x*o),Math.round(s.y*o))}_raiseTiledImageDrawnEvent(o,s){this.viewer&&this.viewer.raiseEvent("tiled-image-drawn",{tiledImage:o,tiles:s})}_raiseDrawerErrorEvent(o,s){this.viewer&&this.viewer.raiseEvent("drawer-error",{tiledImage:o,drawer:this,error:s})}}})(e),(function(t){const i=t;class n extends i.DrawerBase{constructor(s){super(s),this.viewer.rejectEventHandler("tile-drawing","The HTMLDrawer does not raise the tile-drawing event"),this.viewer.allowEventHandler("tile-drawn");function c(h,d){const m=t.makeNeutralElement("div"),g=d.cloneNode();g.style.msInterpolationMode="nearest-neighbor",g.style.width="100%",g.style.height="100%";const _=m.style;return _.position="absolute",{element:m,imgElement:g,style:_,data:d}}t.converter.learn("image",n.imageCacheType,c,1,1),t.converter.learn(n.imageCacheType,"image",(h,d)=>d.data,1,3);function u(h){h.imgElement&&h.imgElement.parentNode&&h.imgElement.parentNode.removeChild(h.imgElement),h.element&&h.element.parentNode&&h.element.parentNode.removeChild(h.element)}t.converter.learnDestroy(n.imageCacheType,u)}static get imageCacheType(){return"htmlDrawer[image]"}static get canvasCacheType(){return"htmlDrawer[canvas]"}static isSupported(){return!0}getType(){return"html"}getSupportedDataFormats(){return[n.imageCacheType,n.canvasCacheType]}minimumOverlapRequired(s){return!0}_createDrawingElement(){return t.makeNeutralElement("div")}draw(s){const c=this;this._prepareNewFrame(),s.forEach(function(u){u.opacity!==0&&c._drawTiles(u)})}canRotate(){return!1}destroy(){super.destroy(),this.container.removeChild(this.canvas)}setImageSmoothingEnabled(){}_prepareNewFrame(){this.canvas.innerHTML=""}_drawTiles(s){const c=s.getTilesToDraw().map(u=>u.tile);if(!(s.opacity===0||c.length===0&&!s.placeholderFillStyle))for(let u=c.length-1;u>=0;u--){const h=c[u];this._drawTile(h),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:s,tile:h})}}_drawTile(s){t.console.assert(s,"[Drawer._drawTile] tile is required");let c=this.canvas;if(!s.loaded){t.console.warn("Attempting to draw tile %s when it's not yet loaded.",s.toString());return}const u=this.getDataToDraw(s);u&&(u.element.parentNode!==c&&c.appendChild(u.element),u.imgElement.parentNode!==u.element&&u.element.appendChild(u.imgElement),u.style.top=s.position.y+"px",u.style.left=s.position.x+"px",u.style.height=s.size.y+"px",u.style.width=s.size.x+"px",s.flipped&&(u.style.transform="scaleX(-1)"),t.setElementOpacity(u.element,s.opacity))}}t.HTMLDrawer=n})(e),(function(t){const i=t;class n extends i.DrawerBase{constructor(d){super(d),this.context=this.canvas.getContext("2d"),this.sketchCanvas=null,this.sketchContext=null,this._imageSmoothingEnabled=!0,this.viewer.allowEventHandler("tile-drawn"),this.viewer.allowEventHandler("tile-drawing")}static isSupported(){return t.supportsCanvas}getType(){return"canvas"}getSupportedDataFormats(){return["context2d"]}_createDrawingElement(){const d=t.makeNeutralElement("canvas"),m=this._calculateCanvasSize();return d.width=m.x,d.height=m.y,d}draw(d){this._prepareNewFrame(),this.viewer.viewport.getFlip()!==this._viewportFlipped&&this._flip();for(const m of d)m.opacity!==0&&this._drawTiles(m)}canRotate(){return!0}destroy(){super.destroy(),this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null,this.container.removeChild(this.canvas)}minimumOverlapRequired(d){return!0}setImageSmoothingEnabled(d){this._imageSmoothingEnabled=!!d,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw()}drawDebuggingRect(d){const m=this.context;m.save(),m.lineWidth=2*t.pixelDensityRatio,m.strokeStyle=this.debugGridColor[0],m.fillStyle=this.debugGridColor[0],m.strokeRect(d.x*t.pixelDensityRatio,d.y*t.pixelDensityRatio,d.width*t.pixelDensityRatio,d.height*t.pixelDensityRatio),m.restore()}get _viewportFlipped(){return this.context.getTransform().a<0}_raiseTileDrawingEvent(d,m,g,_){this.viewer.raiseEvent("tile-drawing",{tiledImage:d,context:m,tile:g,rendered:_})}_prepareNewFrame(){const d=this._calculateCanvasSize();if((this.canvas.width!==d.x||this.canvas.height!==d.y)&&(this.canvas.width=d.x,this.canvas.height=d.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){const m=this._calculateSketchCanvasSize();this.sketchCanvas.width=m.x,this.sketchCanvas.height=m.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}_clear(d,m){const g=this._getContext(d);if(m)g.clearRect(m.x,m.y,m.width,m.height);else{const _=g.canvas;g.clearRect(0,0,_.width,_.height)}}_drawTiles(d){const m=d.getTilesToDraw().map(z=>z.tile);if(d.opacity===0||m.length===0&&!d.placeholderFillStyle)return;let g=m[0],_;g&&(_=d.opacity<1||d.compositeOperation&&d.compositeOperation!=="source-over"||!d._isBottomItem()&&d.source.hasTransparency(null,g.getUrl(),g.ajaxHeaders,g.postData));let w,v;const x=this.viewport.getZoom(!0),b=d.viewportToImageZoom(x);if(m.length>1&&b>d.smoothTileEdgesMinZoom&&!d.iOSDevice&&d.getRotation(!0)%360===0){_=!0;const z=g.length&&this.getDataToDraw(g);z?w=z.canvas.width/(g.size.x*t.pixelDensityRatio):w=1,v=g.getTranslationForEdgeSmoothing(w,this._getCanvasSize(!1),this._getCanvasSize(!0))}let E;_&&(w||(E=this.viewport.viewportToViewerElementRectangle(d.getClippedBounds(!0)).getIntegerBoundingBox(),E=E.times(t.pixelDensityRatio)),this._clear(!0,E)),w||this._setRotations(d,_);let M=!1;if(d._clip){this._saveContext(_);let z=d.imageToViewportRectangle(d._clip,!0);z=z.rotate(-d.getRotation(!0),d._getRotationPoint(!0));let O=this.viewportToDrawerRectangle(z);w&&(O=O.times(w)),v&&(O=O.translate(v)),this._setClip(O,_),M=!0}if(d._croppingPolygons){const z=this;M||this._saveContext(_);try{const O=d._croppingPolygons.map(function(L){return L.map(function(N){const j=d.imageToViewportCoordinates(N.x,N.y,!0).rotate(-d.getRotation(!0),d._getRotationPoint(!0));let se=z.viewportCoordToDrawerCoord(j);return w&&(se=se.times(w)),v&&(se=se.plus(v)),se})});this._clipWithPolygons(O,_)}catch(O){t.console.error(O)}M=!0}if(d._hasOpaqueTile=!1,d.placeholderFillStyle&&d._hasOpaqueTile===!1){let z=this.viewportToDrawerRectangle(d.getBoundsNoRotate(!0));w&&(z=z.times(w)),v&&(z=z.translate(v));let O=null;typeof d.placeholderFillStyle=="function"?O=d.placeholderFillStyle(d,this.context):O=d.placeholderFillStyle,this._drawRectangle(z,O,_)}const D=u(d.subPixelRoundingForTransparency);let P=!1;D===t.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?P=!0:D===t.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(P=!(this.viewer&&this.viewer.isAnimating()));for(let z=0;z<m.length;z++)g=m[z],this._drawTile(g,d,_,w,v,P,d.source),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:d,tile:g});M&&this._restoreContext(_),w||(d.getRotation(!0)%360!==0&&this._restoreRotationChanges(_),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(_)),_&&(w&&this._setRotations(d),this.blendSketch({opacity:d.opacity,scale:w,translate:v,compositeOperation:d.compositeOperation,bounds:E}),w&&(d.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1))),this._drawDebugInfo(d,m),this._raiseTiledImageDrawnEvent(d,m)}_drawDebugInfo(d,m){if(d.debugMode)for(let g=m.length-1;g>=0;g--){const _=m[g];try{this._drawDebugInfoOnTile(_,m.length,g,d)}catch(w){t.console.error(w)}}}_clipWithPolygons(d,m){const g=this._getContext(m);g.beginPath();for(const _ of d)for(const[w,v]of _.entries())g[w===0?"moveTo":"lineTo"](v.x,v.y);g.clip()}_drawTile(d,m,g,_,w,v,x){if(t.console.assert(d,"[Drawer._drawTile] tile is required"),t.console.assert(m,"[Drawer._drawTile] drawingHandler is required"),!d.loaded){t.console.warn("Attempting to draw tile %s when it's not yet loaded.",d.toString());return}const b=this.getDataToDraw(d);if(!b)return;const E=this._getContext(g);_=_||1;let M=d.position.times(t.pixelDensityRatio),D=d.size.times(t.pixelDensityRatio);E.save(),typeof _=="number"&&_!==1&&(M=M.times(_),D=D.times(_)),w instanceof t.Point&&(M=M.plus(w)),E.globalAlpha===1&&d.hasTransparency&&(v&&(M.x=Math.round(M.x),M.y=Math.round(M.y),D.x=Math.round(D.x),D.y=Math.round(D.y)),E.clearRect(M.x,M.y,D.x,D.y)),this._raiseTileDrawingEvent(m,E,d,b);let P,z;d.sourceBounds?(P=Math.min(d.sourceBounds.width,b.canvas.width),z=Math.min(d.sourceBounds.height,b.canvas.height)):(P=b.canvas.width,z=b.canvas.height),E.translate(M.x+D.x/2,0),d.flipped&&E.scale(-1,1),E.drawImage(b.canvas,0,0,P,z,-D.x/2,M.y,D.x,D.y),E.restore()}_getContext(d){let m=this.context;if(d){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");const g=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=g.x,this.sketchCanvas.height=g.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){const _=this;this.viewer.addHandler("rotate",function w(){if(_.viewport.getRotation()===0)return;_.viewer.removeHandler("rotate",w);const v=_._calculateSketchCanvasSize();_.sketchCanvas.width=v.x,_.sketchCanvas.height=v.y})}this._updateImageSmoothingEnabled(this.sketchContext)}m=this.sketchContext}return m}_saveContext(d){this._getContext(d).save()}_restoreContext(d){this._getContext(d).restore()}_setClip(d,m){const g=this._getContext(m);g.beginPath(),g.rect(d.x,d.y,d.width,d.height),g.clip()}_drawRectangle(d,m,g){const _=this._getContext(g);_.save(),_.fillStyle=m,_.fillRect(d.x,d.y,d.width,d.height),_.restore()}blendSketch(d,m,g,_){let w=d;t.isPlainObject(w)||(w={opacity:d,scale:m,translate:g,compositeOperation:_}),d=w.opacity,_=w.compositeOperation;const v=w.bounds;if(this.context.save(),this.context.globalAlpha=d,_&&(this.context.globalCompositeOperation=_),v)v.x<0&&(v.width+=v.x,v.x=0),v.x+v.width>this.canvas.width&&(v.width=this.canvas.width-v.x),v.y<0&&(v.height+=v.y,v.y=0),v.y+v.height>this.canvas.height&&(v.height=this.canvas.height-v.y),this.context.drawImage(this.sketchCanvas,v.x,v.y,v.width,v.height,v.x,v.y,v.width,v.height);else{m=w.scale||1,g=w.translate;const x=g instanceof t.Point?g:new t.Point(0,0);let b=0,E=0;if(g){const M=this.sketchCanvas.width-this.canvas.width,D=this.sketchCanvas.height-this.canvas.height;b=Math.round(M/2),E=Math.round(D/2)}this.context.drawImage(this.sketchCanvas,x.x-b*m,x.y-E*m,(this.canvas.width+2*b)*m,(this.canvas.height+2*E)*m,-b,-E,this.canvas.width+2*b,this.canvas.height+2*E)}this.context.restore()}_drawDebugInfoOnTile(d,m,g,_){const w=this.viewer.world.getIndexOfItem(_)%this.debugGridColor.length,v=this.context;v.save(),v.lineWidth=2*t.pixelDensityRatio,v.font="small-caps bold "+13*t.pixelDensityRatio+"px arial",v.strokeStyle=this.debugGridColor[w],v.fillStyle=this.debugGridColor[w],this._setRotations(_),this._viewportFlipped&&this._flip({point:d.position.plus(d.size.divide(2))}),v.strokeRect(d.position.x*t.pixelDensityRatio,d.position.y*t.pixelDensityRatio,d.size.x*t.pixelDensityRatio,d.size.y*t.pixelDensityRatio);const x=(d.position.x+d.size.x/2)*t.pixelDensityRatio,b=(d.position.y+d.size.y/2)*t.pixelDensityRatio;v.translate(x,b);const E=this.viewport.getRotation(!0);v.rotate(Math.PI/180*-E),v.translate(-x,-b),d.x===0&&d.y===0&&(v.fillText("Zoom: "+this.viewport.getZoom(),d.position.x*t.pixelDensityRatio,(d.position.y-30)*t.pixelDensityRatio),v.fillText("Pan: "+this.viewport.getBounds().toString(),d.position.x*t.pixelDensityRatio,(d.position.y-20)*t.pixelDensityRatio)),v.fillText("Level: "+d.level,(d.position.x+10)*t.pixelDensityRatio,(d.position.y+20)*t.pixelDensityRatio),v.fillText("Column: "+d.x,(d.position.x+10)*t.pixelDensityRatio,(d.position.y+30)*t.pixelDensityRatio),v.fillText("Row: "+d.y,(d.position.x+10)*t.pixelDensityRatio,(d.position.y+40)*t.pixelDensityRatio),v.fillText("Order: "+g+" of "+m,(d.position.x+10)*t.pixelDensityRatio,(d.position.y+50)*t.pixelDensityRatio),v.fillText("Size: "+d.size.toString(),(d.position.x+10)*t.pixelDensityRatio,(d.position.y+60)*t.pixelDensityRatio),v.fillText("Position: "+d.position.toString(),(d.position.x+10)*t.pixelDensityRatio,(d.position.y+70)*t.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),_.getRotation(!0)%360!==0&&this._restoreRotationChanges(),v.restore()}_updateImageSmoothingEnabled(d){d.msImageSmoothingEnabled=this._imageSmoothingEnabled,d.imageSmoothingEnabled=this._imageSmoothingEnabled}_getCanvasSize(d){const m=this._getContext(d).canvas;return new t.Point(m.width,m.height)}_getCanvasCenter(){return new t.Point(this.canvas.width/2,this.canvas.height/2)}_setRotations(d,m=!1){let g=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:m,saveContext:g}),g=!1),d.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:d.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(d._getRotationPoint(!0),!0),useSketch:m,saveContext:g})}_offsetForRotation(d){const m=d.point?d.point.times(t.pixelDensityRatio):this._getCanvasCenter(),g=this._getContext(d.useSketch);g.save(),g.translate(m.x,m.y),g.rotate(Math.PI/180*d.degrees),g.translate(-m.x,-m.y)}_flip(d){d=d||{};const m=d.point?d.point.times(t.pixelDensityRatio):this._getCanvasCenter(),g=this._getContext(d.useSketch);g.translate(m.x,0),g.scale(-1,1),g.translate(-m.x,0)}_restoreRotationChanges(d){this._getContext(d).restore()}_calculateCanvasSize(){const d=t.pixelDensityRatio,m=this.viewport.getContainerSize();return{x:Math.round(m.x*d),y:Math.round(m.y*d)}}_calculateSketchCanvasSize(){const d=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return d;const m=Math.ceil(Math.sqrt(d.x*d.x+d.y*d.y));return{x:m,y:m}}}t.CanvasDrawer=n;const o=t.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function s(h){return h!==t.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&h!==t.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&h!==t.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function c(h){return s(h)?o:h}function u(h){if(typeof h=="number")return c(h);if(!h||!t.Browser)return o;let d=h[t.Browser.vendor];return s(d)&&(d=h["*"]),c(d)}})(e),(function(t){const i=t;class n{constructor(s){this._renderingCanvas=s.renderingCanvas,this._unpackWithPremultipliedAlpha=!!s.unpackWithPremultipliedAlpha,this._imageSmoothingEnabled=s.imageSmoothingEnabled!==void 0?s.imageSmoothingEnabled:!0,this._initShaderProgram=s.initShaderProgram,this._gl=null,this._isWebGL2=!1,this._extTextureFilterAnisotropic=null,this._maxAnisotropy=0,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._glNumTextures=0,this._unitQuad=null,this._destroyed=!1,this._gl=this._renderingCanvas.getContext("webgl2"),this._gl?(this._isWebGL2=!0,this._setupWebGLExtensions()):(this._gl=this._renderingCanvas.getContext("webgl"),this._isWebGL2=!1,this._gl&&this._setupWebGLExtensions()),this._gl&&this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._unpackWithPremultipliedAlpha)}getContext(){return this._gl}isWebGL2(){return this._isWebGL2}getMaxTextures(){return this._gl?this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS):0}getRenderingCanvas(){return this._renderingCanvas}getFirstPass(){return this._firstPass}getSecondPass(){return this._secondPass}getFrameBuffer(){return this._glFrameBuffer}getRenderToTexture(){return this._renderToTexture}getUnitQuad(){return this._unitQuad}_setupWebGLExtensions(){const s=this._gl;this._extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic"),this._extTextureFilterAnisotropic&&(this._maxAnisotropy=s.getParameter(this._extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))}getTextureFilter(){const s=this._gl;return this._imageSmoothingEnabled?s.LINEAR:s.NEAREST}_applyAnisotropy(){if(!this._imageSmoothingEnabled||!this._extTextureFilterAnisotropic||this._maxAnisotropy<=0)return;const s=this._gl;s.texParameterf(s.TEXTURE_2D,this._extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(4,this._maxAnisotropy))}setupRenderer(s,c){const u=this._gl;if(!u){t.console.error("WebGL context not available for setupRenderer");return}this._unitQuad=this.makeQuadVertexBuffer(0,1,0,1),this._makeFirstPassShaderProgram(),this._makeSecondPassShaderProgram(),this._renderToTexture=u.createTexture(),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,this._renderToTexture),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,s,c,0,u.RGBA,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.getTextureFilter()),this._applyAnisotropy(),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),this._glFrameBuffer=u.createFramebuffer(),u.bindFramebuffer(u.FRAMEBUFFER,this._glFrameBuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,this._renderToTexture,0),u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA)}resizeRenderer(s,c){const u=this._gl;u&&(u.viewport(0,0,s,c),u.deleteTexture(this._renderToTexture),this._renderToTexture=u.createTexture(),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,this._renderToTexture),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,s,c,0,u.RGBA,u.UNSIGNED_BYTE,null),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.getTextureFilter()),this._applyAnisotropy(),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.bindFramebuffer(u.FRAMEBUFFER,this._glFrameBuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,this._renderToTexture,0))}createTexture(s,c={}){const u=this._gl;if(!u)return null;const h=u.createTexture();u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,h),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.getTextureFilter()),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.getTextureFilter()),this._applyAnisotropy();try{const d=c.unpackWithPremultipliedAlpha!==void 0?c.unpackWithPremultipliedAlpha:this._unpackWithPremultipliedAlpha;return u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,s),h}catch{return u.deleteTexture(h),null}}deleteTexture(s){this._gl&&s&&this._gl.deleteTexture(s)}setImageSmoothingEnabled(s){this._imageSmoothingEnabled=!!s}setUnpackWithPremultipliedAlpha(s){this._unpackWithPremultipliedAlpha=!!s,this._gl&&this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._unpackWithPremultipliedAlpha)}makeQuadVertexBuffer(s,c,u,h){return new Float32Array([s,h,c,h,s,u,s,u,c,h,c,u])}_makeFirstPassShaderProgram(){const s=this._glNumTextures=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),c=()=>[...Array(s).keys()].map(v=>`uniform mat3 u_matrix_${v};`).join(`
`),u=()=>[...Array(s).keys()].map(v=>`${v>0?"else ":""}if(int(a_index) == ${v}) { transform_matrix = u_matrix_${v}; }`).join(`
`),h=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;
            attribute float a_index;

            ${c()} // create a uniform mat3 for each potential tile to draw

            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {

                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()

                ${u()}

                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
                v_image_index = a_index;
            }
            `,d=`
            precision mediump float;

            // our textures
            uniform sampler2D u_images[${s}];
            // our opacities
            uniform float u_opacities[${s}];

            // the varyings passed in from the vertex shader.
            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {
                // can't index directly with a variable, need to use a loop iterator hack
                for(int i = 0; i < ${s}; ++i){
                    if(i == int(v_image_index)){
                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];
                    }
                }
            }
            `,m=this._gl,g=this._initShaderProgram(m,h,d);m.useProgram(g),this._firstPass={shaderProgram:g,aOutputPosition:m.getAttribLocation(g,"a_output_position"),aTexturePosition:m.getAttribLocation(g,"a_texture_position"),aIndex:m.getAttribLocation(g,"a_index"),uTransformMatrices:[...Array(this._glNumTextures).keys()].map(v=>m.getUniformLocation(g,`u_matrix_${v}`)),uImages:m.getUniformLocation(g,"u_images"),uOpacities:m.getUniformLocation(g,"u_opacities"),bufferOutputPosition:m.createBuffer(),bufferTexturePosition:m.createBuffer(),bufferIndex:m.createBuffer()},m.uniform1iv(this._firstPass.uImages,[...Array(s).keys()]);const _=new Float32Array(s*12);for(let v=0;v<s;++v)_.set(Float32Array.from(this._unitQuad),v*12);m.bindBuffer(m.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),m.bufferData(m.ARRAY_BUFFER,_,m.STATIC_DRAW),m.enableVertexAttribArray(this._firstPass.aOutputPosition),m.bindBuffer(m.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),m.enableVertexAttribArray(this._firstPass.aTexturePosition),m.bindBuffer(m.ARRAY_BUFFER,this._firstPass.bufferIndex);const w=[...Array(this._glNumTextures).keys()].map(v=>Array(6).fill(v)).flat();m.bufferData(m.ARRAY_BUFFER,new Float32Array(w),m.STATIC_DRAW),m.enableVertexAttribArray(this._firstPass.aIndex)}_makeSecondPassShaderProgram(){const s=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;

            varying vec2 v_texture_position;

            void main() {
                // Transform to clip space (0:1 --> -1:1)
                gl_Position = vec4(vec3(a_output_position * 2.0 - 1.0, 1), 1);

                v_texture_position = a_texture_position;
            }
            `,c=`
            precision mediump float;

            // our texture
            uniform sampler2D u_image;

            // the texCoords passed in from the vertex shader.
            varying vec2 v_texture_position;

            // the opacity multiplier for the image
            uniform float u_opacity_multiplier;

            void main() {
                gl_FragColor = texture2D(u_image, v_texture_position);
                gl_FragColor *= u_opacity_multiplier;
            }
            `,u=this._gl,h=this._initShaderProgram(u,s,c);u.useProgram(h),this._secondPass={shaderProgram:h,aOutputPosition:u.getAttribLocation(h,"a_output_position"),aTexturePosition:u.getAttribLocation(h,"a_texture_position"),uImage:u.getUniformLocation(h,"u_image"),uOpacityMultiplier:u.getUniformLocation(h,"u_opacity_multiplier"),bufferOutputPosition:u.createBuffer(),bufferTexturePosition:u.createBuffer()},u.bindBuffer(u.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),u.bufferData(u.ARRAY_BUFFER,this._unitQuad,u.STATIC_DRAW),u.enableVertexAttribArray(this._secondPass.aOutputPosition),u.bindBuffer(u.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),u.bufferData(u.ARRAY_BUFFER,this._unitQuad,u.DYNAMIC_DRAW),u.enableVertexAttribArray(this._secondPass.aTexturePosition)}destroy(){if(this._destroyed)return;this._destroyed=!0;const s=this._gl;if(s){try{const u=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS);if(u&&u>0)for(let h=0;h<u;++h)s.activeTexture(s.TEXTURE0+h),s.bindTexture(s.TEXTURE_2D,null),s.bindTexture(s.TEXTURE_CUBE_MAP,null);s.bindBuffer(s.ARRAY_BUFFER,null),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null),s.bindRenderbuffer(s.RENDERBUFFER,null),s.bindFramebuffer(s.FRAMEBUFFER,null),this._secondPass&&this._secondPass.bufferOutputPosition&&s.deleteBuffer(this._secondPass.bufferOutputPosition),this._glFrameBuffer&&s.deleteFramebuffer(this._glFrameBuffer)}catch(u){t.console.warn("Error during WebGL cleanup in WebglContextManager.destroy():",u)}const c=s.getExtension("WEBGL_lose_context");c&&c.loseContext()}this._gl=null,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._unitQuad=null}isDestroyed(){return this._destroyed}}i.WebGLDrawer=class iE extends i.DrawerBase{constructor(s){super(s),this._destroyed=!1,this._glContext=null,this._enableContextRecovery=!0,this._outputCanvas=null,this._outputContext=null,this._clippingCanvas=null,this._clippingContext=null,this._renderingCanvas=null,this._backupCanvasDrawer=null,this._canvasFallbackAllowed=this.viewer.drawerCandidates&&this.viewer.drawerCandidates.includes("canvas"),this._imageSmoothingEnabled=!0,this._unpackWithPremultipliedAlpha=!!this.options.unpackWithPremultipliedAlpha,this.viewer.rejectEventHandler("tile-drawn","The WebGLDrawer does not raise the tile-drawn event"),this.viewer.rejectEventHandler("tile-drawing","The WebGLDrawer does not raise the tile-drawing event"),this._setupCanvases(),this._setupRenderer(),this._supportedFormats=["context2d","image"],this.context=this._outputContext}get defaultOptions(){return{usePrivateCache:!0,preloadCache:!1,unpackWithPremultipliedAlpha:!1}}getSupportedDataFormats(){return this._supportedFormats}destroy(){this._destroyed||(super.destroy(),this._resizeHandler&&(this.viewer.removeHandler("resize",this._resizeHandler),this._resizeHandler=null),this._glContext&&(this._glContext.destroy(),this._glContext=null),this._renderingCanvas&&(this._renderingCanvas.width=this._renderingCanvas.height=1),this._clippingCanvas&&(this._clippingCanvas.width=this._clippingCanvas.height=1),this._outputCanvas&&(this._outputCanvas.width=this._outputCanvas.height=1),this._renderingCanvas=null,this._clippingCanvas=this._clippingContext=null,this._outputCanvas=this._outputContext=null,this._backupCanvasDrawer&&(this._backupCanvasDrawer.destroy(),this._backupCanvasDrawer=null),this.container.removeChild(this.canvas),this.viewer.drawer===this&&(this.viewer.drawer=null),this.destroyInternalCache(),this._destroyed=!0)}canRotate(){return!0}static isSupported(){let s=null,c=null,u=null;try{const d=document.createElement("canvas");if(d.width=4,d.height=4,!t.isFunction(d.getContext)||(u=d.getContext("webgl2")||d.getContext("webgl"),!u)||(s=new n({renderingCanvas:d,unpackWithPremultipliedAlpha:!1,imageSmoothingEnabled:!0,initShaderProgram:iE.initShaderProgram}),!s.getContext()))return!1;s.setupRenderer(4,4);const m=s.getFirstPass(),g=s.getFrameBuffer();if(!m||!g)return!1;const _=s.getMaxTextures();if(!_||_<=0)return!1;const w=new ImageData(4,4);if(w.data[0]=255,w.data[1]=0,w.data[2]=0,w.data[3]=255,c=s.createTexture(w),!c)return!1;const v=s.makeQuadVertexBuffer(0,1,0,1);u.viewport(0,0,4,4),u.bindFramebuffer(u.FRAMEBUFFER,g),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.useProgram(m.shaderProgram),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c),u.bindBuffer(u.ARRAY_BUFFER,m.bufferTexturePosition),u.bufferData(u.ARRAY_BUFFER,v,u.DYNAMIC_DRAW);const x=new Float32Array([2,0,0,0,2,0,-1,-1,1]);u.uniformMatrix3fv(m.uTransformMatrices[0],!1,x),u.uniform1fv(m.uOpacities,new Float32Array([1])),u.bindBuffer(u.ARRAY_BUFFER,m.bufferOutputPosition),u.vertexAttribPointer(m.aOutputPosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,m.bufferTexturePosition),u.vertexAttribPointer(m.aTexturePosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,m.bufferIndex),u.vertexAttribPointer(m.aIndex,1,u.FLOAT,!1,0,0),u.drawArrays(u.TRIANGLES,0,6);const b=new Uint8Array(64);return u.readPixels(0,0,4,4,u.RGBA,u.UNSIGNED_BYTE,b),b.some(M=>M!==0)?!0:(t.console.warn("[WebGLDrawer.isSupported] Functional test failed: no non-zero pixels read back."),!1)}catch(h){return t.console.warn("[WebGLDrawer.isSupported] Functional test failed:",h&&h.message?h.message:h),!1}finally{try{if(c&&s&&s.deleteTexture(c),s)s.destroy();else if(u){const h=u.getExtension("WEBGL_lose_context");h&&h.loseContext()}}catch{}}}getType(){return"webgl"}isWebGL2(){return this._glContext?this._glContext.isWebGL2():!1}setContextRecoveryEnabled(s){this._enableContextRecovery=!!s}isContextRecoveryEnabled(){return this._enableContextRecovery}minimumOverlapRequired(s){return s.hasIssue("webgl")}_createDrawingElement(){const s=t.makeNeutralElement("canvas"),c=this._calculateCanvasSize();return s.width=c.x,s.height=c.y,s}_getBackupCanvasDrawer(){return this._backupCanvasDrawer||(this._backupCanvasDrawer=this.viewer.requestDrawer("canvas",{mainDrawer:!1}),this._backupCanvasDrawer.canvas.style.setProperty("visibility","hidden"),this._backupCanvasDrawer.getSupportedDataFormats=()=>this._supportedFormats,this._backupCanvasDrawer.getDataToDraw=this.getDataToDraw.bind(this)),this._backupCanvasDrawer}_draw(s,c=!1){const u=this._glContext?this._glContext.getContext():null;if(!u)return;const h=this._glContext.getFirstPass(),d=this._glContext.getSecondPass(),m=this._glContext.getFrameBuffer(),g=this._glContext.getRenderToTexture(),_=this.viewport.getBoundsNoRotateWithMargins(!0),w={bounds:_,center:new i.Point(_.x+_.width/2,_.y+_.height/2),rotation:this.viewport.getRotation(!0)*Math.PI/180},v=this.viewport.flipped?-1:1,x=t.Mat3.makeTranslation(-w.center.x,-w.center.y),b=t.Mat3.makeScaling(2/w.bounds.width*v,-2/w.bounds.height),E=t.Mat3.makeRotation(-w.rotation),M=b.multiply(E).multiply(x);u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT),this._outputContext.clearRect(0,0,this._outputCanvas.width,this._outputCanvas.height);let D=!1;s.forEach((P,z)=>{if(P.getIssue("webgl")){if(D&&(this._outputContext.drawImage(this._renderingCanvas,0,0),u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT),D=!1),this._canvasFallbackAllowed){const O=this._getBackupCanvasDrawer();O.draw([P]),this._outputContext.drawImage(O.canvas,0,0)}}else{const O=P.getTilesToDraw();if(P.placeholderFillStyle&&P._hasOpaqueTile===!1&&this._drawPlaceholder(P),O.length===0||P.getOpacity()===0)return;const L=O[0],N=P.compositeOperation||this.viewer.compositeOperation||P._clip||P._croppingPolygons||P.debugMode,j=N||P.opacity<1||L.tile.hasTransparency;N&&(D&&this._outputContext.drawImage(this._renderingCanvas,0,0),u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT)),u.useProgram(h.shaderProgram),j?(u.bindFramebuffer(u.FRAMEBUFFER,m),u.clear(u.COLOR_BUFFER_BIT)):u.bindFramebuffer(u.FRAMEBUFFER,null);let se=M;const K=P.getRotation(!0);if(K%360!==0){const ee=t.Mat3.makeRotation(-K*Math.PI/180),_e=P.getBoundsNoRotate(!0).getCenter(),G=t.Mat3.makeTranslation(_e.x,_e.y),V=t.Mat3.makeTranslation(-_e.x,-_e.y),q=G.multiply(ee).multiply(V);se=M.multiply(q)}const X=this._glContext.getMaxTextures();if(X<=0||X===null||X===void 0)throw new Error(`WebGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${X}). This could happen
                    if too many contexts have been created and not released, or there is another problem with the graphics card.`);const Z=new Float32Array(X*12),he=new Array(X),Y=new Array(X),Q=new Array(X);for(let ee=0;ee<O.length;ee++){const _e=O[ee].tile,G=ee%X,V=G+1,q=this.getDataToDraw(_e);if(q&&q.texture&&this._getTileData(_e,P,q,se,G,Z,he,Y,Q),V===X||ee===O.length-1){for(let ie=0;ie<V;ie++)u.activeTexture(u.TEXTURE0+ie),u.bindTexture(u.TEXTURE_2D,he[ie]);u.bindBuffer(u.ARRAY_BUFFER,h.bufferTexturePosition),u.bufferData(u.ARRAY_BUFFER,Z,u.DYNAMIC_DRAW),Y.forEach((ie,me)=>{u.uniformMatrix3fv(h.uTransformMatrices[me],!1,ie)}),u.uniform1fv(h.uOpacities,new Float32Array(Q)),u.bindBuffer(u.ARRAY_BUFFER,h.bufferOutputPosition),u.vertexAttribPointer(h.aOutputPosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,h.bufferTexturePosition),u.vertexAttribPointer(h.aTexturePosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,h.bufferIndex),u.vertexAttribPointer(h.aIndex,1,u.FLOAT,!1,0,0),u.drawArrays(u.TRIANGLES,0,6*V)}}j&&(u.useProgram(d.shaderProgram),u.bindFramebuffer(u.FRAMEBUFFER,null),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,g),u.uniform1f(d.uOpacityMultiplier,P.opacity),u.bindBuffer(u.ARRAY_BUFFER,d.bufferTexturePosition),u.vertexAttribPointer(d.aTexturePosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,d.bufferOutputPosition),u.vertexAttribPointer(d.aOutputPosition,2,u.FLOAT,!1,0,0),u.drawArrays(u.TRIANGLES,0,6)),D=!0,N&&(this._applyContext2dPipeline(P,O,z),D=!1,u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT)),z===0&&this._raiseTiledImageDrawnEvent(P,O.map(ee=>ee.tile))}}),D&&this._outputContext.drawImage(this._renderingCanvas,0,0)}draw(s,c=!1){try{this._draw(s,c)}catch(u){if(this._isWebGLContextError(u))if(this._enableContextRecovery&&!c)t.console.warn("WebGL context error detected during draw operation, attempting to recreate context...",u),this._recreateContext()?(t.console.info("WebGL context recreated successfully, retrying draw operation"),this.viewer&&this.viewer.raiseEvent("webgl-context-recovered",{drawer:this,error:u}),this.draw(s,!0)):this._fallbackToCanvasDrawer(u,s);else if(this._enableContextRecovery)this._fallbackToCanvasDrawer(u,s);else throw u;else throw u}}setImageSmoothingEnabled(s){this._imageSmoothingEnabled!==s&&(this._imageSmoothingEnabled=s,this._glContext&&this._glContext.setImageSmoothingEnabled(s),this.setInternalCacheNeedsRefresh(),this.viewer.forceRedraw())}setUnpackWithPremultipliedAlpha(s){this._unpackWithPremultipliedAlpha!==s&&(this._unpackWithPremultipliedAlpha=s,this._glContext&&this._glContext.setUnpackWithPremultipliedAlpha(s),this.setInternalCacheNeedsRefresh(),this.viewer.forceRedraw())}drawDebuggingRect(s){const c=this._outputContext;c.save(),c.lineWidth=2*t.pixelDensityRatio,c.strokeStyle=this.debugGridColor[0],c.fillStyle=this.debugGridColor[0],c.strokeRect(s.x*t.pixelDensityRatio,s.y*t.pixelDensityRatio,s.width*t.pixelDensityRatio,s.height*t.pixelDensityRatio),c.restore()}_applyContext2dPipeline(s,c,u){if(this._outputContext.save(),this._outputContext.globalCompositeOperation=u===0?null:s.compositeOperation||this.viewer.compositeOperation,s._croppingPolygons||s._clip?(this._renderToClippingCanvas(s),this._outputContext.drawImage(this._clippingCanvas,0,0)):this._outputContext.drawImage(this._renderingCanvas,0,0),this._outputContext.restore(),s.debugMode){const h=this.viewer.viewport.getFlip();h&&this._flip(),this._drawDebugInfo(c,s,h),h&&this._flip()}}_getTileData(s,c,u,h,d,m,g,_,w){const v=u.texture,x=u.position,b=u.overlapFraction;m.set(x,d*12);const E=s.positionedBounds.width*b.x,M=s.positionedBounds.height*b.y,D=s.positionedBounds.x+(s.x===0?0:E),P=s.positionedBounds.y+(s.y===0?0:M),z=s.positionedBounds.x+s.positionedBounds.width-(s.isRightMost?0:E),O=s.positionedBounds.y+s.positionedBounds.height-(s.isBottomMost?0:M),L=new t.Mat3([z-D,0,0,0,O-P,0,D,P,1]);s.flipped&&L.scaleAndTranslateSelf(-1,1,1,0),L.scaleAndTranslateOtherSetSelf(h),w[d]=s.opacity,g[d]=v,_[d]=L.values}_setupRenderer(){if(!this._glContext||!this._glContext.getContext()){t.console.error("_setupCanvases must be called before _setupRenderer");return}this._glContext.setupRenderer(this._renderingCanvas.width,this._renderingCanvas.height)}_resizeRenderer(){this._glContext&&this._glContext.resizeRenderer(this._renderingCanvas.width,this._renderingCanvas.height)}_setupCanvases(){const s=this;this._outputCanvas=this.canvas,this._outputContext=this._outputCanvas.getContext("2d"),this._renderingCanvas=document.createElement("canvas"),this._clippingCanvas=document.createElement("canvas"),this._clippingContext=this._clippingCanvas.getContext("2d"),this._renderingCanvas.width=this._clippingCanvas.width=this._outputCanvas.width,this._renderingCanvas.height=this._clippingCanvas.height=this._outputCanvas.height,this._glContext=new n({renderingCanvas:this._renderingCanvas,unpackWithPremultipliedAlpha:this._unpackWithPremultipliedAlpha,imageSmoothingEnabled:this._imageSmoothingEnabled,initShaderProgram:this.constructor.initShaderProgram}),this._resizeHandler=function(){s._outputCanvas!==s.viewer.drawer.canvas&&(s._outputCanvas.style.width=s.viewer.drawer.canvas.clientWidth+"px",s._outputCanvas.style.height=s.viewer.drawer.canvas.clientHeight+"px");const c=s._calculateCanvasSize();(s._outputCanvas.width!==c.x||s._outputCanvas.height!==c.y)&&(s._outputCanvas.width=c.x,s._outputCanvas.height=c.y),s._renderingCanvas.style.width=s._outputCanvas.clientWidth+"px",s._renderingCanvas.style.height=s._outputCanvas.clientHeight+"px",s._renderingCanvas.width=s._clippingCanvas.width=s._outputCanvas.width,s._renderingCanvas.height=s._clippingCanvas.height=s._outputCanvas.height,s._resizeRenderer()},this.viewer.addHandler("resize",this._resizeHandler)}_isWebGLContextError(s){if(!s||!s.message)return!1;const c=s.message.toLowerCase();return c.includes("max_texture_image_units")||c.includes("webgl")&&(c.includes("context")||c.includes("lost")||c.includes("invalid"))}_recreateContext(){if(this._destroyed)return null;try{const s=this._renderingCanvas,c=s.width,u=s.height,h=s.style.width,d=s.style.height;if(this.destroyInternalCache(),this._glContext&&(this._glContext.destroy(),this._glContext=null),this._renderingCanvas=document.createElement("canvas"),this._renderingCanvas.width=c,this._renderingCanvas.height=u,h&&(this._renderingCanvas.style.width=h),d&&(this._renderingCanvas.style.height=d),this._glContext=new n({renderingCanvas:this._renderingCanvas,unpackWithPremultipliedAlpha:this._unpackWithPremultipliedAlpha,imageSmoothingEnabled:this._imageSmoothingEnabled,initShaderProgram:this.constructor.initShaderProgram}),!this._glContext.getContext())return t.console.error("Failed to recreate WebGL context: no GL context"),null;try{const m=this._glContext.getMaxTextures();if(!m||m<=0)return t.console.error("Failed to recreate WebGL context: invalid MAX_TEXTURE_IMAGE_UNITS"),null}catch(m){return t.console.error("Failed to verify new WebGL context:",m),null}return this._setupRenderer(),this.setInternalCacheNeedsRefresh(),this}catch(s){return t.console.error("Failed to recreate WebGL context:",s),null}}_fallbackToCanvasDrawer(s,c){const u=this;if(!this._canvasFallbackAllowed)throw u._raiseContextRecoveryFailedEvent(s,null),s;const h=this.viewer.requestDrawer("canvas",{mainDrawer:!0,redrawImmediately:!1});if(h)t.console.error("Failed to recreate WebGL context, switching to canvas drawer"),u._raiseContextRecoveryFailedEvent(s,h),this.viewer.world.requestInvalidate(!0);else throw t.console.error("Failed to create canvas drawer as fallback"),u._raiseContextRecoveryFailedEvent(s,null),s}_raiseContextRecoveryFailedEvent(s,c=null){this.viewer&&this.viewer.raiseEvent("webgl-context-recovery-failed",{drawer:this,canvasDrawer:c,error:s})}internalCacheCreate(s,c){const u=c.tiledImage;if(!(this._glContext?this._glContext.getContext():null))return t.console.error("WebGL context not available in internalCacheCreate"),{};let d,m,g=s.data,_=!1;if(g instanceof CanvasRenderingContext2D&&(g=g.canvas,_=!0),!u.getIssue("webgl"))if(_&&t.isCanvasTainted(g))u.setIssue("webgl","WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"),this._raiseDrawerErrorEvent(u,this._canvasFallbackAllowed?"Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage.":"Tainted data cannot be used by the WebGLDrawer, and canvas fallback is not enabled."),this.setInternalCacheNeedsRefresh();else{let w,v;c.sourceBounds?(w=Math.min(c.sourceBounds.width,g.width)/g.width,v=Math.min(c.sourceBounds.height,g.height)/g.height):(w=1,v=1);const x=u.source.tileOverlap,b=this._calculateOverlapFraction(c,u);if(x>0){const E=(c.x===0?0:b.x)*w,M=(c.y===0?0:b.y)*v,D=(c.isRightMost?1:1-b.x)*w,P=(c.isBottomMost?1:1-b.y)*v;m=this._glContext.makeQuadVertexBuffer(E,D,M,P)}else w===1&&v===1?m=this._glContext.getUnitQuad():m=this._glContext.makeQuadVertexBuffer(0,w,0,v);if(d=this._glContext.createTexture(g,{unpackWithPremultipliedAlpha:this._unpackWithPremultipliedAlpha}),d)return{texture:d,position:m,overlapFraction:b,glContext:this._glContext};{u.setIssue("webgl","Error creating texture in WebGL.");const E=this._canvasFallbackAllowed;this._raiseDrawerErrorEvent(u,E?"Unknown error when creating texture. Falling back to CanvasDrawer for this TiledImage.":"Cannot use WebGL for this TiledImage; canvas fallback is not enabled."),this.setInternalCacheNeedsRefresh()}}if(g instanceof Image){const w=document.createElement("canvas");w.width=g.width,w.height=g.height;const v=w.getContext("2d",{willReadFrequently:!0});v.drawImage(g,0,0),g=v}return g instanceof CanvasRenderingContext2D?g:(t.console.error("Unsupported data used for WebGL Drawer - probably a bug!"),{})}internalCacheFree(s){if(s&&s.texture){const c=s.glContext||this._glContext;if(c&&!c.isDestroyed())try{c.deleteTexture(s.texture)}catch{}s.texture=null,s.glContext=null}}_calculateOverlapFraction(s,c){const u=c.source.tileOverlap,h=s.sourceBounds.width,d=s.sourceBounds.height,m=(s.x===0?0:u)+(s.isRightMost?0:u),g=(s.y===0?0:u)+(s.isBottomMost?0:u),_=u/(h+m),w=u/(d+g);return{x:_,y:w}}_setClip(){}_renderToClippingCanvas(s){if(this._clippingContext.clearRect(0,0,this._clippingCanvas.width,this._clippingCanvas.height),this._clippingContext.save(),this.viewer.viewport.getFlip()){const c=new t.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(c.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-c.x,0)}if(s._clip){const u=[{x:s._clip.x,y:s._clip.y},{x:s._clip.x+s._clip.width,y:s._clip.y},{x:s._clip.x+s._clip.width,y:s._clip.y+s._clip.height},{x:s._clip.x,y:s._clip.y+s._clip.height}].map(h=>{const d=s.imageToViewportCoordinates(h.x,h.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(d)});this._clippingContext.beginPath(),u.forEach((h,d)=>{this._clippingContext[d===0?"moveTo":"lineTo"](h.x,h.y)}),this._clippingContext.clip(),this._setClip()}if(s._croppingPolygons){const c=s._croppingPolygons.map(u=>u.map(h=>{const d=s.imageToViewportCoordinates(h.x,h.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(d)}));this._clippingContext.beginPath(),c.forEach(u=>{u.forEach((h,d)=>{this._clippingContext[d===0?"moveTo":"lineTo"](h.x,h.y)})}),this._clippingContext.clip()}if(this.viewer.viewport.getFlip()){const c=new t.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(c.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-c.x,0)}this._clippingContext.drawImage(this._renderingCanvas,0,0),this._clippingContext.restore()}_setRotations(s){let c=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),saveContext:c}),c=!1),s.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:s.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(s._getRotationPoint(!0),!0),saveContext:c})}_offsetForRotation(s){const c=s.point?s.point.times(t.pixelDensityRatio):this._getCanvasCenter(),u=this._outputContext;u.save(),u.translate(c.x,c.y),u.rotate(Math.PI/180*s.degrees),u.translate(-c.x,-c.y)}_flip(s){s=s||{};const c=s.point?s.point.times(t.pixelDensityRatio):this._getCanvasCenter(),u=this._outputContext;u.translate(c.x,0),u.scale(-1,1),u.translate(-c.x,0)}_drawDebugInfo(s,c,u){for(let h=s.length-1;h>=0;h--){const d=s[h].tile;try{this._drawDebugInfoOnTile(d,s.length,h,c,u)}catch(m){t.console.error(m)}}}_drawDebugInfoOnTile(s,c,u,h,d){const m=this.viewer.world.getIndexOfItem(h)%this.debugGridColor.length,g=this.context;g.save(),g.lineWidth=2*t.pixelDensityRatio,g.font="small-caps bold "+13*t.pixelDensityRatio+"px arial",g.strokeStyle=this.debugGridColor[m],g.fillStyle=this.debugGridColor[m],this._setRotations(h),d&&this._flip({point:s.position.plus(s.size.divide(2))}),g.strokeRect(s.position.x*t.pixelDensityRatio,s.position.y*t.pixelDensityRatio,s.size.x*t.pixelDensityRatio,s.size.y*t.pixelDensityRatio);const _=(s.position.x+s.size.x/2)*t.pixelDensityRatio,w=(s.position.y+s.size.y/2)*t.pixelDensityRatio;g.translate(_,w);const v=this.viewport.getRotation(!0);g.rotate(Math.PI/180*-v),g.translate(-_,-w),s.x===0&&s.y===0&&(g.fillText("Zoom: "+this.viewport.getZoom(),s.position.x*t.pixelDensityRatio,(s.position.y-30)*t.pixelDensityRatio),g.fillText("Pan: "+this.viewport.getBounds().toString(),s.position.x*t.pixelDensityRatio,(s.position.y-20)*t.pixelDensityRatio)),g.fillText("Level: "+s.level,(s.position.x+10)*t.pixelDensityRatio,(s.position.y+20)*t.pixelDensityRatio),g.fillText("Column: "+s.x,(s.position.x+10)*t.pixelDensityRatio,(s.position.y+30)*t.pixelDensityRatio),g.fillText("Row: "+s.y,(s.position.x+10)*t.pixelDensityRatio,(s.position.y+40)*t.pixelDensityRatio),g.fillText("Order: "+u+" of "+c,(s.position.x+10)*t.pixelDensityRatio,(s.position.y+50)*t.pixelDensityRatio),g.fillText("Size: "+s.size.toString(),(s.position.x+10)*t.pixelDensityRatio,(s.position.y+60)*t.pixelDensityRatio),g.fillText("Position: "+s.position.toString(),(s.position.x+10)*t.pixelDensityRatio,(s.position.y+70)*t.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),h.getRotation(!0)%360!==0&&this._restoreRotationChanges(),g.restore()}_drawPlaceholder(s){const c=s.getBounds(!0),u=this.viewportToDrawerRectangle(s.getBounds(!0)),h=this._outputContext;let d;typeof s.placeholderFillStyle=="function"?d=s.placeholderFillStyle(s,h):d=s.placeholderFillStyle,this._offsetForRotation({degrees:this.viewer.viewport.getRotation(!0)}),h.fillStyle=d,h.translate(u.x,u.y),h.rotate(Math.PI/180*c.degrees),h.translate(-u.x,-u.y),h.fillRect(u.x,u.y,u.width,u.height),this._restoreRotationChanges()}_getCanvasCenter(){return new t.Point(this.canvas.width/2,this.canvas.height/2)}_restoreRotationChanges(){this._outputContext.restore()}static initShaderProgram(s,c,u){function h(_,w,v){const x=_.createShader(w);return _.shaderSource(x,v),_.compileShader(x),_.getShaderParameter(x,_.COMPILE_STATUS)?x:(t.console.error(`An error occurred compiling the shaders: ${_.getShaderInfoLog(x)}`),_.deleteShader(x),null)}const d=h(s,s.VERTEX_SHADER,c),m=h(s,s.FRAGMENT_SHADER,u),g=s.createProgram();return s.attachShader(g,d),s.attachShader(g,m),s.linkProgram(g),s.getProgramParameter(g,s.LINK_STATUS)?g:(t.console.error(`Unable to initialize the shader program: ${s.getProgramInfoLog(g)}`),null)}}})(e),(function(t){t.Viewport=function(i){const n=arguments;n.length&&n[0]instanceof t.Point&&(i={containerSize:n[0],contentSize:n[1],config:n[2]}),i.config&&(t.extend(!0,i,i.config),delete i.config),this._margins=t.extend({left:0,top:0,right:0,bottom:0},i.margins||{}),delete i.margins,i.initialDegrees=i.degrees,delete i.degrees,t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:t.DEFAULT_SETTINGS.degrees,flipped:t.DEFAULT_SETTINGS.flipped,homeFillsViewer:t.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:t.DEFAULT_SETTINGS.silenceMultiImageWarnings},i),this._updateContainerInnerSize(),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new t.Spring({initial:i.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._sizeChanged=!1,this._setContentBounds(new t.Rect(0,0,1,1),1),this.goHome(!0),this.update()},t.Viewport.prototype={get degrees(){return t.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(i){t.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(i)},resetContentSize:function(i){return t.console.assert(i,"[Viewport.resetContentSize] contentSize is required"),t.console.assert(i instanceof t.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),t.console.assert(i.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),t.console.assert(i.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new t.Rect(0,0,1,i.y/i.x),i.x),this},setHomeBounds:function(i,n){t.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(i,n)},_setContentBounds:function(i,n){t.console.assert(i,"[Viewport._setContentBounds] bounds is required"),t.console.assert(i instanceof t.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),t.console.assert(i.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),t.console.assert(i.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=i.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=i.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;const i=this._contentAspectRatio/this.getAspectRatio();let n;return this.homeFillsViewer?n=i>=1?i:1:n=i>=1?1:i,n/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){const i=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),o=n/this.getAspectRatio();return new t.Rect(i.x-n/2,i.y-o/2,n,o)},goHome:function(i){return this.viewer&&this.viewer.raiseEvent("home",{immediately:i}),this.fitBounds(this.getHomeBounds(),i)},getMinZoom:function(){const i=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*i},getMaxZoom:function(){let i=this.maxZoomLevel;return i||(i=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,i/=this._contentBounds.width),Math.max(i,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return t.extend({},this._margins)},setMargins:function(i){t.console.assert(t.type(i)==="object","[Viewport.setMargins] margins must be an object"),this._margins=t.extend({left:0,top:0,right:0,bottom:0},i),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(i){return this.getBoundsNoRotate(i).rotate(-this.getRotation(i))},getBoundsNoRotate:function(i){const n=this.getCenter(i),o=1/this.getZoom(i),s=o/this.getAspectRatio();return new t.Rect(n.x-o/2,n.y-s/2,o,s)},getBoundsWithMargins:function(i){return this.getBoundsNoRotateWithMargins(i).rotate(-this.getRotation(i),this.getCenter(i))},getBoundsNoRotateWithMargins:function(i){const n=this.getBoundsNoRotate(i),o=this._containerInnerSize.x*this.getZoom(i);return n.x-=this._margins.left/o,n.y-=this._margins.top/o,n.width+=(this._margins.left+this._margins.right)/o,n.height+=(this._margins.top+this._margins.bottom)/o,n},getCenter:function(i){const n=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),o=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);if(i)return n;if(!this.zoomPoint)return o;const s=this.pixelFromPoint(this.zoomPoint,!0),c=this.getZoom(),u=1/c,h=u/this.getAspectRatio(),d=new t.Rect(n.x-u/2,n.y-h/2,u,h),_=this._pixelFromPoint(this.zoomPoint,d).minus(s).rotate(-this.getRotation(!0)).divide(this._containerInnerSize.x*c);return o.plus(_)},getZoom:function(i){return i?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(i){return Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(i){const n=this.viewportToViewerElementRectangle(i).getBoundingBox(),o=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox();let s=!1,c=!1;if(!this.wrapHorizontal){const d=n.x+n.width,m=o.x+o.width;let g,_,w;n.width>o.width?g=this.visibilityRatio*o.width:g=this.visibilityRatio*n.width,_=o.x-d+g,w=m-n.x-g,g>o.width?(n.x+=(_+w)/2,s=!0):w<0?(n.x+=w,s=!0):_>0&&(n.x+=_,s=!0)}if(!this.wrapVertical){const d=n.y+n.height,m=o.y+o.height;let g,_,w;n.height>o.height?g=this.visibilityRatio*o.height:g=this.visibilityRatio*n.height,_=o.y-d+g,w=m-n.y-g,g>o.height?(n.y+=(_+w)/2,c=!0):w<0?(n.y+=w,c=!0):_>0&&(n.y+=_,c=!0)}const u=s||c,h=u?this.viewerElementToViewportRectangle(n):i.clone();return h.xConstrained=s,h.yConstrained=c,h.constraintApplied=u,h},_raiseConstraintsEvent:function(i){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:i})},applyConstraints:function(i){const n=this.getZoom(),o=this._applyZoomConstraints(n);n!==o&&this.zoomTo(o,this.zoomPoint,i);const s=this.getConstrainedBounds(!1);return s.constraintApplied&&(this.fitBounds(s,i),this._raiseConstraintsEvent(i)),this},ensureVisible:function(i){return this.applyConstraints(i)},_fitBounds:function(i,n){n=n||{};const o=n.immediately||!1,s=n.constraints||!1,c=this.getAspectRatio(),u=i.getCenter(),h=new t.Rect(i.x,i.y,i.width,i.height,i.degrees+this.getRotation()).getBoundingBox();h.getAspectRatio()>=c?h.height=h.width/c:h.width=h.height*c,h.x=u.x-h.width/2,h.y=u.y-h.height/2;let d=1/h.width;if(o)return this.panTo(u,!0),this.zoomTo(d,null,!0),s&&this.applyConstraints(!0),this;const m=this.getCenter(!0),g=this.getZoom(!0);this.panTo(m,!0),this.zoomTo(g,null,!0);const _=this.getBounds(),w=this.getZoom();if(w===0||Math.abs(d/w-1)<1e-8)return this.zoomTo(d,null,!0),this.panTo(u,o),s&&this.applyConstraints(!1),this;if(s){this.panTo(u,!1),d=this._applyZoomConstraints(d),this.zoomTo(d,null,!1);const v=this.getConstrainedBounds();this.panTo(m,!0),this.zoomTo(g,null,!0),this.fitBounds(v)}else{const x=h.rotate(-this.getRotation()).getTopLeft().times(d).minus(_.getTopLeft().times(w)).divide(d-w);this.zoomTo(d,x,o)}return this},fitBounds:function(i,n){return this._fitBounds(i,{immediately:n,constraints:!1})},fitBoundsWithConstraints:function(i,n){return this._fitBounds(i,{immediately:n,constraints:!0})},fitVertically:function(i){const n=new t.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,i)},fitHorizontally:function(i){const n=new t.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,i)},getConstrainedBounds:function(i){const n=this.getBounds(i);return this._applyBoundaryConstraints(n)},panBy:function(i,n){const o=new t.Point;return n?(o.x=this.centerSpringX.current.value,o.y=this.centerSpringY.current.value):(o.x=this.centerSpringX.target.value,o.y=this.centerSpringY.target.value),this.panTo(o.plus(i),n)},panTo:function(i,n){return n?(this.centerSpringX.resetTo(i.x),this.centerSpringY.resetTo(i.y)):(this.centerSpringX.springTo(i.x),this.centerSpringY.springTo(i.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:i,immediately:n}),this},zoomBy:function(i,n,o){return this.zoomTo(this.zoomSpring.target.value*i,n,o)},zoomTo:function(i,n,o){const s=this;return this.zoomPoint=n instanceof t.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,o?this._adjustCenterSpringsForZoomPoint(function(){s.zoomSpring.resetTo(i)}):this.zoomSpring.springTo(i),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:i,refPoint:n,immediately:o}),this},setRotation:function(i,n){return this.rotateTo(i,null,n)},getRotation:function(i){return i?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(i,n,o){return this.rotateTo(i,n,o)},rotateTo:function(i,n,o){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===i&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=n instanceof t.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,o)if(this.rotationPivot){if(!(i-this._oldDegrees))return this.rotationPivot=null,this;this._rotateAboutPivot(i)}else this.degreesSpring.resetTo(i);else{const s=t.positiveModulo(this.degreesSpring.current.value,360);let c=t.positiveModulo(i,360);const u=c-s;u>180?c-=360:u<-180&&(c+=360);const h=s-c;this.degreesSpring.resetTo(i+h),this.degreesSpring.springTo(i)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:i,immediately:!!o,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(i,n,o){return this.rotateTo(this.degreesSpring.target.value+i,n,o)},resize:function(i,n){const o=this.getBoundsNoRotate(),s=o;let c;this._sizeChanged=!this.containerSize.equals(i),this.containerSize.x=i.x,this.containerSize.y=i.y,this._updateContainerInnerSize(),n&&(c=i.x/this.containerSize.x,s.width=o.width*c,s.height=s.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:i,maintain:n});const u=this.fitBounds(s,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:i,maintain:n}),u},_updateContainerInnerSize:function(){this._containerInnerSize=new t.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){const i=this;this._adjustCenterSpringsForZoomPoint(function(){i.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();const n=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees||this._sizeChanged;return this._sizeChanged=!1,this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,n||!this.zoomSpring.isAtTargetValue()||!this.centerSpringX.isAtTargetValue()||!this.centerSpringY.isAtTargetValue()||!this.degreesSpring.isAtTargetValue()},_rotateAboutPivot:function(i){const n=i===!0,o=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(o.x),this.centerSpringY.shiftBy(o.y),n?this.degreesSpring.update():this.degreesSpring.resetTo(i);const s=this.degreesSpring.current.value-this._oldDegrees,c=o.rotate(s*-1).times(-1);this.centerSpringX.shiftBy(c.x),this.centerSpringY.shiftBy(c.y)},_adjustCenterSpringsForZoomPoint:function(i){if(this.zoomPoint){const n=this.pixelFromPoint(this.zoomPoint,!0);i();const s=this.pixelFromPoint(this.zoomPoint,!0).minus(n),c=this.deltaPointsFromPixels(s,!0);this.centerSpringX.shiftBy(c.x),this.centerSpringY.shiftBy(c.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else i()},deltaPixelsFromPointsNoRotate:function(i,n){return i.times(this._containerInnerSize.x*this.getZoom(n))},deltaPixelsFromPoints:function(i,n){return this.deltaPixelsFromPointsNoRotate(i.rotate(this.getRotation(n)),n)},deltaPointsFromPixelsNoRotate:function(i,n){return i.divide(this._containerInnerSize.x*this.getZoom(n))},deltaPointsFromPixels:function(i,n){return this.deltaPointsFromPixelsNoRotate(i,n).rotate(-this.getRotation(n))},pixelFromPointNoRotate:function(i,n){return this._pixelFromPointNoRotate(i,this.getBoundsNoRotate(n))},pixelFromPoint:function(i,n){return this._pixelFromPoint(i,this.getBoundsNoRotate(n))},_pixelFromPointNoRotate:function(i,n){return i.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new t.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(i,n){return this._pixelFromPointNoRotate(i.rotate(this.getRotation(!0),this.getCenter(!0)),n)},pointFromPixelNoRotate:function(i,n){const o=this.getBoundsNoRotate(n);return i.minus(new t.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/o.width).plus(o.getTopLeft())},pointFromPixel:function(i,n){return this.pointFromPixelNoRotate(i,n).rotate(-this.getRotation(n),this.getCenter(n))},_viewportToImageDelta:function(i,n){const o=this._contentBoundsNoRotate.width;return new t.Point(i*this._contentSizeNoRotate.x/o,n*this._contentSizeNoRotate.x/o)},viewportToImageCoordinates:function(i,n){if(i instanceof t.Point)return this.viewportToImageCoordinates(i.x,i.y);if(this.viewer){const o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(o===1)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(i,n,!0)}return this._viewportToImageDelta(i-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(i,n){const o=this._contentBoundsNoRotate.width;return new t.Point(i/this._contentSizeNoRotate.x*o,n/this._contentSizeNoRotate.x*o)},imageToViewportCoordinates:function(i,n){if(i instanceof t.Point)return this.imageToViewportCoordinates(i.x,i.y);if(this.viewer){const s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(s===1)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(i,n,!0)}const o=this._imageToViewportDelta(i,n);return o.x+=this._contentBoundsNoRotate.x,o.y+=this._contentBoundsNoRotate.y,o},imageToViewportRectangle:function(i,n,o,s){let c=i;if(c instanceof t.Rect||(c=new t.Rect(i,n,o,s)),this.viewer){const d=this.viewer.world.getItemCount();if(d>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(d===1)return this.viewer.world.getItemAt(0).imageToViewportRectangle(i,n,o,s,!0)}const u=this.imageToViewportCoordinates(c.x,c.y),h=this._imageToViewportDelta(c.width,c.height);return new t.Rect(u.x,u.y,h.x,h.y,c.degrees)},viewportToImageRectangle:function(i,n,o,s){let c=i;if(c instanceof t.Rect||(c=new t.Rect(i,n,o,s)),this.viewer){const d=this.viewer.world.getItemCount();if(d>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(d===1)return this.viewer.world.getItemAt(0).viewportToImageRectangle(i,n,o,s,!0)}const u=this.viewportToImageCoordinates(c.x,c.y),h=this._viewportToImageDelta(c.width,c.height);return new t.Rect(u.x,u.y,h.x,h.y,c.degrees)},viewerElementToImageCoordinates:function(i){const n=this.pointFromPixel(i,!0);return this.viewportToImageCoordinates(n)},imageToViewerElementCoordinates:function(i){const n=this.imageToViewportCoordinates(i);return this.pixelFromPoint(n,!0)},windowToImageCoordinates:function(i){t.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");const n=i.minus(t.getElementPosition(this.viewer.container));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(i){return t.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(i).plus(t.getElementPosition(this.viewer.container))},viewerElementToViewportCoordinates:function(i){return this.pointFromPixel(i,!0)},viewportToViewerElementCoordinates:function(i){return this.pixelFromPoint(i,!0)},viewerElementToViewportRectangle:function(i){return t.Rect.fromSummits(this.pointFromPixel(i.getTopLeft(),!0),this.pointFromPixel(i.getTopRight(),!0),this.pointFromPixel(i.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(i){return t.Rect.fromSummits(this.pixelFromPoint(i.getTopLeft(),!0),this.pixelFromPoint(i.getTopRight(),!0),this.pixelFromPoint(i.getBottomLeft(),!0))},windowToViewportCoordinates:function(i){t.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");const n=i.minus(t.getElementPosition(this.viewer.container));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(i){return t.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(i).plus(t.getElementPosition(this.viewer.container))},viewportToImageZoom:function(i){if(this.viewer){const u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(u===1)return this.viewer.world.getItemAt(0).viewportToImageZoom(i)}const n=this._contentSizeNoRotate.x,o=this._containerInnerSize.x,s=this._contentBoundsNoRotate.width,c=o/n*s;return i*c},imageToViewportZoom:function(i){if(this.viewer){const u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");else if(u===1)return this.viewer.world.getItemAt(0).imageToViewportZoom(i)}const n=this._contentSizeNoRotate.x,o=this._containerInnerSize.x,s=this._contentBoundsNoRotate.width,c=n/o/s;return i*c},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(i){return this.flipped===i?this:(this.flipped=i,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:i}),this)},getMaxZoomPixelRatio:function(){return this.maxZoomPixelRatio},setMaxZoomPixelRatio:function(i,n=!0,o=!1){t.console.assert(!isNaN(i),"[Viewport.setMaxZoomPixelRatio] ratio must be a number"),!isNaN(i)&&(this.maxZoomPixelRatio=i,n&&this.getZoom()>this.getMaxZoom()&&this.applyConstraints(o))}}})(e),(function(t){t.TiledImage=function(i){this._initialized=!1,t.console.assert(i.tileCache,"[TiledImage] options.tileCache is required"),t.console.assert(i.drawer,"[TiledImage] options.drawer is required"),t.console.assert(i.viewer,"[TiledImage] options.viewer is required"),t.console.assert(i.imageLoader,"[TiledImage] options.imageLoader is required"),t.console.assert(i.source,"[TiledImage] options.source is required"),t.console.assert(!i.clip||i.clip instanceof t.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),t.EventSource.call(this),this._optimalWorldIndex=void 0,this._tileCache=i.tileCache,delete i.tileCache,this._drawer=i.drawer,delete i.drawer,this._imageLoader=i.imageLoader,delete i.imageLoader,i.clip instanceof t.Rect&&(this._clip=i.clip.clone()),delete i.clip;const n=i.x||0;delete i.x;const o=i.y||0;delete i.y,this.normHeight=i.source.dimensions.y/i.source.dimensions.x,this.contentAspectX=i.source.dimensions.x/i.source.dimensions.y;let s=1;i.width?(s=i.width,delete i.width,i.height&&(t.console.error("specifying both width and height to a tiledImage is not supported"),delete i.height)):i.height&&(s=i.height/this.normHeight,delete i.height);const c=i.fitBounds;delete i.fitBounds;const u=i.fitBoundsPlacement||e.Placement.CENTER;delete i.fitBoundsPlacement;const h=i.degrees||0;delete i.degrees;const d=i.ajaxHeaders;delete i.ajaxHeaders,this.crossOriginPolicy=i.crossOriginPolicy,delete i.crossOriginPolicy,t.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastResetTime:0,_needsDraw:!0,_needsUpdate:!0,_hasOpaqueTile:!1,_tilesLoading:0,_zombieCache:!1,_tilesToDraw:[],_lastDrawn:[],_arrayCacheMap:[],_isBlending:!1,_wasBlending:!1,_issues:{},springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,loadDestinationTilesOnAnimation:t.DEFAULT_SETTINGS.loadDestinationTilesOnAnimation,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:t.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:t.DEFAULT_SETTINGS.iOSDevice,debugMode:t.DEFAULT_SETTINGS.debugMode,ajaxWithCredentials:t.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:t.DEFAULT_SETTINGS.placeholderFillStyle,opacity:t.DEFAULT_SETTINGS.opacity,preload:t.DEFAULT_SETTINGS.preload,compositeOperation:t.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:t.DEFAULT_SETTINGS.subPixelRoundingForTransparency,maxTilesPerFrame:t.DEFAULT_SETTINGS.maxTilesPerFrame,originalDataType:void 0,_currentMaxTilesPerFrame:(i.maxTilesPerFrame||t.DEFAULT_SETTINGS.maxTilesPerFrame)*10},i),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new t.Spring({initial:n,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new t.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new t.Spring({initial:s,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new t.Spring({initial:h,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),c&&this.fitBounds(c,u,!0),this._ownAjaxHeaders={},this.setAjaxHeaders(d,!1),this._initialized=!0},t.extend(t.TiledImage.prototype,t.EventSource.prototype,{needsDraw:function(){return this._needsDraw},redraw:function(){this._needsDraw=!0},getFullyLoaded:function(){return this._fullyLoaded},whenFullyLoaded:function(i){this.getFullyLoaded()?setTimeout(i,1):this.addOnceHandler("fully-loaded-change",function(){i()})},_setFullyLoaded:function(i){i!==this._fullyLoaded&&(this._fullyLoaded=i,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},requestInvalidate:function(i=!0,n=!1,o=t.now()){const s=n?this._lastDrawn.map(c=>c.tile):this._tileCache.getLoadedTilesFor(this);return this.viewer.world.requestTileInvalidateEvent(s,o,i)},reset:function(){this._tileCache.clearTilesFor(this),this._currentMaxTilesPerFrame=this.maxTilesPerFrame*10,this.lastResetTime=t.now(),this._needsDraw=!0,this._fullyLoaded=!1},update:function(i){const n=this._xSpring.update(),o=this._ySpring.update(),s=this._scaleSpring.update(),c=this._degreesSpring.update(),u=n||o||s||c||this._needsUpdate;if(u||i||!this._fullyLoaded){const h=this._updateLevelsForViewport();this._setFullyLoaded(h)}return this._needsUpdate=!1,u?(this._updateForScale(),this._raiseBoundsChange(),this._needsDraw=!0,!0):!1},setDrawn:function(){return this._needsDraw=this._isBlending||this._wasBlending||this.opacity>0&&this._lastDrawn.length<1,this._needsDraw},get crossOriginPolicy(){return this._crossOriginPolicy},set crossOriginPolicy(i){typeof i=="string"?this._crossOriginPolicy=i.toLowerCase():this._crossOriginPolicy=t.DEFAULT_SETTINGS.crossOriginPolicy},setIssue(i,n=void 0,o=void 0){const s=o?o.message||o:"";this._issues[i]=(n||`TiledImage is ${i}}`)+s,t.console.warn(this._issues[i],o)},getIssue(i){return this._issues[i]},hasIssue(i){return!!this.getIssue(i)},destroy:function(){this.reset(),this.source.destroy(this.viewer)},getBounds:function(i){return this.getBoundsNoRotate(i).rotate(this.getRotation(i),this._getRotationPoint(i))},getBoundsNoRotate:function(i){return i?new t.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new t.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return t.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(i){let n=this.getBoundsNoRotate(i);if(this._clip){const s=(i?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,c=this._clip.times(s);n=new t.Rect(n.x+c.x,n.y+c.y,c.width,c.height)}return n.rotate(this.getRotation(i),this._getRotationPoint(i))},getTileBounds:function(i,n,o){const s=this.source.getNumTiles(i),c=(s.x+n%s.x)%s.x,u=(s.y+o%s.y)%s.y,h=this.source.getTileBounds(i,c,u);return this.getFlip()&&(h.x=Math.max(0,1-h.x-h.width)),h.x+=(n-c)/s.x,h.y+=this._worldHeightCurrent/this._worldWidthCurrent*((o-u)/s.y),h},getContentSize:function(){return new t.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){const i=this.imageToWindowCoordinates(new t.Point(0,0)),n=this.imageToWindowCoordinates(this.getContentSize());return new t.Point(n.x-i.x,n.y-i.y)},get lastDrawn(){return this._lastDrawn},getDrawer:function(){return this.viewer.drawer},_viewportToImageDelta:function(i,n,o){const s=o?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(i*(this.source.dimensions.x/s),n*(this.source.dimensions.y*this.contentAspectX/s))},viewportToImageCoordinates:function(i,n,o){let s;return i instanceof t.Point?(o=n,s=i):s=new t.Point(i,n),s=s.rotate(-this.getRotation(o),this._getRotationPoint(o)),o?this._viewportToImageDelta(s.x-this._xSpring.current.value,s.y-this._ySpring.current.value):this._viewportToImageDelta(s.x-this._xSpring.target.value,s.y-this._ySpring.target.value)},_imageToViewportDelta:function(i,n,o){const s=o?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(i/this.source.dimensions.x*s,n/this.source.dimensions.y/this.contentAspectX*s)},imageToViewportCoordinates:function(i,n,o){i instanceof t.Point&&(o=n,n=i.y,i=i.x);const s=this._imageToViewportDelta(i,n,o);return o?(s.x+=this._xSpring.current.value,s.y+=this._ySpring.current.value):(s.x+=this._xSpring.target.value,s.y+=this._ySpring.target.value),s.rotate(this.getRotation(o),this._getRotationPoint(o))},imageToViewportRectangle:function(i,n,o,s,c){let u=i;u instanceof t.Rect?c=n:u=new t.Rect(i,n,o,s);const h=this.imageToViewportCoordinates(u.getTopLeft(),c),d=this._imageToViewportDelta(u.width,u.height,c);return new t.Rect(h.x,h.y,d.x,d.y,u.degrees+this.getRotation(c))},viewportToImageRectangle:function(i,n,o,s,c){let u=i;i instanceof t.Rect?c=n:u=new t.Rect(i,n,o,s);const h=this.viewportToImageCoordinates(u.getTopLeft(),c),d=this._viewportToImageDelta(u.width,u.height,c);return new t.Rect(h.x,h.y,d.x,d.y,u.degrees-this.getRotation(c))},viewerElementToImageCoordinates:function(i){const n=this.viewport.pointFromPixel(i,!0);return this.viewportToImageCoordinates(n)},imageToViewerElementCoordinates:function(i){const n=this.imageToViewportCoordinates(i);return this.viewport.pixelFromPoint(n,!0)},windowToImageCoordinates:function(i){const n=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(i){return this.imageToViewerElementCoordinates(i).plus(e.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(i){const n=this._scaleSpring.current.value;return i=i.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new t.Rect((i.x-this._xSpring.current.value)/n,(i.y-this._ySpring.current.value)/n,i.width/n,i.height/n,i.degrees)},viewportToImageZoom:function(i){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*i},imageToViewportZoom:function(i){const n=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return i/n},setPosition:function(i,n){const o=this._xSpring.target.value===i.x&&this._ySpring.target.value===i.y;if(n){if(o&&this._xSpring.current.value===i.x&&this._ySpring.current.value===i.y)return;this._xSpring.resetTo(i.x),this._ySpring.resetTo(i.y),this._needsDraw=!0,this._needsUpdate=!0}else{if(o)return;this._xSpring.springTo(i.x),this._ySpring.springTo(i.y),this._needsDraw=!0,this._needsUpdate=!0}o||this._raiseBoundsChange()},setWidth:function(i,n){this._setScale(i,n)},setHeight:function(i,n){this._setScale(i/this.normHeight,n)},setCroppingPolygons:function(i){const n=function(s){return s instanceof t.Point||typeof s.x=="number"&&typeof s.y=="number"},o=function(s){return s.map(function(c){try{if(n(c))return{x:c.x,y:c.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!t.isArray(i))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=i.map(function(s){return o(s)}),this._needsDraw=!0}catch(s){t.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),t.console.error(s),this.resetCroppingPolygons()}},resetCroppingPolygons:function(){this._croppingPolygons=null,this._needsDraw=!0},fitBounds:function(i,n,o){n=n||t.Placement.CENTER;const s=t.Placement.properties[n];let c=this.contentAspectX,u=0,h=0,d=1,m=1;if(this._clip&&(c=this._clip.getAspectRatio(),d=this._clip.width/this.source.dimensions.x,m=this._clip.height/this.source.dimensions.y,i.getAspectRatio()>c?(u=this._clip.x/this._clip.height*i.height,h=this._clip.y/this._clip.height*i.height):(u=this._clip.x/this._clip.width*i.width,h=this._clip.y/this._clip.width*i.width)),i.getAspectRatio()>c){const g=i.height/m;let _=0;s.isHorizontallyCentered?_=(i.width-i.height*c)/2:s.isRight&&(_=i.width-i.height*c),this.setPosition(new t.Point(i.x-u+_,i.y-h),o),this.setHeight(g,o)}else{const g=i.width/d;let _=0;s.isVerticallyCentered?_=(i.height-i.width/c)/2:s.isBottom&&(_=i.height-i.width/c),this.setPosition(new t.Point(i.x-u,i.y-h+_),o),this.setWidth(g,o)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(i){t.console.assert(!i||i instanceof t.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),i instanceof t.Rect?this._clip=i.clone():this._clip=null,this._needsUpdate=!0,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return this.flipped},setFlip:function(i){this.flipped=i},get flipped(){return this._flipped},set flipped(i){const n=this._flipped!==!!i;this._flipped=!!i,n&&this._initialized&&(this.update(!0),this._needsDraw=!0,this._raiseBoundsChange())},get wrapHorizontal(){return this._wrapHorizontal},set wrapHorizontal(i){const n=this._wrapHorizontal!==!!i;this._wrapHorizontal=!!i,this._initialized&&n&&(this.update(!0),this._needsDraw=!0)},get wrapVertical(){return this._wrapVertical},set wrapVertical(i){const n=this._wrapVertical!==!!i;this._wrapVertical=!!i,this._initialized&&n&&(this.update(!0),this._needsDraw=!0)},get debugMode(){return this._debugMode},set debugMode(i){this._debugMode=!!i,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(i){this.opacity=i},get opacity(){return this._opacity},set opacity(i){i!==this.opacity&&(this._opacity=i,this._needsDraw=!0,this._needsUpdate=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(i){this._preload=!!i,this._needsDraw=!0},getRotation:function(i){return i?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(i,n){this._degreesSpring.target.value===i&&this._degreesSpring.isAtTargetValue()||(n?this._degreesSpring.resetTo(i):this._degreesSpring.springTo(i),this._needsDraw=!0,this._needsUpdate=!0,this._raiseBoundsChange())},getDrawArea:function(){if(this._opacity===0&&!this._preload)return!1;let i=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){const n=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));i=i.intersection(n)}return i},getLoadArea:function(){let i=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!1));if(!this.wrapHorizontal&&!this.wrapVertical){const n=this._viewportToTiledImageRectangle(this.getClippedBounds(!1));i=i.intersection(n)}return i},getTilesToDraw:function(){const i=this._lastDrawn;let n=0;for(const o of this._tilesToDraw)if(Array.isArray(o))for(const s of o)i[n++]=s;else o&&(i[n++]=o);i.length=n,this._updateTilesInViewport(i),n=0;for(const o of this._tilesToDraw)if(Array.isArray(o))for(const s of o)s.tile.loaded&&(s.tile.beingDrawn=!0,i[n++]=s);else o&&o.tile.loaded&&(o.tile.beingDrawn=!0,i[n++]=o);return i.length=n,i},_getRotationPoint:function(i){return this.getBoundsNoRotate(i).getCenter()},get compositeOperation(){return this._compositeOperation},set compositeOperation(i){i!==this._compositeOperation&&(this._compositeOperation=i,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this._compositeOperation}))},getCompositeOperation:function(){return this._compositeOperation},setCompositeOperation:function(i){this.compositeOperation=i},setAjaxHeaders:function(i,n){if(i===null&&(i={}),!t.isPlainObject(i)){t.console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=i,this._updateAjaxHeaders(n)},_updateAjaxHeaders:function(i){if(i===void 0&&(i=!0),t.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=t.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,i){let n,o,s,c;for(const u in this.tilesMatrix){n=this.source.getNumTiles(u);const h=this.tilesMatrix[u];for(const d in h){o=(n.x+d%n.x)%n.x;for(const m in h[d])if(s=(n.y+m%n.y)%n.y,c=h[d][m],c.loadWithAjax=this.loadTilesWithAjax,c.loadWithAjax){const g=this.source.getTileAjaxHeaders(u,o,s);c.ajaxHeaders=t.extend({},this.ajaxHeaders,g)}else c.ajaxHeaders=null}}for(let u=0;u<this._imageLoader.jobQueue.length;u++){const h=this._imageLoader.jobQueue[u];h.loadWithAjax=h.tile.loadWithAjax,h.ajaxHeaders=h.tile.loadWithAjax?h.tile.ajaxHeaders:null}}},allowZombieCache:function(i){this._zombieCache=i},_setScale:function(i,n){const o=this._scaleSpring.target.value===i;if(n){if(o&&this._scaleSpring.current.value===i)return;this._scaleSpring.resetTo(i),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}else{if(o)return;this._scaleSpring.springTo(i),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}o||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){let i=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2)));const n=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value;let o=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(n/this.minPixelRatio)/Math.log(2))));return o=Math.max(o,this.source.minLevel||0),i=Math.min(i,o),{lowestLevel:i,highestLevel:o}},_updateLevelsForViewport:function(){const i=this._getLevelsInterval(),n=i.lowestLevel,o=i.highestLevel,s=this.getDrawArea();let c=s,u=this._getCachedArray("bestLoadTileCandidates",0);this.loadDestinationTilesOnAnimation&&(c=this.getLoadArea());const h=t.now();for(const g of this._lastDrawn)g.tile.beingDrawn=!1;if(this._tilesToDraw.length=0,this._tilesLoading=0,this.loadingCoverage={},!s)return this._needsDraw=!1,this._fullyLoaded;const d=this._getCachedArray("levelList",o-n+1);for(let g=0,_=o;_>=n;_--,g++)d[g]=_;for(let g=o+1;g<=this.source.maxLevel;g++){const _=this.tilesMatrix[g]&&this.tilesMatrix[g][0]&&this.tilesMatrix[g][0][0];if(_&&_.isBottomMost&&_.isRightMost&&_.loaded){d.push(g);break}}let m=!1;for(let g=0;g<d.length;g++){const _=d[g],w=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(_),!0).x*this._scaleSpring.current.value;if(g===d.length-1||w>=this.minPixelRatio)m=!0;else if(!m)continue;const v=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(_),!1).x*this._scaleSpring.current.value,x=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,b=this.immediateRender?1:x,E=Math.min(1,(w-.5)/.5),M=b/Math.abs(b-v),D=this._updateLevel(_,E,M,s,c,h,u);if(this.viewer.world.ensureTilesUpToDate(D.tilesToDraw),u=D.bestLoadTileCandidates,this._tilesToDraw[_]=D.tilesToDraw,this._providesCoverage(this.coverage,_))break}if(u&&u.length>0){for(const g of u)g&&this._loadTile(g,h);return this._needsDraw=!0,!1}else return this._tilesLoading===0},_updateTilesInViewport:function(i){const n=t.now(),o=this;this._tilesLoading=0,this._wasBlending=this._isBlending,this._isBlending=!1,this.loadingCoverage={};const s=i.length?i[0].level:0;if(!this.getDrawArea())return;let u=0;for(const h of i){const d=h.tile;if(d&&d.loaded){const m=o._blendTile(d,d.x,d.y,h.level,h.levelOpacity,n,s);o._isBlending=o._isBlending||m,o._needsDraw=o._needsDraw||m||o._wasBlending}this._providesCoverage(this.coverage,h.level)&&(u=Math.max(u,h.level))}if(u>0)for(const h in this._tilesToDraw)h<u&&(this._tilesToDraw[h]=void 0)},_blendTile:function(i,n,o,s,c,u,h){let d=1e3*this.blendTime,m,g;return i.blendStart||(i.blendStart=u),m=u-i.blendStart,g=d?Math.min(1,m/d):1,s===h&&(g=1,m=d),this.alwaysBlend&&(g*=c),i.opacity=g,g===1&&(this._setCoverage(this.coverage,s,n,o,!0),this._hasOpaqueTile=!0),m<d},_updateLevel:function(i,n,o,s,c,u,h){const d=s.getBoundingBox().getTopLeft(),m=s.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:!0,level:i,opacity:n,visibility:o,drawArea:s,topleft:d,bottomright:m,currenttime:u,best:h});const g=this.source.getNumTiles(i),_=this.viewport.pixelFromPoint(this.viewport.getCenter());this._resetCoverage(this.coverage,i),c&&this._resetCoverage(this.loadingCoverage,i);let w=null,v=0;return this._visitTiles(i,s,(x,b,E)=>{const M=this._getTile(x,b,i,u,g);if(w||(w=this._getCachedArray(i,E)),this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:M}),this._setCoverage(this.coverage,i,x,b,!1),M.exists&&(M.loaded&&(M.opacity===1&&this._setCoverage(this.coverage,i,x,b,!0),w[v++]={tile:M,level:i,levelOpacity:n,currentTime:u},this._setCoverage(this.loadingCoverage,i,x,b,!0)),this._positionTile(M,this.source.tileOverlap,this.viewport,_,o)),c&&!M.loaded){let D=M.loading||this._isCovered(this.loadingCoverage,i,x,b);if(this._setCoverage(this.loadingCoverage,i,x,b,D),!M.exists)return;!M.loading&&this._tryFindTileCacheRecord(M)&&(D=!0),M.loading?this._tilesLoading++:D||(h=this._compareTiles(h,M,this._currentMaxTilesPerFrame))}}),this._currentMaxTilesPerFrame>this.maxTilesPerFrame&&(this._currentMaxTilesPerFrame=Math.max(Math.ceil(this._currentMaxTilesPerFrame/2),this.maxTilesPerFrame)),w&&(w.length=v),{bestLoadTileCandidates:h,tilesToDraw:w||[]}},_visitTiles:function(i,n,o){const s=n.getBoundingBox(),c=this._getCornerTiles(i,s.getTopLeft(),s.getBottomRight()),u=c.topLeft,h=c.bottomRight,d=this.source.getNumTiles(i);this.getFlip()&&(h.x+=1,this.wrapHorizontal||(h.x=Math.min(h.x,d.x-1)));const m=Math.max(0,(h.x-u.x)*(h.y-u.y));for(let g=u.x;g<=h.x;g++)for(let _=u.y;_<=h.y;_++){let w;if(this.getFlip()){const v=(d.x+g%d.x)%d.x;w=g+d.x-v-v-1}else w=g;n.intersection(this.getTileBounds(i,w,_))!==null&&o(w,_,m)}},_positionTile:function(i,n,o,s,c){const u=i.bounds.getTopLeft();u.x*=this._scaleSpring.current.value,u.y*=this._scaleSpring.current.value,u.x+=this._xSpring.current.value,u.y+=this._ySpring.current.value;const h=i.bounds.getSize();h.x*=this._scaleSpring.current.value,h.y*=this._scaleSpring.current.value,i.positionedBounds.x=u.x,i.positionedBounds.y=u.y,i.positionedBounds.width=h.x,i.positionedBounds.height=h.y;const d=o.pixelFromPointNoRotate(u,!0),m=o.pixelFromPointNoRotate(u,!1);let g=o.deltaPixelsFromPointsNoRotate(h,!0);const _=o.deltaPixelsFromPointsNoRotate(h,!1),w=m.plus(_.divide(2)),v=s.squaredDistanceTo(w);this.getDrawer().minimumOverlapRequired(this)&&(n||(g=g.plus(new t.Point(1,1))),i.isRightMost&&this.wrapHorizontal&&(g.x+=.75),i.isBottomMost&&this.wrapVertical&&(g.y+=.75)),i.position=d,i.size=g,i.squaredDistance=v,i.visibility=c},_getCornerTiles:function(i,n,o){let s,c;this.wrapHorizontal?(s=t.positiveModulo(n.x,1),c=t.positiveModulo(o.x,1)):(s=Math.max(0,n.x),c=Math.min(1,o.x));let u,h;const d=1/this.source.aspectRatio;this.wrapVertical?(u=t.positiveModulo(n.y,d),h=t.positiveModulo(o.y,d)):(u=Math.max(0,n.y),h=Math.min(d,o.y));const m=this.source.getTileAtPoint(i,new t.Point(s,u)),g=this.source.getTileAtPoint(i,new t.Point(c,h)),_=this.source.getNumTiles(i);return this.wrapHorizontal&&(m.x+=_.x*Math.floor(n.x),g.x+=_.x*Math.floor(o.x)),this.wrapVertical&&(m.y+=_.y*Math.floor(n.y/d),g.y+=_.y*Math.floor(o.y/d)),{topLeft:m,bottomRight:g}},_tryFindTileCacheRecord:function(i){const n=this._tileCache.getCacheRecord(i.originalCacheKey);return n?(i.loading=!0,this._setTileLoaded(i,n.data,null,null,n.type),!0):!1},_getTile:function(i,n,o,s,c){let u,h,d,m,g,_,w,v,x,b=this.tilesMatrix,E=this.source,M=b[o];return M||(b[o]=M={}),M[i]||(M[i]={}),!M[i][n]||!M[i][n].flipped!=!this.flipped?(u=(c.x+i%c.x)%c.x,h=(c.y+n%c.y)%c.y,d=this.getTileBounds(o,i,n),m=E.getTileBounds(o,u,h,!0),g=E.tileExists(o,u,h),_=E.getTileUrl(o,u,h),w=E.getTilePostData(o,u,h),this.loadTilesWithAjax?(v=E.getTileAjaxHeaders(o,u,h),t.isPlainObject(this.ajaxHeaders)&&(v=t.extend({},this.ajaxHeaders,v))):v=null,x=new t.Tile(o,i,n,d,g,_,void 0,this.loadTilesWithAjax,v,m,w,E.getTileHashKey(o,u,h,_,v,w)),this.getFlip()?u===0&&(x.isRightMost=!0):u===c.x-1&&(x.isRightMost=!0),h===c.y-1&&(x.isBottomMost=!0),x.flipped=this.flipped,M[i][n]=x):x=M[i][n],x.lastTouchTime=s,x},_loadTile:function(i,n){const o=this;i.loading=!0,i.tiledImage=this,this._imageLoader.addJob({src:i.getUrl(),tile:i,source:this.source,postData:i.postData,loadWithAjax:i.loadWithAjax,ajaxHeaders:i.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(s,c,u,h,d){o._onTileLoad(i,n,s,c,u,h,d)},abort:function(){i.loading=!1}})||this.viewer.raiseEvent("job-queue-full",{tile:i,tiledImage:this,time:n})},_onTileLoad:function(i,n,o,s,c,u,h){if(o==null){t.console.error("Tile %s failed to load: %s - error: %s",i,i.getUrl(),s),this.viewer.raiseEvent("tile-load-failed",{tile:i,tiledImage:this,time:n,message:s,tileRequest:c,tries:h,maxReached:this.viewer.tileRetryMax===0?!0:h>=this.viewer.tileRetryMax}),i.loading=!1,i.exists=!1;return}else i.exists=!0;if(n<this.lastResetTime){t.console.warn("Ignoring tile %s loaded before reset: %s",i,i.getUrl()),i.loading=!1;return}if(this.originalDataType){const d=t.converter.getConversionPath(u,this.originalDataType);if(d){const m=t.converter.getConversionPathFinalType(d);t.converter.convert(i,o,u,m).then(g=>{this._setTileLoaded(i,g,null,c,m)}).catch(g=>{t.console.warn("Failed to satisfy original type [%s] %s from %s: %s",m,i,u,g),this._setTileLoaded(i,o,null,c,u)})}else t.console.warn("Ignoring default base tile data type %s: no conversion possible from %s",this.originalDataType,u),this._setTileLoaded(i,o,null,c,u)}else this._setTileLoaded(i,o,null,c,u)},_setTileLoaded:function(i,n,o,s,c){i.tiledImage=this,t.console.assert(c!==void 0,"TileSource::downloadTileStart must return a dataType.");let u=!1;i.addCache(i.cacheKey,()=>(u=!0,n),c,!1,!1);let h=null,d=0,m=!1;const g=this;function _(){d--,!(d>0)&&(m=!0,i.hasTransparency=i.hasTransparency||g.source.hasTransparency(void 0,i.getUrl(),i.ajaxHeaders,i.postData),i.loading=!1,i.loaded=!0,g.redraw(),h(i))}function w(){return m&&t.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),d++,_}function v(){const x=w();g.viewer.raiseEventAwaiting("tile-loaded",{tile:i,tiledImage:g,tileRequest:s,promise:new t.Promise(b=>{h=b}),get image(){return t.console.error("[tile-loaded] event 'image' has been deprecated. Use 'tile-invalidated' event to modify data instead."),n},get data(){return t.console.error("[tile-loaded] event 'data' has been deprecated. Use 'tile-invalidated' event to modify data instead."),n},getCompletionCallback:function(){return t.console.error("[tile-loaded] getCompletionCallback is deprecated: it introduces race conditions: use async event handlers instead, execution order is deducted by addHandler(...) priority argument."),w()}}).catch(()=>{t.console.error("[tile-loaded] event finished with failure: there might be a problem with a plugin you are using.")}).then(x)}if(u)this.viewer.world.requestTileInvalidateEvent([i],void 0,!1,!0,!0).then(v).catch(v);else{const x=i.getCache(i.originalCacheKey),b=E=>{if(this.viewer.isDestroyed())return t.Promise.resolve();const M=this.getDrawer();return E.isUsableForDrawer(M)?t.Promise.resolve():E.prepareForRendering(M)};for(const E of x._tiles){if(E.cacheKey!==i.cacheKey){const M=E.getCache();b(M).then(()=>i.setCache(E.cacheKey,M,!0,!1)).then(v);return}if(E.processing){E.processingPromise.then(M=>{const D=M.getCache();b(D).then(()=>(i.setCache(M.cacheKey,D,!0,!1),D.loaded?null:D.await())).then(v)});return}}b(x).then(v)}},_compareTiles:function(i,n,o){if(!i)return[n];let s=!1;for(let c=0;c<i.length;c++){const u=i[c];if(this._sortTilesComparator(u,n)>0){i.splice(c,0,n),s=!0;break}}return s||i.push(n),i.length>o&&i.pop(),i},_sortTilesComparator:function(i,n){return i===null?1:n===null?-1:i.visibility===n.visibility?i.squaredDistance-n.squaredDistance:n.visibility-i.visibility},_getCachedArray:function(i,n=void 0){let o=this._arrayCacheMap[i];return o?n!==void 0&&(o.length=n):n!==void 0?o=this._arrayCacheMap[i]=new Array(n):o=this._arrayCacheMap[i]=[],o},_providesCoverage:function(i,n,o,s){let c,u,h,d;if(!i[n])return!1;if(o===void 0||s===void 0){c=i[n];for(h in c)if(Object.prototype.hasOwnProperty.call(c,h)){u=c[h];for(d in u)if(Object.prototype.hasOwnProperty.call(u,d)&&!u[d])return!1}return!0}return i[n][o]===void 0||i[n][o][s]===void 0||i[n][o][s]===!0},_isCovered:function(i,n,o,s){return o===void 0||s===void 0?this._providesCoverage(i,n+1):this._providesCoverage(i,n+1,2*o,2*s)&&this._providesCoverage(i,n+1,2*o,2*s+1)&&this._providesCoverage(i,n+1,2*o+1,2*s)&&this._providesCoverage(i,n+1,2*o+1,2*s+1)},_setCoverage:function(i,n,o,s,c){if(!i[n]){t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n);return}i[n][o]||(i[n][o]={}),i[n][o][s]=c},_resetCoverage:function(i,n){i[n]={}}})})(e),(function(t){const i=t,n=Symbol("DRAWER_INTERNAL_CACHE");i.CacheRecord=class{constructor(){this.revive()}get data(){return this._data}get type(){return this._type}await(){return this._promise?this._promise:t.Promise.resolve(this._data)}getImage(){return t.console.error("[CacheRecord.getImage] options.image is deprecated. Moreover, it might not work correctly as the cache system performs conversion asynchronously in case the type needs to be converted."),this.transformTo("image"),this.data}getRenderedContext(){return t.console.error("[CacheRecord.getRenderedContext] options.getRenderedContext  is deprecated. Moreover, it might not work correctly as the cache system performs conversion asynchronously in case the type needs to be converted."),this.transformTo("context2d"),this.data}setDataAs(s,c){if(t.console.assert(s!=null,"[CacheRecord.setDataAs] needs valid data to set!"),this._conversionJobQueue){let u=null;const h=new t.Promise((d,m)=>{u=d});return this._conversionJobQueue.push(()=>u(this._overwriteData(s,c))),h}return this._overwriteData(s,c)}getDataAs(s=void 0,c=!0){return this.loaded?s===this._type?c?t.converter.copy(this._tRef,this._data,s||this._type):this._promise:this._transformDataIfNeeded(this._tRef,this._data,s||this._type,c)||this._promise:this._promise.then(u=>this._transformDataIfNeeded(this._tRef,u,s||this._type,c)||u)}_transformDataIfNeeded(s,c,u,h){if(this._destroyed)return t.Promise.resolve();let d;return u!==this._type?d=t.converter.convert(s,c,this._type,u):h&&(d=t.converter.copy(s,c,u)),d?d.then(m=>{if(this._destroyed){t.converter.destroy(m,u);return}return m}).catch(m=>{this._handleConversionError(m)}):!1}getDataForRendering(s,c){if(this._destroyed){t.console.error(`Attempt to draw tile with destroyed main cache ${this}!`),c._unload();return}if(!this.loaded){if(this._promise)return;t.console.error(`Attempt to draw cache ${this} when not loaded!`);return}if(this._destroyed){t.console.error(`Attempt to draw tile with destroyed main cache ${this}!`),c._unload();return}if(!s.getSupportedDataFormats().includes(this.type)){t.console.error(`Attempt to draw tile cache ${this} with unsupported type '${this.type}' for the target drawer!`),this.prepareForRendering(s);return}if(s.options.usePrivateCache){if(!s.options.preloadCache)return this.prepareInternalCacheSync(s);const h=this._getInternalCacheRef(s);if(!h||!h.loaded){t.console.error(`Attempt to draw tile cache ${this} with internal cache non-ready state!`);return}return h}return this}isUsableForDrawer(s){return!(!s.getSupportedDataFormats().includes(this.type)||s.options.usePrivateCache&&!this._getInternalCacheRef(s))}prepareForRendering(s){const c=s.getRequiredDataFormats();if(!this.loaded)return this.await().then(d=>this.prepareForRendering(s));let u;c.includes(this.type)?u=this.await():u=this.transformTo(c);const h=d=>d.catch(m=>(this._handleConversionError(m),null));return s.options.usePrivateCache&&s.options.preloadCache?h(u.then(d=>this.prepareInternalCacheAsync(s))):h(u)}prepareInternalCacheAsync(s){let c=this._getInternalCacheRef(s);if(this._checkInternalCacheUpToDate(c,s))return c.await();c&&!c.loaded&&c.await().then(()=>c.destroy()),t.console.assert(this._tRef,"Data Create called from invalidation routine needs tile reference!");const u=s.internalCacheCreate(this,this._tRef);t.console.assert(u!==void 0,"[DrawerBase.internalCacheCreate] must return a value if usePrivateCache is enabled!");const h=s.getId();return c=this[n][h]=new t.InternalCacheRecord(u,h,d=>s.internalCacheFree(d)),c.await()}prepareInternalCacheSync(s){let c=this._getInternalCacheRef(s);if(this._checkInternalCacheUpToDate(c,s))return c;c&&c.destroy(),t.console.assert(this._tRef,"Data Create called from drawing loop needs tile reference!");const u=s.internalCacheCreate(this,this._tRef);t.console.assert(u!==void 0,"[DrawerBase.internalCacheCreate] must return a value if usePrivateCache is enabled!");const h=s.getId();return c=this[n][h]=new t.InternalCacheRecord(u,h,d=>s.internalCacheFree(d)),c}_getInternalCacheRef(s){if(!s.options.usePrivateCache){t.console.error("[CacheRecord.prepareInternalCacheSync] must not be called when usePrivateCache is false.");return}let u=this[n];return u||(u=this[n]={}),u[s.getId()]}_checkInternalCacheUpToDate(s,c){return s&&s.tstamp>=c._dataNeedsRefresh}transformTo(s=this._type){if(!this.loaded){this._conversionJobQueue=this._conversionJobQueue||[];let c=null;const u=new t.Promise((h,d)=>{c=h});return this._conversionJobQueue.push(()=>{this._destroyed||(typeof s=="string"&&s!==this._type||Array.isArray(s)&&!s.includes(this._type)?(this._convert(this._type,s),this._promise.then(h=>c(h))):this._promise.then(h=>(this._checkAwaitsConvert(),c(h))))}),u}return(typeof s=="string"&&s!==this._type||Array.isArray(s)&&!s.includes(this._type))&&this._convert(this._type,s),this._promise}destroyInternalCache(s=void 0){const c=this[n];if(c)if(s){const u=c[s];u&&(u.destroy(),delete c[s])}else{for(const u in c)c[u].destroy();delete this[n]}}withTileReference(s){return this._tRef=s,this}toString(){const s=this._tRef||this._tiles.length&&this._tiles[0];return s?`Cache ${this.type} [used e.g. by ${s.toString()}]`:"Orphan cache!"}revive(){t.console.assert(!this.loaded&&!this._type,"[CacheRecord::revive] must not be called when loaded!"),this._tiles=[],this._data=null,this._type=null,this.loaded=!1,this._promise=null,this._destroyed=!1,this._ownerTileCache=null,this.cacheKey=null}destroy(){if(!this._destroyed){if(delete this._conversionJobQueue,this._destroyed=!0,this.loaded)this._destroySelfUnsafe(this._data,this._type);else if(this._promise){const s=this._type;this._promise.then(c=>this._destroySelfUnsafe(c,s)).catch(t.console.error)}}}_destroySelfUnsafe(s,c){t.converter.destroy(s,c),this.destroyInternalCache(),this._destroyed&&(this.loaded=!1,this._tiles=null,this._data=null,this._type=null,this._tRef=null,this._promise=null)}addTile(s,c,u){if(!this._destroyed)if(t.console.assert(s,"[CacheRecord.addTile] tile is required"),c!=null&&this._tiles.length<1)typeof c=="function"&&(c=c()),this.type&&this._promise?c instanceof t.Promise?this._promise=c.then(h=>{this._overwriteData(h,u)}):this._overwriteData(c,u):(c instanceof t.Promise?(this._promise=c.then(h=>{if(this._destroyed){try{t.converter.destroy(h,this._type)}catch{}return}return this.loaded=!0,this._data=h,h}).catch(h=>{this._handleConversionError(h)}),this._data=null):(this._promise=t.Promise.resolve(c),this._data=c,this.loaded=!0),this._type=u),this._tiles.push(s);else{const h=this._tiles.includes(s);!h&&this.type&&this._promise?this._tiles.push(s):h||t.console.warn("Tile %s caching attempt without data argument on uninitialized cache entry!",s)}}removeTile(s){if(this._destroyed)return!1;for(let c=0;c<this._tiles.length;c++)if(this._tiles[c]===s)return this._tiles.splice(c,1),this._tRef===s&&(this._tRef=this._tiles[c-1]),!0;return t.console.warn("[CacheRecord.removeTile] trying to remove unknown tile",s),!1}getTileCount(){return this._tiles?this._tiles.length:0}_checkAwaitsConvert(){!this._conversionJobQueue||this._destroyed||setTimeout(()=>{if(!this._conversionJobQueue||this._destroyed)return;const s=this._conversionJobQueue[0];this._conversionJobQueue.splice(0,1),this._conversionJobQueue.length===0&&delete this._conversionJobQueue,s()})}_triggerNeedsDraw(){this._tiles.length>0&&this._tiles[0].tiledImage.viewer.forceRedraw()}_overwriteData(s,c){if(this._destroyed)return t.converter.destroy(s,c),t.Promise.resolve();if(this.loaded){if(this._data===s&&this._type===c)return this._promise;t.converter.destroy(this._data,this._type),this._type=c,this._data=s,this._promise=t.Promise.resolve(s);const u=this[n];if(u)for(const h in u)u[h].setDataAs(s,c);return this._triggerNeedsDraw(),this._promise}return this._promise.then(()=>{if(this._data===s&&this._type===c)return this._data;t.converter.destroy(this._data,this._type),this._type=c,this._data=s,this._promise=t.Promise.resolve(s);const u=this[n];if(u)for(const h in u)u[h].setDataAs(s,c);return this._triggerNeedsDraw(),this._data})}_convert(s,c){const u=t.converter,h=u.getConversionPath(s,c);if(!h){t.console.error(`[CacheRecord._convert] Conversion ${s} ---> ${c} cannot be done!`);return}const d=this._data,m=h.length,g=this,_=(w,v)=>{if(v>=m)return g._data=w,g.loaded=!0,g._checkAwaitsConvert(),t.Promise.resolve(w);const x=h[v];let b;try{b=x.transform(g._tRef,w)}catch{return u.destroy(w,x.origin.value),t.Promise.reject(`[CacheRecord._convert] sync failure (while converting using ${x.target.value}, ${x.origin.value})`)}return b===void 0?(g.loaded=!1,u.destroy(w,x.origin.value),t.Promise.reject(`[CacheRecord._convert] data mid result undefined value (while converting using ${x.target.value}, ${x.origin.value})`)):(u.destroy(w,x.origin.value),(t.type(b)==="promise"?b:t.Promise.resolve(b)).then(M=>_(M,v+1)))};this.loaded=!1,this._data=void 0,this._type=h[m-1].target.value,this._promise=_(d,0).catch(w=>{this._handleConversionError(w)})}_handleConversionError(s){if(t.console.error("[CacheRecord] Conversion/preparation error:",s),this._destroyed=!0,this.loaded=!1,this._data=null,!this.cacheKey||!this._ownerTileCache){this._promise=t.Promise.resolve(void 0),this._tiles=[],this._tRef=null;return}this._ownerTileCache._handleBrokenCacheRecord(this)}},i.InternalCacheRecord=class{constructor(s,c,u){this.tstamp=t.now(),this._ondestroy=u,this._type=c,s instanceof t.Promise?(this._promise=s,s.then(h=>{this.loaded=!0,this._data=h})):(this._promise=null,this.loaded=!0,this._data=s)}get data(){return this._data}get type(){return this._type}await(){return this._promise?this._promise:t.Promise.resolve(this._data)}withTileReference(s){return this._temporaryTileRef=s,this}destroy(){this.loaded&&(this._ondestroy&&this._ondestroy(this._data),this._data=null,this.loaded=!1)}},i.TileCache=class{constructor(s){s=s||{},this._maxCacheItemCount=s.maxImageCacheCount||t.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._zombiesLoaded=[],this._zombiesLoadedCount=0,this._cachesLoaded=[],this._cachesLoadedCount=0}numTilesLoaded(){return this._tilesLoaded.length}numCachesLoaded(){return this._zombiesLoadedCount+this._cachesLoadedCount}cacheTile(s){t.console.assert(s,"[TileCache.cacheTile] options is required");const c=s.tile;t.console.assert(c,"[TileCache.cacheTile] options.tile is required"),t.console.assert(c.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),s.image instanceof Image&&(t.console.warn("[TileCache.cacheTile] options.image is deprecated!"),s.data=s.image,s.dataType="image");const u=s.cacheKey||c.cacheKey;let h=this._cachesLoaded[u];if(!h)if(s.data===void 0&&(t.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),s.data=s.image),h=this._zombiesLoaded[u],h)h._destroyed?h.revive():(typeof s.data=="function"&&s.data(),delete s.data),delete this._zombiesLoaded[u],this._zombiesLoadedCount--,this._cachesLoaded[u]=h,this._cachesLoadedCount++;else{const d=s.data!==void 0&&s.data!==null&&s.data!==!1;t.console.assert(d,"[TileCache.cacheTile] options.data is required to create an CacheRecord"),h=this._cachesLoaded[u]=new t.CacheRecord,this._cachesLoadedCount++}return s.dataType||(t.console.error("[TileCache.cacheTile] options.dataType is newly required. For easier use of the cache system, use the tile instance API."),typeof s.data=="function"&&t.console.error("[TileCache.cacheTile] options.dataType is mandatory  when data item is a callback!"),s.dataType=t.converter.guessType(s.data)),h._ownerTileCache=this,h.cacheKey=u,h.addTile(c,s.data,s.dataType),this._freeOldRecordRoutine(c,s.cutoff||0),h}renameCache(s){const c=s.newCacheKey,u=s.oldCacheKey;let h=this._cachesLoaded[u];if(h){if(this._cachesLoaded[c])return t.console.error("Cannot rename cache %s to %s: the target cache is occupied!",u,c),null;this._cachesLoaded[c]=h,delete this._cachesLoaded[u]}else{if(h=this._zombiesLoaded[u],t.console.assert(h,"[TileCache.renameCache] oldCacheKey must reference existing cache!"),this._zombiesLoaded[c])return t.console.error("Cannot rename zombie cache %s to %s: the target cache is occupied!",u,c),null;this._zombiesLoaded[c]=h,delete this._zombiesLoaded[u]}h._ownerTileCache=this,h.cacheKey=c;for(const d of h._tiles)d.reflectCacheRenamed(u,c);return h}cloneCache(s){const c=s.tile,u=s.copyTargetKey,h=this._cachesLoaded[u]||this._zombiesLoaded[u];t.console.assert(h,"[TileCache.cloneCache] attempt to clone non-existent cache %s!",u),t.console.assert(!this._cachesLoaded[s.newCacheKey],"[TileCache.cloneCache] attempt to copy clone to existing cache %s!",s.newCacheKey);const d=s.desiredType||void 0;return h.getDataAs(d,!0).then(m=>{const g=this._cachesLoaded[s.newCacheKey]=new t.CacheRecord;return g.addTile(c,m,h.type),this._cachesLoadedCount++,this._freeOldRecordRoutine(c,s.cutoff||0),g})}injectCache(s){const c=s.targetKey,u=s.tile;if(!s.tileAllowNotLoaded&&!u.loaded&&!u.loading){t.console.warn("Attempt to inject cache on tile in invalid state: this is probably a bug!");return}const h=this._cachesLoaded[c];if(h){const m=[...h._tiles];for(const g of m)this.unloadCacheForTile(g,c,!0,!1)}this._cachesLoaded[c]&&t.console.error("The inject routine should've freed cache!");const d=s.cache;this._cachesLoaded[c]=d,d._ownerTileCache=this,d.cacheKey=c;for(const m of u.getCache(u.originalCacheKey)._tiles)m.setCache(c,d,s.setAsMainCache,!1)}replaceCache(s){const c=s.victimKey,u=s.consumerKey,h=this._cachesLoaded[c],d=s.tile;if(!h||!s.tileAllowNotLoaded&&!d.loaded&&!d.loading){t.console.warn("Attempt to consume cache on tile in invalid state: this is probably a bug!");return}const m=this._cachesLoaded[u];if(m){const _=[...m._tiles];for(const w of _)this.unloadCacheForTile(w,u,!0,!1)}this._cachesLoaded[u]&&t.console.error("The consume routine should've freed cache!");const g=this.renameCache({oldCacheKey:c,newCacheKey:u});if(g)for(const _ of d.getCache(d.originalCacheKey)._tiles)_.setCache(u,g,s.setAsMainCache,!1)}restoreTilesThatShareOriginalCache(s,c,u){for(const h of c._tiles)h.cacheKey!==h.originalCacheKey&&(this.unloadCacheForTile(h,h.cacheKey,u,!0),delete h._caches[h.cacheKey],h.cacheKey=h.originalCacheKey)}_freeOldRecordRoutine(s,c){let u=this._tilesLoaded.length,h=-1;if(this._cachesLoadedCount+this._zombiesLoadedCount>this._maxCacheItemCount)if(this._zombiesLoadedCount>0)for(const d in this._zombiesLoaded){this._zombiesLoaded[d].destroy(),delete this._zombiesLoaded[d],this._zombiesLoadedCount--;break}else{let d=null,m,g,_,w,v;for(let x=this._tilesLoaded.length-1;x>=0;x--)if(m=this._tilesLoaded[x],!(m.level<=c||m.beingDrawn||m.loading||m.processing)){if(!d){d=m,h=x;continue}w=m.lastTouchTime,g=d.lastTouchTime,v=m.level,_=d.level,(w<g||w===g&&v>_)&&(d=m,h=x)}d&&h>=0&&(this._unloadTile(d,!0),u=h)}s.getCacheSize()===0?this._tilesLoaded[u]=s:h>=0&&this._tilesLoaded.splice(u,1)}_handleBrokenCacheRecord(s){if(!s)return;const c=s.cacheKey;c&&this._cachesLoaded[c]===s&&(delete this._cachesLoaded[c],this._cachesLoadedCount--),c&&this._zombiesLoaded[c]===s&&(delete this._zombiesLoaded[c],this._zombiesLoadedCount--);const u=s._tiles?[...s._tiles]:[];for(const h of u){const d=h.getCache&&h.getCache()===s,m=c&&h.originalCacheKey===c;d||m?(h.exists=!1,h.unload(!0)):(h.removeCache&&c&&h.removeCache(c),s.removeTile(h))}s._promise=t.Promise.resolve(void 0),s._tiles=[],s._tRef=null,s._ownerTileCache=null}clearTilesFor(s){t.console.assert(s,"[TileCache.clearTilesFor] tiledImage is required");let c,u=this._cachesLoadedCount+this._zombiesLoadedCount>this._maxCacheItemCount;if(s._zombieCache&&u&&this._zombiesLoadedCount>0){for(const h in this._zombiesLoaded)this._zombiesLoaded[h].destroy(),delete this._zombiesLoaded[h];this._zombiesLoadedCount=0,u=this._cachesLoadedCount>this._maxCacheItemCount}for(let h=this._tilesLoaded.length-1;h>=0;h--)c=this._tilesLoaded[h],c.tiledImage===s&&(c.loaded?c.tiledImage===s&&this._unloadTile(c,!s._zombieCache||u,h):this._tilesLoaded.splice(h,1))}clear(s=!0){for(const c in this._zombiesLoaded)this._zombiesLoaded[c].destroy();for(const c in this._tilesLoaded)this._unloadTile(c,!0);this._tilesLoaded=[],this._zombiesLoaded=[],this._zombiesLoadedCount=0,this._cachesLoaded=[],this._cachesLoadedCount=0}clearDrawerInternalCache(s){const c=s.getId();for(const u of this._zombiesLoaded)u&&u.destroyInternalCache(c);for(const u of this._cachesLoaded)u&&u.destroyInternalCache(c)}getLoadedTilesFor(s){return s?this._tilesLoaded.filter(c=>c.tiledImage===s):[...this._tilesLoaded]}getCacheRecord(s){return t.console.assert(s,"[TileCache.getCacheRecord] cacheKey is required"),this._cachesLoaded[s]||this._zombiesLoaded[s]}safeUnloadCache(s){if(s&&!s._destroyed&&s.getTileCount()<1){for(const c in this._zombiesLoaded){const u=this._zombiesLoaded[c];if(u===s){delete this._zombiesLoaded[c],u.destroy();return}}t.console.error("Attempt to delete an orphan cache that is not in zombie list: this could be a bug!",s),s.destroy()}}unloadCacheForTile(s,c,u,h){const d=this._cachesLoaded[c];return d?d.removeTile(s)?(d.getTileCount()||(u?d.destroy():(this._zombiesLoaded[c]=d,this._zombiesLoadedCount++),delete this._cachesLoaded[c],this._cachesLoadedCount--),!0):(t.console.error("[TileCache.unloadCacheForTile] System tried to delete tile from cache it does not belong to! This could mean a bug in the cache system."),!1):(h||t.console.warn("[TileCache.unloadCacheForTile] Attempting to delete missing cache!"),!1)}unloadTile(s,c=!1){if(!s.loaded){t.console.warn("Attempt to unload already unloaded tile.");return}const u=this._tilesLoaded.findIndex(h=>h===s);this._unloadTile(s,c,u)}_unloadTile(s,c,u=void 0){t.console.assert(s,"[TileCache._unloadTile] tile is required");for(const d in s._caches)this.unloadCacheForTile(s,d,c,!1);if(u!==void 0&&this._tilesLoaded.splice(u,1),!s.loaded)return;const h=s.tiledImage;s._unload(),h.viewer.raiseEvent("tile-unloaded",{tile:s,tiledImage:h,destroyed:c})}}})(e),(function(t){t.World=function(i){const n=this;t.console.assert(i.viewer,"[World] options.viewer is required"),t.EventSource.call(this),this.viewer=i.viewer,this._items=[],this._needsDraw=!1,this.__invalidatedAt=1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(o){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},t.extend(t.World.prototype,t.EventSource.prototype,{addItem:function(i,n){if(t.console.assert(i,"[World.addItem] item is required"),t.console.assert(i instanceof t.TiledImage,"[World.addItem] only TiledImages supported at this time"),n=n||{},n.index!==void 0){const o=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(o,0,i)}else this._items.push(i);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,i.addHandler("bounds-change",this._delegatedFigureSizes),i.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:i})},getItemAt:function(i){return t.console.assert(i!==void 0,"[World.getItemAt] index is required"),this._items[i]},getIndexOfItem:function(i){return t.console.assert(i,"[World.getIndexOfItem] item is required"),t.indexOf(this._items,i)},getItemCount:function(){return this._items.length},setItemIndex:function(i,n){t.console.assert(i,"[World.setItemIndex] item is required"),t.console.assert(n!==void 0,"[World.setItemIndex] index is required");const o=this.getIndexOfItem(i);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");this._items.splice(o,1),this._items.splice(n,0,i),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:i,previousIndex:o,newIndex:n})},removeItem:function(i){t.console.assert(i,"[World.removeItem] item is required");const n=t.indexOf(this._items,i);n!==-1&&(i.removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(i))},removeAll:function(){this.viewer._cancelPendingImages();let i;for(let o=0;o<this._items.length;o++)i=this._items[o],i.removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy();const n=this._items;this._items=[],this._figureSizes(),this._needsDraw=!0;for(let o=0;o<n.length;o++)i=n[o],this._raiseRemoveItem(i)},requestInvalidate:function(i=!0,n=t.now()){this.__invalidatedAt=n;let o=1/0;for(const m of this._items){m._lastDrawn.length&&(o=Math.min(o,m._lastDrawn[0].tile.lastTouchTime));for(const g of m._tilesToDraw)Array.isArray(g)?g.length&&(o=Math.min(o,g[0].tile.lastTouchTime)):g&&(o=Math.min(o,g.tile.lastTouchTime))}const s=this.viewer.tileCache.getLoadedTilesFor(null),c=new Array(s.length);let u=0,h=0;const d=this.viewer.tileCache;for(let m=0;m<s.length;m++){const g=s[m],_=g.lastTouchTime>=o,w=g.level<=(g.tiledImage.source.getClosestLevel()||0);_||w?c[u++]=g:(d._unloadTile(g,!1,m-h),h++)}return c.length=u,this.requestTileInvalidateEvent(c,n,i)},requestTileInvalidateEvent:function(i,n,o=!0,s=!1,c=!1){if(!this.viewer.isOpen())return t.Promise.resolve();n===void 0&&(n=this.__invalidatedAt);const u=[],h=i.map(d=>{if(!d||!s&&!d.loaded&&!d.processing)return Promise.resolve();const m=d.tiledImage,g=m.getDrawer(),_=g._parentViewer||this.viewer,w=d.getCache(d.originalCacheKey),v=d.getCache(d.originalCacheKey);if(v.__invStamp&&v.__invStamp>=n)return Promise.resolve();let x=!1;w.__finishProcessing&&w.__finishProcessing(!0);let b;w.__resolve||(b=new t.Promise(O=>{w.__resolve=O})),w.__finishProcessing=O=>{x=x||O,d.processing=!1,w.__finishProcessing=null,O||(w.__resolve(d),w.__resolve=null)};for(const O of w._tiles)O.processing=n,b&&(O.processingPromise=b);w.__invStamp=n,w.__wasRestored=o;let E=null;const M=O=>{if(E)return E.getDataAs(O,!1);const L=o?d.originalCacheKey:d.cacheKey,N=d.getCache(L);return N?(O=O||N.type,E=new t.CacheRecord().withTileReference(d),N.getDataAs(O,!0).then(j=>j==null?t.Promise.reject(new Error("[World.getData] Working cache source data unavailable")):(E.addTile(d,j,O),E.data))):(t.console.error("[Tile::getData] There is no cache available for tile with key %s",L),t.Promise.reject())},D=(O,L)=>E?E.setDataAs(O,L):(E=new t.CacheRecord().withTileReference(d),E.addTile(d,O,L),t.Promise.resolve()),P=()=>{if(E){const O=d.buildDistinctMainCacheKey();m._tileCache.injectCache({tile:d,cache:E,targetKey:O,setAsMainCache:!0,tileAllowNotLoaded:d.loading})}else o&&m._tileCache.restoreTilesThatShareOriginalCache(d,d.getCache(d.originalCacheKey),!0)},z=()=>x||typeof w.__invStamp=="number"&&w.__invStamp<this.__invalidatedAt||!d.loaded&&!d.loading;return _.raiseEventAwaiting("tile-invalidated",{tile:d,tiledImage:m,outdated:z,getData:M,setData:D,resetData:()=>{E&&(E.destroy(),E=null)},stopPropagation:()=>z()}).catch(O=>{if(t.console.error("Update routine error:",O),E){try{E.destroy()}catch{}E=null}return x=!0,w.__finishProcessing&&w.__finishProcessing(!0),null}).then(O=>{if(this.viewer.isDestroyed())return w.__finishProcessing&&w.__finishProcessing(!0),null;if(x)return null;if(w.__finishProcessing){if(!x&&(d.loaded||d.loading)){if(w.__invStamp<this.__invalidatedAt)u.push(d);else if(w.__invStamp===n){if(E)return E.prepareForRendering(g).then(L=>{x?(E.destroy(),E=null):(!z()&&L?P():(E.destroy(),E=null),w.__finishProcessing())});if(o){const L=d.getCache(),N=d.getCache(d.originalCacheKey);return L!==N?N.prepareForRendering(g).then(j=>{x||(!z()&&j&&P(),w.__finishProcessing())}):null}}else t.console.error(`Invalidation flow error: tile processing state is invalid. Tile: ${d?d.toString():"null"}, loaded: ${d?d.loaded:"n/a"}, loading: ${d?d.loading:"n/a"}, originalCache.__invStamp: ${w.__invStamp}, this.__invalidatedAt: ${this.__invalidatedAt}, tStamp: ${n}, wasOutdatedRun: ${x}`);return c?d.getCache().prepareForRendering(g).then(()=>{!x&&w.__finishProcessing&&w.__finishProcessing()}):(w.__finishProcessing(),null)}x||w.__finishProcessing(!0)}return c?d.getCache().prepareForRendering(g).then(()=>{!x&&w.__finishProcessing&&w.__finishProcessing()}):(E&&(E.destroy(),E=null),null)}).catch(O=>{t.console.error("Update routine error:",O),E&&(E.destroy(),E=null),w.__finishProcessing()})});return t.Promise.all(h).then(()=>{u.length&&this.requestTileInvalidateEvent(u,void 0,o,!0),!s&&!this.viewer.isDestroyed()&&this.draw()})},ensureTilesUpToDate:function(i){let n,o;for(let s of i){if(s=s.tile||s,!s.loaded||s.processing)continue;const c=s.getCache(s.originalCacheKey);o=c.__wasRestored,c.__invStamp<this.__invalidatedAt&&(n?n.push(s):n=[s])}n&&n.length&&this.requestTileInvalidateEvent(n,t.now(),o,!1)},resetItems:function(){for(let i=0;i<this._items.length;i++)this._items[i].reset()},update:function(i){let n=!1;for(let o=0;o<this._items.length;o++)n=this._items[o].update(i)||n;return n},draw:function(){this.viewer.drawer.draw(this._items),this._needsDraw=!1;for(const i of this._items)this._needsDraw=i.setDrawn()||this._needsDraw},needsDraw:function(){for(let i=0;i<this._items.length;i++)if(this._items[i].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(i){this._autoRefigureSizes=i,i&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(i){i=i||{};const n=i.immediately||!1,o=i.layout||t.DEFAULT_SETTINGS.collectionLayout,s=i.rows||t.DEFAULT_SETTINGS.collectionRows,c=i.columns||t.DEFAULT_SETTINGS.collectionColumns,u=i.tileSize||t.DEFAULT_SETTINGS.collectionTileSize,h=i.tileMargin||t.DEFAULT_SETTINGS.collectionTileMargin,d=u+h;let m;!i.rows&&c?m=c:m=Math.ceil(this._items.length/s);let g=0,_=0,w,v,x,b,E;this.setAutoRefigureSizes(!1);for(let M=0;M<this._items.length;M++)M&&M%m===0&&(o==="horizontal"?(_+=d,g=0):(g+=d,_=0)),w=this._items[M],v=w.getBoundsNoRotate(),v.width>v.height?x=u:x=u*(v.width/v.height),b=x*(v.height/v.width),E=new t.Point(g+(u-x)/2,_+(u-b)/2),w.setPosition(E,n),w.setWidth(x,n),o==="horizontal"?g+=d:_+=d;this.setAutoRefigureSizes(!0)},_figureSizes:function(){const i=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,o=this._contentFactor||0;if(!this._items.length)this._homeBounds=new t.Rect(0,0,1,1),this._contentSize=new t.Point(1,1),this._contentFactor=1;else{let s=this._items[0],c=s.getBounds();this._contentFactor=s.getContentSize().x/c.width;let u=s.getClippedBounds().getBoundingBox(),h=u.x,d=u.y,m=u.x+u.width,g=u.y+u.height;for(let _=1;_<this._items.length;_++)s=this._items[_],c=s.getBounds(),this._contentFactor=Math.max(this._contentFactor,s.getContentSize().x/c.width),u=s.getClippedBounds().getBoundingBox(),h=Math.min(h,u.x),d=Math.min(d,u.y),m=Math.max(m,u.x+u.width),g=Math.max(g,u.y+u.height);this._homeBounds=new t.Rect(h,d,m-h,g-d),this._contentSize=new t.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==o||!this._homeBounds.equals(i)||!this._contentSize.equals(n))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(i){this.raiseEvent("remove-item",{item:i})}})})(e)})(fd)),fd.exports}var tz=ez();const iz=Q_(tz),nz=({items:l,activeIndex:e,setActiveIndex:t})=>{const i=kt.useRef(null),n=kt.useRef(null),o=kt.useRef(null),[s,c]=kt.useState(!1),[u,h]=kt.useState(!0),d="osd-viewer-comparison";kt.useEffect(()=>(Mt.registerPlugin(yt),i.current=iz({id:d,showNavigationControl:!1,showNavigator:!0,tileSources:{type:"image",url:l[e].src},gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!0},animationTime:.8,springStiffness:12,navigatorPosition:"BOTTOM_RIGHT",navigatorSizeRatio:.15,stopScrollViaMouseWheel:!0}),n.current&&Mt.fromTo(n.current,{scrollLeft:0},{scrollLeft:120,duration:.8,ease:"power2.inOut",yoyo:!0,repeat:1,scrollTrigger:{trigger:n.current,start:"top 85%",toggleActions:"play none none none",once:!0}}),()=>{i.current&&(i.current.destroy(),i.current=null)}),[]),kt.useEffect(()=>{if(i.current&&l[e]&&i.current.open({type:"image",url:l[e].src}),n.current){const v=n.current,x=v.children[e];if(x){const b=v.offsetWidth,E=x.offsetWidth,M=x.offsetLeft;v.scrollTo({left:M-b/2+E/2,behavior:"smooth"})}}},[e,l]),kt.useEffect(()=>{const v=x=>{x.key==="ArrowRight"?t(b=>(b+1)%l.length):x.key==="ArrowLeft"&&t(b=>b===0?l.length-1:b-1)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[l.length,t]);const m=()=>{if(n.current){const{scrollLeft:v,scrollWidth:x,clientWidth:b}=n.current;c(v>10),h(v<x-b-10)}};kt.useEffect(()=>{const v=setTimeout(m,100);return window.addEventListener("resize",m),()=>{clearTimeout(v),window.removeEventListener("resize",m)}},[l]);const g=()=>i.current.viewport.zoomBy(1.2),_=()=>i.current.viewport.zoomBy(.8),w=()=>i.current.viewport.goHome();return pe.jsxs("div",{ref:o,className:"media-card mb-24 border border-slate-300/80 bg-white/70 p-6 shadow-[0_20px_50px_rgba(15,23,42,0.15)] backdrop-blur-md",children:[pe.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[pe.jsx("h2",{className:"font-major text-xs font-bold uppercase tracking-[0.25em] text-teal-800/80",children:"Weather Logbooks Gallery"}),pe.jsx("div",{className:"h-px flex-grow ml-4 bg-slate-200/60"})]}),pe.jsxs("div",{className:"relative overflow-hidden rounded-lg border border-slate-300/50 bg-slate-900 group shadow-[0_32px_64px_-16px_rgba(0,0,0,0.5)]",children:[pe.jsxs("div",{className:"absolute top-4 right-4 z-20 flex flex-col gap-3 transition-all duration-300",children:[pe.jsxs("button",{onClick:g,title:"Zoom In",className:"group/btn relative h-10 w-10 cursor-pointer transition-all duration-200 hover:scale-111 active:scale-95",children:[pe.jsx("div",{className:"absolute -inset-1 rounded-lg bg-gradient-to-r from-teal-400 to-cyan-500 opacity-0 blur transition duration-200 group-hover/btn:opacity-100"}),pe.jsx("div",{className:"relative flex h-full w-full items-center justify-center rounded-lg border border-slate-200 bg-white/95 text-slate-700 shadow-sm transition-all duration-200 group-hover/btn:bg-teal-600 group-hover/btn:text-white group-hover/btn:border-teal-500",children:pe.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[pe.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),pe.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),pe.jsxs("button",{onClick:_,title:"Zoom Out",className:"group/btn relative h-10 w-10 cursor-pointer transition-all duration-200 hover:scale-111 active:scale-95",children:[pe.jsx("div",{className:"absolute -inset-1 rounded-lg bg-gradient-to-r from-teal-400 to-cyan-500 opacity-0 blur transition duration-200 group-hover/btn:opacity-100"}),pe.jsx("div",{className:"relative flex h-full w-full items-center justify-center rounded-lg border border-slate-200 bg-white/95 text-slate-700 shadow-sm transition-all duration-200 group-hover/btn:bg-teal-600 group-hover/btn:text-white group-hover/btn:border-teal-500",children:pe.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:pe.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})]}),pe.jsxs("button",{onClick:w,title:"Reset View",className:"group/btn relative h-10 w-10 cursor-pointer transition-all duration-200 hover:scale-111 active:scale-95",children:[pe.jsx("div",{className:"absolute -inset-1 rounded-lg bg-gradient-to-r from-teal-400 to-cyan-500 opacity-0 blur transition duration-200 group-hover/btn:opacity-100"}),pe.jsx("div",{className:"relative flex h-full w-full items-center justify-center rounded-lg border border-slate-200 bg-white/95 text-slate-700 shadow-sm transition-all duration-200 group-hover/btn:bg-teal-600 group-hover/btn:text-white group-hover/btn:border-teal-500",children:pe.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),pe.jsx("path",{d:"M3 3v5h5"})]})})]})]}),pe.jsx("div",{id:d,style:{width:"100%",height:"600px"}})]}),pe.jsxs("div",{className:"relative mt-12 px-2",children:[pe.jsx("div",{className:`absolute top-0 left-0 bottom-4 z-10 w-12 bg-gradient-to-r from-white/80 to-transparent transition-opacity duration-300 pointer-events-none ${s?"opacity-100":"opacity-0"}`}),pe.jsx("div",{className:`absolute top-0 right-0 bottom-4 z-10 w-12 bg-gradient-to-l from-white/80 to-transparent transition-opacity duration-300 pointer-events-none ${u?"opacity-100":"opacity-0"}`}),pe.jsx("div",{ref:n,onScroll:m,className:"flex gap-6 overflow-x-auto pb-8 pt-4 custom-scrollbar scroll-smooth",children:l.map((v,x)=>pe.jsxs("button",{onClick:()=>t(x),className:`archive-thumb group relative h-24 w-36 flex-shrink-0 cursor-pointer overflow-hidden rounded-[2px] border border-black/10 p-1 bg-white shadow-sm transition-all duration-300 ${x===e?"ring-4 ring-teal-500/30 scale-110 z-10 shadow-[0_12px_24px_rgba(0,0,0,0.2)] border-teal-500/50":"grayscale-[30%] opacity-80 hover:opacity-100 hover:grayscale-0 hover:shadow-md hover:scale-105"}`,children:[pe.jsx("div",{className:"h-full w-full overflow-hidden rounded-[1px] border-[0.5px] border-black/5",children:pe.jsx("img",{src:v.src,className:"h-full w-full object-cover",alt:""})}),pe.jsx("div",{className:`absolute inset-0 bg-teal-500/5 transition-opacity duration-300 ${x===e?"opacity-100":"opacity-0"}`})]},`osd-thumb-${x}`))})]})]})};function dd(l,e){return l==null||e==null?NaN:l<e?-1:l>e?1:l>=e?0:NaN}function rz(l,e){return l==null||e==null?NaN:e<l?-1:e>l?1:e>=l?0:NaN}function nE(l){let e,t,i;l.length!==2?(e=dd,t=(c,u)=>dd(l(c),u),i=(c,u)=>l(c)-u):(e=l===dd||l===rz?l:sz,t=l,i=l);function n(c,u,h=0,d=c.length){if(h<d){if(e(u,u)!==0)return d;do{const m=h+d>>>1;t(c[m],u)<0?h=m+1:d=m}while(h<d)}return h}function o(c,u,h=0,d=c.length){if(h<d){if(e(u,u)!==0)return d;do{const m=h+d>>>1;t(c[m],u)<=0?h=m+1:d=m}while(h<d)}return h}function s(c,u,h=0,d=c.length){const m=n(c,u,h,d-1);return m>h&&i(c[m-1],u)>-i(c[m],u)?m-1:m}return{left:n,center:s,right:o}}function sz(){return 0}function az(l){return l===null?NaN:+l}const oz=nE(dd),lz=oz.right;nE(az).center;class Db extends Map{constructor(e,t=hz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,n]of e)this.set(i,n)}get(e){return super.get(Pb(this,e))}has(e){return super.has(Pb(this,e))}set(e,t){return super.set(uz(this,e),t)}delete(e){return super.delete(cz(this,e))}}function Pb({_intern:l,_key:e},t){const i=e(t);return l.has(i)?l.get(i):t}function uz({_intern:l,_key:e},t){const i=e(t);return l.has(i)?l.get(i):(l.set(i,t),t)}function cz({_intern:l,_key:e},t){const i=e(t);return l.has(i)&&(t=l.get(i),l.delete(i)),t}function hz(l){return l!==null&&typeof l=="object"?l.valueOf():l}const fz=Math.sqrt(50),dz=Math.sqrt(10),pz=Math.sqrt(2);function Rd(l,e,t){const i=(e-l)/Math.max(0,t),n=Math.floor(Math.log10(i)),o=i/Math.pow(10,n),s=o>=fz?10:o>=dz?5:o>=pz?2:1;let c,u,h;return n<0?(h=Math.pow(10,-n)/s,c=Math.round(l*h),u=Math.round(e*h),c/h<l&&++c,u/h>e&&--u,h=-h):(h=Math.pow(10,n)*s,c=Math.round(l/h),u=Math.round(e/h),c*h<l&&++c,u*h>e&&--u),u<c&&.5<=t&&t<2?Rd(l,e,t*2):[c,u,h]}function mz(l,e,t){if(e=+e,l=+l,t=+t,!(t>0))return[];if(l===e)return[l];const i=e<l,[n,o,s]=i?Rd(e,l,t):Rd(l,e,t);if(!(o>=n))return[];const c=o-n+1,u=new Array(c);if(i)if(s<0)for(let h=0;h<c;++h)u[h]=(o-h)/-s;else for(let h=0;h<c;++h)u[h]=(o-h)*s;else if(s<0)for(let h=0;h<c;++h)u[h]=(n+h)/-s;else for(let h=0;h<c;++h)u[h]=(n+h)*s;return u}function H_(l,e,t){return e=+e,l=+l,t=+t,Rd(l,e,t)[2]}function gz(l,e,t){e=+e,l=+l,t=+t;const i=e<l,n=i?H_(e,l,t):H_(l,e,t);return(i?-1:1)*(n<0?1/-n:n)}function _z(l,e){let t;if(e===void 0)for(const i of l)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let n of l)(n=e(n,++i,l))!=null&&(t<n||t===void 0&&n>=n)&&(t=n)}return t}function vz(l,e,t){l=+l,e=+e,t=(n=arguments.length)<2?(e=l,l=0,1):n<3?1:+t;for(var i=-1,n=Math.max(0,Math.ceil((e-l)/t))|0,o=new Array(n);++i<n;)o[i]=l+i*t;return o}var yz={value:()=>{}};function rE(){for(var l=0,e=arguments.length,t={},i;l<e;++l){if(!(i=arguments[l]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new pd(t)}function pd(l){this._=l}function xz(l,e){return l.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}pd.prototype=rE.prototype={constructor:pd,on:function(l,e){var t=this._,i=xz(l+"",t),n,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((n=(l=i[o]).type)&&(n=wz(t[n],l.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(l=i[o]).type)t[n]=Lb(t[n],l.name,e);else if(e==null)for(n in t)t[n]=Lb(t[n],l.name,null);return this},copy:function(){var l={},e=this._;for(var t in e)l[t]=e[t].slice();return new pd(l)},call:function(l,e){if((n=arguments.length-2)>0)for(var t=new Array(n),i=0,n,o;i<n;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(o=this._[l],i=0,n=o.length;i<n;++i)o[i].value.apply(e,t)},apply:function(l,e,t){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var i=this._[l],n=0,o=i.length;n<o;++n)i[n].value.apply(e,t)}};function wz(l,e){for(var t=0,i=l.length,n;t<i;++t)if((n=l[t]).name===e)return n.value}function Lb(l,e,t){for(var i=0,n=l.length;i<n;++i)if(l[i].name===e){l[i]=yz,l=l.slice(0,i).concat(l.slice(i+1));break}return t!=null&&l.push({name:e,value:t}),l}var k_="http://www.w3.org/1999/xhtml";const Ob={svg:"http://www.w3.org/2000/svg",xhtml:k_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zd(l){var e=l+="",t=e.indexOf(":");return t>=0&&(e=l.slice(0,t))!=="xmlns"&&(l=l.slice(t+1)),Ob.hasOwnProperty(e)?{space:Ob[e],local:l}:l}function Sz(l){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===k_&&e.documentElement.namespaceURI===k_?e.createElement(l):e.createElementNS(t,l)}}function bz(l){return function(){return this.ownerDocument.createElementNS(l.space,l.local)}}function sE(l){var e=Zd(l);return(e.local?bz:Sz)(e)}function Tz(){}function R0(l){return l==null?Tz:function(){return this.querySelector(l)}}function Ez(l){typeof l!="function"&&(l=R0(l));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var o=e[n],s=o.length,c=i[n]=new Array(s),u,h,d=0;d<s;++d)(u=o[d])&&(h=l.call(u,u.__data__,d,o))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h);return new lr(i,this._parents)}function Mz(l){return l==null?[]:Array.isArray(l)?l:Array.from(l)}function Cz(){return[]}function aE(l){return l==null?Cz:function(){return this.querySelectorAll(l)}}function Rz(l){return function(){return Mz(l.apply(this,arguments))}}function Az(l){typeof l=="function"?l=Rz(l):l=aE(l);for(var e=this._groups,t=e.length,i=[],n=[],o=0;o<t;++o)for(var s=e[o],c=s.length,u,h=0;h<c;++h)(u=s[h])&&(i.push(l.call(u,u.__data__,h,s)),n.push(u));return new lr(i,n)}function oE(l){return function(){return this.matches(l)}}function lE(l){return function(e){return e.matches(l)}}var Dz=Array.prototype.find;function Pz(l){return function(){return Dz.call(this.children,l)}}function Lz(){return this.firstElementChild}function Oz(l){return this.select(l==null?Lz:Pz(typeof l=="function"?l:lE(l)))}var zz=Array.prototype.filter;function Nz(){return Array.from(this.children)}function Bz(l){return function(){return zz.call(this.children,l)}}function Fz(l){return this.selectAll(l==null?Nz:Bz(typeof l=="function"?l:lE(l)))}function Iz(l){typeof l!="function"&&(l=oE(l));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var o=e[n],s=o.length,c=i[n]=[],u,h=0;h<s;++h)(u=o[h])&&l.call(u,u.__data__,h,o)&&c.push(u);return new lr(i,this._parents)}function uE(l){return new Array(l.length)}function Uz(){return new lr(this._enter||this._groups.map(uE),this._parents)}function Ad(l,e){this.ownerDocument=l.ownerDocument,this.namespaceURI=l.namespaceURI,this._next=null,this._parent=l,this.__data__=e}Ad.prototype={constructor:Ad,appendChild:function(l){return this._parent.insertBefore(l,this._next)},insertBefore:function(l,e){return this._parent.insertBefore(l,e)},querySelector:function(l){return this._parent.querySelector(l)},querySelectorAll:function(l){return this._parent.querySelectorAll(l)}};function Hz(l){return function(){return l}}function kz(l,e,t,i,n,o){for(var s=0,c,u=e.length,h=o.length;s<h;++s)(c=e[s])?(c.__data__=o[s],i[s]=c):t[s]=new Ad(l,o[s]);for(;s<u;++s)(c=e[s])&&(n[s]=c)}function Gz(l,e,t,i,n,o,s){var c,u,h=new Map,d=e.length,m=o.length,g=new Array(d),_;for(c=0;c<d;++c)(u=e[c])&&(g[c]=_=s.call(u,u.__data__,c,e)+"",h.has(_)?n[c]=u:h.set(_,u));for(c=0;c<m;++c)_=s.call(l,o[c],c,o)+"",(u=h.get(_))?(i[c]=u,u.__data__=o[c],h.delete(_)):t[c]=new Ad(l,o[c]);for(c=0;c<d;++c)(u=e[c])&&h.get(g[c])===u&&(n[c]=u)}function Vz(l){return l.__data__}function Wz(l,e){if(!arguments.length)return Array.from(this,Vz);var t=e?Gz:kz,i=this._parents,n=this._groups;typeof l!="function"&&(l=Hz(l));for(var o=n.length,s=new Array(o),c=new Array(o),u=new Array(o),h=0;h<o;++h){var d=i[h],m=n[h],g=m.length,_=jz(l.call(d,d&&d.__data__,h,i)),w=_.length,v=c[h]=new Array(w),x=s[h]=new Array(w),b=u[h]=new Array(g);t(d,m,v,x,b,_,e);for(var E=0,M=0,D,P;E<w;++E)if(D=v[E]){for(E>=M&&(M=E+1);!(P=x[M])&&++M<w;);D._next=P||null}}return s=new lr(s,i),s._enter=c,s._exit=u,s}function jz(l){return typeof l=="object"&&"length"in l?l:Array.from(l)}function qz(){return new lr(this._exit||this._groups.map(uE),this._parents)}function Xz(l,e,t){var i=this.enter(),n=this,o=this.exit();return typeof l=="function"?(i=l(i),i&&(i=i.selection())):i=i.append(l+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?o.remove():t(o),i&&n?i.merge(n).order():n}function Yz(l){for(var e=l.selection?l.selection():l,t=this._groups,i=e._groups,n=t.length,o=i.length,s=Math.min(n,o),c=new Array(n),u=0;u<s;++u)for(var h=t[u],d=i[u],m=h.length,g=c[u]=new Array(m),_,w=0;w<m;++w)(_=h[w]||d[w])&&(g[w]=_);for(;u<n;++u)c[u]=t[u];return new lr(c,this._parents)}function Zz(){for(var l=this._groups,e=-1,t=l.length;++e<t;)for(var i=l[e],n=i.length-1,o=i[n],s;--n>=0;)(s=i[n])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Kz(l){l||(l=Qz);function e(m,g){return m&&g?l(m.__data__,g.__data__):!m-!g}for(var t=this._groups,i=t.length,n=new Array(i),o=0;o<i;++o){for(var s=t[o],c=s.length,u=n[o]=new Array(c),h,d=0;d<c;++d)(h=s[d])&&(u[d]=h);u.sort(e)}return new lr(n,this._parents).order()}function Qz(l,e){return l<e?-1:l>e?1:l>=e?0:NaN}function Jz(){var l=arguments[0];return arguments[0]=this,l.apply(null,arguments),this}function $z(){return Array.from(this)}function eN(){for(var l=this._groups,e=0,t=l.length;e<t;++e)for(var i=l[e],n=0,o=i.length;n<o;++n){var s=i[n];if(s)return s}return null}function tN(){let l=0;for(const e of this)++l;return l}function iN(){return!this.node()}function nN(l){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],o=0,s=n.length,c;o<s;++o)(c=n[o])&&l.call(c,c.__data__,o,n);return this}function rN(l){return function(){this.removeAttribute(l)}}function sN(l){return function(){this.removeAttributeNS(l.space,l.local)}}function aN(l,e){return function(){this.setAttribute(l,e)}}function oN(l,e){return function(){this.setAttributeNS(l.space,l.local,e)}}function lN(l,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(l):this.setAttribute(l,t)}}function uN(l,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(l.space,l.local):this.setAttributeNS(l.space,l.local,t)}}function cN(l,e){var t=Zd(l);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?sN:rN:typeof e=="function"?t.local?uN:lN:t.local?oN:aN)(t,e))}function cE(l){return l.ownerDocument&&l.ownerDocument.defaultView||l.document&&l||l.defaultView}function hN(l){return function(){this.style.removeProperty(l)}}function fN(l,e,t){return function(){this.style.setProperty(l,e,t)}}function dN(l,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(l):this.style.setProperty(l,i,t)}}function pN(l,e,t){return arguments.length>1?this.each((e==null?hN:typeof e=="function"?dN:fN)(l,e,t??"")):nu(this.node(),l)}function nu(l,e){return l.style.getPropertyValue(e)||cE(l).getComputedStyle(l,null).getPropertyValue(e)}function mN(l){return function(){delete this[l]}}function gN(l,e){return function(){this[l]=e}}function _N(l,e){return function(){var t=e.apply(this,arguments);t==null?delete this[l]:this[l]=t}}function vN(l,e){return arguments.length>1?this.each((e==null?mN:typeof e=="function"?_N:gN)(l,e)):this.node()[l]}function hE(l){return l.trim().split(/^|\s+/)}function A0(l){return l.classList||new fE(l)}function fE(l){this._node=l,this._names=hE(l.getAttribute("class")||"")}fE.prototype={add:function(l){var e=this._names.indexOf(l);e<0&&(this._names.push(l),this._node.setAttribute("class",this._names.join(" ")))},remove:function(l){var e=this._names.indexOf(l);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(l){return this._names.indexOf(l)>=0}};function dE(l,e){for(var t=A0(l),i=-1,n=e.length;++i<n;)t.add(e[i])}function pE(l,e){for(var t=A0(l),i=-1,n=e.length;++i<n;)t.remove(e[i])}function yN(l){return function(){dE(this,l)}}function xN(l){return function(){pE(this,l)}}function wN(l,e){return function(){(e.apply(this,arguments)?dE:pE)(this,l)}}function SN(l,e){var t=hE(l+"");if(arguments.length<2){for(var i=A0(this.node()),n=-1,o=t.length;++n<o;)if(!i.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?wN:e?yN:xN)(t,e))}function bN(){this.textContent=""}function TN(l){return function(){this.textContent=l}}function EN(l){return function(){var e=l.apply(this,arguments);this.textContent=e??""}}function MN(l){return arguments.length?this.each(l==null?bN:(typeof l=="function"?EN:TN)(l)):this.node().textContent}function CN(){this.innerHTML=""}function RN(l){return function(){this.innerHTML=l}}function AN(l){return function(){var e=l.apply(this,arguments);this.innerHTML=e??""}}function DN(l){return arguments.length?this.each(l==null?CN:(typeof l=="function"?AN:RN)(l)):this.node().innerHTML}function PN(){this.nextSibling&&this.parentNode.appendChild(this)}function LN(){return this.each(PN)}function ON(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zN(){return this.each(ON)}function NN(l){var e=typeof l=="function"?l:sE(l);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function BN(){return null}function FN(l,e){var t=typeof l=="function"?l:sE(l),i=e==null?BN:typeof e=="function"?e:R0(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function IN(){var l=this.parentNode;l&&l.removeChild(this)}function UN(){return this.each(IN)}function HN(){var l=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(l,this.nextSibling):l}function kN(){var l=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(l,this.nextSibling):l}function GN(l){return this.select(l?kN:HN)}function VN(l){return arguments.length?this.property("__data__",l):this.node().__data__}function WN(l){return function(e){l.call(this,e,this.__data__)}}function jN(l){return l.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function qN(l){return function(){var e=this.__on;if(e){for(var t=0,i=-1,n=e.length,o;t<n;++t)o=e[t],(!l.type||o.type===l.type)&&o.name===l.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function XN(l,e,t){return function(){var i=this.__on,n,o=WN(e);if(i){for(var s=0,c=i.length;s<c;++s)if((n=i[s]).type===l.type&&n.name===l.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=o,n.options=t),n.value=e;return}}this.addEventListener(l.type,o,t),n={type:l.type,name:l.name,value:e,listener:o,options:t},i?i.push(n):this.__on=[n]}}function YN(l,e,t){var i=jN(l+""),n,o=i.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,h=c.length,d;u<h;++u)for(n=0,d=c[u];n<o;++n)if((s=i[n]).type===d.type&&s.name===d.name)return d.value}return}for(c=e?XN:qN,n=0;n<o;++n)this.each(c(i[n],e,t));return this}function mE(l,e,t){var i=cE(l),n=i.CustomEvent;typeof n=="function"?n=new n(e,t):(n=i.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),l.dispatchEvent(n)}function ZN(l,e){return function(){return mE(this,l,e)}}function KN(l,e){return function(){return mE(this,l,e.apply(this,arguments))}}function QN(l,e){return this.each((typeof e=="function"?KN:ZN)(l,e))}function*JN(){for(var l=this._groups,e=0,t=l.length;e<t;++e)for(var i=l[e],n=0,o=i.length,s;n<o;++n)(s=i[n])&&(yield s)}var gE=[null];function lr(l,e){this._groups=l,this._parents=e}function nh(){return new lr([[document.documentElement]],gE)}function $N(){return this}lr.prototype=nh.prototype={constructor:lr,select:Ez,selectAll:Az,selectChild:Oz,selectChildren:Fz,filter:Iz,data:Wz,enter:Uz,exit:qz,join:Xz,merge:Yz,selection:$N,order:Zz,sort:Kz,call:Jz,nodes:$z,node:eN,size:tN,empty:iN,each:nN,attr:cN,style:pN,property:vN,classed:SN,text:MN,html:DN,raise:LN,lower:zN,append:NN,insert:FN,remove:UN,clone:GN,datum:VN,on:YN,dispatch:QN,[Symbol.iterator]:JN};function _E(l){return typeof l=="string"?new lr([[document.querySelector(l)]],[document.documentElement]):new lr([[l]],gE)}function eB(l){let e;for(;e=l.sourceEvent;)l=e;return l}function tB(l,e){if(l=eB(l),e===void 0&&(e=l.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=l.clientX,i.y=l.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return[l.clientX-n.left-e.clientLeft,l.clientY-n.top-e.clientTop]}}return[l.pageX,l.pageY]}function D0(l,e,t){l.prototype=e.prototype=t,t.constructor=l}function vE(l,e){var t=Object.create(l.prototype);for(var i in e)t[i]=e[i];return t}function rh(){}var Yc=.7,Dd=1/Yc,jl="\\s*([+-]?\\d+)\\s*",Zc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iB=/^#([0-9a-f]{3,8})$/,nB=new RegExp(`^rgb\\(${jl},${jl},${jl}\\)$`),rB=new RegExp(`^rgb\\(${$r},${$r},${$r}\\)$`),sB=new RegExp(`^rgba\\(${jl},${jl},${jl},${Zc}\\)$`),aB=new RegExp(`^rgba\\(${$r},${$r},${$r},${Zc}\\)$`),oB=new RegExp(`^hsl\\(${Zc},${$r},${$r}\\)$`),lB=new RegExp(`^hsla\\(${Zc},${$r},${$r},${Zc}\\)$`),zb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};D0(rh,Ro,{copy(l){return Object.assign(new this.constructor,this,l)},displayable(){return this.rgb().displayable()},hex:Nb,formatHex:Nb,formatHex8:uB,formatHsl:cB,formatRgb:Bb,toString:Bb});function Nb(){return this.rgb().formatHex()}function uB(){return this.rgb().formatHex8()}function cB(){return yE(this).formatHsl()}function Bb(){return this.rgb().formatRgb()}function Ro(l){var e,t;return l=(l+"").trim().toLowerCase(),(e=iB.exec(l))?(t=e[1].length,e=parseInt(e[1],16),t===6?Fb(e):t===3?new Dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Kf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Kf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=nB.exec(l))?new Dn(e[1],e[2],e[3],1):(e=rB.exec(l))?new Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sB.exec(l))?Kf(e[1],e[2],e[3],e[4]):(e=aB.exec(l))?Kf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=oB.exec(l))?Hb(e[1],e[2]/100,e[3]/100,1):(e=lB.exec(l))?Hb(e[1],e[2]/100,e[3]/100,e[4]):zb.hasOwnProperty(l)?Fb(zb[l]):l==="transparent"?new Dn(NaN,NaN,NaN,0):null}function Fb(l){return new Dn(l>>16&255,l>>8&255,l&255,1)}function Kf(l,e,t,i){return i<=0&&(l=e=t=NaN),new Dn(l,e,t,i)}function hB(l){return l instanceof rh||(l=Ro(l)),l?(l=l.rgb(),new Dn(l.r,l.g,l.b,l.opacity)):new Dn}function G_(l,e,t,i){return arguments.length===1?hB(l):new Dn(l,e,t,i??1)}function Dn(l,e,t,i){this.r=+l,this.g=+e,this.b=+t,this.opacity=+i}D0(Dn,G_,vE(rh,{brighter(l){return l=l==null?Dd:Math.pow(Dd,l),new Dn(this.r*l,this.g*l,this.b*l,this.opacity)},darker(l){return l=l==null?Yc:Math.pow(Yc,l),new Dn(this.r*l,this.g*l,this.b*l,this.opacity)},rgb(){return this},clamp(){return new Dn(wo(this.r),wo(this.g),wo(this.b),Pd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ib,formatHex:Ib,formatHex8:fB,formatRgb:Ub,toString:Ub}));function Ib(){return`#${uo(this.r)}${uo(this.g)}${uo(this.b)}`}function fB(){return`#${uo(this.r)}${uo(this.g)}${uo(this.b)}${uo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ub(){const l=Pd(this.opacity);return`${l===1?"rgb(":"rgba("}${wo(this.r)}, ${wo(this.g)}, ${wo(this.b)}${l===1?")":`, ${l})`}`}function Pd(l){return isNaN(l)?1:Math.max(0,Math.min(1,l))}function wo(l){return Math.max(0,Math.min(255,Math.round(l)||0))}function uo(l){return l=wo(l),(l<16?"0":"")+l.toString(16)}function Hb(l,e,t,i){return i<=0?l=e=t=NaN:t<=0||t>=1?l=e=NaN:e<=0&&(l=NaN),new Fr(l,e,t,i)}function yE(l){if(l instanceof Fr)return new Fr(l.h,l.s,l.l,l.opacity);if(l instanceof rh||(l=Ro(l)),!l)return new Fr;if(l instanceof Fr)return l;l=l.rgb();var e=l.r/255,t=l.g/255,i=l.b/255,n=Math.min(e,t,i),o=Math.max(e,t,i),s=NaN,c=o-n,u=(o+n)/2;return c?(e===o?s=(t-i)/c+(t<i)*6:t===o?s=(i-e)/c+2:s=(e-t)/c+4,c/=u<.5?o+n:2-o-n,s*=60):c=u>0&&u<1?0:s,new Fr(s,c,u,l.opacity)}function dB(l,e,t,i){return arguments.length===1?yE(l):new Fr(l,e,t,i??1)}function Fr(l,e,t,i){this.h=+l,this.s=+e,this.l=+t,this.opacity=+i}D0(Fr,dB,vE(rh,{brighter(l){return l=l==null?Dd:Math.pow(Dd,l),new Fr(this.h,this.s,this.l*l,this.opacity)},darker(l){return l=l==null?Yc:Math.pow(Yc,l),new Fr(this.h,this.s,this.l*l,this.opacity)},rgb(){var l=this.h%360+(this.h<0)*360,e=isNaN(l)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,n=2*t-i;return new Dn(s_(l>=240?l-240:l+120,n,i),s_(l,n,i),s_(l<120?l+240:l-120,n,i),this.opacity)},clamp(){return new Fr(kb(this.h),Qf(this.s),Qf(this.l),Pd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const l=Pd(this.opacity);return`${l===1?"hsl(":"hsla("}${kb(this.h)}, ${Qf(this.s)*100}%, ${Qf(this.l)*100}%${l===1?")":`, ${l})`}`}}));function kb(l){return l=(l||0)%360,l<0?l+360:l}function Qf(l){return Math.max(0,Math.min(1,l||0))}function s_(l,e,t){return(l<60?e+(t-e)*l/60:l<180?t:l<240?e+(t-e)*(240-l)/60:e)*255}const P0=l=>()=>l;function pB(l,e){return function(t){return l+t*e}}function mB(l,e,t){return l=Math.pow(l,t),e=Math.pow(e,t)-l,t=1/t,function(i){return Math.pow(l+i*e,t)}}function gB(l){return(l=+l)==1?xE:function(e,t){return t-e?mB(e,t,l):P0(isNaN(e)?t:e)}}function xE(l,e){var t=e-l;return t?pB(l,t):P0(isNaN(l)?e:l)}const Ld=(function l(e){var t=gB(e);function i(n,o){var s=t((n=G_(n)).r,(o=G_(o)).r),c=t(n.g,o.g),u=t(n.b,o.b),h=xE(n.opacity,o.opacity);return function(d){return n.r=s(d),n.g=c(d),n.b=u(d),n.opacity=h(d),n+""}}return i.gamma=l,i})(1);function _B(l,e){e||(e=[]);var t=l?Math.min(e.length,l.length):0,i=e.slice(),n;return function(o){for(n=0;n<t;++n)i[n]=l[n]*(1-o)+e[n]*o;return i}}function vB(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}function yB(l,e){var t=e?e.length:0,i=l?Math.min(t,l.length):0,n=new Array(i),o=new Array(t),s;for(s=0;s<i;++s)n[s]=L0(l[s],e[s]);for(;s<t;++s)o[s]=e[s];return function(c){for(s=0;s<i;++s)o[s]=n[s](c);return o}}function xB(l,e){var t=new Date;return l=+l,e=+e,function(i){return t.setTime(l*(1-i)+e*i),t}}function zr(l,e){return l=+l,e=+e,function(t){return l*(1-t)+e*t}}function wB(l,e){var t={},i={},n;(l===null||typeof l!="object")&&(l={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in l?t[n]=L0(l[n],e[n]):i[n]=e[n];return function(o){for(n in t)i[n]=t[n](o);return i}}var V_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a_=new RegExp(V_.source,"g");function SB(l){return function(){return l}}function bB(l){return function(e){return l(e)+""}}function wE(l,e){var t=V_.lastIndex=a_.lastIndex=0,i,n,o,s=-1,c=[],u=[];for(l=l+"",e=e+"";(i=V_.exec(l))&&(n=a_.exec(e));)(o=n.index)>t&&(o=e.slice(t,o),c[s]?c[s]+=o:c[++s]=o),(i=i[0])===(n=n[0])?c[s]?c[s]+=n:c[++s]=n:(c[++s]=null,u.push({i:s,x:zr(i,n)})),t=a_.lastIndex;return t<e.length&&(o=e.slice(t),c[s]?c[s]+=o:c[++s]=o),c.length<2?u[0]?bB(u[0].x):SB(e):(e=u.length,function(h){for(var d=0,m;d<e;++d)c[(m=u[d]).i]=m.x(h);return c.join("")})}function L0(l,e){var t=typeof e,i;return e==null||t==="boolean"?P0(e):(t==="number"?zr:t==="string"?(i=Ro(e))?(e=i,Ld):wE:e instanceof Ro?Ld:e instanceof Date?xB:vB(e)?_B:Array.isArray(e)?yB:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?wB:zr)(l,e)}function TB(l,e){return l=+l,e=+e,function(t){return Math.round(l*(1-t)+e*t)}}var Gb=180/Math.PI,W_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function SE(l,e,t,i,n,o){var s,c,u;return(s=Math.sqrt(l*l+e*e))&&(l/=s,e/=s),(u=l*t+e*i)&&(t-=l*u,i-=e*u),(c=Math.sqrt(t*t+i*i))&&(t/=c,i/=c,u/=c),l*i<e*t&&(l=-l,e=-e,u=-u,s=-s),{translateX:n,translateY:o,rotate:Math.atan2(e,l)*Gb,skewX:Math.atan(u)*Gb,scaleX:s,scaleY:c}}var Jf;function EB(l){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(l+"");return e.isIdentity?W_:SE(e.a,e.b,e.c,e.d,e.e,e.f)}function MB(l){return l==null||(Jf||(Jf=document.createElementNS("http://www.w3.org/2000/svg","g")),Jf.setAttribute("transform",l),!(l=Jf.transform.baseVal.consolidate()))?W_:(l=l.matrix,SE(l.a,l.b,l.c,l.d,l.e,l.f))}function bE(l,e,t,i){function n(h){return h.length?h.pop()+" ":""}function o(h,d,m,g,_,w){if(h!==m||d!==g){var v=_.push("translate(",null,e,null,t);w.push({i:v-4,x:zr(h,m)},{i:v-2,x:zr(d,g)})}else(m||g)&&_.push("translate("+m+e+g+t)}function s(h,d,m,g){h!==d?(h-d>180?d+=360:d-h>180&&(h+=360),g.push({i:m.push(n(m)+"rotate(",null,i)-2,x:zr(h,d)})):d&&m.push(n(m)+"rotate("+d+i)}function c(h,d,m,g){h!==d?g.push({i:m.push(n(m)+"skewX(",null,i)-2,x:zr(h,d)}):d&&m.push(n(m)+"skewX("+d+i)}function u(h,d,m,g,_,w){if(h!==m||d!==g){var v=_.push(n(_)+"scale(",null,",",null,")");w.push({i:v-4,x:zr(h,m)},{i:v-2,x:zr(d,g)})}else(m!==1||g!==1)&&_.push(n(_)+"scale("+m+","+g+")")}return function(h,d){var m=[],g=[];return h=l(h),d=l(d),o(h.translateX,h.translateY,d.translateX,d.translateY,m,g),s(h.rotate,d.rotate,m,g),c(h.skewX,d.skewX,m,g),u(h.scaleX,h.scaleY,d.scaleX,d.scaleY,m,g),h=d=null,function(_){for(var w=-1,v=g.length,x;++w<v;)m[(x=g[w]).i]=x.x(_);return m.join("")}}}var CB=bE(EB,"px, ","px)","deg)"),RB=bE(MB,", ",")",")"),ru=0,yc=0,uc=0,TE=1e3,Od,xc,zd=0,Ao=0,Kd=0,Kc=typeof performance=="object"&&performance.now?performance:Date,EE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(l){setTimeout(l,17)};function O0(){return Ao||(EE(AB),Ao=Kc.now()+Kd)}function AB(){Ao=0}function Nd(){this._call=this._time=this._next=null}Nd.prototype=ME.prototype={constructor:Nd,restart:function(l,e,t){if(typeof l!="function")throw new TypeError("callback is not a function");t=(t==null?O0():+t)+(e==null?0:+e),!this._next&&xc!==this&&(xc?xc._next=this:Od=this,xc=this),this._call=l,this._time=t,j_()},stop:function(){this._call&&(this._call=null,this._time=1/0,j_())}};function ME(l,e,t){var i=new Nd;return i.restart(l,e,t),i}function DB(){O0(),++ru;for(var l=Od,e;l;)(e=Ao-l._time)>=0&&l._call.call(void 0,e),l=l._next;--ru}function Vb(){Ao=(zd=Kc.now())+Kd,ru=yc=0;try{DB()}finally{ru=0,LB(),Ao=0}}function PB(){var l=Kc.now(),e=l-zd;e>TE&&(Kd-=e,zd=l)}function LB(){for(var l,e=Od,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),l=e,e=e._next):(t=e._next,e._next=null,e=l?l._next=t:Od=t);xc=l,j_(i)}function j_(l){if(!ru){yc&&(yc=clearTimeout(yc));var e=l-Ao;e>24?(l<1/0&&(yc=setTimeout(Vb,l-Kc.now()-Kd)),uc&&(uc=clearInterval(uc))):(uc||(zd=Kc.now(),uc=setInterval(PB,TE)),ru=1,EE(Vb))}}function Wb(l,e,t){var i=new Nd;return e=e==null?0:+e,i.restart(n=>{i.stop(),l(n+e)},e,t),i}var OB=rE("start","end","cancel","interrupt"),zB=[],CE=0,jb=1,q_=2,md=3,qb=4,X_=5,gd=6;function Qd(l,e,t,i,n,o){var s=l.__transition;if(!s)l.__transition={};else if(t in s)return;NB(l,t,{name:e,index:i,group:n,on:OB,tween:zB,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:CE})}function z0(l,e){var t=Ir(l,e);if(t.state>CE)throw new Error("too late; already scheduled");return t}function ts(l,e){var t=Ir(l,e);if(t.state>md)throw new Error("too late; already running");return t}function Ir(l,e){var t=l.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function NB(l,e,t){var i=l.__transition,n;i[e]=t,t.timer=ME(o,0,t.time);function o(h){t.state=jb,t.timer.restart(s,t.delay,t.time),t.delay<=h&&s(h-t.delay)}function s(h){var d,m,g,_;if(t.state!==jb)return u();for(d in i)if(_=i[d],_.name===t.name){if(_.state===md)return Wb(s);_.state===qb?(_.state=gd,_.timer.stop(),_.on.call("interrupt",l,l.__data__,_.index,_.group),delete i[d]):+d<e&&(_.state=gd,_.timer.stop(),_.on.call("cancel",l,l.__data__,_.index,_.group),delete i[d])}if(Wb(function(){t.state===md&&(t.state=qb,t.timer.restart(c,t.delay,t.time),c(h))}),t.state=q_,t.on.call("start",l,l.__data__,t.index,t.group),t.state===q_){for(t.state=md,n=new Array(g=t.tween.length),d=0,m=-1;d<g;++d)(_=t.tween[d].value.call(l,l.__data__,t.index,t.group))&&(n[++m]=_);n.length=m+1}}function c(h){for(var d=h<t.duration?t.ease.call(null,h/t.duration):(t.timer.restart(u),t.state=X_,1),m=-1,g=n.length;++m<g;)n[m].call(l,d);t.state===X_&&(t.on.call("end",l,l.__data__,t.index,t.group),u())}function u(){t.state=gd,t.timer.stop(),delete i[e];for(var h in i)return;delete l.__transition}}function BB(l,e){var t=l.__transition,i,n,o=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((i=t[s]).name!==e){o=!1;continue}n=i.state>q_&&i.state<X_,i.state=gd,i.timer.stop(),i.on.call(n?"interrupt":"cancel",l,l.__data__,i.index,i.group),delete t[s]}o&&delete l.__transition}}function FB(l){return this.each(function(){BB(this,l)})}function IB(l,e){var t,i;return function(){var n=ts(this,l),o=n.tween;if(o!==t){i=t=o;for(var s=0,c=i.length;s<c;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}n.tween=i}}function UB(l,e,t){var i,n;if(typeof t!="function")throw new Error;return function(){var o=ts(this,l),s=o.tween;if(s!==i){n=(i=s).slice();for(var c={name:e,value:t},u=0,h=n.length;u<h;++u)if(n[u].name===e){n[u]=c;break}u===h&&n.push(c)}o.tween=n}}function HB(l,e){var t=this._id;if(l+="",arguments.length<2){for(var i=Ir(this.node(),t).tween,n=0,o=i.length,s;n<o;++n)if((s=i[n]).name===l)return s.value;return null}return this.each((e==null?IB:UB)(t,l,e))}function N0(l,e,t){var i=l._id;return l.each(function(){var n=ts(this,i);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return Ir(n,i).value[e]}}function RE(l,e){var t;return(typeof e=="number"?zr:e instanceof Ro?Ld:(t=Ro(e))?(e=t,Ld):wE)(l,e)}function kB(l){return function(){this.removeAttribute(l)}}function GB(l){return function(){this.removeAttributeNS(l.space,l.local)}}function VB(l,e,t){var i,n=t+"",o;return function(){var s=this.getAttribute(l);return s===n?null:s===i?o:o=e(i=s,t)}}function WB(l,e,t){var i,n=t+"",o;return function(){var s=this.getAttributeNS(l.space,l.local);return s===n?null:s===i?o:o=e(i=s,t)}}function jB(l,e,t){var i,n,o;return function(){var s,c=t(this),u;return c==null?void this.removeAttribute(l):(s=this.getAttribute(l),u=c+"",s===u?null:s===i&&u===n?o:(n=u,o=e(i=s,c)))}}function qB(l,e,t){var i,n,o;return function(){var s,c=t(this),u;return c==null?void this.removeAttributeNS(l.space,l.local):(s=this.getAttributeNS(l.space,l.local),u=c+"",s===u?null:s===i&&u===n?o:(n=u,o=e(i=s,c)))}}function XB(l,e){var t=Zd(l),i=t==="transform"?RB:RE;return this.attrTween(l,typeof e=="function"?(t.local?qB:jB)(t,i,N0(this,"attr."+l,e)):e==null?(t.local?GB:kB)(t):(t.local?WB:VB)(t,i,e))}function YB(l,e){return function(t){this.setAttribute(l,e.call(this,t))}}function ZB(l,e){return function(t){this.setAttributeNS(l.space,l.local,e.call(this,t))}}function KB(l,e){var t,i;function n(){var o=e.apply(this,arguments);return o!==i&&(t=(i=o)&&ZB(l,o)),t}return n._value=e,n}function QB(l,e){var t,i;function n(){var o=e.apply(this,arguments);return o!==i&&(t=(i=o)&&YB(l,o)),t}return n._value=e,n}function JB(l,e){var t="attr."+l;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=Zd(l);return this.tween(t,(i.local?KB:QB)(i,e))}function $B(l,e){return function(){z0(this,l).delay=+e.apply(this,arguments)}}function eF(l,e){return e=+e,function(){z0(this,l).delay=e}}function tF(l){var e=this._id;return arguments.length?this.each((typeof l=="function"?$B:eF)(e,l)):Ir(this.node(),e).delay}function iF(l,e){return function(){ts(this,l).duration=+e.apply(this,arguments)}}function nF(l,e){return e=+e,function(){ts(this,l).duration=e}}function rF(l){var e=this._id;return arguments.length?this.each((typeof l=="function"?iF:nF)(e,l)):Ir(this.node(),e).duration}function sF(l,e){if(typeof e!="function")throw new Error;return function(){ts(this,l).ease=e}}function aF(l){var e=this._id;return arguments.length?this.each(sF(e,l)):Ir(this.node(),e).ease}function oF(l,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;ts(this,l).ease=t}}function lF(l){if(typeof l!="function")throw new Error;return this.each(oF(this._id,l))}function uF(l){typeof l!="function"&&(l=oE(l));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var o=e[n],s=o.length,c=i[n]=[],u,h=0;h<s;++h)(u=o[h])&&l.call(u,u.__data__,h,o)&&c.push(u);return new Ns(i,this._parents,this._name,this._id)}function cF(l){if(l._id!==this._id)throw new Error;for(var e=this._groups,t=l._groups,i=e.length,n=t.length,o=Math.min(i,n),s=new Array(i),c=0;c<o;++c)for(var u=e[c],h=t[c],d=u.length,m=s[c]=new Array(d),g,_=0;_<d;++_)(g=u[_]||h[_])&&(m[_]=g);for(;c<i;++c)s[c]=e[c];return new Ns(s,this._parents,this._name,this._id)}function hF(l){return(l+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function fF(l,e,t){var i,n,o=hF(e)?z0:ts;return function(){var s=o(this,l),c=s.on;c!==i&&(n=(i=c).copy()).on(e,t),s.on=n}}function dF(l,e){var t=this._id;return arguments.length<2?Ir(this.node(),t).on.on(l):this.each(fF(t,l,e))}function pF(l){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==l)return;e&&e.removeChild(this)}}function mF(){return this.on("end.remove",pF(this._id))}function gF(l){var e=this._name,t=this._id;typeof l!="function"&&(l=R0(l));for(var i=this._groups,n=i.length,o=new Array(n),s=0;s<n;++s)for(var c=i[s],u=c.length,h=o[s]=new Array(u),d,m,g=0;g<u;++g)(d=c[g])&&(m=l.call(d,d.__data__,g,c))&&("__data__"in d&&(m.__data__=d.__data__),h[g]=m,Qd(h[g],e,t,g,h,Ir(d,t)));return new Ns(o,this._parents,e,t)}function _F(l){var e=this._name,t=this._id;typeof l!="function"&&(l=aE(l));for(var i=this._groups,n=i.length,o=[],s=[],c=0;c<n;++c)for(var u=i[c],h=u.length,d,m=0;m<h;++m)if(d=u[m]){for(var g=l.call(d,d.__data__,m,u),_,w=Ir(d,t),v=0,x=g.length;v<x;++v)(_=g[v])&&Qd(_,e,t,v,g,w);o.push(g),s.push(d)}return new Ns(o,s,e,t)}var vF=nh.prototype.constructor;function yF(){return new vF(this._groups,this._parents)}function xF(l,e){var t,i,n;return function(){var o=nu(this,l),s=(this.style.removeProperty(l),nu(this,l));return o===s?null:o===t&&s===i?n:n=e(t=o,i=s)}}function AE(l){return function(){this.style.removeProperty(l)}}function wF(l,e,t){var i,n=t+"",o;return function(){var s=nu(this,l);return s===n?null:s===i?o:o=e(i=s,t)}}function SF(l,e,t){var i,n,o;return function(){var s=nu(this,l),c=t(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(l),nu(this,l))),s===u?null:s===i&&u===n?o:(n=u,o=e(i=s,c))}}function bF(l,e){var t,i,n,o="style."+e,s="end."+o,c;return function(){var u=ts(this,l),h=u.on,d=u.value[o]==null?c||(c=AE(e)):void 0;(h!==t||n!==d)&&(i=(t=h).copy()).on(s,n=d),u.on=i}}function TF(l,e,t){var i=(l+="")=="transform"?CB:RE;return e==null?this.styleTween(l,xF(l,i)).on("end.style."+l,AE(l)):typeof e=="function"?this.styleTween(l,SF(l,i,N0(this,"style."+l,e))).each(bF(this._id,l)):this.styleTween(l,wF(l,i,e),t).on("end.style."+l,null)}function EF(l,e,t){return function(i){this.style.setProperty(l,e.call(this,i),t)}}function MF(l,e,t){var i,n;function o(){var s=e.apply(this,arguments);return s!==n&&(i=(n=s)&&EF(l,s,t)),i}return o._value=e,o}function CF(l,e,t){var i="style."+(l+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,MF(l,e,t??""))}function RF(l){return function(){this.textContent=l}}function AF(l){return function(){var e=l(this);this.textContent=e??""}}function DF(l){return this.tween("text",typeof l=="function"?AF(N0(this,"text",l)):RF(l==null?"":l+""))}function PF(l){return function(e){this.textContent=l.call(this,e)}}function LF(l){var e,t;function i(){var n=l.apply(this,arguments);return n!==t&&(e=(t=n)&&PF(n)),e}return i._value=l,i}function OF(l){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(l==null)return this.tween(e,null);if(typeof l!="function")throw new Error;return this.tween(e,LF(l))}function zF(){for(var l=this._name,e=this._id,t=DE(),i=this._groups,n=i.length,o=0;o<n;++o)for(var s=i[o],c=s.length,u,h=0;h<c;++h)if(u=s[h]){var d=Ir(u,e);Qd(u,l,t,h,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ns(i,this._parents,l,t)}function NF(){var l,e,t=this,i=t._id,n=t.size();return new Promise(function(o,s){var c={value:s},u={value:function(){--n===0&&o()}};t.each(function(){var h=ts(this,i),d=h.on;d!==l&&(e=(l=d).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),h.on=e}),n===0&&o()})}var BF=0;function Ns(l,e,t,i){this._groups=l,this._parents=e,this._name=t,this._id=i}function DE(){return++BF}var Ts=nh.prototype;Ns.prototype={constructor:Ns,select:gF,selectAll:_F,selectChild:Ts.selectChild,selectChildren:Ts.selectChildren,filter:uF,merge:cF,selection:yF,transition:zF,call:Ts.call,nodes:Ts.nodes,node:Ts.node,size:Ts.size,empty:Ts.empty,each:Ts.each,on:dF,attr:XB,attrTween:JB,style:TF,styleTween:CF,text:DF,textTween:OF,remove:mF,tween:HB,delay:tF,duration:rF,ease:aF,easeVarying:lF,end:NF,[Symbol.iterator]:Ts[Symbol.iterator]};function FF(l){return((l*=2)<=1?l*l*l:(l-=2)*l*l+2)/2}var IF={time:null,delay:0,duration:250,ease:FF};function UF(l,e){for(var t;!(t=l.__transition)||!(t=t[e]);)if(!(l=l.parentNode))throw new Error(`transition ${e} not found`);return t}function HF(l){var e,t;l instanceof Ns?(e=l._id,l=l._name):(e=DE(),(t=IF).time=O0(),l=l==null?null:l+"");for(var i=this._groups,n=i.length,o=0;o<n;++o)for(var s=i[o],c=s.length,u,h=0;h<c;++h)(u=s[h])&&Qd(u,l,e,h,s,t||UF(u,e));return new Ns(i,this._parents,l,e)}nh.prototype.interrupt=FB;nh.prototype.transition=HF;const Y_=Math.PI,Z_=2*Y_,no=1e-6,kF=Z_-no;function PE(l){this._+=l[0];for(let e=1,t=l.length;e<t;++e)this._+=arguments[e]+l[e]}function GF(l){let e=Math.floor(l);if(!(e>=0))throw new Error(`invalid digits: ${l}`);if(e>15)return PE;const t=10**e;return function(i){this._+=i[0];for(let n=1,o=i.length;n<o;++n)this._+=Math.round(arguments[n]*t)/t+i[n]}}class VF{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?PE:GF(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,n){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,t,i,n,o,s){this._append`C${+e},${+t},${+i},${+n},${this._x1=+o},${this._y1=+s}`}arcTo(e,t,i,n,o){if(e=+e,t=+t,i=+i,n=+n,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,c=this._y1,u=i-e,h=n-t,d=s-e,m=c-t,g=d*d+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>no)if(!(Math.abs(m*u-h*d)>no)||!o)this._append`L${this._x1=e},${this._y1=t}`;else{let _=i-s,w=n-c,v=u*u+h*h,x=_*_+w*w,b=Math.sqrt(v),E=Math.sqrt(g),M=o*Math.tan((Y_-Math.acos((v+g-x)/(2*b*E)))/2),D=M/E,P=M/b;Math.abs(D-1)>no&&this._append`L${e+D*d},${t+D*m}`,this._append`A${o},${o},0,0,${+(m*_>d*w)},${this._x1=e+P*u},${this._y1=t+P*h}`}}arc(e,t,i,n,o,s){if(e=+e,t=+t,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let c=i*Math.cos(n),u=i*Math.sin(n),h=e+c,d=t+u,m=1^s,g=s?n-o:o-n;this._x1===null?this._append`M${h},${d}`:(Math.abs(this._x1-h)>no||Math.abs(this._y1-d)>no)&&this._append`L${h},${d}`,i&&(g<0&&(g=g%Z_+Z_),g>kF?this._append`A${i},${i},0,1,${m},${e-c},${t-u}A${i},${i},0,1,${m},${this._x1=h},${this._y1=d}`:g>no&&this._append`A${i},${i},0,${+(g>=Y_)},${m},${this._x1=e+i*Math.cos(o)},${this._y1=t+i*Math.sin(o)}`)}rect(e,t,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function WF(l){return Math.abs(l=Math.round(l))>=1e21?l.toLocaleString("en").replace(/,/g,""):l.toString(10)}function Bd(l,e){if(!isFinite(l)||l===0)return null;var t=(l=e?l.toExponential(e-1):l.toExponential()).indexOf("e"),i=l.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+l.slice(t+1)]}function su(l){return l=Bd(Math.abs(l)),l?l[1]:NaN}function jF(l,e){return function(t,i){for(var n=t.length,o=[],s=0,c=l[0],u=0;n>0&&c>0&&(u+c+1>i&&(c=Math.max(1,i-u)),o.push(t.substring(n-=c,n+c)),!((u+=c+1)>i));)c=l[s=(s+1)%l.length];return o.reverse().join(e)}}function qF(l){return function(e){return e.replace(/[0-9]/g,function(t){return l[+t]})}}var XF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fd(l){if(!(e=XF.exec(l)))throw new Error("invalid format: "+l);var e;return new B0({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fd.prototype=B0.prototype;function B0(l){this.fill=l.fill===void 0?" ":l.fill+"",this.align=l.align===void 0?">":l.align+"",this.sign=l.sign===void 0?"-":l.sign+"",this.symbol=l.symbol===void 0?"":l.symbol+"",this.zero=!!l.zero,this.width=l.width===void 0?void 0:+l.width,this.comma=!!l.comma,this.precision=l.precision===void 0?void 0:+l.precision,this.trim=!!l.trim,this.type=l.type===void 0?"":l.type+""}B0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function YF(l){e:for(var e=l.length,t=1,i=-1,n;t<e;++t)switch(l[t]){case".":i=n=t;break;case"0":i===0&&(i=t),n=t;break;default:if(!+l[t])break e;i>0&&(i=0);break}return i>0?l.slice(0,i)+l.slice(n+1):l}var Id;function ZF(l,e){var t=Bd(l,e);if(!t)return Id=void 0,l.toPrecision(e);var i=t[0],n=t[1],o=n-(Id=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Bd(l,Math.max(0,e+o-1))[0]}function Xb(l,e){var t=Bd(l,e);if(!t)return l+"";var i=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}const Yb={"%":(l,e)=>(l*100).toFixed(e),b:l=>Math.round(l).toString(2),c:l=>l+"",d:WF,e:(l,e)=>l.toExponential(e),f:(l,e)=>l.toFixed(e),g:(l,e)=>l.toPrecision(e),o:l=>Math.round(l).toString(8),p:(l,e)=>Xb(l*100,e),r:Xb,s:ZF,X:l=>Math.round(l).toString(16).toUpperCase(),x:l=>Math.round(l).toString(16)};function Zb(l){return l}var Kb=Array.prototype.map,Qb=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function KF(l){var e=l.grouping===void 0||l.thousands===void 0?Zb:jF(Kb.call(l.grouping,Number),l.thousands+""),t=l.currency===void 0?"":l.currency[0]+"",i=l.currency===void 0?"":l.currency[1]+"",n=l.decimal===void 0?".":l.decimal+"",o=l.numerals===void 0?Zb:qF(Kb.call(l.numerals,String)),s=l.percent===void 0?"%":l.percent+"",c=l.minus===void 0?"":l.minus+"",u=l.nan===void 0?"NaN":l.nan+"";function h(m,g){m=Fd(m);var _=m.fill,w=m.align,v=m.sign,x=m.symbol,b=m.zero,E=m.width,M=m.comma,D=m.precision,P=m.trim,z=m.type;z==="n"?(M=!0,z="g"):Yb[z]||(D===void 0&&(D=12),P=!0,z="g"),(b||_==="0"&&w==="=")&&(b=!0,_="0",w="=");var O=(g&&g.prefix!==void 0?g.prefix:"")+(x==="$"?t:x==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():""),L=(x==="$"?i:/[%p]/.test(z)?s:"")+(g&&g.suffix!==void 0?g.suffix:""),N=Yb[z],j=/[defgprs%]/.test(z);D=D===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function se(K){var X=O,Z=L,he,Y,Q;if(z==="c")Z=N(K)+Z,K="";else{K=+K;var ee=K<0||1/K<0;if(K=isNaN(K)?u:N(Math.abs(K),D),P&&(K=YF(K)),ee&&+K==0&&v!=="+"&&(ee=!1),X=(ee?v==="("?v:c:v==="-"||v==="("?"":v)+X,Z=(z==="s"&&!isNaN(K)&&Id!==void 0?Qb[8+Id/3]:"")+Z+(ee&&v==="("?")":""),j){for(he=-1,Y=K.length;++he<Y;)if(Q=K.charCodeAt(he),48>Q||Q>57){Z=(Q===46?n+K.slice(he+1):K.slice(he))+Z,K=K.slice(0,he);break}}}M&&!b&&(K=e(K,1/0));var _e=X.length+K.length+Z.length,G=_e<E?new Array(E-_e+1).join(_):"";switch(M&&b&&(K=e(G+K,G.length?E-Z.length:1/0),G=""),w){case"<":K=X+K+Z+G;break;case"=":K=X+G+K+Z;break;case"^":K=G.slice(0,_e=G.length>>1)+X+K+Z+G.slice(_e);break;default:K=G+X+K+Z;break}return o(K)}return se.toString=function(){return m+""},se}function d(m,g){var _=Math.max(-8,Math.min(8,Math.floor(su(g)/3)))*3,w=Math.pow(10,-_),v=h((m=Fd(m),m.type="f",m),{suffix:Qb[8+_/3]});return function(x){return v(w*x)}}return{format:h,formatPrefix:d}}var $f,LE,OE;QF({thousands:",",grouping:[3],currency:["$",""]});function QF(l){return $f=KF(l),LE=$f.format,OE=$f.formatPrefix,$f}function JF(l){return Math.max(0,-su(Math.abs(l)))}function $F(l,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(su(e)/3)))*3-su(Math.abs(l)))}function eI(l,e){return l=Math.abs(l),e=Math.abs(e)-l,Math.max(0,su(e)-su(l))+1}function F0(l,e){switch(arguments.length){case 0:break;case 1:this.range(l);break;default:this.range(e).domain(l);break}return this}const Jb=Symbol("implicit");function zE(){var l=new Db,e=[],t=[],i=Jb;function n(o){let s=l.get(o);if(s===void 0){if(i!==Jb)return i;l.set(o,s=e.push(o)-1)}return t[s%t.length]}return n.domain=function(o){if(!arguments.length)return e.slice();e=[],l=new Db;for(const s of o)l.has(s)||l.set(s,e.push(s)-1);return n},n.range=function(o){return arguments.length?(t=Array.from(o),n):t.slice()},n.unknown=function(o){return arguments.length?(i=o,n):i},n.copy=function(){return zE(e,t).unknown(i)},F0.apply(n,arguments),n}function NE(){var l=zE().unknown(void 0),e=l.domain,t=l.range,i=0,n=1,o,s,c=!1,u=0,h=0,d=.5;delete l.unknown;function m(){var g=e().length,_=n<i,w=_?n:i,v=_?i:n;o=(v-w)/Math.max(1,g-u+h*2),c&&(o=Math.floor(o)),w+=(v-w-o*(g-u))*d,s=o*(1-u),c&&(w=Math.round(w),s=Math.round(s));var x=vz(g).map(function(b){return w+o*b});return t(_?x.reverse():x)}return l.domain=function(g){return arguments.length?(e(g),m()):e()},l.range=function(g){return arguments.length?([i,n]=g,i=+i,n=+n,m()):[i,n]},l.rangeRound=function(g){return[i,n]=g,i=+i,n=+n,c=!0,m()},l.bandwidth=function(){return s},l.step=function(){return o},l.round=function(g){return arguments.length?(c=!!g,m()):c},l.padding=function(g){return arguments.length?(u=Math.min(1,h=+g),m()):u},l.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),m()):u},l.paddingOuter=function(g){return arguments.length?(h=+g,m()):h},l.align=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),m()):d},l.copy=function(){return NE(e(),[i,n]).round(c).paddingInner(u).paddingOuter(h).align(d)},F0.apply(m(),arguments)}function tI(l){return function(){return l}}function iI(l){return+l}var $b=[0,1];function Nl(l){return l}function K_(l,e){return(e-=l=+l)?function(t){return(t-l)/e}:tI(isNaN(e)?NaN:.5)}function nI(l,e){var t;return l>e&&(t=l,l=e,e=t),function(i){return Math.max(l,Math.min(e,i))}}function rI(l,e,t){var i=l[0],n=l[1],o=e[0],s=e[1];return n<i?(i=K_(n,i),o=t(s,o)):(i=K_(i,n),o=t(o,s)),function(c){return o(i(c))}}function sI(l,e,t){var i=Math.min(l.length,e.length)-1,n=new Array(i),o=new Array(i),s=-1;for(l[i]<l[0]&&(l=l.slice().reverse(),e=e.slice().reverse());++s<i;)n[s]=K_(l[s],l[s+1]),o[s]=t(e[s],e[s+1]);return function(c){var u=lz(l,c,1,i)-1;return o[u](n[u](c))}}function aI(l,e){return e.domain(l.domain()).range(l.range()).interpolate(l.interpolate()).clamp(l.clamp()).unknown(l.unknown())}function oI(){var l=$b,e=$b,t=L0,i,n,o,s=Nl,c,u,h;function d(){var g=Math.min(l.length,e.length);return s!==Nl&&(s=nI(l[0],l[g-1])),c=g>2?sI:rI,u=h=null,m}function m(g){return g==null||isNaN(g=+g)?o:(u||(u=c(l.map(i),e,t)))(i(s(g)))}return m.invert=function(g){return s(n((h||(h=c(e,l.map(i),zr)))(g)))},m.domain=function(g){return arguments.length?(l=Array.from(g,iI),d()):l.slice()},m.range=function(g){return arguments.length?(e=Array.from(g),d()):e.slice()},m.rangeRound=function(g){return e=Array.from(g),t=TB,d()},m.clamp=function(g){return arguments.length?(s=g?!0:Nl,d()):s!==Nl},m.interpolate=function(g){return arguments.length?(t=g,d()):t},m.unknown=function(g){return arguments.length?(o=g,m):o},function(g,_){return i=g,n=_,d()}}function lI(){return oI()(Nl,Nl)}function uI(l,e,t,i){var n=gz(l,e,t),o;switch(i=Fd(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(l),Math.abs(e));return i.precision==null&&!isNaN(o=$F(n,s))&&(i.precision=o),OE(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=eI(n,Math.max(Math.abs(l),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=JF(n))&&(i.precision=o-(i.type==="%")*2);break}}return LE(i)}function cI(l){var e=l.domain;return l.ticks=function(t){var i=e();return mz(i[0],i[i.length-1],t??10)},l.tickFormat=function(t,i){var n=e();return uI(n[0],n[n.length-1],t??10,i)},l.nice=function(t){t==null&&(t=10);var i=e(),n=0,o=i.length-1,s=i[n],c=i[o],u,h,d=10;for(c<s&&(h=s,s=c,c=h,h=n,n=o,o=h);d-- >0;){if(h=H_(s,c,t),h===u)return i[n]=s,i[o]=c,e(i);if(h>0)s=Math.floor(s/h)*h,c=Math.ceil(c/h)*h;else if(h<0)s=Math.ceil(s*h)/h,c=Math.floor(c*h)/h;else break;u=h}return l},l}function BE(){var l=lI();return l.copy=function(){return aI(l,BE())},F0.apply(l,arguments),cI(l)}function ha(l){return function(){return l}}const eT=Math.abs,tn=Math.atan2,Qa=Math.cos,hI=Math.max,o_=Math.min,Vr=Math.sin,Bl=Math.sqrt,Rn=1e-12,Qc=Math.PI,Ud=Qc/2,fI=2*Qc;function dI(l){return l>1?0:l<-1?Qc:Math.acos(l)}function tT(l){return l>=1?Ud:l<=-1?-Ud:Math.asin(l)}function pI(l){let e=3;return l.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return l},()=>new VF(e)}function mI(l){return l.innerRadius}function gI(l){return l.outerRadius}function _I(l){return l.startAngle}function vI(l){return l.endAngle}function yI(l){return l&&l.padAngle}function xI(l,e,t,i,n,o,s,c){var u=t-l,h=i-e,d=s-n,m=c-o,g=m*u-d*h;if(!(g*g<Rn))return g=(d*(e-o)-m*(l-n))/g,[l+g*u,e+g*h]}function ed(l,e,t,i,n,o,s){var c=l-t,u=e-i,h=(s?o:-o)/Bl(c*c+u*u),d=h*u,m=-h*c,g=l+d,_=e+m,w=t+d,v=i+m,x=(g+w)/2,b=(_+v)/2,E=w-g,M=v-_,D=E*E+M*M,P=n-o,z=g*v-w*_,O=(M<0?-1:1)*Bl(hI(0,P*P*D-z*z)),L=(z*M-E*O)/D,N=(-z*E-M*O)/D,j=(z*M+E*O)/D,se=(-z*E+M*O)/D,K=L-x,X=N-b,Z=j-x,he=se-b;return K*K+X*X>Z*Z+he*he&&(L=j,N=se),{cx:L,cy:N,x01:-d,y01:-m,x11:L*(n/P-1),y11:N*(n/P-1)}}function wI(){var l=mI,e=gI,t=ha(0),i=null,n=_I,o=vI,s=yI,c=null,u=pI(h);function h(){var d,m,g=+l.apply(this,arguments),_=+e.apply(this,arguments),w=n.apply(this,arguments)-Ud,v=o.apply(this,arguments)-Ud,x=eT(v-w),b=v>w;if(c||(c=d=u()),_<g&&(m=_,_=g,g=m),!(_>Rn))c.moveTo(0,0);else if(x>fI-Rn)c.moveTo(_*Qa(w),_*Vr(w)),c.arc(0,0,_,w,v,!b),g>Rn&&(c.moveTo(g*Qa(v),g*Vr(v)),c.arc(0,0,g,v,w,b));else{var E=w,M=v,D=w,P=v,z=x,O=x,L=s.apply(this,arguments)/2,N=L>Rn&&(i?+i.apply(this,arguments):Bl(g*g+_*_)),j=o_(eT(_-g)/2,+t.apply(this,arguments)),se=j,K=j,X,Z;if(N>Rn){var he=tT(N/g*Vr(L)),Y=tT(N/_*Vr(L));(z-=he*2)>Rn?(he*=b?1:-1,D+=he,P-=he):(z=0,D=P=(w+v)/2),(O-=Y*2)>Rn?(Y*=b?1:-1,E+=Y,M-=Y):(O=0,E=M=(w+v)/2)}var Q=_*Qa(E),ee=_*Vr(E),_e=g*Qa(P),G=g*Vr(P);if(j>Rn){var V=_*Qa(M),q=_*Vr(M),ie=g*Qa(D),me=g*Vr(D),ue;if(x<Qc)if(ue=xI(Q,ee,ie,me,V,q,_e,G)){var ae=Q-ue[0],Be=ee-ue[1],He=V-ue[0],Fe=q-ue[1],Ve=1/Vr(dI((ae*He+Be*Fe)/(Bl(ae*ae+Be*Be)*Bl(He*He+Fe*Fe)))/2),at=Bl(ue[0]*ue[0]+ue[1]*ue[1]);se=o_(j,(g-at)/(Ve-1)),K=o_(j,(_-at)/(Ve+1))}else se=K=0}O>Rn?K>Rn?(X=ed(ie,me,Q,ee,_,K,b),Z=ed(V,q,_e,G,_,K,b),c.moveTo(X.cx+X.x01,X.cy+X.y01),K<j?c.arc(X.cx,X.cy,K,tn(X.y01,X.x01),tn(Z.y01,Z.x01),!b):(c.arc(X.cx,X.cy,K,tn(X.y01,X.x01),tn(X.y11,X.x11),!b),c.arc(0,0,_,tn(X.cy+X.y11,X.cx+X.x11),tn(Z.cy+Z.y11,Z.cx+Z.x11),!b),c.arc(Z.cx,Z.cy,K,tn(Z.y11,Z.x11),tn(Z.y01,Z.x01),!b))):(c.moveTo(Q,ee),c.arc(0,0,_,E,M,!b)):c.moveTo(Q,ee),!(g>Rn)||!(z>Rn)?c.lineTo(_e,G):se>Rn?(X=ed(_e,G,V,q,g,-se,b),Z=ed(Q,ee,ie,me,g,-se,b),c.lineTo(X.cx+X.x01,X.cy+X.y01),se<j?c.arc(X.cx,X.cy,se,tn(X.y01,X.x01),tn(Z.y01,Z.x01),!b):(c.arc(X.cx,X.cy,se,tn(X.y01,X.x01),tn(X.y11,X.x11),!b),c.arc(0,0,g,tn(X.cy+X.y11,X.cx+X.x11),tn(Z.cy+Z.y11,Z.cx+Z.x11),b),c.arc(Z.cx,Z.cy,se,tn(Z.y11,Z.x11),tn(Z.y01,Z.x01),!b))):c.arc(0,0,g,P,D,b)}if(c.closePath(),d)return c=null,d+""||null}return h.centroid=function(){var d=(+l.apply(this,arguments)+ +e.apply(this,arguments))/2,m=(+n.apply(this,arguments)+ +o.apply(this,arguments))/2-Qc/2;return[Qa(m)*d,Vr(m)*d]},h.innerRadius=function(d){return arguments.length?(l=typeof d=="function"?d:ha(+d),h):l},h.outerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ha(+d),h):e},h.cornerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ha(+d),h):t},h.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ha(+d),h):i},h.startAngle=function(d){return arguments.length?(n=typeof d=="function"?d:ha(+d),h):n},h.endAngle=function(d){return arguments.length?(o=typeof d=="function"?d:ha(+d),h):o},h.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ha(+d),h):s},h.context=function(d){return arguments.length?(c=d??null,h):c},h}function wc(l,e,t){this.k=l,this.x=e,this.y=t}wc.prototype={constructor:wc,scale:function(l){return l===1?this:new wc(this.k*l,this.x,this.y)},translate:function(l,e){return l===0&e===0?this:new wc(this.k,this.x+this.k*l,this.y+this.k*e)},apply:function(l){return[l[0]*this.k+this.x,l[1]*this.k+this.y]},applyX:function(l){return l*this.k+this.x},applyY:function(l){return l*this.k+this.y},invert:function(l){return[(l[0]-this.x)/this.k,(l[1]-this.y)/this.k]},invertX:function(l){return(l-this.x)/this.k},invertY:function(l){return(l-this.y)/this.k},rescaleX:function(l){return l.copy().domain(l.range().map(this.invertX,this).map(l.invert,l))},rescaleY:function(l){return l.copy().domain(l.range().map(this.invertY,this).map(l.invert,l))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};wc.prototype;function FE(){const[l,e]=kt.useState(!1);return kt.useEffect(()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)"),i=()=>{e(t.matches)};return i(),t.addEventListener("change",i),()=>{t.removeEventListener("change",i)}},[]),l}const SI=[{label:"Launch Date",value:"Nov-05-2024"},{label:"Registered Volunteers",value:"2,849"}],bI=[{name:"Navigation",retired:9731,total:9731,pct:100,etc:"0 days"},{name:"Barometer",retired:9731,total:9731,pct:100,etc:"0 days"},{name:"Wind Direction",retired:5832,total:9731,pct:55,etc:"41 days"},{name:"Wind Force",retired:9731,total:9731,pct:100,etc:"0 days"},{name:"Sea Temperature",retired:9731,total:9731,pct:100,etc:"0 days"},{name:"Air Temperature",retired:9731,total:9731,pct:100,etc:"0 days"}],TI=[{month:"Oct-2024",value:1328},{month:"Nov-2024",value:29184},{month:"Dec-2024",value:20830},{month:"Jan-2025",value:17990},{month:"Feb-2025",value:6791},{month:"Mar-2025",value:15090},{month:"Apr-2025",value:19444},{month:"May-2025",value:24879},{month:"Jun-2025",value:18582},{month:"Jul-2025",value:22477},{month:"Aug-2025",value:18965},{month:"Sep-2025",value:13893},{month:"Oct-2025",value:8155},{month:"Nov-2025",value:5367},{month:"Dec-2025",value:2895},{month:"Jan-2026",value:6302},{month:"Feb-2026",value:4209}],EI=[{month:"Oct-2024",value:152},{month:"Nov-2024",value:1479},{month:"Dec-2024",value:864},{month:"Jan-2025",value:930},{month:"Feb-2025",value:405},{month:"Mar-2025",value:826},{month:"Apr-2025",value:605},{month:"May-2025",value:661},{month:"Jun-2025",value:1086},{month:"Jul-2025",value:873},{month:"Aug-2025",value:693},{month:"Sep-2025",value:524},{month:"Oct-2025",value:223},{month:"Nov-2025",value:157},{month:"Dec-2025",value:180},{month:"Jan-2026",value:98},{month:"Feb-2026",value:77}];function MI({item:l,reducedMotion:e}){const t=kt.useRef(null);return kt.useEffect(()=>{const i=t.current;if(!i)return;const n=174,o=71,s=11,c=Math.max(0,Math.min(l.pct,100)),u=Math.PI*2*c/100,h=_E(i).html("").append("svg").attr("width",n).attr("height",n).attr("viewBox",`0 0 ${n} ${n}`).attr("role","img").attr("aria-label",`${l.name} ${l.pct}% complete`),m=h.append("defs").append("filter").attr("id","glow");m.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");const g=m.append("feMerge");g.append("feMergeNode").attr("in","coloredBlur"),g.append("feMergeNode").attr("in","SourceGraphic");const _=h.append("g").attr("transform",`translate(${n/2}, ${n/2})`),w=wI().innerRadius(o-s/2).outerRadius(o+s/2).cornerRadius(s/2);_.append("path").datum({startAngle:0,endAngle:Math.PI*2}).attr("d",w).attr("fill","#e2e8f0");const v=_.append("path").attr("fill","#0ea5e9"),x={endAngle:0};e?v.datum({startAngle:0,endAngle:u}).attr("d",w):Mt.fromTo(x,{endAngle:0},{endAngle:u,duration:1.2,ease:"power3.out",onUpdate:()=>{v.datum({startAngle:0,endAngle:x.endAngle}).attr("d",w)}}),h.append("text").attr("x",n/2).attr("y",n/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#0f172a").style("font-size","20px").style("font-weight","700").text(`${l.pct}%`),h.append("text").attr("x",n/2).attr("y",n/2+20).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#64748b").style("font-size","10px").style("font-weight","500").style("letter-spacing","0.08em").text("COMPLETE");const b=()=>{Mt.to(v.node(),{attr:{fill:"#38bdf8"},duration:.3,ease:"power2.out"}),Mt.to(h.node(),{scale:1.05,transformOrigin:"50% 50%",duration:.3,ease:"back.out(1.7)"})},E=()=>{Mt.to(v.node(),{attr:{fill:"#0ea5e9"},duration:.3,ease:"power2.out"}),Mt.to(h.node(),{scale:1,transformOrigin:"50% 50%",duration:.3,ease:"power2.out"})};return i.addEventListener("pointerenter",b),i.addEventListener("pointerleave",E),()=>{i.removeEventListener("pointerenter",b),i.removeEventListener("pointerleave",E),Mt.killTweensOf(x),h.node()&&Mt.killTweensOf(h.node()),v.node()&&Mt.killTweensOf(v.node())}},[l,e]),pe.jsxs("article",{className:"px-2 py-2",children:[pe.jsx("h3",{className:"font-major subhead-spaced text-[0.68rem] font-bold text-slate-700",children:l.name}),pe.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Images retired: ",l.retired.toLocaleString()," / ",l.total.toLocaleString()]}),pe.jsx("div",{className:"mt-2 flex justify-center",ref:t})]})}function iT({title:l,subtitle:e,data:t,reducedMotion:i}){const n=kt.useRef(null);return kt.useEffect(()=>{const o=n.current;if(!o)return;const s=1160,c=248,u={top:20,right:12,bottom:40,left:46},h=c-u.top-u.bottom,d=_E(o).html("").style("position","relative"),m=d.append("div").style("position","absolute").style("pointer-events","none").style("opacity","0").style("z-index","10").style("padding","8px 12px").style("background","rgba(255, 255, 255, 0.95)").style("backdrop-filter","blur(4px)").style("border-radius","8px").style("box-shadow","0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)").style("border","1px solid rgba(226, 232, 240, 0.8)").style("transform","translate(0, -100%)").style("transition","transform 0.1s ease-out"),g=d.append("svg").attr("width","100%").attr("height",c).attr("viewBox",`0 0 ${s} ${c}`).attr("preserveAspectRatio","none").attr("class","block w-full").attr("role","img").attr("aria-label",`${l} monthly values`),_=`bar-gradient-${l.replace(/\s/g,"")}`,v=g.append("defs").append("linearGradient").attr("id",_).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");v.append("stop").attr("offset","0%").attr("stop-color","#38bdf8").attr("stop-opacity",1),v.append("stop").attr("offset","100%").attr("stop-color","#0284c7").attr("stop-opacity",1);const x=NE().domain(t.map(z=>z.month)).range([u.left,s-u.right]).paddingInner(.6).paddingOuter(.3),b=BE().domain([0,_z(t,z=>z.value)||1]).nice(4).range([u.top+h,u.top]),E=b.ticks(4);g.append("g").selectAll("line").data(E).join("line").attr("x1",u.left).attr("x2",s-u.right).attr("y1",z=>b(z)).attr("y2",z=>b(z)).attr("stroke","#e2e8f0").attr("stroke-width",1).attr("stroke-dasharray","4 6"),g.append("g").selectAll("text").data(E).join("text").attr("x",u.left-10).attr("y",z=>b(z)+4).attr("text-anchor","end").attr("fill","#94a3b8").style("font-size","10px").style("font-family","sans-serif").text(z=>z.toLocaleString());const M=g.append("g").selectAll("rect").data(t).join("rect").attr("x",z=>x(z.month)).attr("width",x.bandwidth()).attr("rx",4).attr("fill",`url(#${_})`).style("cursor","pointer");i?M.attr("y",z=>b(z.value)).attr("height",z=>u.top+h-b(z.value)):(M.attr("y",u.top+h).attr("height",0),M.each(function(O,L){Mt.to(this,{attr:{y:b(O.value),height:u.top+h-b(O.value)},duration:.8,delay:L*.03,ease:"power3.out"})}));const D=(z,O,L)=>{const[N,j]=tB(z,d.node()),se=N+12,K=j-8;m.style("left",`${se}px`).style("top",`${K}px`).html(`
          <div class="text-[10px] font-bold tracking-wider text-slate-400 uppercase mb-0.5">${O.month}</div>
          <div class="text-sm font-bold text-slate-800">${Number(O.value).toLocaleString()}</div>
        `),Mt.to(m.node(),{opacity:1,y:-5,duration:.2,ease:"power2.out"}),Mt.to(L,{attr:{x:(x(O.month)||0)-2,width:x.bandwidth()+4,fill:"#38bdf8"},filter:"drop-shadow(0px 4px 8px rgba(56, 189, 248, 0.5))",duration:.2,ease:"power2.out"})},P=(z,O)=>{Mt.to(m.node(),{opacity:0,y:0,duration:.15,ease:"power2.inOut"}),Mt.to(O,{attr:{x:x(z.month)||0,width:x.bandwidth(),fill:`url(#${_})`},filter:"none",duration:.2,ease:"power2.out"})};return M.on("pointerenter",function(z,O){D(z,O,this)}).on("pointermove",function(z,O){D(z,O,this)}).on("pointerleave",function(z,O){P(O,this)}),g.append("g").selectAll("text").data(t).join("text").attr("text-anchor","start").attr("fill","#64748b").style("font-size","10px").style("font-weight","500").attr("transform",z=>`translate(${(x(z.month)||0)+x.bandwidth()/2-4}, ${u.top+h+16}) rotate(45)`).text(z=>z.month),()=>{M.on("pointerenter",null).on("pointermove",null).on("pointerleave",null),M.each(function(){Mt.killTweensOf(this)}),m.node()&&Mt.killTweensOf(m.node())}},[t,l,i]),pe.jsxs("section",{className:"pt-2",children:[pe.jsx("h3",{className:"font-major subhead-spaced text-[0.7rem] font-bold text-slate-500 uppercase tracking-widest",children:e}),pe.jsx("p",{className:"font-subtitle mt-1 text-[clamp(1.2rem,2.2vw,1.6rem)] leading-tight font-semibold text-slate-900",children:l}),pe.jsx("div",{className:"mt-4 pb-1",ref:n})]})}function CI(){const l=FE();return pe.jsx("section",{className:"mb-12 border-t border-b border-slate-200 py-10 bg-slate-50/50","aria-label":"Estimated project statistics",children:pe.jsxs("div",{className:"px-2",children:[pe.jsxs("h2",{className:"font-subtitle mt-2 text-[clamp(1.35rem,2.4vw,2rem)] leading-tight font-bold text-slate-900",children:["Project Statistics ",pe.jsx("span",{className:"text-slate-400 font-normal text-lg",children:"(as of 27 Feb)"})]}),pe.jsx("div",{className:"mt-4 flex flex-wrap gap-3",children:SI.map(e=>pe.jsxs("div",{className:"inline-flex items-baseline gap-2 px-4 py-2 bg-white rounded-full shadow-sm border border-slate-200",children:[pe.jsxs("span",{className:"font-major subhead-spaced text-[0.65rem] font-bold text-slate-500 uppercase tracking-widest",children:[e.label,":"]}),pe.jsx("span",{className:"font-subtitle text-base font-bold text-slate-800",children:e.value})]},e.label))}),pe.jsx("div",{className:"mt-8",children:pe.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:bI.map(e=>pe.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-100",children:pe.jsx(MI,{item:e,reducedMotion:!!l})},e.name))})}),pe.jsx("div",{className:"mt-10 pt-6",children:pe.jsxs("div",{className:"grid grid-cols-1 gap-12",children:[pe.jsx(iT,{title:"Classification Stats",subtitle:"Classifications per month",data:TI,reducedMotion:!!l}),pe.jsx(iT,{title:"Talk Stats",subtitle:"Comments per month",data:EI,reducedMotion:!!l})]})})]})})}function RI({onScrollTop:l}){const[e,t]=kt.useState(!1),i=kt.useRef(null),n=kt.useRef(null),o=kt.useRef(null),s=kt.useRef(null);kt.useEffect(()=>{Mt.registerPlugin(yt);const h=yt.create({start:"top top",end:"bottom bottom",onUpdate:d=>{const m=d.progress,g=283*(1-m);i.current&&Mt.set([i.current,".progress-glow"],{strokeDashoffset:g}),n.current&&Mt.set(n.current,{rotation:m*720}),d.scroll()>400?e||t(!0):e&&t(!1)}});return()=>h.kill()},[e]);const c=h=>{if(!s.current)return;const{clientX:d,clientY:m}=h,{left:g,top:_,width:w,height:v}=s.current.getBoundingClientRect(),x=d-(g+w/2),b=m-(_+v/2);Mt.to(o.current,{x:x*.4,y:b*.4,duration:.4,ease:"power2.out"})},u=()=>{Mt.to(o.current,{x:0,y:0,duration:.8,ease:"elastic.out(1, 0.3)"})};return pe.jsx("div",{ref:s,className:`fixed bottom-8 right-8 z-50 h-20 w-20 flex items-center justify-center transition-opacity duration-500 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onMouseMove:c,onMouseLeave:u,children:pe.jsxs("button",{ref:o,onClick:l,className:"relative flex h-16 w-16 cursor-pointer items-center justify-center rounded-full bg-teal-950/25 backdrop-blur-[8px] border border-white/20 shadow-[0_0_20px_rgba(13,148,136,0.2),inset_0_0_10px_rgba(255,255,255,0.1)] group transition-all duration-300 hover:bg-teal-900/35 hover:shadow-[0_0_30px_rgba(13,148,136,0.4),inset_0_0_15px_rgba(255,255,255,0.2)]","aria-label":"Back to top",children:[pe.jsxs("svg",{className:"absolute inset-0 h-full w-full -rotate-90",viewBox:"0 0 100 100",children:[pe.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"5"}),pe.jsx("circle",{className:"progress-glow blur-[2px] transition-[stroke] duration-500 group-hover:stroke-teal-500",cx:"50",cy:"50",r:"45",fill:"none",stroke:"#0d9488",strokeWidth:"8",strokeDasharray:"283",strokeDashoffset:"283",strokeLinecap:"round",opacity:"0.3"}),pe.jsx("circle",{ref:i,cx:"50",cy:"50",r:"45",fill:"none",stroke:"#0d9488",strokeWidth:"5",strokeDasharray:"283",strokeDashoffset:"283",strokeLinecap:"round",className:"transition-[stroke] duration-500 group-hover:stroke-teal-500"})]}),pe.jsx("div",{ref:n,className:"relative z-10 flex items-center justify-center",children:pe.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-slate-100 drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]",children:[pe.jsx("path",{d:"M12 3L15 12L12 11L9 12L12 3Z",fill:"#0d9488",className:"group-hover:fill-teal-500 transition-colors"}),pe.jsx("path",{d:"M12 21L9 12L12 13L15 12L12 21Z",fill:"white",fillOpacity:"0.9"}),pe.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#0f172a"})]})}),pe.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 scale-50 opacity-0 font-major text-[10px] uppercase tracking-widest text-teal-600 font-semibold transition-all duration-300 group-hover:scale-100 group-hover:opacity-100 whitespace-nowrap",children:"Return North"})]})})}function AI(l,{prefersReducedMotion:e}){kt.useEffect(()=>{if(e||!l.current)return;Mt.registerPlugin(yt);const t=Mt.fromTo(l.current,{backgroundPosition:"50% 50%"},{backgroundPosition:"50% 100%",ease:"none",scrollTrigger:{trigger:l.current,scrub:1.5,start:"top bottom",end:"bottom top"}});return()=>{t.kill(),yt.getById("glass-parallax")?.kill()}},[l,e])}function DI(){const l=FE(),e=kt.useRef(null),t=kt.useRef(null),i=kt.useRef(null),[n,o]=kt.useState(0);AI(t,{prefersReducedMotion:l}),kt.useEffect(()=>{if(l)return;Mt.registerPlugin(yt);const u=new YR({duration:1.15,smoothWheel:!0,touchMultiplier:1.1});i.current=u,u.on("scroll",yt.update);const h=_=>{u.raf(_*1e3)};return Mt.ticker.add(h),Mt.ticker.lagSmoothing(0),Mt.utils.toArray(".essay-section").forEach(_=>{Mt.fromTo(_,{opacity:0,y:72},{opacity:1,y:0,duration:1.1,ease:"power3.out",scrollTrigger:{trigger:_,start:"top 86%",end:"top 48%",scrub:.6}})}),Mt.utils.toArray(".media-card, .essay-figure").forEach(_=>{Mt.fromTo(_,{opacity:0,y:30,scale:1.05,filter:"grayscale(1) brightness(0.9)"},{opacity:1,y:0,scale:1,filter:"grayscale(0) brightness(1)",duration:1.6,ease:"power2.out",scrollTrigger:{trigger:_,start:"top 95%",end:"top 70%",scrub:1.2}})}),Mt.utils.toArray(".note-card").forEach(_=>{Mt.fromTo(_,{opacity:0,y:32},{opacity:1,y:0,duration:.8,ease:"power2.out",scrollTrigger:{trigger:_,start:"top 92%",end:"top 64%",scrub:.5}})}),Mt.fromTo(".hero-canvas",{yPercent:0,scale:1.04},{yPercent:14,scale:1.09,ease:"none",scrollTrigger:{trigger:".hero-shell",start:"top top",end:"bottom top",scrub:.9}}),Mt.fromTo(".hero-overlay",{yPercent:0},{yPercent:-16,ease:"none",scrollTrigger:{trigger:".hero-shell",start:"top top",end:"bottom top",scrub:.7}}),()=>{yt.getAll().forEach(_=>_.kill()),Mt.ticker.remove(h),u.destroy()}},[l]);const s=["1-Feb_1.jpeg","1-Feb_2.jpeg","2-Feb_1.jpeg","2-Feb_2.jpeg","5-Feb_1.jpeg","6-Feb_1.jpeg","6-Feb_2.jpeg","6-Feb_3.jpeg","6-Feb_4.jpeg","8-Feb_1.jpeg","8-Feb_2.jpeg","10-Feb_1.jpeg","13-Feb_1.jpeg","19-Feb_1.jpeg"].map(u=>({src:`/DH6034/media/project_images/${u}`,caption:`Archival ship logbook entry: ${u}`,stage:"ARCHIVAL RECORD",detail:`High-resolution digitized page from the Monsoon Voyages collection, specifically showing record ${u}. These documents require precise transcription of meteorological observations.`})),c=()=>{i.current?i.current.scrollTo(0,{duration:1.8}):window.scrollTo({top:0,behavior:"smooth"})};return pe.jsx(pe.Fragment,{children:pe.jsxs("main",{className:`essay min-h-screen bg-[radial-gradient(circle_at_18%_16%,#f8f4de_0%,transparent_42%),radial-gradient(circle_at_84%_14%,#d7ebe8_0%,transparent_44%),linear-gradient(155deg,#f7f6f1_0%,#f0f7fb_100%)] text-slate-800 ${l?"reduced-motion":""}`,children:[pe.jsxs("header",{ref:e,className:"hero-shell relative grid min-h-screen place-items-center overflow-clip border-b border-slate-300/70 bg-slate-900",children:[pe.jsx(JO,{reducedMotion:l}),pe.jsx("div",{className:"absolute inset-0 z-[1] bg-slate-950/40","aria-hidden":"true"}),pe.jsxs("div",{ref:t,className:"hero-overlay glass-card glass-card-interactive relative z-10 mx-auto w-[min(92ch,calc(100vw-3rem))] px-8 py-16 md:px-16 md:py-24",children:[pe.jsxs("div",{className:"flex items-center gap-3 group cursor-default mb-8",children:[pe.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-teal-400 font-bold font-serif group-hover:bg-teal-500 group-hover:text-white transition-all duration-300",children:"DH"}),pe.jsx("span",{className:"font-semibold text-slate-100 tracking-tight text-lg",children:"DH6034 Assignment 1  Guang Yang"})]}),pe.jsx("h1",{className:"font-title max-w-[18ch] text-[clamp(2rem,6vw,4.6rem)] font-semibold leading-[1.05] tracking-tight text-slate-50",children:"Reflections on Monsoon Voyages: Crowdsourcing the Climate of the Past"}),pe.jsx("p",{className:"scroll-cue font-major lux-kicker mt-10 text-xs text-slate-100/85 animate-bob","aria-hidden":"true",children:"Scroll to enter the essay"}),pe.jsxs("p",{className:"font-major mt-8 border-t border-white/45 pt-4 text-[0.72rem] leading-5 text-slate-100/90",children:["Cover image: Two ships being repaired at Victoria Dock, Singapore in the 1890s. (Source:"," ",pe.jsx("a",{href:"https://www.nlb.gov.sg/main/image-detail?cmsuuid=881ed7a7-0224-4c9f-85c4-1e06a2f6a2bd",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-100/80 underline-offset-2 hover:text-white",children:"NLB Singapore"}),". All rights reserved)."]})]})]}),pe.jsx("section",{className:"mx-auto w-[min(96ch,calc(100vw-1.25rem))] px-2 pb-24 pt-8 md:w-[min(96ch,calc(100vw-2.5rem))] md:pt-14",children:pe.jsxs("article",{className:"essay-flow w-full",children:[pe.jsxs(tc,{title:"The Process",id:"process",children:[pe.jsx("p",{children:"I participated in the Monsoon Voyages project. Initially, I was considering these two projects:"}),pe.jsxs("ol",{className:"list-decimal pl-6 marker:text-slate-700",children:[pe.jsx("li",{children:"Dear Monsieur Sampaio"}),pe.jsx("li",{children:"Monsoon Voyages"})]}),pe.jsx("p",{children:"I was also initially interested in the first project which involves transcribing the personal correspondence of the Portuguese botanist Gonalo Sampaio from the late 1880s to 1936, since my MA research also involves botany. However, I later realised that since I do not know Portuguese, I would not be able to transcribe the documents faithfully. Therefore, I decided to participate in the Monsoon Voyages project instead."}),pe.jsx("p",{children:"The Monsoon Voyages project focuses on transcribing weather records written in English from voyages in 19th- and 20th-century Singapore. I am interested in it because I have travelled to Malaysia and am familiar with the legendary Malacca Strait near Malaysia and Singapore."}),pe.jsx("p",{children:"When I joined the project, there was mainly one type of task: transcribing wind direction data from the documents. I read the instructions in the tutorial section and then began transcribing. My input should align with the instructions; for example, wind direction data could take the forms such as NbyE, SW, or Calm."}),pe.jsxs("figure",{className:"essay-figure essay-figure--outset",children:[pe.jsx("img",{src:"/DH6034/media/Figure1.jpeg",alt:"Screenshot of the Zooniverse transcription workflow"}),pe.jsx("figcaption",{children:"Figure 1: Screenshot of the Zooniverse transcription workflow."})]}),pe.jsxs("p",{children:["To improve my transcription accuracy, I experimented with transcription tools such as"," ",pe.jsx("a",{href:"https://www.transkribus.org/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"Transcribus"}),". However, I found that its transcribing results for this type of handwritten document were not reliable at all, so I abandoned this approach."]}),pe.jsxs("figure",{className:"essay-figure essay-figure--outset",children:[pe.jsx("img",{src:"/DH6034/media/Figure2.jpeg",alt:"Experiment with Transcribus"}),pe.jsx("figcaption",{children:"Figure 2: Experiment with Transcribus."})]}),pe.jsx("p",{children:"I encountered several challenges during the process. For instance, some handwritten text was very unclear or used highly unique personal abbreviations that were difficult to recognise, such as abbreviations for by in wind direction notation. Also, sometimes the writer used an abbreviation symbol consisting of two short strokes to indicate that the value in an entry was the same as the entry above. I was unsure whether to transcribe the marks literally or to transcribe the implied content (i.e. same as the previous entry). Therefore, I posted such questions at the Talk section of the project and included the document images."}),pe.jsxs("figure",{className:"essay-figure essay-figure--outset",children:[pe.jsx("img",{src:"/DH6034/media/Figure3.jpeg",alt:"Post in the Talk section"}),pe.jsx("figcaption",{children:"Figure 3: Post in the Talk section."})]})]}),pe.jsx(nz,{items:s,activeIndex:n,setActiveIndex:o}),pe.jsxs(tc,{title:"Implications of My Contribution",id:"implications",children:[pe.jsx("p",{children:"I contributed to the project in two main ways: first, I transcribed with care and patience which ensured my transcribing accuracy. Second, I contributed to the Talk section with questions and necessary notes on some document images, for example, in cases where parts of a document were obscured or partially covered."}),pe.jsxs("p",{children:["Beyond my individual transcription tasks, my contribution supports the interdisciplinary project that links climate history with contemporary climate science. On the"," ",pe.jsx("a",{href:"https://urban.smu.edu.sg/projects/monsoon-voyages",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"Monsoon Voyages website"}),", they stated the projects objective: to use historical weather data to establish climate baselines, which supports climate modelling, and further help societies prepare for climate change."]}),pe.jsx("p",{children:"Additionally, many projects on Zooniverse are initiated by Western institutions and focus on European or North American archives. My work on the Monsoon Voyages project, which is managed by Singapore Management University and centred on Southeast Asia, contributes to a more geographically balanced climate history."}),pe.jsx("p",{children:"Furthermore, my contributions support the projects broader objective of advancing research on Singapores administration under the British colonial system."}),pe.jsx("p",{children:"Regarding the ethical dimensions of crowdsourced work, I would like to argue from two angles. First, transcription accuracy is not guaranteed. The expertise of participants varies. This may affect the reliability of the results. Second, although volunteers on Zooniverse contribute their labour to the project, the final research outputs are typically attributed to the host institutions. This raises an ethical question: should volunteers be credited in academic contexts?"}),pe.jsx("p",{children:"Computer science and digital humanities projects often require large amounts of annotation works, and researchers often recruit undergraduate students at their universities to perform the tasks. Sometimes the students are insufficiently compensated, and this raises a question of labour being not well paid."}),pe.jsx("p",{children:"As a contributor, I am also aware of the responsibility I take when conducting the transcription task. I also noticed that although my contributions were recorded by Zooniverse, I still have no share on the academic authorship."})]}),pe.jsx(CI,{}),pe.jsxs(tc,{title:"What I Learnt",id:"learned",children:[pe.jsxs("p",{children:["On a practical level, my transcription skills and ability to recognise handwritten cursive English scripts have improved. My overall engagement with crowdsourcing projects has increased as well. I also practiced my data analysis and visualisation skills by extracting some statistics from Zooniverse and use"," ",pe.jsx("a",{href:"https://d3js.org/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"d3.js"})," ","to visualise them on my website. I will explore more in this direction in Assignment 2."]}),pe.jsx("p",{children:"My experience in the project has deepened my knowledge and vision in the history of scientific knowledge and practices. I realised the link between the humanities and climate science, since the project uses historical climate data to support climate modelling."}),pe.jsx("p",{children:"This experience has further amplified my experience with crowdsourcing, although I had participated in similar projects before."}),pe.jsxs("p",{children:["I also learnt about the limitations of current AI transcription tools such as Transcribus. It struggles with such handwritten maritime logbooks. As I plan to use similar tools, such as"," ",pe.jsx("a",{href:"https://escriptorium.fr/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"eScriptorium"})," ","and"," ",pe.jsx("a",{href:"https://kraken.re/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"Kraken"}),", in my MA research, I will need to carefully examine their effectiveness. Therefore, in such projects, domain-specific expertise and human intuition are necessary."]}),pe.jsx("p",{children:"Furthermore, I gained deep insights into the historical colonial practices of classifying and standardising nature. I realised that these weather logbooks were not just neutral observations; they were tools of the British colonial system used to classify and control maritime space around the Malacca Strait."}),pe.jsx("p",{children:"I also learnt about the geographical and cultural imbalance in Zooniverse and possibly similar platforms. I am aware that this may be caused by multiple factors. One possible reason is simply that different countries tend to use different popular platforms. Nevertheless, this shows that the Global South remains underrepresented on platforms such as Zooniverse. Furthermore, to promote a more global digital humanities community, it would be beneficial to develop a more interoperable platform or mechanisms for interoperability among platforms so that DH scholarship can become more globally connected."})]}),pe.jsxs(tc,{title:"Application to My Own Work",id:"application",children:[pe.jsx("p",{children:"This project has many aspects that can be applied to my own research."}),pe.jsx("p",{children:"My MA research applies computational methods to digitised images of historical botanical books. It utilises the computer vision AI model YOLO to detect botanical illustrations, and uses open source transcription tool Kraken to perform OCR/HTR tasks. My participation in the Monsoon Voyages project, particularly my use of Transcribus, demonstrated that OCR/HTR outputs must be critically evaluated before they can be adopted, especially when dealing with irregular typography. Since I will use Kraken, on which eScriptorium is built, I will need to place greater emphasis on model training (or fine-tuning) and manual validation in my own research workflow."}),pe.jsx("p",{children:"Regarding newly digitised materials, I am particularly passionate about digitised images of historical artefacts that can be accessed through International Image Interoperability Framework (IIIF). The standardisation provided by IIIF is invaluable to my research. I am familiar with image processing and have worked with digitised materials before. I am currently exploring the effectiveness of IIIF-based image sharing. I also appreciate that IIIF can be used to craft narratives from a series of annotated images, and this approach becomes very effective when integrated into a scroll-based storytelling website. In addition, I am impressed by how rigorously IIIFs JSON manifests organize image metadata."}),pe.jsx("p",{children:"Regarding crowdsourcing, I could potentially recruit volunteers for my MA research project to annotate historical book images on platforms such as Zooniverse. Through my participation in the Monsoon Voyages project as well as my previous experiences, I have become aware that crowdsourcing can efficiently process large quantities of annotation work, far exceeding what I could accomplish alone."}),pe.jsx("p",{className:"essay-subheading",children:"Comparison with other platforms"}),pe.jsxs("p",{children:[pe.jsx("a",{href:"https://www.shidianguji.com/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"Shidianguji"})," ","is a digital humanities crowdsourcing platform launched in 2022 by Peking University and the technology company ByteDance for crowdsourced verification of OCR results from historical Chinese books. The platform uses its own backend OCR engine to transcribe historical Chinese texts, and volunteers contribute by reviewing and correcting the OCR output."]}),pe.jsxs("figure",{className:"essay-figure essay-figure--outset",children:[pe.jsx("img",{src:"/DH6034/media/Figure4.png",alt:"Screenshot of the Shidianguji Website"}),pe.jsx("figcaption",{children:"Figure 4: Screenshot of the Shidianguji website."})]}),pe.jsx("p",{children:"Compared with newer platforms, Zooniverses functionality remains relatively basic, and its user interface could benefit from modernization. So, I suggest that Zooniverse consider integrating open source transcription tool Kraken into the platform, given that many projects involve transcription. This would shift the role of volunteers from primary transcribers to co-transcribers or even reviewers. By combining AIs capability (based on large amount of training) with human intuition, the correctness and reliability of the results can be improved."}),pe.jsx("p",{children:"In addition, both the Monsoon Voyages project and my MA research focus on the history of scientific knowledge. Both maritime weather logs and botanical books are colonial powers attempts to classify or standardise the natural world. My participation in Monsoon Voyages taught me how measurements and recording practices are shaped by British colonial system. This is transferable to my study of historical botanical epistemology, which involves taxonomic systems and imperial plant knowledge, because both projects address colonial epistemic authority and institutional standardisation, through which classificatory regimes were shaped."})]}),pe.jsx(tc,{title:"References",id:"references",children:pe.jsxs("ol",{className:"m-0 list-decimal space-y-3 pl-6",children:[pe.jsxs("li",{children:["Lee, K.L. (2009) ",pe.jsx("em",{children:"Two ships being repaired at Victoria Dock, Singapore in the 1890s"})," [Online image]. Lee Kip Lin Collection, National Library Board, Singapore. Available at:"," ",pe.jsx("a",{href:"https://www.nlb.gov.sg/main/image-detail?cmsuuid=881ed7a7-0224-4c9f-85c4-1e06a2f6a2bd",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://www.nlb.gov.sg/main/image-detail?cmsuuid=881ed7a7-0224-4c9f-85c4-1e06a2f6a2bd"})," ","[Accessed 23 February 2026]."]}),pe.jsxs("li",{children:["IIIF Consortium, (n.d.). International Image Interoperability Framework. [online] Available at:"," ",pe.jsx("a",{href:"https://iiif.io/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://iiif.io/"})," ","[Accessed 27 Feb. 2026]."]}),pe.jsxs("li",{children:["Kiessling, B., (n.d.). Kraken: a Universal Text Recognizer for the Humanities. [online] Available at:"," ",pe.jsx("a",{href:"https://kraken.re/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://kraken.re/"})," ","[Accessed 27 Feb. 2026]."]}),pe.jsxs("li",{children:["Peking University and ByteDance, (2022). Shidianguji. [online] Available at:"," ",pe.jsx("a",{href:"https://www.shidianguji.com/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://www.shidianguji.com/"})," ","[Accessed 27 Feb. 2026]."]}),pe.jsxs("li",{children:["READ-COOP, (n.d.). Transkribus. [online] Available at:"," ",pe.jsx("a",{href:"https://readcoop.eu/transkribus/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://readcoop.eu/transkribus/"})," ","[Accessed 27 Feb. 2026]."]}),pe.jsxs("li",{children:["Singapore Management University, (n.d.). Monsoon Voyages. [online] Available at:"," ",pe.jsx("a",{href:"https://urban.smu.edu.sg/projects/monsoon-voyages",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://urban.smu.edu.sg/projects/monsoon-voyages"})," ","[Accessed 27 Feb. 2026]."]}),pe.jsxs("li",{children:["Teleti, P. / Monsoon Voyages Team, (n.d.). Monsoon Voyages - Research. Zooniverse. [online] Available at:"," ",pe.jsx("a",{href:"https://www.zooniverse.org/projects/p-teleti/monsoon-voyages/about/research",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://www.zooniverse.org/projects/p-teleti/monsoon-voyages/about/research"})," ","[Accessed 27 Feb. 2026]."]}),pe.jsxs("li",{children:["Zooniverse, (n.d.). Zooniverse: People-powered research. [online] Available at:"," ",pe.jsx("a",{href:"https://www.zooniverse.org/",target:"_blank",rel:"noreferrer",className:"underline decoration-slate-400 underline-offset-2 hover:text-slate-900",children:"https://www.zooniverse.org/"})," ","[Accessed 27 Feb. 2026]."]})]})})]})}),pe.jsx("footer",{className:"border-t border-slate-300/80 bg-white/55 px-4 py-8 backdrop-blur-sm",children:pe.jsxs("div",{className:"mx-auto w-[min(96ch,calc(100vw-1.25rem))] md:w-[min(96ch,calc(100vw-2.5rem))] flex flex-col md:flex-row items-center justify-between gap-6",children:[pe.jsxs("div",{className:"flex items-center gap-3 group cursor-default",children:[pe.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-teal-700 font-bold font-serif group-hover:bg-teal-600 group-hover:text-white transition-all duration-300",children:"DH"}),pe.jsxs("div",{className:"flex flex-col",children:[pe.jsx("span",{className:"font-semibold text-slate-900 tracking-tight text-sm",children:"DH6034 Assignment 1  Guang Yang"}),pe.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-major mt-0.5",children:"Humanities & New Technologies"})]})]}),pe.jsx("p",{className:"font-major m-0 text-xs tracking-[0.08em] text-slate-500",children:" 2026 Guang Yang. All Rights Reserved."})]})}),pe.jsx(RI,{onScrollTop:c})]})})}i2.createRoot(document.getElementById("root")).render(pe.jsx(YC.StrictMode,{children:pe.jsx(DI,{})}));
